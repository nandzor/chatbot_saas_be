var KN=Object.defineProperty;var HN=(t,s,a)=>s in t?KN(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var hd=(t,s,a)=>(HN(t,typeof s!="symbol"?s+"":s,a),a);import{r as y,a as VN,R as $,c as Cl,g as ht}from"./vendor-8a332d8f.js";import{O as hl,u as lo,N as Ql,a as zm,L as Ms,b as GN,c as ZN,d as YN,e as ya,f as XN,R as JN}from"./router-52084b33.js";import{t as QN,c as We,C as sj,X as Cs,a as Me,I as ns,A as nt,b as Ht,d as Je,e as ew,M as la,f as tw,F as nn,S as cs,g as Qe,R as ws,H as ln,B as $s,h as Le,U as Vt,i as Zs,j as ca,W as Zd,k as Te,D as _r,l as Pe,m as sw,n as oa,Z as Et,o as Ae,p as aw,L as Yd,q as da,r as fs,s as Xd,u as Ja,E as It,v as ze,w as _a,x as Mt,y as ds,T as rs,z as os,G as rw,J as nw,Q as aj,K as et,N as co,P as Ye,O as Ve,V as vt,Y as Pa,_ as Ss,$ as jt,a0 as iw,a1 as dx,a2 as ba,a3 as lw,a4 as Wl,a5 as Jd,a6 as rj,a7 as _i,a8 as Pr,a9 as at,aa as Qd,ab as Gt,ac as nj,ad as Sr,ae as cw,af as ij,ag as ow,ah as yi,ai as dw,aj as ql,ak as ux,al as Tr,am as cn,an as on,ao as uw,ap as mw,aq as dn,ar as un,as as hw,at as xw,au as fw,av as Jt,aw as pw,ax as lj,ay as gw,az as vw,aA as jw,aB as Kl,aC as yw,aD as mn,aE as Ta,aF as bw,aG as mx,aH as Nw,aI as hx,aJ as ww,aK as xx,aL as fx,aM as Sw,aN as ec,aO as eu,aP as kw,aQ as Aw,aR as xd,aS as tu,aT as px,aU as gx,aV as vx,aW as Cw,aX as jx,aY as _w,aZ as cj,a_ as Pw,a$ as Tw}from"./ui-ab391354.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var oj={exports:{}},oo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow=y,Ew=Symbol.for("react.element"),Iw=Symbol.for("react.fragment"),Dw=Object.prototype.hasOwnProperty,Mw=Ow.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$w={key:!0,ref:!0,__self:!0,__source:!0};function dj(t,s,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(r in s)Dw.call(s,r)&&!$w.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:Ew,type:t,key:i,ref:l,props:n,_owner:Mw.current}}oo.Fragment=Iw;oo.jsx=dj;oo.jsxs=dj;oj.exports=oo;var e=oj.exports,su={},yx=VN;su.createRoot=yx.createRoot,su.hydrateRoot=yx.hydrateRoot;let Rw={data:""},Lw=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Rw,Fw=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Bw=/\/\*[^]*?\*\/|  +/g,bx=/\n+/g,Wa=(t,s)=>{let a="",r="",n="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?a=i+" "+l+";":r+=i[1]=="f"?Wa(l,i):i+"{"+Wa(l,i[1]=="k"?"":s)+"}":typeof l=="object"?r+=Wa(l,s?s.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,o=>/&/.test(o)?o.replace(/&/g,c):c?c+" "+o:o)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=Wa.p?Wa.p(i,l):i+":"+l+";")}return a+(s&&n?s+"{"+n+"}":n)+r},ga={},uj=t=>{if(typeof t=="object"){let s="";for(let a in t)s+=a+uj(t[a]);return s}return t},Uw=(t,s,a,r,n)=>{let i=uj(t),l=ga[i]||(ga[i]=(o=>{let d=0,u=11;for(;d<o.length;)u=101*u+o.charCodeAt(d++)>>>0;return"go"+u})(i));if(!ga[l]){let o=i!==t?t:(d=>{let u,m,h=[{}];for(;u=Fw.exec(d.replace(Bw,""));)u[4]?h.shift():u[3]?(m=u[3].replace(bx," ").trim(),h.unshift(h[0][m]=h[0][m]||{})):h[0][u[1]]=u[2].replace(bx," ").trim();return h[0]})(t);ga[l]=Wa(n?{["@keyframes "+l]:o}:o,a?"":"."+l)}let c=a&&ga.g?ga.g:null;return a&&(ga.g=ga[l]),((o,d,u,m)=>{m?d.data=d.data.replace(m,o):d.data.indexOf(o)===-1&&(d.data=u?o+d.data:d.data+o)})(ga[l],s,r,c),l},zw=(t,s,a)=>t.reduce((r,n,i)=>{let l=s[i];if(l&&l.call){let c=l(a),o=c&&c.props&&c.props.className||/^go/.test(c)&&c;l=o?"."+o:c&&typeof c=="object"?c.props?"":Wa(c,""):c===!1?"":c}return r+n+(l??"")},"");function uo(t){let s=this||{},a=t.call?t(s.p):t;return Uw(a.unshift?a.raw?zw(a,[].slice.call(arguments,1),s.p):a.reduce((r,n)=>Object.assign(r,n&&n.call?n(s.p):n),{}):a,Lw(s.target),s.g,s.o,s.k)}let mj,au,ru;uo.bind({g:1});let Oa=uo.bind({k:1});function Ww(t,s,a,r){Wa.p=s,mj=t,au=a,ru=r}function tr(t,s){let a=this||{};return function(){let r=arguments;function n(i,l){let c=Object.assign({},i),o=c.className||n.className;a.p=Object.assign({theme:au&&au()},c),a.o=/ *go\d+/.test(o),c.className=uo.apply(a,r)+(o?" "+o:""),s&&(c.ref=l);let d=t;return t[0]&&(d=c.as||t,delete c.as),ru&&d[0]&&ru(c),mj(d,c)}return s?s(n):n}}var qw=t=>typeof t=="function",tc=(t,s)=>qw(t)?t(s):t,Kw=(()=>{let t=0;return()=>(++t).toString()})(),hj=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),Hw=20,Wm="default",xj=(t,s)=>{let{toastLimit:a}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===s.toast.id?{...l,...s.toast}:l)};case 2:let{toast:r}=s;return xj(t,{type:t.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=s;return{...t,toasts:t.toasts.map(l=>l.id===n||n===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let i=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Hl=[],fj={toasts:[],pausedAt:void 0,settings:{toastLimit:Hw}},ea={},pj=(t,s=Wm)=>{ea[s]=xj(ea[s]||fj,t),Hl.forEach(([a,r])=>{a===s&&r(ea[s])})},gj=t=>Object.keys(ea).forEach(s=>pj(t,s)),Vw=t=>Object.keys(ea).find(s=>ea[s].toasts.some(a=>a.id===t)),mo=(t=Wm)=>s=>{pj(s,t)},Gw={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Zw=(t={},s=Wm)=>{let[a,r]=y.useState(ea[s]||fj),n=y.useRef(ea[s]);y.useEffect(()=>(n.current!==ea[s]&&r(ea[s]),Hl.push([s,r]),()=>{let l=Hl.findIndex(([c])=>c===s);l>-1&&Hl.splice(l,1)}),[s]);let i=a.toasts.map(l=>{var c,o,d;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((c=t[l.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((o=t[l.type])==null?void 0:o.duration)||(t==null?void 0:t.duration)||Gw[l.type],style:{...t.style,...(d=t[l.type])==null?void 0:d.style,...l.style}}});return{...a,toasts:i}},Yw=(t,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||Kw()}),xl=t=>(s,a)=>{let r=Yw(s,t,a);return mo(r.toasterId||Vw(r.id))({type:2,toast:r}),r.id},Se=(t,s)=>xl("blank")(t,s);Se.error=xl("error");Se.success=xl("success");Se.loading=xl("loading");Se.custom=xl("custom");Se.dismiss=(t,s)=>{let a={type:3,toastId:t};s?mo(s)(a):gj(a)};Se.dismissAll=t=>Se.dismiss(void 0,t);Se.remove=(t,s)=>{let a={type:4,toastId:t};s?mo(s)(a):gj(a)};Se.removeAll=t=>Se.remove(void 0,t);Se.promise=(t,s,a)=>{let r=Se.loading(s.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=s.success?tc(s.success,n):void 0;return i?Se.success(i,{id:r,...a,...a==null?void 0:a.success}):Se.dismiss(r),n}).catch(n=>{let i=s.error?tc(s.error,n):void 0;i?Se.error(i,{id:r,...a,...a==null?void 0:a.error}):Se.dismiss(r)}),t};var Xw=1e3,Jw=(t,s="default")=>{let{toasts:a,pausedAt:r}=Zw(t,s),n=y.useRef(new Map).current,i=y.useCallback((m,h=Xw)=>{if(n.has(m))return;let x=setTimeout(()=>{n.delete(m),l({type:4,toastId:m})},h);n.set(m,x)},[]);y.useEffect(()=>{if(r)return;let m=Date.now(),h=a.map(x=>{if(x.duration===1/0)return;let f=(x.duration||0)+x.pauseDuration-(m-x.createdAt);if(f<0){x.visible&&Se.dismiss(x.id);return}return setTimeout(()=>Se.dismiss(x.id,s),f)});return()=>{h.forEach(x=>x&&clearTimeout(x))}},[a,r,s]);let l=y.useCallback(mo(s),[s]),c=y.useCallback(()=>{l({type:5,time:Date.now()})},[l]),o=y.useCallback((m,h)=>{l({type:1,toast:{id:m,height:h}})},[l]),d=y.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),u=y.useCallback((m,h)=>{let{reverseOrder:x=!1,gutter:f=8,defaultPosition:p}=h||{},g=a.filter(b=>(b.position||p)===(m.position||p)&&b.height),w=g.findIndex(b=>b.id===m.id),S=g.filter((b,A)=>A<w&&b.visible).length;return g.filter(b=>b.visible).slice(...x?[S+1]:[0,S]).reduce((b,A)=>b+(A.height||0)+f,0)},[a]);return y.useEffect(()=>{a.forEach(m=>{if(m.dismissed)i(m.id,m.removeDelay);else{let h=n.get(m.id);h&&(clearTimeout(h),n.delete(m.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:o,startPause:c,endPause:d,calculateOffset:u}}},Qw=Oa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,e1=Oa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,t1=Oa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,s1=tr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Qw} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${e1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${t1} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,a1=Oa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,r1=tr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${a1} 1s linear infinite;
`,n1=Oa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,i1=Oa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,l1=tr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${n1} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${i1} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,c1=tr("div")`
  position: absolute;
`,o1=tr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,d1=Oa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,u1=tr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${d1} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,m1=({toast:t})=>{let{icon:s,type:a,iconTheme:r}=t;return s!==void 0?typeof s=="string"?y.createElement(u1,null,s):s:a==="blank"?null:y.createElement(o1,null,y.createElement(r1,{...r}),a!=="loading"&&y.createElement(c1,null,a==="error"?y.createElement(s1,{...r}):y.createElement(l1,{...r})))},h1=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,x1=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,f1="0%{opacity:0;} 100%{opacity:1;}",p1="0%{opacity:1;} 100%{opacity:0;}",g1=tr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,v1=tr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,j1=(t,s)=>{let a=t.includes("top")?1:-1,[r,n]=hj()?[f1,p1]:[h1(a),x1(a)];return{animation:s?`${Oa(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Oa(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},y1=y.memo(({toast:t,position:s,style:a,children:r})=>{let n=t.height?j1(t.position||s||"top-center",t.visible):{opacity:0},i=y.createElement(m1,{toast:t}),l=y.createElement(v1,{...t.ariaProps},tc(t.message,t));return y.createElement(g1,{className:t.className,style:{...n,...a,...t.style}},typeof r=="function"?r({icon:i,message:l}):y.createElement(y.Fragment,null,i,l))});Ww(y.createElement);var b1=({id:t,className:s,style:a,onHeightUpdate:r,children:n})=>{let i=y.useCallback(l=>{if(l){let c=()=>{let o=l.getBoundingClientRect().height;r(t,o)};c(),new MutationObserver(c).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return y.createElement("div",{ref:i,className:s,style:a},n)},N1=(t,s)=>{let a=t.includes("top"),r=a?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:hj()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...r,...n}},w1=uo`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,_l=16,S1=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:r,children:n,toasterId:i,containerStyle:l,containerClassName:c})=>{let{toasts:o,handlers:d}=Jw(a,i);return y.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:_l,left:_l,right:_l,bottom:_l,pointerEvents:"none",...l},className:c,onMouseEnter:d.startPause,onMouseLeave:d.endPause},o.map(u=>{let m=u.position||s,h=d.calculateOffset(u,{reverseOrder:t,gutter:r,defaultPosition:s}),x=N1(m,h);return y.createElement(b1,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?w1:"",style:x},u.type==="custom"?tc(u.message,u):n?n(u):y.createElement(y1,{toast:u,position:m}))}))};function vj(t,s){return function(){return t.apply(s,arguments)}}const{toString:k1}=Object.prototype,{getPrototypeOf:qm}=Object,{iterator:ho,toStringTag:jj}=Symbol,xo=(t=>s=>{const a=k1.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Ys=t=>(t=t.toLowerCase(),s=>xo(s)===t),fo=t=>s=>typeof s===t,{isArray:zn}=Array,Pi=fo("undefined");function fl(t){return t!==null&&!Pi(t)&&t.constructor!==null&&!Pi(t.constructor)&&gs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yj=Ys("ArrayBuffer");function A1(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&yj(t.buffer),s}const C1=fo("string"),gs=fo("function"),bj=fo("number"),pl=t=>t!==null&&typeof t=="object",_1=t=>t===!0||t===!1,Vl=t=>{if(xo(t)!=="object")return!1;const s=qm(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(jj in t)&&!(ho in t)},P1=t=>{if(!pl(t)||fl(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},T1=Ys("Date"),O1=Ys("File"),E1=Ys("Blob"),I1=Ys("FileList"),D1=t=>pl(t)&&gs(t.pipe),M1=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||gs(t.append)&&((s=xo(t))==="formdata"||s==="object"&&gs(t.toString)&&t.toString()==="[object FormData]"))},$1=Ys("URLSearchParams"),[R1,L1,F1,B1]=["ReadableStream","Request","Response","Headers"].map(Ys),U1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gl(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),zn(t))for(r=0,n=t.length;r<n;r++)s.call(null,t[r],r,t);else{if(fl(t))return;const i=a?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let c;for(r=0;r<l;r++)c=i[r],s.call(null,t[c],c,t)}}function Nj(t,s){if(fl(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,n;for(;r-- >0;)if(n=a[r],s===n.toLowerCase())return n;return null}const gr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),wj=t=>!Pi(t)&&t!==gr;function nu(){const{caseless:t}=wj(this)&&this||{},s={},a=(r,n)=>{const i=t&&Nj(s,n)||n;Vl(s[i])&&Vl(r)?s[i]=nu(s[i],r):Vl(r)?s[i]=nu({},r):zn(r)?s[i]=r.slice():s[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&gl(arguments[r],a);return s}const z1=(t,s,a,{allOwnKeys:r}={})=>(gl(s,(n,i)=>{a&&gs(n)?t[i]=vj(n,a):t[i]=n},{allOwnKeys:r}),t),W1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),q1=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},K1=(t,s,a,r)=>{let n,i,l;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!r||r(l,t,s))&&!c[l]&&(s[l]=t[l],c[l]=!0);t=a!==!1&&qm(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},H1=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},V1=t=>{if(!t)return null;if(zn(t))return t;let s=t.length;if(!bj(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},G1=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&qm(Uint8Array)),Z1=(t,s)=>{const r=(t&&t[ho]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},Y1=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},X1=Ys("HTMLFormElement"),J1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),Nx=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),Q1=Ys("RegExp"),Sj=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};gl(a,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(r[i]=l||n)}),Object.defineProperties(t,r)},e2=t=>{Sj(t,(s,a)=>{if(gs(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(gs(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},t2=(t,s)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return zn(t)?r(t):r(String(t).split(s)),a},s2=()=>{},a2=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function r2(t){return!!(t&&gs(t.append)&&t[jj]==="FormData"&&t[ho])}const n2=t=>{const s=new Array(10),a=(r,n)=>{if(pl(r)){if(s.indexOf(r)>=0)return;if(fl(r))return r;if(!("toJSON"in r)){s[n]=r;const i=zn(r)?[]:{};return gl(r,(l,c)=>{const o=a(l,n+1);!Pi(o)&&(i[c]=o)}),s[n]=void 0,i}}return r};return a(t,0)},i2=Ys("AsyncFunction"),l2=t=>t&&(pl(t)||gs(t))&&gs(t.then)&&gs(t.catch),kj=((t,s)=>t?setImmediate:s?((a,r)=>(gr.addEventListener("message",({source:n,data:i})=>{n===gr&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),gr.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",gs(gr.postMessage)),c2=typeof queueMicrotask<"u"?queueMicrotask.bind(gr):typeof process<"u"&&process.nextTick||kj,o2=t=>t!=null&&gs(t[ho]),te={isArray:zn,isArrayBuffer:yj,isBuffer:fl,isFormData:M1,isArrayBufferView:A1,isString:C1,isNumber:bj,isBoolean:_1,isObject:pl,isPlainObject:Vl,isEmptyObject:P1,isReadableStream:R1,isRequest:L1,isResponse:F1,isHeaders:B1,isUndefined:Pi,isDate:T1,isFile:O1,isBlob:E1,isRegExp:Q1,isFunction:gs,isStream:D1,isURLSearchParams:$1,isTypedArray:G1,isFileList:I1,forEach:gl,merge:nu,extend:z1,trim:U1,stripBOM:W1,inherits:q1,toFlatObject:K1,kindOf:xo,kindOfTest:Ys,endsWith:H1,toArray:V1,forEachEntry:Z1,matchAll:Y1,isHTMLForm:X1,hasOwnProperty:Nx,hasOwnProp:Nx,reduceDescriptors:Sj,freezeMethods:e2,toObjectSet:t2,toCamelCase:J1,noop:s2,toFiniteNumber:a2,findKey:Nj,global:gr,isContextDefined:wj,isSpecCompliantForm:r2,toJSONObject:n2,isAsyncFn:i2,isThenable:l2,setImmediate:kj,asap:c2,isIterable:o2};function Ke(t,s,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}te.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.status}}});const Aj=Ke.prototype,Cj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Cj[t]={value:t}});Object.defineProperties(Ke,Cj);Object.defineProperty(Aj,"isAxiosError",{value:!0});Ke.from=(t,s,a,r,n,i)=>{const l=Object.create(Aj);return te.toFlatObject(t,l,function(o){return o!==Error.prototype},c=>c!=="isAxiosError"),Ke.call(l,t.message,s,a,r,n),l.cause=t,l.name=t.name,i&&Object.assign(l,i),l};const d2=null;function iu(t){return te.isPlainObject(t)||te.isArray(t)}function _j(t){return te.endsWith(t,"[]")?t.slice(0,-2):t}function wx(t,s,a){return t?t.concat(s).map(function(n,i){return n=_j(n),!a&&i?"["+n+"]":n}).join(a?".":""):s}function u2(t){return te.isArray(t)&&!t.some(iu)}const m2=te.toFlatObject(te,{},null,function(s){return/^is[A-Z]/.test(s)});function po(t,s,a){if(!te.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=te.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,g){return!te.isUndefined(g[p])});const r=a.metaTokens,n=a.visitor||u,i=a.dots,l=a.indexes,o=(a.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(s);if(!te.isFunction(n))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(te.isDate(f))return f.toISOString();if(te.isBoolean(f))return f.toString();if(!o&&te.isBlob(f))throw new Ke("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(f)||te.isTypedArray(f)?o&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,p,g){let w=f;if(f&&!g&&typeof f=="object"){if(te.endsWith(p,"{}"))p=r?p:p.slice(0,-2),f=JSON.stringify(f);else if(te.isArray(f)&&u2(f)||(te.isFileList(f)||te.endsWith(p,"[]"))&&(w=te.toArray(f)))return p=_j(p),w.forEach(function(b,A){!(te.isUndefined(b)||b===null)&&s.append(l===!0?wx([p],A,i):l===null?p:p+"[]",d(b))}),!1}return iu(f)?!0:(s.append(wx(g,p,i),d(f)),!1)}const m=[],h=Object.assign(m2,{defaultVisitor:u,convertValue:d,isVisitable:iu});function x(f,p){if(!te.isUndefined(f)){if(m.indexOf(f)!==-1)throw Error("Circular reference detected in "+p.join("."));m.push(f),te.forEach(f,function(w,S){(!(te.isUndefined(w)||w===null)&&n.call(s,w,te.isString(S)?S.trim():S,p,h))===!0&&x(w,p?p.concat(S):[S])}),m.pop()}}if(!te.isObject(t))throw new TypeError("data must be an object");return x(t),s}function Sx(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Km(t,s){this._pairs=[],t&&po(t,this,s)}const Pj=Km.prototype;Pj.append=function(s,a){this._pairs.push([s,a])};Pj.toString=function(s){const a=s?function(r){return s.call(this,r,Sx)}:Sx;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function h2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Tj(t,s,a){if(!s)return t;const r=a&&a.encode||h2;te.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(s,a):i=te.isURLSearchParams(s)?s.toString():new Km(s,a).toString(r),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class x2{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){te.forEach(this.handlers,function(r){r!==null&&s(r)})}}const kx=x2,Oj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},f2=typeof URLSearchParams<"u"?URLSearchParams:Km,p2=typeof FormData<"u"?FormData:null,g2=typeof Blob<"u"?Blob:null,v2={isBrowser:!0,classes:{URLSearchParams:f2,FormData:p2,Blob:g2},protocols:["http","https","file","blob","url","data"]},Hm=typeof window<"u"&&typeof document<"u",lu=typeof navigator=="object"&&navigator||void 0,j2=Hm&&(!lu||["ReactNative","NativeScript","NS"].indexOf(lu.product)<0),y2=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),b2=Hm&&window.location.href||"http://localhost",N2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hm,hasStandardBrowserEnv:j2,hasStandardBrowserWebWorkerEnv:y2,navigator:lu,origin:b2},Symbol.toStringTag,{value:"Module"})),ss={...N2,...v2};function w2(t,s){return po(t,new ss.classes.URLSearchParams,{visitor:function(a,r,n,i){return ss.isNode&&te.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function S2(t){return te.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function k2(t){const s={},a=Object.keys(t);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],s[i]=t[i];return s}function Ej(t){function s(a,r,n,i){let l=a[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),o=i>=a.length;return l=!l&&te.isArray(n)?n.length:l,o?(te.hasOwnProp(n,l)?n[l]=[n[l],r]:n[l]=r,!c):((!n[l]||!te.isObject(n[l]))&&(n[l]=[]),s(a,r,n[l],i)&&te.isArray(n[l])&&(n[l]=k2(n[l])),!c)}if(te.isFormData(t)&&te.isFunction(t.entries)){const a={};return te.forEachEntry(t,(r,n)=>{s(S2(r),n,a,0)}),a}return null}function A2(t,s,a){if(te.isString(t))try{return(s||JSON.parse)(t),te.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const Vm={transitional:Oj,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=te.isObject(s);if(i&&te.isHTMLForm(s)&&(s=new FormData(s)),te.isFormData(s))return n?JSON.stringify(Ej(s)):s;if(te.isArrayBuffer(s)||te.isBuffer(s)||te.isStream(s)||te.isFile(s)||te.isBlob(s)||te.isReadableStream(s))return s;if(te.isArrayBufferView(s))return s.buffer;if(te.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return w2(s,this.formSerializer).toString();if((c=te.isFileList(s))||r.indexOf("multipart/form-data")>-1){const o=this.env&&this.env.FormData;return po(c?{"files[]":s}:s,o&&new o,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),A2(s)):s}],transformResponse:[function(s){const a=this.transitional||Vm.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(te.isResponse(s)||te.isReadableStream(s))return s;if(s&&te.isString(s)&&(r&&!this.responseType||n)){const l=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(s)}catch(c){if(l)throw c.name==="SyntaxError"?Ke.from(c,Ke.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ss.classes.FormData,Blob:ss.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],t=>{Vm.headers[t]={}});const Gm=Vm,C2=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),_2=t=>{const s={};let a,r,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),a=l.substring(0,n).trim().toLowerCase(),r=l.substring(n+1).trim(),!(!a||s[a]&&C2[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},Ax=Symbol("internals");function ri(t){return t&&String(t).trim().toLowerCase()}function Gl(t){return t===!1||t==null?t:te.isArray(t)?t.map(Gl):String(t)}function P2(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const T2=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fd(t,s,a,r,n){if(te.isFunction(r))return r.call(this,s,a);if(n&&(s=a),!!te.isString(s)){if(te.isString(r))return s.indexOf(r)!==-1;if(te.isRegExp(r))return r.test(s)}}function O2(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function E2(t,s){const a=te.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(n,i,l){return this[r].call(this,s,n,i,l)},configurable:!0})})}class go{constructor(s){s&&this.set(s)}set(s,a,r){const n=this;function i(c,o,d){const u=ri(o);if(!u)throw new Error("header name must be a non-empty string");const m=te.findKey(n,u);(!m||n[m]===void 0||d===!0||d===void 0&&n[m]!==!1)&&(n[m||o]=Gl(c))}const l=(c,o)=>te.forEach(c,(d,u)=>i(d,u,o));if(te.isPlainObject(s)||s instanceof this.constructor)l(s,a);else if(te.isString(s)&&(s=s.trim())&&!T2(s))l(_2(s),a);else if(te.isObject(s)&&te.isIterable(s)){let c={},o,d;for(const u of s){if(!te.isArray(u))throw TypeError("Object iterator must return a key-value pair");c[d=u[0]]=(o=c[d])?te.isArray(o)?[...o,u[1]]:[o,u[1]]:u[1]}l(c,a)}else s!=null&&i(a,s,r);return this}get(s,a){if(s=ri(s),s){const r=te.findKey(this,s);if(r){const n=this[r];if(!a)return n;if(a===!0)return P2(n);if(te.isFunction(a))return a.call(this,n,r);if(te.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=ri(s),s){const r=te.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||fd(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let n=!1;function i(l){if(l=ri(l),l){const c=te.findKey(r,l);c&&(!a||fd(r,r[c],c,a))&&(delete r[c],n=!0)}}return te.isArray(s)?s.forEach(i):i(s),n}clear(s){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!s||fd(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const a=this,r={};return te.forEach(this,(n,i)=>{const l=te.findKey(r,i);if(l){a[l]=Gl(n),delete a[i];return}const c=s?O2(i):String(i).trim();c!==i&&delete a[i],a[c]=Gl(n),r[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return te.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=s&&te.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(n=>r.set(n)),r}static accessor(s){const r=(this[Ax]=this[Ax]={accessors:{}}).accessors,n=this.prototype;function i(l){const c=ri(l);r[c]||(E2(n,l),r[c]=!0)}return te.isArray(s)?s.forEach(i):i(s),this}}go.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);te.reduceDescriptors(go.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});te.freezeMethods(go);const Hs=go;function pd(t,s){const a=this||Gm,r=s||a,n=Hs.from(r.headers);let i=r.data;return te.forEach(t,function(c){i=c.call(a,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function Ij(t){return!!(t&&t.__CANCEL__)}function Wn(t,s,a){Ke.call(this,t??"canceled",Ke.ERR_CANCELED,s,a),this.name="CanceledError"}te.inherits(Wn,Ke,{__CANCEL__:!0});function Dj(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new Ke("Request failed with status code "+a.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function I2(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function D2(t,s){t=t||10;const a=new Array(t),r=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(o){const d=Date.now(),u=r[i];l||(l=d),a[n]=o,r[n]=d;let m=i,h=0;for(;m!==n;)h+=a[m++],m=m%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),d-l<s)return;const x=u&&d-u;return x?Math.round(h*1e3/x):void 0}}function M2(t,s){let a=0,r=1e3/s,n,i;const l=(d,u=Date.now())=>{a=u,n=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const u=Date.now(),m=u-a;m>=r?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},r-m)))},()=>n&&l(n)]}const sc=(t,s,a=3)=>{let r=0;const n=D2(50,250);return M2(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,o=l-r,d=n(o),u=l<=c;r=l;const m={loaded:l,total:c,progress:c?l/c:void 0,bytes:o,rate:d||void 0,estimated:d&&c&&u?(c-l)/d:void 0,event:i,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(m)},a)},Cx=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},_x=t=>(...s)=>te.asap(()=>t(...s)),$2=ss.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,ss.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(ss.origin),ss.navigator&&/(msie|trident)/i.test(ss.navigator.userAgent)):()=>!0,R2=ss.hasStandardBrowserEnv?{write(t,s,a,r,n,i){const l=[t+"="+encodeURIComponent(s)];te.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),te.isString(r)&&l.push("path="+r),te.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function L2(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function F2(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Mj(t,s,a){let r=!L2(s);return t&&(r||a==!1)?F2(t,s):s}const Px=t=>t instanceof Hs?{...t}:t;function Or(t,s){s=s||{};const a={};function r(d,u,m,h){return te.isPlainObject(d)&&te.isPlainObject(u)?te.merge.call({caseless:h},d,u):te.isPlainObject(u)?te.merge({},u):te.isArray(u)?u.slice():u}function n(d,u,m,h){if(te.isUndefined(u)){if(!te.isUndefined(d))return r(void 0,d,m,h)}else return r(d,u,m,h)}function i(d,u){if(!te.isUndefined(u))return r(void 0,u)}function l(d,u){if(te.isUndefined(u)){if(!te.isUndefined(d))return r(void 0,d)}else return r(void 0,u)}function c(d,u,m){if(m in s)return r(d,u);if(m in t)return r(void 0,d)}const o={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,u,m)=>n(Px(d),Px(u),m,!0)};return te.forEach(Object.keys({...t,...s}),function(u){const m=o[u]||n,h=m(t[u],s[u],u);te.isUndefined(h)&&m!==c||(a[u]=h)}),a}const $j=t=>{const s=Or({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:c}=s;s.headers=l=Hs.from(l),s.url=Tj(Mj(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let o;if(te.isFormData(a)){if(ss.hasStandardBrowserEnv||ss.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((o=l.getContentType())!==!1){const[d,...u]=o?o.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(ss.hasStandardBrowserEnv&&(r&&te.isFunction(r)&&(r=r(s)),r||r!==!1&&$2(s.url))){const d=n&&i&&R2.read(i);d&&l.set(n,d)}return s},B2=typeof XMLHttpRequest<"u",U2=B2&&function(t){return new Promise(function(a,r){const n=$j(t);let i=n.data;const l=Hs.from(n.headers).normalize();let{responseType:c,onUploadProgress:o,onDownloadProgress:d}=n,u,m,h,x,f;function p(){x&&x(),f&&f(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function w(){if(!g)return;const b=Hs.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),v={data:!c||c==="text"||c==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:b,config:t,request:g};Dj(function(N){a(N),p()},function(N){r(N),p()},v),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(r(new Ke("Request aborted",Ke.ECONNABORTED,t,g)),g=null)},g.onerror=function(){r(new Ke("Network Error",Ke.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let A=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const v=n.transitional||Oj;n.timeoutErrorMessage&&(A=n.timeoutErrorMessage),r(new Ke(A,v.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,t,g)),g=null},i===void 0&&l.setContentType(null),"setRequestHeader"in g&&te.forEach(l.toJSON(),function(A,v){g.setRequestHeader(v,A)}),te.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),c&&c!=="json"&&(g.responseType=n.responseType),d&&([h,f]=sc(d,!0),g.addEventListener("progress",h)),o&&g.upload&&([m,x]=sc(o),g.upload.addEventListener("progress",m),g.upload.addEventListener("loadend",x)),(n.cancelToken||n.signal)&&(u=b=>{g&&(r(!b||b.type?new Wn(null,t,g):b),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const S=I2(n.url);if(S&&ss.protocols.indexOf(S)===-1){r(new Ke("Unsupported protocol "+S+":",Ke.ERR_BAD_REQUEST,t));return}g.send(i||null)})},z2=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,n;const i=function(d){if(!n){n=!0,c();const u=d instanceof Error?d:this.reason;r.abort(u instanceof Ke?u:new Wn(u instanceof Error?u.message:u))}};let l=s&&setTimeout(()=>{l=null,i(new Ke(`timeout ${s} of ms exceeded`,Ke.ETIMEDOUT))},s);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:o}=r;return o.unsubscribe=()=>te.asap(c),o}},W2=z2,q2=function*(t,s){let a=t.byteLength;if(!s||a<s){yield t;return}let r=0,n;for(;r<a;)n=r+s,yield t.slice(r,n),r=n},K2=async function*(t,s){for await(const a of H2(t))yield*q2(a,s)},H2=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},Tx=(t,s,a,r)=>{const n=K2(t,s);let i=0,l,c=o=>{l||(l=!0,r&&r(o))};return new ReadableStream({async pull(o){try{const{done:d,value:u}=await n.next();if(d){c(),o.close();return}let m=u.byteLength;if(a){let h=i+=m;a(h)}o.enqueue(new Uint8Array(u))}catch(d){throw c(d),d}},cancel(o){return c(o),n.return()}},{highWaterMark:2})},vo=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Rj=vo&&typeof ReadableStream=="function",V2=vo&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Lj=(t,...s)=>{try{return!!t(...s)}catch{return!1}},G2=Rj&&Lj(()=>{let t=!1;const s=new Request(ss.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Ox=64*1024,cu=Rj&&Lj(()=>te.isReadableStream(new Response("").body)),ac={stream:cu&&(t=>t.body)};vo&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!ac[s]&&(ac[s]=te.isFunction(t[s])?a=>a[s]():(a,r)=>{throw new Ke(`Response type '${s}' is not supported`,Ke.ERR_NOT_SUPPORT,r)})})})(new Response);const Z2=async t=>{if(t==null)return 0;if(te.isBlob(t))return t.size;if(te.isSpecCompliantForm(t))return(await new Request(ss.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(te.isArrayBufferView(t)||te.isArrayBuffer(t))return t.byteLength;if(te.isURLSearchParams(t)&&(t=t+""),te.isString(t))return(await V2(t)).byteLength},Y2=async(t,s)=>{const a=te.toFiniteNumber(t.getContentLength());return a??Z2(s)},X2=vo&&(async t=>{let{url:s,method:a,data:r,signal:n,cancelToken:i,timeout:l,onDownloadProgress:c,onUploadProgress:o,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:h}=$j(t);d=d?(d+"").toLowerCase():"text";let x=W2([n,i&&i.toAbortSignal()],l),f;const p=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let g;try{if(o&&G2&&a!=="get"&&a!=="head"&&(g=await Y2(u,r))!==0){let v=new Request(s,{method:"POST",body:r,duplex:"half"}),j;if(te.isFormData(r)&&(j=v.headers.get("content-type"))&&u.setContentType(j),v.body){const[N,O]=Cx(g,sc(_x(o)));r=Tx(v.body,Ox,N,O)}}te.isString(m)||(m=m?"include":"omit");const w="credentials"in Request.prototype;f=new Request(s,{...h,signal:x,method:a.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:w?m:void 0});let S=await fetch(f,h);const b=cu&&(d==="stream"||d==="response");if(cu&&(c||b&&p)){const v={};["status","statusText","headers"].forEach(C=>{v[C]=S[C]});const j=te.toFiniteNumber(S.headers.get("content-length")),[N,O]=c&&Cx(j,sc(_x(c),!0))||[];S=new Response(Tx(S.body,Ox,N,()=>{O&&O(),p&&p()}),v)}d=d||"text";let A=await ac[te.findKey(ac,d)||"text"](S,t);return!b&&p&&p(),await new Promise((v,j)=>{Dj(v,j,{data:A,headers:Hs.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:f})})}catch(w){throw p&&p(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,t,f),{cause:w.cause||w}):Ke.from(w,w&&w.code,t,f)}}),ou={http:d2,xhr:U2,fetch:X2};te.forEach(ou,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Ex=t=>`- ${t}`,J2=t=>te.isFunction(t)||t===null||t===!1,Fj={getAdapter:t=>{t=te.isArray(t)?t:[t];const{length:s}=t;let a,r;const n={};for(let i=0;i<s;i++){a=t[i];let l;if(r=a,!J2(a)&&(r=ou[(l=String(a)).toLowerCase()],r===void 0))throw new Ke(`Unknown adapter '${l}'`);if(r)break;n[l||"#"+i]=r}if(!r){const i=Object.entries(n).map(([c,o])=>`adapter ${c} `+(o===!1?"is not supported by the environment":"is not available in the build"));let l=s?i.length>1?`since :
`+i.map(Ex).join(`
`):" "+Ex(i[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:ou};function gd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Wn(null,t)}function Ix(t){return gd(t),t.headers=Hs.from(t.headers),t.data=pd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Fj.getAdapter(t.adapter||Gm.adapter)(t).then(function(r){return gd(t),r.data=pd.call(t,t.transformResponse,r),r.headers=Hs.from(r.headers),r},function(r){return Ij(r)||(gd(t),r&&r.response&&(r.response.data=pd.call(t,t.transformResponse,r.response),r.response.headers=Hs.from(r.response.headers))),Promise.reject(r)})}const Bj="1.11.0",jo={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{jo[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Dx={};jo.transitional=function(s,a,r){function n(i,l){return"[Axios v"+Bj+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,c)=>{if(s===!1)throw new Ke(n(l," has been removed"+(a?" in "+a:"")),Ke.ERR_DEPRECATED);return a&&!Dx[l]&&(Dx[l]=!0,console.warn(n(l," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(i,l,c):!0}};jo.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Q2(t,s,a){if(typeof t!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],l=s[i];if(l){const c=t[i],o=c===void 0||l(c,i,t);if(o!==!0)throw new Ke("option "+i+" must be "+o,Ke.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new Ke("Unknown option "+i,Ke.ERR_BAD_OPTION)}}const Zl={assertOptions:Q2,validators:jo},Qs=Zl.validators;class rc{constructor(s){this.defaults=s||{},this.interceptors={request:new kx,response:new kx}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Or(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&Zl.assertOptions(r,{silentJSONParsing:Qs.transitional(Qs.boolean),forcedJSONParsing:Qs.transitional(Qs.boolean),clarifyTimeoutError:Qs.transitional(Qs.boolean)},!1),n!=null&&(te.isFunction(n)?a.paramsSerializer={serialize:n}:Zl.assertOptions(n,{encode:Qs.function,serialize:Qs.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Zl.assertOptions(a,{baseUrl:Qs.spelling("baseURL"),withXsrfToken:Qs.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&te.merge(i.common,i[a.method]);i&&te.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),a.headers=Hs.concat(l,i);const c=[];let o=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(a)===!1||(o=o&&p.synchronous,c.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,m=0,h;if(!o){const f=[Ix.bind(this),void 0];for(f.unshift(...c),f.push(...d),h=f.length,u=Promise.resolve(a);m<h;)u=u.then(f[m++],f[m++]);return u}h=c.length;let x=a;for(m=0;m<h;){const f=c[m++],p=c[m++];try{x=f(x)}catch(g){p.call(this,g);break}}try{u=Ix.call(this,x)}catch(f){return Promise.reject(f)}for(m=0,h=d.length;m<h;)u=u.then(d[m++],d[m++]);return u}getUri(s){s=Or(this.defaults,s);const a=Mj(s.baseURL,s.url,s.allowAbsoluteUrls);return Tj(a,s.params,s.paramsSerializer)}}te.forEach(["delete","get","head","options"],function(s){rc.prototype[s]=function(a,r){return this.request(Or(r||{},{method:s,url:a,data:(r||{}).data}))}});te.forEach(["post","put","patch"],function(s){function a(r){return function(i,l,c){return this.request(Or(c||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}rc.prototype[s]=a(),rc.prototype[s+"Form"]=a(!0)});const Yl=rc;class Zm{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(c=>{r.subscribe(c),i=c}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},s(function(i,l,c){r.reason||(r.reason=new Wn(i,l,c),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new Zm(function(n){s=n}),cancel:s}}}const eS=Zm;function tS(t){return function(a){return t.apply(null,a)}}function sS(t){return te.isObject(t)&&t.isAxiosError===!0}const du={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(du).forEach(([t,s])=>{du[s]=t});const aS=du;function Uj(t){const s=new Yl(t),a=vj(Yl.prototype.request,s);return te.extend(a,Yl.prototype,s,{allOwnKeys:!0}),te.extend(a,s,null,{allOwnKeys:!0}),a.create=function(n){return Uj(Or(t,n))},a}const Lt=Uj(Gm);Lt.Axios=Yl;Lt.CanceledError=Wn;Lt.CancelToken=eS;Lt.isCancel=Ij;Lt.VERSION=Bj;Lt.toFormData=po;Lt.AxiosError=Ke;Lt.Cancel=Lt.CanceledError;Lt.all=function(s){return Promise.all(s)};Lt.spread=tS;Lt.isAxiosError=sS;Lt.mergeConfig=Or;Lt.AxiosHeaders=Hs;Lt.formToJSON=t=>Ej(te.isHTMLForm(t)?new FormData(t):t);Lt.getAdapter=Fj.getAdapter;Lt.HttpStatusCode=aS;Lt.default=Lt;const Ym=Lt;class rS{constructor(){this.api=Ym.create({baseURL:{}.VITE_API_URL||"http://localhost:9000/api",headers:{"Content-Type":"application/json"}}),this.refreshPromise=null,this.setupInterceptors()}setupInterceptors(){this.api.interceptors.request.use(s=>{const a=localStorage.getItem("jwt_token"),r=localStorage.getItem("sanctum_token");return a&&(s.headers.Authorization=`Bearer ${a}`),r&&(s.headers["X-Sanctum-Token"]=r),s},s=>Promise.reject(s)),this.api.interceptors.response.use(s=>s,async s=>{var r;const a=s.config;if(((r=s.response)==null?void 0:r.status)===401&&!a._retry){a._retry=!0;try{const n=await this.refreshTokens();return this.updateTokens(n),a.headers.Authorization=`Bearer ${n.access_token}`,this.api(a)}catch(n){return this.logout(),window.location.href="/login",Promise.reject(n)}}return Promise.reject(s)})}async login(s){try{if(!s.email&&!s.username)throw new Error("Email or username is required");if(!s.password)throw new Error("Password is required");const a={password:s.password,...s.email?{email:s.email}:{username:s.username}},r=await this.api.post("/auth/login",a);if(r.data.success){const{data:n}=r.data;this.updateTokens({access_token:n.access_token,refresh_token:n.refresh_token,sanctum_token:n.sanctum_token,token_type:n.token_type,expires_in:n.expires_in,refresh_expires_in:n.refresh_expires_in,auth_method:n.auth_method||"jwt"}),this.api.defaults.headers.common.Authorization=`Bearer ${n.access_token}`,n.sanctum_token&&(this.api.defaults.headers.common["X-Sanctum-Token"]=n.sanctum_token),n.user&&localStorage.setItem("chatbot_user",JSON.stringify(n.user))}return r.data}catch(a){throw console.error("Login failed:",a),a}}async refreshTokens(){if(this.refreshPromise)return this.refreshPromise;this.refreshPromise=this.performRefresh();try{return await this.refreshPromise}finally{this.refreshPromise=null}}async performRefresh(){const s=localStorage.getItem("refresh_token");if(!s)throw new Error("No refresh token available");try{return(await this.api.post("/auth/refresh",{refresh_token:s})).data.data}catch(a){throw console.error("Token refresh failed:",a),a}}async logout(){try{await this.api.post("/auth/logout")}catch(s){console.error("Logout API call failed:",s)}finally{this.clearTokens()}}async getCurrentUser(){return(await this.api.get("/auth/me")).data.data}async validateTokens(){try{return await this.api.post("/auth/validate"),!0}catch{return!1}}updateTokens(s){s.access_token&&(localStorage.setItem("jwt_token",s.access_token),localStorage.setItem("token_expires_at",new Date(Date.now()+(s.expires_in||3600)*1e3).toISOString())),s.refresh_token&&(localStorage.setItem("refresh_token",s.refresh_token),localStorage.setItem("refresh_expires_at",new Date(Date.now()+(s.refresh_expires_in||86400)*1e3).toISOString())),s.sanctum_token&&localStorage.setItem("sanctum_token",s.sanctum_token),s.auth_method&&localStorage.setItem("auth_method",s.auth_method),localStorage.setItem("unified_auth_enabled","true"),localStorage.setItem("last_auth_update",new Date().toISOString())}clearTokens(){["jwt_token","refresh_token","sanctum_token","token_expires_at","refresh_expires_at","auth_method","unified_auth_enabled","last_auth_update","chatbot_user"].forEach(a=>localStorage.removeItem(a)),delete this.api.defaults.headers.common.Authorization,delete this.api.defaults.headers.common["X-Sanctum-Token"]}isAuthenticated(){const s=localStorage.getItem("jwt_token"),a=localStorage.getItem("sanctum_token"),r=localStorage.getItem("token_expires_at");return!s&&!a?!1:r&&new Date(r)<=new Date?!!a:!0}getTokens(){return{jwt:localStorage.getItem("jwt_token")||void 0,sanctum:localStorage.getItem("sanctum_token")||void 0,refresh:localStorage.getItem("refresh_token")||void 0,auth_method:localStorage.getItem("auth_method")||"jwt",unified_auth_enabled:localStorage.getItem("unified_auth_enabled")==="true",last_auth_update:localStorage.getItem("last_auth_update")}}async checkUnifiedAuthHealth(){var s,a,r,n;try{const i=await this.api.get("/auth/me");return{status:"healthy",auth_method:((s=i.data.data)==null?void 0:s.auth_method)||"unknown",user:(a=i.data.data)==null?void 0:a.user,timestamp:new Date().toISOString()}}catch(i){return{status:"unhealthy",error:((n=(r=i.response)==null?void 0:r.data)==null?void 0:n.message)||i.message,auth_method:localStorage.getItem("auth_method")||"unknown",timestamp:new Date().toISOString()}}}handleAuthError(s){var r;const a=(r=s.response)==null?void 0:r.data;switch(a==null?void 0:a.error_code){case"TOKEN_EXPIRED":return this.handleTokenExpired();case"TOKEN_INVALID":return this.handleTokenInvalid();case"RATE_LIMIT_EXCEEDED":return this.handleRateLimitExceeded(a);case"USER_LOCKED":return this.handleUserLocked(a);default:return{type:"general",message:(a==null?void 0:a.message)||"Authentication failed",details:(a==null?void 0:a.errors)||{}}}}async handleTokenExpired(){try{return await this.refreshTokens(),{type:"refreshed",message:"Token refreshed successfully"}}catch{return this.clearTokens(),{type:"expired",message:"Session expired, please login again"}}}handleTokenInvalid(){return this.clearTokens(),{type:"invalid",message:"Invalid token, please login again"}}handleRateLimitExceeded(s){return{type:"rate_limit",message:"Too many requests, please try again later",retryAfter:(s==null?void 0:s.retry_after)||60}}handleUserLocked(s){return{type:"locked",message:"Account is locked, please contact administrator",lockedUntil:s==null?void 0:s.locked_until}}getApi(){return this.api}}const ni=new rS,He={USERS:{VIEW:"users.view_org",CREATE:"users.create_org",UPDATE:"users.update_org",DELETE:"users.delete_org",VIEW_ALL:"users.view_all",MANAGE_ROLES:"users.manage_roles"},AGENTS:{VIEW:"agents.view",CREATE:"agents.create",UPDATE:"agents.update",DELETE:"agents.delete",EXECUTE:"agents.execute"},CUSTOMERS:{VIEW:"customers.view",CREATE:"customers.create",UPDATE:"customers.update",DELETE:"customers.delete"},CHAT_SESSIONS:{VIEW:"chat_sessions.view",CREATE:"chat_sessions.create",UPDATE:"chat_sessions.update",DELETE:"chat_sessions.delete"},MESSAGES:{VIEW:"messages.view",CREATE:"messages.create",UPDATE:"messages.update",DELETE:"messages.delete"},KNOWLEDGE:{VIEW:"knowledge_articles.view",CREATE:"knowledge_articles.create",UPDATE:"knowledge_articles.update",DELETE:"knowledge_articles.delete",PUBLISH:"knowledge_articles.publish"},BOT_PERSONALITIES:{VIEW:"bot_personalities.view",CREATE:"bot_personalities.create",UPDATE:"bot_personalities.update",DELETE:"bot_personalities.delete"},CHANNEL_CONFIGS:{VIEW:"channel_configs.view",CREATE:"channel_configs.create",UPDATE:"channel_configs.update",DELETE:"channel_configs.delete"},ANALYTICS:{VIEW:"analytics.view",EXPORT:"analytics.export"},BILLING:{VIEW:"billing.view",MANAGE:"billing.manage"},API_KEYS:{VIEW:"api_keys.view",CREATE:"api_keys.create",UPDATE:"api_keys.update",DELETE:"api_keys.delete"},SETTINGS:{VIEW:"settings.view",MANAGE:"manage_settings",UPDATE:"settings.update",CONFIGURE:"settings.configure"},ORGANIZATION:{VIEW:"organization.view",MANAGE:"manage_organization",UPDATE:"organization.update",CONFIGURE:"organization.configure"},CHAT:{HANDLE:"handle_chats",VIEW:"chat.view",MANAGE:"chat.manage"},WEBHOOKS:{VIEW:"webhooks.view",CREATE:"webhooks.create",UPDATE:"webhooks.update",DELETE:"webhooks.delete"},WORKFLOWS:{VIEW:"workflows.view",CREATE:"workflows.create",UPDATE:"workflows.update",DELETE:"workflows.delete",EXECUTE:"workflows.execute"},ORGANIZATIONS:{VIEW:"organizations.view",CREATE:"organizations.create",UPDATE:"organizations.update",DELETE:"organizations.delete"},ROLES:{VIEW:"roles.view",CREATE:"roles.create",UPDATE:"roles.update",DELETE:"roles.delete",ASSIGN:"roles.assign",REVOKE:"roles.revoke"},PERMISSIONS:{VIEW:"permissions.view",CREATE:"permissions.create",UPDATE:"permissions.update",DELETE:"permissions.delete"},SYSTEM_LOGS:{VIEW:"system_logs.view"}},qr={USER_MANAGEMENT:[He.USERS.VIEW,He.USERS.CREATE,He.USERS.UPDATE,He.USERS.DELETE],AGENT_MANAGEMENT:[He.AGENTS.VIEW,He.AGENTS.CREATE,He.AGENTS.UPDATE,He.AGENTS.DELETE,He.AGENTS.EXECUTE],CONTENT_MANAGEMENT:[He.KNOWLEDGE.VIEW,He.KNOWLEDGE.CREATE,He.KNOWLEDGE.UPDATE,He.KNOWLEDGE.DELETE,He.KNOWLEDGE.PUBLISH],SYSTEM_ADMIN:[He.ORGANIZATIONS.VIEW,He.ROLES.VIEW,He.PERMISSIONS.VIEW,He.SYSTEM_LOGS.VIEW],ORGANIZATION_ADMIN:[He.ORGANIZATION.VIEW,He.ORGANIZATION.MANAGE,He.ORGANIZATION.UPDATE,He.ORGANIZATION.CONFIGURE,He.SETTINGS.MANAGE,He.SETTINGS.UPDATE,He.SETTINGS.CONFIGURE],CHAT_MANAGEMENT:[He.CHAT.HANDLE,He.CHAT.VIEW,He.CHAT.MANAGE],AUTOMATION_MANAGEMENT:["manage_automations","manage_workflows","configure_bots"]},nS={SUPER_ADMIN:["*"],ORG_ADMIN:[...qr.USER_MANAGEMENT,...qr.AGENT_MANAGEMENT,...qr.CONTENT_MANAGEMENT,...qr.ORGANIZATION_ADMIN,...qr.CHAT_MANAGEMENT,...qr.AUTOMATION_MANAGEMENT,He.ANALYTICS.VIEW,He.BILLING.MANAGE,He.SETTINGS.MANAGE,He.ORGANIZATION.MANAGE,He.CHAT.HANDLE,"manage_automations","manage_knowledge_base"],AGENT:[He.CHAT_SESSIONS.VIEW,He.CHAT_SESSIONS.CREATE,He.MESSAGES.VIEW,He.MESSAGES.CREATE,He.KNOWLEDGE.VIEW],CUSTOMER:[He.CHAT_SESSIONS.VIEW,He.MESSAGES.VIEW,He.MESSAGES.CREATE]},uu=(t,s)=>{var r;if(!t)return!1;if(t.role==="super_admin"||t.permissions&&t.permissions.includes("*")||t.permissions&&t.permissions.includes(s))return!0;const a=nS[(r=t.role)==null?void 0:r.toUpperCase()];return a&&a.includes(s)?!0:t.role==="org_admin"?["manage_organization","manage_users","manage_agents","manage_chatbots","view_analytics","manage_billing","manage_automations","manage_knowledge_base","manage_settings"].includes(s):!1},mu=(t,s)=>t?t.role===s?!0:t.roles&&Array.isArray(t.roles)?t.roles.some(n=>(typeof n=="object"?n.name:n)===s):({org_admin:["organization_admin","org_admin"],super_admin:["superadmin","super_admin"],agent:["agent"],customer:["customer","client"]}[s]||[s]).includes(t.role):!1,iS=t=>uu(t,"manage_settings")||uu(t,"settings.manage")||mu(t,"super_admin")||mu(t,"org_admin"),_s={USER:"chatbot_user",SESSION:"chatbot_session",THEME:"chatbot_theme"},lS=(t,s)=>{try{return require(t)}catch{return s}},zj=y.createContext(),Xs=()=>{const t=y.useContext(zj);return t||(console.warn("useAuth must be used within an AuthProvider"),{user:null,isLoading:!1,isAuthenticated:!1,login:()=>Promise.reject(new Error("Auth context not available")),logout:()=>{},updateUser:()=>{},checkAuth:()=>Promise.resolve(!1),hasPermission:()=>!1,isRole:()=>!1})},cS=({children:t})=>{const[s,a]=y.useState(null),[r,n]=y.useState(!0),[i,l]=y.useState(!1),[c,o]=y.useState(null),d=y.useMemo(()=>{try{const{useToaster:v}=lS("@/components/ui/Toaster",{});if(v)return v()}catch{}return{addToast:(v,j="info")=>{console.log(`[${j.toUpperCase()}] ${v}`)}}},[]);y.useEffect(()=>{(async()=>{try{const j=localStorage.getItem(_s.USER);if(j){const N=JSON.parse(j);N&&N.id&&N.username&&N.role?(a(N),l(!0),console.log("✅ User restored from localStorage:",N.username)):(console.warn("⚠️ Invalid user data structure, clearing storage"),localStorage.removeItem(_s.USER))}}catch(j){console.error("❌ Error parsing saved user data:",j),localStorage.removeItem(_s.USER),o("Failed to restore user session")}finally{n(!1)}})()},[]);const u=y.useCallback(async(v,j)=>{var N;n(!0),o(null);try{if(!v||!j)throw new Error("Username/email and password are required");const O={password:j,...v.includes("@")?{email:v}:{username:v}},C=await ni.login(O);if(C.success){const E={...C.data.user,lastLogin:new Date().toISOString(),authMethod:C.data.auth_method||"jwt",tokens:{access_token:C.data.access_token,refresh_token:C.data.refresh_token,sanctum_token:C.data.sanctum_token},sessionId:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};a(E),l(!0),o(null);try{localStorage.setItem(_s.USER,JSON.stringify(E)),localStorage.setItem(_s.SESSION,E.sessionId)}catch(P){console.warn("⚠️ Failed to save to localStorage:",P)}return d.addToast(`Welcome back, ${E.full_name||E.name}!`,"success"),console.log("✅ Login successful:",E.username||E.email),{success:!0,user:E}}else throw new Error(C.message||"Login failed")}catch(O){if(console.error("❌ Login error:",O),(N=O.response)!=null&&N.data){const C=ni.handleAuthError(O);o(C.message),d.addToast(C.message,"error")}else o(O.message||"Login failed"),d.addToast(O.message||"Login failed","error");throw O}finally{n(!1)}},[d]),m=y.useCallback(async()=>{try{await ni.logout(),a(null),l(!1),o(null),localStorage.removeItem(_s.USER),localStorage.removeItem(_s.SESSION),sessionStorage.clear(),d.addToast("Logged out successfully","info"),console.log("✅ User logged out")}catch(v){console.error("❌ Logout error:",v),a(null),l(!1),o(null),localStorage.removeItem(_s.USER),localStorage.removeItem(_s.SESSION),sessionStorage.clear()}},[d]),h=y.useCallback(v=>{try{if(!s)throw new Error("No user to update");const j={...s,...v,updatedAt:new Date().toISOString()};a(j);try{localStorage.setItem(_s.USER,JSON.stringify(j))}catch(N){console.warn("⚠️ Failed to update localStorage:",N)}d.addToast("Profile updated successfully","success"),console.log("✅ User updated:",v)}catch(j){console.error("❌ Update user error:",j),d.addToast("Failed to update profile","error")}},[s,d]),x=y.useCallback(async()=>{try{if(!ni.isAuthenticated())return console.log("❌ No valid tokens found"),!1;try{const v=await ni.getCurrentUser();if(v){const j={...v,lastLogin:new Date().toISOString(),authMethod:localStorage.getItem("auth_method")||"jwt"};a(j),l(!0),o(null);try{localStorage.setItem(_s.USER,JSON.stringify(j))}catch(N){console.warn("⚠️ Failed to update localStorage:",N)}return console.log("✅ Authentication validated:",j.username||j.email),!0}}catch{console.warn("⚠️ API validation failed, checking local storage");const j=localStorage.getItem(_s.USER);if(j){const N=JSON.parse(j);return a(N),l(!0),!0}}return!1}catch(v){return console.error("❌ Check auth error:",v),m(),!1}},[m]),f=y.useCallback(v=>{if(!s)return!1;console.log("🔍 Checking permission:",{required:v,userRole:s.role,userPermissions:s.permissions});const j=uu(s,v);return console.log("🔍 Permission check result:",{permissionCode:v,hasPermission:j}),j},[s]),p=y.useCallback(v=>!s||!Array.isArray(v)?!1:s.role==="super_admin"?!0:s.permissions&&Array.isArray(s.permissions)?s.permissions.includes("*")?!0:v.some(j=>s.permissions.includes(j)):!1,[s,f]),g=y.useCallback(v=>!s||!Array.isArray(v)?!1:s.role==="super_admin"?!0:s.permissions&&Array.isArray(s.permissions)?s.permissions.includes("*")?!0:v.every(j=>s.permissions.includes(j)):!1,[s,f]),w=y.useCallback(v=>{if(!s)return!1;console.log("🔍 Checking role:",{required:v,userRole:s.role,userRoles:s.roles});const j=mu(s,v);return console.log("🔍 Role check result:",{required:v,hasRole:j}),j},[s]),S=y.useCallback(()=>{if(!s)return[];if(s.role==="super_admin")return["*"];let v=s.permissions||[];return s.roles&&Array.isArray(s.roles)&&s.roles.forEach(j=>{j.permissions&&Array.isArray(j.permissions)&&(v=[...v,...j.permissions])}),[...new Set(v)]},[s]),b=y.useCallback(()=>{if(!s)return[];let v=[s.role];if(s.roles&&Array.isArray(s.roles)){const j=s.roles.map(N=>N.name||N);v=[...v,...j]}return[...new Set(v)]},[s]),A=y.useMemo(()=>({user:s,isLoading:r,isAuthenticated:i,error:c,login:u,logout:m,updateUser:h,checkAuth:x,hasPermission:f,hasAnyPermission:p,hasAllPermissions:g,isRole:w,getUserPermissions:S,getUserRoles:b}),[s,r,i,c,u,m,h,x,f,p,g,w,S,b]);return e.jsx(zj.Provider,{value:A,children:t})},ii={SUPERADMIN:"superadmin",ORGANIZATION_ADMIN:"organization_admin",AGENT:"agent",CLIENT:"client"},vd={SUPERADMIN:["manage_system","manage_all_organizations","view_all_data","manage_platform_settings","access_admin_panel"],ORGANIZATION_ADMIN:["manage_organization","manage_users","manage_agents","manage_chatbots","view_analytics","manage_billing","manage_automations","manage_knowledge_base","manage_settings"],AGENT:["handle_chats","view_conversations","update_profile","access_knowledge_base","create_tickets"],CLIENT:["view_dashboard","manage_profile","access_support","view_billing"]},oS=y.createContext(),dS=({children:t})=>{const[s,a]=y.useState(null),[r,n]=y.useState([]),[i,l]=y.useState(!1),c=y.useCallback(f=>{try{if(!f||!Object.values(ii).includes(f))throw new Error(`Invalid role: ${f}`);n(p=>[...p,{role:s,timestamp:new Date().toISOString()}]),a(f),console.log("✅ Role set to:",f);try{localStorage.setItem("chatbot_current_role",f)}catch(p){console.warn("⚠️ Failed to save role to localStorage:",p)}}catch(p){throw console.error("❌ Error setting role:",p),p}},[s]),o=y.useCallback(f=>{try{if(!s||!f)return!1;const p=vd[s.toUpperCase()]||[];return p.includes(f)||p.includes("*")}catch(p){return console.error("❌ Error checking permission:",p),!1}},[s]),d=y.useCallback(f=>{try{return s===f}catch(p){return console.error("❌ Error checking role:",p),!1}},[s]),u=y.useCallback(()=>{try{return s?vd[s.toUpperCase()]||[]:[]}catch(f){return console.error("❌ Error getting role permissions:",f),[]}},[s]),m=y.useCallback(()=>{try{return Object.values(ii)}catch(f){return console.error("❌ Error getting available roles:",f),[]}},[]),h=y.useCallback(async f=>{l(!0);try{if(!Object.values(ii).includes(f))throw new Error(`Invalid role: ${f}`);return await new Promise(p=>setTimeout(p,500)),c(f),console.log("✅ Role switched to:",f),{success:!0,role:f}}catch(p){throw console.error("❌ Error switching role:",p),p}finally{l(!1)}},[c]);y.useEffect(()=>{try{const f=localStorage.getItem("chatbot_current_role");f&&Object.values(ii).includes(f)&&(a(f),console.log("✅ Role restored from localStorage:",f))}catch(f){console.error("❌ Error restoring role from localStorage:",f),localStorage.removeItem("chatbot_current_role")}},[]);const x=y.useMemo(()=>({currentRole:s,setRole:c,hasPermission:o,isRole:d,getRolePermissions:u,getAvailableRoles:m,switchRole:h,isLoading:i,roleHistory:r,ROLES:ii,PERMISSIONS:vd}),[s,c,o,d,u,m,h,i,r]);return e.jsx(oS.Provider,{value:x,children:t})},Mx={success:{icon:"✓",bgColor:"bg-green-500",textColor:"text-white",borderColor:"border-green-600",iconColor:"text-green-100"},error:{icon:"✕",bgColor:"bg-red-500",textColor:"text-white",borderColor:"border-red-600",iconColor:"text-red-100"},warning:{icon:"⚠",bgColor:"bg-yellow-500",textColor:"text-white",borderColor:"border-yellow-600",iconColor:"text-yellow-100"},info:{icon:"ℹ",bgColor:"bg-blue-500",textColor:"text-white",borderColor:"border-blue-600",iconColor:"text-blue-100"}},Wj=y.createContext(),uS=()=>{const t=y.useContext(Wj);return t||(console.warn("useToaster must be used within a ToasterProvider"),{addToast:(s,a="info",r={})=>{console.log(`[${a.toUpperCase()}] ${s}`,r)},removeToast:()=>{},clearToasts:()=>{}})},mS=({toast:t,onRemove:s,onPause:a,onResume:r})=>{const[n,i]=y.useState(!1),[l,c]=y.useState(!1),o=Mx[t.type]||Mx.info;y.useEffect(()=>{const h=setTimeout(()=>i(!0),100);return()=>clearTimeout(h)},[]),y.useEffect(()=>{if(l||t.persistent)return;const h=setTimeout(()=>{s(t.id)},t.duration||5e3);return()=>clearTimeout(h)},[l,t.persistent,t.duration,t.id,s]);const d=()=>{t.persistent||(c(!0),a==null||a(t.id))},u=()=>{t.persistent||(c(!1),r==null||r(t.id))},m=()=>{i(!1),setTimeout(()=>s(t.id),300)};return e.jsx("div",{className:`
        transform transition-all duration-300 ease-out
        ${n?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
        ${o.bgColor} ${o.textColor} ${o.borderColor}
        border rounded-lg shadow-lg max-w-sm w-full
        hover:shadow-xl transition-shadow duration-200
      `,onMouseEnter:d,onMouseLeave:u,role:"alert","aria-live":"polite","aria-atomic":"true",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-5 h-5 ${o.iconColor} text-lg font-bold`,children:o.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[t.title&&e.jsx("p",{className:"text-sm font-semibold mb-1",children:t.title}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.message})]}),e.jsx("button",{onClick:m,className:`
              flex-shrink-0 w-5 h-5 rounded-full
              ${o.iconColor} hover:bg-white hover:bg-opacity-20
              transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50
            `,"aria-label":"Close notification",children:"×"})]}),!t.persistent&&e.jsx("div",{className:"mt-3 w-full bg-black bg-opacity-20 rounded-full h-1",children:e.jsx("div",{className:`h-1 ${o.iconColor} rounded-full transition-all duration-100`,style:{width:l?"100%":"0%",transition:l?"none":`width ${t.duration||5e3}ms linear`}})})]})})},hS=()=>{const{toasts:t,removeToast:s,pauseToast:a,resumeToast:r}=uS();return!t||t.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 max-w-sm",role:"region","aria-label":"Notifications",children:t.map(n=>e.jsx(mS,{toast:n,onRemove:s,onPause:a,onResume:r},n.id))})},xS=({children:t})=>{const[s,a]=y.useState([]),[r,n]=y.useState(new Set),i=y.useRef(null),l=y.useCallback((h,x="info",f={})=>{try{const p=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,g={id:p,message:h,type:x,title:f.title,duration:f.duration||5e3,persistent:f.persistent||!1,createdAt:new Date().toISOString(),...f};return a(w=>[g,...w]),console.log(`✅ Toast added: [${x}] ${h}`,{id:p,options:f}),p}catch(p){return console.error("❌ Error adding toast:",p),null}},[]),c=y.useCallback(h=>{try{a(x=>x.filter(f=>f.id!==h)),n(x=>{const f=new Set(x);return f.delete(h),f})}catch(x){console.error("❌ Error removing toast:",x)}},[]),o=y.useCallback(()=>{try{a([]),n(new Set)}catch(h){console.error("❌ Error clearing toasts:",h)}},[]),d=y.useCallback(h=>{n(x=>new Set([...x,h]))},[]),u=y.useCallback(h=>{n(x=>{const f=new Set(x);return f.delete(h),f})},[]);y.useEffect(()=>(i.current=setInterval(()=>{a(h=>{const x=Date.now(),f=5*60*1e3,p=h.filter(g=>x-new Date(g.createdAt).getTime()<f);return p.length!==h.length&&console.log(`🧹 Cleaned up ${h.length-p.length} old toasts`),p})},3e4),()=>{i.current&&(clearInterval(i.current),i.current=null)}),[]);const m=y.useMemo(()=>({toasts:s,addToast:l,removeToast:c,clearToasts:o,pauseToast:d,resumeToast:u}),[s,l,c,o,d,u]);return e.jsx(Wj.Provider,{value:m,children:t})},fS=()=>(console.log("RootLayout rendering..."),e.jsx(xS,{children:e.jsx(cS,{children:e.jsx(dS,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(hl,{}),e.jsx(hS,{})]})})})})),pS=()=>(console.log("AuthLayout rendering..."),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"ChatBot Pro"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Modern UI/UX Dashboard"})]}),e.jsx(hl,{})]})}));function we(...t){return QN(We(t))}const k=$.forwardRef(({className:t,variant:s="default",size:a="default",asChild:r=!1,children:n,...i},l)=>{const c="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},d={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"},u=we(c,o[s],d[a],t);return r&&$.isValidElement(n)?$.cloneElement(n,{ref:l,className:we(u,n.props.className),...i}):e.jsx("button",{className:u,ref:l,...i,children:n})});k.displayName="Button";const F=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));F.displayName="Card";const H=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("flex flex-col space-y-1.5 p-6",t),...s}));H.displayName="CardHeader";const V=$.forwardRef(({className:t,...s},a)=>e.jsx("h3",{ref:a,className:we("text-2xl font-semibold leading-none tracking-tight",t),...s}));V.displayName="CardTitle";const Q=$.forwardRef(({className:t,...s},a)=>e.jsx("p",{ref:a,className:we("text-sm text-muted-foreground",t),...s}));Q.displayName="CardDescription";const B=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("p-6 pt-0",t),...s}));B.displayName="CardContent";const W=$.forwardRef(({className:t,variant:s="default",children:a,...r},n)=>{const i={default:"bg-gray-100 text-gray-800",red:"bg-red-100 text-red-800",yellow:"bg-yellow-100 text-yellow-800",green:"bg-green-100 text-green-800",blue:"bg-blue-100 text-blue-800",indigo:"bg-indigo-100 text-indigo-800",purple:"bg-purple-100 text-purple-800",pink:"bg-pink-100 text-pink-800"};return e.jsx("div",{ref:n,className:we("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",i[s],t),...r,children:a})});W.displayName="Badge";const K=$.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:we("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a}));K.displayName="Input";const _=$.forwardRef(({className:t,...s},a)=>e.jsx("label",{ref:a,className:we("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...s}));_.displayName="Label";const ie=$.forwardRef(({children:t,value:s,onValueChange:a,defaultValue:r,className:n,placeholder:i="Select option",disabled:l=!1,...c},o)=>{const[d,u]=y.useState(!1),[m,h]=y.useState(s||r),x=y.useRef(null);y.useEffect(()=>{const w=S=>{x.current&&!x.current.contains(S.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),y.useEffect(()=>{s!==void 0&&h(s)},[s]);const f=w=>{h(w),a==null||a(w),u(!1)},p=()=>{l||u(!d)},g=()=>{if(!m)return i;let w=m;return $.Children.forEach(t,S=>{$.isValidElement(S)&&S.type===T&&S.props.value===m&&(w=S.props.children)}),w};return e.jsxs("div",{ref:x,className:"relative",children:[e.jsxs("button",{type:"button",onClick:p,disabled:l,className:we("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...c,children:[e.jsx("span",{className:"text-left",children:g()}),e.jsx(sj,{className:we("h-4 w-4 transition-transform",d&&"rotate-180")})]}),d&&e.jsx("div",{className:"absolute top-full z-50 mt-1 w-full rounded-md border bg-popover text-popover-foreground shadow-md",children:e.jsx("div",{className:"p-1",children:$.Children.map(t,w=>$.isValidElement(w)&&w.type===T?$.cloneElement(w,{onClick:()=>f(w.props.value),className:we(w.props.className,"cursor-pointer")}):w)})})]})});ie.displayName="Select";const T=$.forwardRef(({className:t,value:s,children:a,...r},n)=>e.jsx("div",{ref:n,className:we("relative flex w-full cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none hover:bg-accent hover:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:a}));T.displayName="SelectItem";const le=$.forwardRef(({children:t,...s},a)=>$.cloneElement(t,{ref:a,...s}));le.displayName="SelectTrigger";const ce=({placeholder:t,children:s})=>s||t;ce.displayName="SelectValue";const oe=({children:t,...s})=>e.jsx("div",{...s,children:t});oe.displayName="SelectContent";const qj=y.createContext(),kt=({defaultValue:t,value:s,onValueChange:a,className:r,children:n,...i})=>{const[l,c]=y.useState(s||t),o=d=>{c(d),a==null||a(d)};return e.jsx(qj.Provider,{value:{selectedValue:l,onValueChange:o},children:e.jsx("div",{className:we("w-full",r),...i,children:n})})},Kj=()=>{const t=y.useContext(qj);if(!t)throw new Error("Tabs components must be used within a Tabs component");return t},wt=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));wt.displayName="TabsList";const pe=$.forwardRef(({className:t,value:s,children:a,...r},n)=>{const{selectedValue:i,onValueChange:l}=Kj(),c=i===s;return e.jsx("button",{ref:n,type:"button",className:we("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",c?"bg-background text-foreground shadow-sm":"hover:bg-background/50 hover:text-foreground",t),onClick:o=>{o.preventDefault(),o.stopPropagation(),l(s)},...r,children:a})});pe.displayName="TabsTrigger";const ge=$.forwardRef(({className:t,value:s,children:a,...r},n)=>{const{selectedValue:i}=Kj();return i!==s?null:e.jsx("div",{ref:n,className:we("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r,children:a})});ge.displayName="TabsContent";const dt=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:we("w-full caption-bottom text-sm",t),...s})}));dt.displayName="Table";const ut=$.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:we("[&_tr]:border-b",t),...s}));ut.displayName="TableHeader";const mt=$.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:we("[&_tr:last-child]:border-0",t),...s}));mt.displayName="TableBody";const gS=$.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:we("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));gS.displayName="TableFooter";const _e=$.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:we("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));_e.displayName="TableRow";const J=$.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:we("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));J.displayName="TableHead";const X=$.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:we("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));X.displayName="TableCell";const vS=$.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:we("mt-4 text-sm text-muted-foreground",t),...s}));vS.displayName="TableCaption";const Ti=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Ti.displayName="Avatar";const Xm=$.forwardRef(({className:t,src:s,alt:a="",...r},n)=>e.jsx("img",{ref:n,src:s,alt:a,className:we("aspect-square h-full w-full",t),...r}));Xm.displayName="AvatarImage";const Oi=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));Oi.displayName="AvatarFallback";const as=$.forwardRef(({className:t,orientation:s="horizontal",decorative:a=!0,...r},n)=>e.jsx("div",{ref:n,role:a?"none":"separator","aria-orientation":s,className:we("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));as.displayName="Separator";const de=$.forwardRef(({className:t,checked:s,onCheckedChange:a,disabled:r,...n},i)=>e.jsx("button",{type:"button",role:"switch","aria-checked":s,"data-state":s?"checked":"unchecked",disabled:r,className:we("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),onClick:()=>a==null?void 0:a(!s),ref:i,...n,children:e.jsx("span",{"data-state":s?"checked":"unchecked",className:we("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));de.displayName="Switch";const hn=$.forwardRef(({className:t,checked:s=!1,onChange:a,disabled:r=!1,...n},i)=>e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("input",{type:"checkbox",ref:i,checked:s,onChange:a,disabled:r,className:we("h-4 w-4 rounded border border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",r&&"opacity-50 cursor-not-allowed",t),...n})}));hn.displayName="Checkbox";const Xl=$.forwardRef(({className:t,min:s=0,max:a=100,step:r=1,value:n=[0],onValueChange:i,disabled:l=!1,...c},o)=>{const d=m=>{const h=[parseFloat(m.target.value)];i&&i(h)},u=(n[0]-s)/(a-s)*100;return e.jsx("div",{className:we("relative flex w-full touch-none select-none items-center",t),children:e.jsxs("div",{className:"relative w-full h-2 bg-secondary rounded-full",children:[e.jsx("div",{className:"absolute h-2 bg-primary rounded-full transition-all duration-150",style:{width:`${u}%`}}),e.jsx("input",{ref:o,type:"range",min:s,max:a,step:r,value:n[0],onChange:d,disabled:l,className:we("absolute inset-0 w-full h-2 cursor-pointer appearance-none bg-transparent outline-none disabled:pointer-events-none disabled:opacity-50","[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-5 [&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-background [&::-webkit-slider-thumb]:border-2 [&::-webkit-slider-thumb]:border-primary [&::-webkit-slider-thumb]:shadow-sm [&::-webkit-slider-thumb]:transition-colors [&::-webkit-slider-thumb]:focus-visible:outline-none [&::-webkit-slider-thumb]:focus-visible:ring-2 [&::-webkit-slider-thumb]:focus-visible:ring-ring [&::-webkit-slider-thumb]:focus-visible:ring-offset-2 [&::-webkit-slider-thumb]:disabled:pointer-events-none [&::-webkit-slider-thumb]:disabled:opacity-50","[&::-moz-range-thumb]:h-5 [&::-moz-range-thumb]:w-5 [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-background [&::-moz-range-thumb]:border-2 [&::-moz-range-thumb]:border-primary [&::-moz-range-thumb]:shadow-sm [&::-moz-range-thumb]:transition-colors [&::-moz-range-thumb]:focus-visible:outline-none [&::-moz-range-thumb]:focus-visible:ring-2 [&::-moz-range-thumb]:focus-visible:ring-ring [&::-moz-range-thumb]:focus-visible:ring-offset-2 [&::-moz-range-thumb]:disabled:pointer-events-none [&::-moz-range-thumb]:disabled:opacity-50","[&::-webkit-slider-track]:bg-transparent","[&::-moz-range-track]:bg-transparent [&::-moz-range-track]:border-0"),...c})]})})});Xl.displayName="Slider";const Re=$.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:we("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));Re.displayName="Textarea";const is=$.forwardRef(({className:t,variant:s="default",children:a,...r},n)=>{const i={default:"border-border bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 text-green-700 dark:text-green-400 [&>svg]:text-green-500",info:"border-blue-500/50 text-blue-700 dark:text-blue-400 [&>svg]:text-blue-500",warning:"border-yellow-500/50 text-yellow-700 dark:text-yellow-400 [&>svg]:text-yellow-500"},l={default:null,destructive:e.jsx(Cs,{className:"h-4 w-4"}),success:e.jsx(Me,{className:"h-4 w-4"}),info:e.jsx(ns,{className:"h-4 w-4"}),warning:e.jsx(nt,{className:"h-4 w-4"})};return e.jsxs("div",{ref:n,role:"alert",className:we("relative w-full rounded-lg border p-4 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",i[s],t),...r,children:[l[s],a]})});is.displayName="Alert";const ls=$.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:we("text-sm [&_p]:leading-relaxed",t),...s}));ls.displayName="AlertDescription";const qa=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("div",{ref:r,className:we("w-full",t),...a,children:s}));qa.displayName="ChartContainer";const Hj=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("div",{ref:r,className:we("rounded-lg border bg-background p-2 shadow-sm",t),...a,children:s}));Hj.displayName="ChartTooltip";const Ka=({active:t,payload:s,label:a})=>t&&s&&s.length?e.jsx(Hj,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsx("p",{className:"text-sm font-medium",children:a}),s.map((r,n)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:r.color}}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.name,": ",r.value]})]},n))]})}):null;Ka.displayName="ChartTooltipContent";const jS=$.forwardRef(({className:t,...s},a)=>e.jsx(Ht,{ref:a,className:we("w-4 h-4",t),...s}));jS.displayName="Copy";const Ea=({children:t,open:s,onOpenChange:a})=>{const[r,n]=y.useState(s||!1),i=y.useRef(null);y.useEffect(()=>{s!==void 0&&n(s)},[s]),y.useEffect(()=>{const c=o=>{i.current&&!i.current.contains(o.target)&&(n(!1),a&&a(!1))};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[a]);const l=()=>{const c=!r;n(c),a&&a(c)};return e.jsx("div",{className:"relative",ref:i,children:$.Children.map(t,c=>c.type===ua?$.cloneElement(c,{onClick:l}):c.type===ma?r?c:null:c)})},ua=({children:t,asChild:s,onClick:a,...r})=>s&&$.isValidElement(t)?$.cloneElement(t,{...r,onClick:n=>{t.props.onClick&&t.props.onClick(n),a&&a(n)}}):e.jsx("button",{...r,onClick:a,children:t}),ma=({children:t,align:s="center",className:a="",...r})=>{const n={start:"left-0",center:"left-1/2 transform -translate-x-1/2",end:"right-0"};return e.jsx("div",{className:`absolute top-full mt-1 ${n[s]} z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 ${a}`,...r,children:t})},st=({children:t,onClick:s,disabled:a=!1,className:r="",...n})=>{const i=l=>{!a&&s&&s(l)};return e.jsx("div",{className:`relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors ${a?"pointer-events-none opacity-50":"focus:bg-accent focus:text-accent-foreground hover:bg-accent hover:text-accent-foreground cursor-pointer"} ${r}`,onClick:i,...n,children:t})},qn=({children:t,className:s="",...a})=>e.jsx("div",{className:`px-2 py-1.5 text-sm font-semibold ${s}`,...a,children:t}),Ia=({className:t="",...s})=>e.jsx("div",{className:`-mx-1 my-1 h-px bg-muted ${t}`,...s}),us=y.forwardRef(({className:t,value:s,max:a=100,...r},n)=>e.jsx("div",{ref:n,className:we("relative h-2 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));us.displayName="Progress";const Jm=y.createContext(),At=({open:t,onOpenChange:s,children:a,className:r,...n})=>{const[i,l]=y.useState(t||!1);y.useEffect(()=>{t!==void 0&&l(t)},[t]);const c=o=>{s?s(o):l(o)};return i?e.jsx(Jm.Provider,{value:{isOpen:i,onOpenChange:c},children:e.jsx("div",{className:we("fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",r),onClick:o=>{o.target===o.currentTarget&&c(!1)},...n,children:a})}):null};At.displayName="Dialog";const Ct=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("div",{ref:r,className:we("w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-white rounded-lg shadow-xl",t),onClick:n=>n.stopPropagation(),...a,children:s}));Ct.displayName="DialogContent";const _t=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("div",{ref:r,className:we("flex items-center justify-between p-6 border-b",t),...a,children:s}));_t.displayName="DialogHeader";const Pt=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("h2",{ref:r,className:we("text-xl font-semibold",t),...a,children:s}));Pt.displayName="DialogTitle";const Tt=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("p",{ref:r,className:we("text-sm text-muted-foreground",t),...a,children:s}));Tt.displayName="DialogDescription";const Vj=$.forwardRef(({className:t,onClick:s,...a},r)=>{const n=y.useContext(Jm),i=l=>{s&&s(l),n!=null&&n.onOpenChange&&n.onOpenChange(!1)};return e.jsx(k,{ref:r,variant:"ghost",size:"sm",onClick:i,className:we("h-8 w-8 p-0",t),...a,children:e.jsx(Je,{className:"w-4 h-4"})})});Vj.displayName="DialogClose";const yS=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("div",{ref:r,className:we("p-6",t),...a,children:s}));yS.displayName="DialogBody";const xn=$.forwardRef(({className:t,children:s,...a},r)=>e.jsx("div",{ref:r,className:we("flex justify-end gap-2 p-6 border-t",t),...a,children:s}));xn.displayName="DialogFooter";const Qt=$.forwardRef(({asChild:t=!1,children:s,onClick:a,...r},n)=>{const i=y.useContext(Jm),l=c=>{a&&a(c),i!=null&&i.onOpenChange&&i.onOpenChange(!0)};return t?$.cloneElement(s,{ref:n,onClick:l,...r}):e.jsx("div",{ref:n,onClick:l,...r,children:s})});Qt.displayName="DialogTrigger";const Gj=({children:t})=>t,ka=({className:t="",...s})=>e.jsx("div",{className:`animate-pulse bg-gray-200 rounded ${t}`,...s}),bS=({currentPage:t,totalPages:s,totalItems:a,perPage:r,onPageChange:n,onPerPageChange:i,perPageOptions:l=[10,15,25,50],showPerPageSelector:c=!0,showPageInfo:o=!0,className:d="",size:u="default"})=>{if(s<=1)return null;const m=(t-1)*r+1,h=Math.min(t*r,a),f=(()=>{if(s<=5)return Array.from({length:s},(b,A)=>A+1);const g=Math.floor(5/2);let w=Math.max(1,t-g),S=Math.min(s,w+5-1);return S-w<5-1&&(w=Math.max(1,S-5+1)),Array.from({length:S-w+1},(b,A)=>w+A)})();return e.jsxs("div",{className:`flex items-center justify-between ${d}`,children:[o&&e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",m," to ",h," of ",a," results"]}),c&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Per page:"}),e.jsxs(ie,{value:r.toString(),onValueChange:p=>i(parseInt(p)),children:[e.jsx(le,{className:"w-20",children:e.jsx(ce,{})}),e.jsx(oe,{children:l.map(p=>e.jsx(T,{value:p.toString(),children:p},p))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(k,{variant:"outline",size:u,onClick:()=>n(t-1),disabled:t===1,className:"flex items-center gap-1",children:[e.jsx(ew,{className:"w-4 h-4"}),"Previous"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[t>3&&e.jsxs(e.Fragment,{children:[e.jsx(k,{variant:"outline",size:u,onClick:()=>n(1),className:"w-8 h-8 p-0",children:"1"}),t>4&&e.jsx("span",{className:"px-2 text-gray-500",children:e.jsx(la,{className:"w-4 h-4"})})]}),f.map(p=>e.jsx(k,{variant:p===t?"default":"outline",size:u,onClick:()=>n(p),className:"w-8 h-8 p-0",children:p},p)),t<s-2&&e.jsxs(e.Fragment,{children:[t<s-3&&e.jsx("span",{className:"px-2 text-gray-500",children:e.jsx(la,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:u,onClick:()=>n(s),className:"w-8 h-8 p-0",children:s})]})]}),e.jsxs(k,{variant:"outline",size:u,onClick:()=>n(t+1),disabled:t===s,className:"flex items-center gap-1",children:["Next",e.jsx(tw,{className:"w-4 h-4"})]})]})]})},NS=({filters:t,onFilterChange:s,onClearFilters:a,searchPlaceholder:r="Search...",filterOptions:n=[],showClearButton:i=!0,className:l="",size:c="default"})=>{const o=Object.values(t).some(x=>x!==""&&x!==null&&x!==void 0),d={sm:"p-3 gap-3",default:"p-4 gap-4",lg:"p-6 gap-6"},u={sm:"h-8 text-sm",default:"h-10 text-sm",lg:"h-12 text-base"},m=()=>{const x={};Object.keys(t).forEach(f=>{x[f]=""}),a(x)},h=()=>Object.values(t).filter(x=>x!==""&&x!==null&&x!==void 0).length;return e.jsxs("div",{className:`bg-white border border-gray-200 rounded-lg ${d[c]} ${l}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nn,{className:"w-5 h-5 text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),o&&e.jsxs(W,{variant:"secondary",className:"ml-2",children:[h()," active"]})]}),i&&o&&e.jsxs(k,{variant:"ghost",size:c,onClick:m,className:"text-gray-500 hover:text-gray-700",children:[e.jsx(Je,{className:"w-4 h-4 mr-1"}),"Clear All"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(K,{placeholder:r,value:t.search||"",onChange:x=>s("search",x.target.value),className:`pl-10 ${u[c]}`})]})}),n.map(x=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:x.label}),e.jsxs(ie,{value:t[x.key]||"",onValueChange:f=>s(x.key,f),children:[e.jsx(le,{className:u[c],children:e.jsx(ce,{placeholder:x.placeholder||`All ${x.label}`})}),e.jsxs(oe,{children:[e.jsx(T,{value:"",children:x.placeholder||`All ${x.label}`}),x.options.map(f=>e.jsx(T,{value:f.value,children:f.label},f.value))]})]})]},x.key))]}),o&&e.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-100",children:Object.entries(t).map(([x,f])=>{var S,b;if(!f||f==="")return null;const p=n.find(A=>A.key===x),g=(p==null?void 0:p.label)||x,w=((b=(S=p==null?void 0:p.options)==null?void 0:S.find(A=>A.value===f))==null?void 0:b.label)||f;return e.jsxs(W,{variant:"outline",className:"flex items-center gap-1",children:[g,": ",w,e.jsx("button",{onClick:()=>s(x,""),className:"ml-1 hover:text-red-600",children:e.jsx(Je,{className:"w-3 h-3"})})]},x)})})]})},wS=({data:t=[],columns:s=[],actions:a=[],onRowClick:r,loading:n=!1,emptyMessage:i="No data available",className:l="",size:c="default"})=>{const o={sm:"py-2 px-3",default:"py-3 px-4",lg:"py-4 px-6"},d={sm:"py-2 px-3",default:"py-3 px-4",lg:"py-4 px-6"};if(n)return e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[s.map((m,h)=>e.jsx("th",{className:`text-left font-medium text-gray-700 ${d[c]}`,children:m.header},h)),a.length>0&&e.jsx("th",{className:`text-left font-medium text-gray-700 ${d[c]}`,children:"Actions"})]})}),e.jsx("tbody",{children:[...Array(5)].map((m,h)=>e.jsxs("tr",{className:"border-b",children:[s.map((x,f)=>e.jsx("td",{className:o[c],children:e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"})},f)),a.length>0&&e.jsx("td",{className:o[c],children:e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"})})]},h))})]})})});if(t.length===0)return e.jsx("div",{className:"text-center py-12",children:e.jsx("div",{className:"text-gray-500 text-lg",children:i})});const u=(m,h)=>{var f;const x=h.accessor?h.accessor(m):m[h.key];if(h.render)return h.render(x,m);if(h.type==="badge")return e.jsx(W,{variant:h.badgeVariant||"default",children:x});if(h.type==="status"){const p=((f=h.statusConfig)==null?void 0:f[x])||{};return e.jsxs(W,{variant:p.variant||"default",children:[p.icon&&e.jsx(p.icon,{className:"w-3 h-3 mr-1"}),p.label||x]})}return h.type==="text"?e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"font-medium",children:x}),h.subtitle&&e.jsx("div",{className:"text-sm text-gray-500 truncate",children:h.subtitle(m)})]}):x};return e.jsx("div",{className:`w-full ${l}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b bg-gray-50",children:[s.map((m,h)=>e.jsx("th",{className:`text-left font-medium text-gray-700 ${d[c]} ${m.className||""}`,children:m.header},h)),a.length>0&&e.jsx("th",{className:`text-left font-medium text-gray-700 ${d[c]}`,children:"Actions"})]})}),e.jsx("tbody",{children:t.map((m,h)=>e.jsxs("tr",{className:`border-b hover:bg-gray-50 ${r?"cursor-pointer":""}`,onClick:()=>r&&r(m),children:[s.map((x,f)=>e.jsx("td",{className:`${o[c]} ${x.className||""}`,children:u(m,x)},f)),a.length>0&&e.jsx("td",{className:o[c],children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{align:"end",children:[e.jsx(qn,{children:"Actions"}),a.map((x,f)=>e.jsxs($.Fragment,{children:[x.separator&&e.jsx(Ia,{}),e.jsxs(st,{onClick:p=>{p.stopPropagation(),x.onClick(m)},className:x.className||"",children:[x.icon&&e.jsx(x.icon,{className:"w-4 h-4 mr-2"}),x.label]})]},f))]})]})})]},m.id||h))})]})})})},SS=({isOpen:t,onClose:s,onConfirm:a,title:r="Confirm Action",message:n="Are you sure you want to proceed?",confirmText:i="Confirm",cancelText:l="Cancel",variant:c="warning",loading:o=!1,className:d="",size:u="default"})=>{if(!t)return null;const h={warning:{icon:Qe,iconClass:"text-yellow-600",bgClass:"bg-yellow-100",buttonVariant:"default"},danger:{icon:nt,iconClass:"text-red-600",bgClass:"bg-red-100",buttonVariant:"destructive"},info:{icon:ns,iconClass:"text-blue-600",bgClass:"bg-blue-100",buttonVariant:"default"},success:{icon:Me,iconClass:"text-green-600",bgClass:"bg-green-100",buttonVariant:"default"}}[c],x=h.icon,f={sm:"max-w-sm",default:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"},p=()=>{a()},g=()=>{o||s()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:we("bg-white rounded-lg shadow-xl w-full",f[u],d),children:[e.jsxs("div",{className:"flex items-center gap-3 p-6 border-b border-gray-200",children:[e.jsx("div",{className:we("p-2 rounded-lg",h.bgClass),children:e.jsx(x,{className:we("w-6 h-6",h.iconClass)})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r})]}),e.jsx("div",{className:"p-6",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:n})}),e.jsxs("div",{className:"flex gap-3 justify-end p-6 border-t border-gray-200",children:[e.jsx(k,{variant:"outline",onClick:g,disabled:o,size:"sm",children:l}),e.jsx(k,{variant:h.buttonVariant,onClick:p,disabled:o,size:"sm",className:"min-w-[80px]",children:o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):i})]})]})})},kS=({isOpen:t,onClose:s,onConfirm:a,itemName:r,itemType:n="item",loading:i=!1,className:l=""})=>e.jsx(SS,{isOpen:t,onClose:s,onConfirm:a,title:`Delete ${n}`,message:`Are you sure you want to delete the ${n} "${r}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",variant:"danger",loading:i,className:l}),AS=({title:t,description:s,children:a,className:r="",size:n="default"})=>{const i={sm:"mb-4",default:"mb-6",lg:"mb-8"},l={sm:"text-2xl",default:"text-3xl",lg:"text-4xl"},c={sm:"text-base",default:"text-lg",lg:"text-xl"};return e.jsx("div",{className:we("bg-white border border-gray-200 rounded-lg",i[n],r),children:e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:we("font-bold text-gray-900 mb-2",l[n]),children:t}),s&&e.jsx("p",{className:we("text-gray-600",c[n]),children:s})]}),a&&e.jsx("div",{className:"flex items-center gap-3",children:a})]})})})},CS=({title:t,description:s,primaryAction:a,secondaryActions:r=[],className:n="",size:i="default"})=>e.jsx(AS,{title:t,description:s,className:n,size:i,children:e.jsxs("div",{className:"flex items-center gap-3",children:[r.map((l,c)=>e.jsxs(k,{variant:l.variant||"outline",size:l.size||"sm",onClick:l.onClick,disabled:l.disabled,className:l.className,children:[l.icon&&e.jsx(l.icon,{className:"w-4 h-4 mr-2"}),l.text]},c)),a&&e.jsxs(k,{variant:a.variant||"default",size:a.size||"sm",onClick:a.onClick,disabled:a.disabled,className:we("bg-blue-600 hover:bg-blue-700",a.className),children:[a.icon&&e.jsx(a.icon,{className:"w-4 h-4 mr-2"}),a.text]})]})}),_S=({icon:t,title:s="No data found",description:a="There are no items to display at the moment.",actionText:r,onAction:n,actionVariant:i="default",className:l="",size:c="default"})=>{const o={sm:"py-8",default:"py-12",lg:"py-16"},d={sm:"w-12 h-12",default:"w-16 h-16",lg:"w-20 h-20"},u={sm:"text-lg",default:"text-xl",lg:"text-2xl"},m={sm:"text-sm",default:"text-base",lg:"text-lg"};return e.jsxs("div",{className:we("text-center",o[c],l),children:[t&&e.jsx("div",{className:"mx-auto mb-4 text-gray-400",children:e.jsx(t,{className:we("mx-auto",d[c])})}),e.jsx("h3",{className:we("font-semibold text-gray-900 mb-2",u[c]),children:s}),e.jsx("p",{className:we("text-gray-600 max-w-sm mx-auto",m[c]),children:a}),r&&n&&e.jsx("div",{className:"mt-6",children:e.jsx(k,{variant:i,onClick:n,size:c,children:r})})]})};let aG=class extends $.Component{constructor(a){super(a);hd(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});hd(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(a){return{hasError:!0}}componentDidCatch(a,r){this.setState({error:a,errorInfo:r})}render(){var a;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(Qe,{className:"w-8 h-8 text-red-600"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We encountered an unexpected error. Please try again or contact support if the problem persists."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(k,{onClick:this.handleRetry,variant:"default",className:"flex items-center gap-2",children:[e.jsx(ws,{className:"w-4 h-4"}),"Try Again"]}),e.jsxs(k,{onClick:this.handleGoHome,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(ln,{className:"w-4 h-4"}),"Go Home"]})]}),e.jsxs("div",{className:"mt-6 text-xs text-gray-500",children:["Error ID: ",((a=this.state.error)==null?void 0:a.name)||"Unknown"]})]})}):this.props.children}};const PS=({error:t,variant:s="error",className:a="",size:r="default"})=>{if(!t)return null;const n={error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},i={error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400"},l={sm:"p-3",default:"p-4",lg:"p-6"},c={sm:"w-4 h-4",default:"w-5 h-5",lg:"w-6 h-6"},o=()=>{switch(s){case"error":return e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:we(c[r],i[s]),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"warning":return e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:we(c[r],i[s]),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"info":return e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:we(c[r],i[s]),children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}};return e.jsx("div",{className:we("border rounded-lg",n[s],l[r],a),children:e.jsxs("div",{className:"flex items-center",children:[o(),e.jsx("span",{className:"ml-2",children:t})]})})},li=({children:t,className:s="",size:a="default"})=>{const r={sm:"p-4",default:"p-6",lg:"p-8"};return e.jsx("div",{className:we("bg-white border border-gray-200 rounded-lg",r[a],s),children:t})},TS=(t,s,a=40)=>`https://api.dicebear.com/7.x/avataaars/svg?seed=${encodeURIComponent(s||t)}&size=${a}`,OS=t=>t?t.split(" ").map(s=>s[0]).join("").toUpperCase().slice(0,2):"U",ES=t=>{if(!t)return"bg-gray-500";const s=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-orange-500","bg-teal-500","bg-cyan-500"];let a=0;for(let r=0;r<t.length;r++)a=t.charCodeAt(r)+((a<<5)-a);return s[Math.abs(a)%s.length]},IS={"superadmin@system.com":{name:"Super Administrator",color:"bg-red-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=superadmin&backgroundColor=b91c1c"},"ahmad.rahman@company.com":{name:"Ahmad Rahman",color:"bg-blue-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=ahmad&backgroundColor=3b82f6"},"sari.dewi@company.com":{name:"Sari Dewi",color:"bg-green-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=sari&backgroundColor=10b981"},"budi.santoso@company.com":{name:"Budi Santoso",color:"bg-purple-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=budi&backgroundColor=8b5cf6"},"rina.sari@company.com":{name:"Rina Sari",color:"bg-pink-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=rina&backgroundColor=ec4899"},"john.smith@platform.com":{name:"John Smith",color:"bg-indigo-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=john&backgroundColor=6366f1"},"sarah.johnson@platform.com":{name:"Sarah Johnson",color:"bg-orange-500",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=sarah&backgroundColor=f97316"}},DS=(t,s)=>{const a=IS[t];return a||{name:s||"User",color:ES(s||t||"User"),avatar:TS(s,t)}},fn=({user:t,name:s,email:a,size:r="default",className:n="",showOnlineStatus:i=!1,status:l="offline"})=>{const[c,o]=y.useState(!1),d=(t==null?void 0:t.name)||s||"User",u=(t==null?void 0:t.email)||a||"",m=DS(u,d),h={sm:"w-6 h-6",default:"w-8 h-8",md:"w-10 h-10",lg:"w-12 h-12",xl:"w-16 h-16"},x={sm:"w-1.5 h-1.5",default:"w-2 h-2",md:"w-2.5 h-2.5",lg:"w-3 h-3",xl:"w-4 h-4"},f=g=>{switch(g){case"online":return"bg-green-500";case"busy":return"bg-yellow-500";case"offline":default:return"bg-gray-400"}},p=()=>{o(!0)};return e.jsxs("div",{className:`relative inline-block ${n}`,children:[e.jsxs(Ti,{className:h[r],children:[!c&&(t!=null&&t.avatar||m.avatar)?e.jsx(Xm,{src:(t==null?void 0:t.avatar)||m.avatar,alt:d,onError:p}):null,e.jsx(Oi,{className:`${m.color} text-white font-semibold`,children:OS(d)})]}),i&&e.jsx("div",{className:`absolute -bottom-0.5 -right-0.5 ${x[r]} ${f((t==null?void 0:t.status)||l)} rounded-full border-2 border-white`})]})},Qm=({role:t,isCollapsed:s,onToggle:a,isMobile:r})=>{const{user:n}=Xs(),i=lo(),c=(()=>{switch(t){case"super_admin":return[{id:"dashboard",label:"Dashboard",icon:Zs,href:"/superadmin"},{id:"financials",label:"Financials",icon:_r,href:"/superadmin/financials"},{id:"clients",label:"Client Success & Management",icon:Pe,href:"/superadmin/clients"},{id:"client-health",label:"Client Health Dashboard",icon:sw,href:"/superadmin/client-health"},{id:"onboarding",label:"Onboarding Pipeline",icon:oa,href:"/superadmin/onboarding"},{id:"automation",label:"Automation & Playbooks",icon:Et,href:"/superadmin/automation"},{id:"system",label:"System Administration",icon:Ae,href:"/superadmin/system"},{id:"platform",label:"Platform Engineering & DevOps",icon:Te,href:"/superadmin/platform/configuration"}];case"org_admin":return[{id:"dashboard",label:"Dashboard",icon:ln,href:"/dashboard"},{id:"inbox",label:"Inbox",icon:Le,href:"/dashboard/inbox"},{id:"analytics",label:"Analytics",icon:Zs,href:"/dashboard/analytics"},{id:"knowledge",label:"Knowledge Base",icon:ca,href:"/dashboard/knowledge"},{id:"automations",label:"Automations",icon:Zd,href:"/dashboard/automations"},{id:"settings",label:"Settings",icon:Te,href:"/dashboard/settings"},{id:"profile",label:"Profile Settings",icon:Vt,href:"/dashboard/profile"}];case"agent":return[{id:"dashboard",label:"My Dashboard",icon:ln,href:"/agent"},{id:"inbox",label:"Inbox (Percakapan)",icon:Le,href:"/agent/inbox"},{id:"profile",label:"My Profile & Settings",icon:Vt,href:"/agent/profile"}];default:return[]}})(),o=d=>{const u=d.icon;let m=!1;return d.href==="/superadmin"?m=i.pathname==="/superadmin":d.href==="/dashboard"?m=i.pathname==="/dashboard":d.href==="/agent"?m=i.pathname==="/agent":m=i.pathname.startsWith(d.href),s?e.jsxs("div",{className:"group relative",children:[e.jsx(Ql,{to:d.href,className:`w-full flex items-center justify-center p-3 rounded-lg transition-all ${m?"bg-gradient-to-r from-blue-500/10 to-purple-500/10 text-primary border-l-4 border-primary":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,title:d.label,children:e.jsx(u,{className:"w-5 h-5"})}),e.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:d.label})]},d.id):e.jsxs(Ql,{to:d.href,className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all ${m?"bg-gradient-to-r from-blue-500/10 to-purple-500/10 text-primary border-l-4 border-primary":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[e.jsx(u,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:d.label})]},d.id)};return e.jsxs("div",{className:`relative h-full bg-card border-r border-border transition-all duration-300 ease-in-out ${s?"w-16":"w-64"} ${r?"fixed left-0 top-0 z-50":""}`,children:[e.jsxs("div",{className:`p-6 ${s?"px-2":""}`,children:[e.jsxs("div",{className:`flex items-center gap-3 mb-8 ${s?"justify-center":""}`,children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx($s,{className:"w-6 h-6 text-white"})}),!s&&e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-foreground",children:"ChatBot Pro"}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:t==="super_admin"?"Super Admin":t==="org_admin"?"Organization Admin":t==="agent"?"Agent":t==="customer"?"Customer":t.replace("_"," ")})]})]}),e.jsx("nav",{className:"space-y-2",children:c.map(o)})]}),e.jsx("div",{className:`absolute bottom-0 left-0 right-0 p-4 border-t border-border ${s?"px-2":""}`,children:s?e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"cursor-pointer",children:e.jsx(fn,{user:n,size:"sm"})}),e.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:(n==null?void 0:n.name)||"Admin User"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Click to view profile"})]})})]})}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fn,{user:n,size:"default"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:(n==null?void 0:n.name)||"Admin User"}),e.jsxs(ie,{defaultValue:"online",children:[e.jsx(le,{className:"h-6 text-xs border-0 p-0",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"online",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Online"]})}),e.jsx(T,{value:"busy",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Busy"]})}),e.jsx(T,{value:"offline",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Offline"]})})]})]})]})]})})]})},Zj=y.createContext(),yo=()=>{const t=y.useContext(Zj);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},eh=({children:t})=>{const[s,a]=y.useState(!1),[r,n]=y.useState(!1);y.useEffect(()=>{const o=()=>{const d=window.innerWidth<768;n(d),d&&!s&&a(!0)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[s]);const c={isCollapsed:s,isMobile:r,toggleSidebar:()=>{a(!s)},closeSidebar:()=>{r&&a(!0)}};return e.jsx(Zj.Provider,{value:c,children:t})},th=()=>{const{isCollapsed:t,toggleSidebar:s,isMobile:a}=yo();return e.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-accent transition-colors",title:t?"Expand Sidebar":"Collapse Sidebar",children:e.jsx(aw,{className:"w-5 h-5"})})},sh=({showFullProfile:t=!1})=>{var h;const{user:s,logout:a,isRole:r}=Xs(),[n,i]=y.useState(!1),l=zm();if(lo(),!s)return null;const c=()=>{switch(s.role){case"superadmin":return e.jsx(Ae,{className:"w-4 h-4"});case"organization_admin":return e.jsx(Pe,{className:"w-4 h-4"});case"agent":return e.jsx(da,{className:"w-4 h-4"});default:return e.jsx(Vt,{className:"w-4 h-4"})}},o=()=>{switch(s.role){case"superadmin":return"bg-red-100 text-red-700 border-red-200";case"organization_admin":return"bg-blue-100 text-blue-700 border-blue-200";case"agent":return"bg-green-100 text-green-700 border-green-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},d=()=>{switch(s.role){case"superadmin":return"Super Admin";case"organization_admin":return"Organization Admin";case"agent":return"Agent";default:return s.role}},u=()=>{i(!1),setTimeout(()=>{window.confirm("Apakah Anda yakin ingin keluar dari sistem?")&&a()},100)},m=()=>{switch(i(!1),s.role){case"superadmin":break;case"organization_admin":l("/dashboard/profile");break;case"agent":l("/agent/profile");break}};return t?e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),"User Profile"]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(fn,{user:s,size:"xl"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-muted-foreground",children:s.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c(),e.jsx(W,{className:o(),children:d()})]})]})]}),s.organizationName&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Organization"}),e.jsx("p",{className:"text-muted-foreground",children:s.organizationName})]}),s.specialization&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium",children:"Specialization"}),e.jsx("p",{className:"text-muted-foreground",children:s.specialization})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Permissions"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:(h=s.permissions)==null?void 0:h.map((x,f)=>e.jsx(W,{variant:"outline",className:"text-xs",children:x==="*"?"All Permissions":x},f))})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs(k,{onClick:u,variant:"outline",className:"w-full",children:[e.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Logout"]})})]})]}):e.jsxs(Ea,{open:n,onOpenChange:i,children:[e.jsx(ua,{asChild:!0,children:e.jsxs(k,{variant:"ghost",className:"flex items-center gap-2 h-auto p-2",children:[e.jsx(fn,{user:s,size:"default"}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d()})]}),e.jsx(sj,{className:"w-4 h-4"})]})}),e.jsxs(ma,{align:"end",className:"w-56",children:[e.jsx(qn,{children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.email})]})}),e.jsx(Ia,{}),e.jsx(st,{disabled:!0,children:e.jsxs("div",{className:"flex items-center gap-2",children:[c(),e.jsx("span",{children:d()})]})}),s.organizationName&&e.jsx(st,{disabled:!0,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Organization"}),e.jsx("span",{className:"text-sm",children:s.organizationName})]})}),e.jsx(Ia,{}),e.jsxs(st,{onClick:m,children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs(st,{onClick:u,children:[e.jsx(Yd,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:"Logout"})]})]})]})},MS=()=>{const{user:t}=Xs(),{isCollapsed:s,isMobile:a,closeSidebar:r,toggleSidebar:n}=yo();return e.jsxs("div",{className:"flex h-screen bg-background",children:[e.jsx(Qm,{role:t==null?void 0:t.role,isCollapsed:s,onToggle:n,isMobile:a}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("div",{className:"border-b bg-white p-4 flex justify-between items-center",children:[e.jsx(th,{}),e.jsx(sh,{})]}),e.jsx("div",{className:"container mx-auto p-6",onClick:r,children:e.jsx(hl,{})})]})]})},$S=()=>e.jsx(eh,{children:e.jsx(MS,{})}),RS=()=>{Xs();const{isCollapsed:t,isMobile:s,closeSidebar:a,toggleSidebar:r}=yo();return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(Qm,{role:"super_admin",isCollapsed:t,onToggle:r,isMobile:s}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white shadow-sm border-b px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(th,{}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Super Admin Panel"})]}),e.jsx(sh,{})]})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",onClick:a,children:e.jsx(hl,{})})]})]})},LS=()=>e.jsx(eh,{children:e.jsx(RS,{})}),FS=()=>{Xs();const{isCollapsed:t,isMobile:s,closeSidebar:a,toggleSidebar:r}=yo();return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(Qm,{role:"agent",isCollapsed:t,onToggle:r,isMobile:s}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white shadow-sm border-b px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(th,{}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Agent Dashboard"})]}),e.jsx(sh,{})]})}),e.jsx("main",{className:"flex-1 overflow-auto p-6",onClick:a,children:e.jsx(hl,{})})]})]})},BS=()=>e.jsx(eh,{children:e.jsx(FS,{})}),US=()=>{const[t,s]=y.useState({email:"",password:""}),[a,r]=y.useState(!1),[n,i]=y.useState({}),[l,c]=y.useState(!1),{login:o,isLoading:d}=Xs(),u=zm();console.log("🔐 Login component rendering...");const m=()=>{const g={};return t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(g.email="Please enter a valid email address"):g.email="Email is required",t.password?t.password.length<8&&(g.password="Password must be at least 8 characters"):g.password="Password is required",i(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!m()){r(!0),i({});try{const w={email:t.email,password:t.password},S=await o(w.email,w.password);if(S.success)switch(console.log("✅ Login successful, redirecting..."),console.log("🔄 Login redirect - User role:",S.user.role),S.user.role){case"super_admin":console.log("🔄 Redirecting to /superadmin"),u("/superadmin");break;case"org_admin":console.log("🔄 Redirecting to /dashboard"),u("/dashboard");break;case"agent":console.log("🔄 Redirecting to /agent"),u("/agent");break;case"customer":console.log("🔄 Redirecting to /dashboard"),u("/dashboard");break;default:console.log("🔄 Default redirect - checking permissions"),S.user.permissions&&S.user.permissions.includes("*")?(console.log("🔄 Redirecting to /superadmin (permission fallback)"),u("/superadmin")):(console.log("🔄 Redirecting to /dashboard (default fallback)"),u("/dashboard"))}}catch(w){console.error("❌ Login failed:",w),i({general:w.message||"Login failed. Please try again."})}finally{r(!1)}}},x=g=>{const{name:w,value:S}=g.target;s(b=>({...b,[w]:S})),n[w]&&i(b=>({...b,[w]:""}))},f=g=>{s({email:g.email,password:g.password}),i({})},p=g=>{g.key==="Enter"&&!a&&h(g)};return y.useEffect(()=>{const g=document.getElementById("email");g&&g.focus()},[]),e.jsxs("div",{className:"bg-white py-8 px-4 shadow-xl sm:rounded-lg sm:px-10 border border-gray-200",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your ChatBot Pro account"})]}),e.jsxs("form",{className:"space-y-6",onSubmit:h,noValidate:!0,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:x,onKeyPress:p,className:`
                appearance-none block w-full px-4 py-3 border rounded-lg shadow-sm
                placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                sm:text-sm transition-colors duration-200
                ${n.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"}
              `,placeholder:"Enter your email address",disabled:a||d}),n.email&&e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]}),n.email&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.email]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:l?"text":"password",required:!0,value:t.password,onChange:x,onKeyPress:p,className:`
                appearance-none block w-full px-4 py-3 pr-12 border rounded-lg shadow-sm
                placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
                sm:text-sm transition-colors duration-200
                ${n.password?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300"}
              `,placeholder:"Enter your password",disabled:a||d}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors duration-200",disabled:a||d,children:l?e.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):e.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n.password&&e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n.password]})]}),n.general&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:n.general})})]})}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:a||d,className:`
              w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg
              shadow-sm text-sm font-medium text-white transition-all duration-200
              focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
              disabled:opacity-50 disabled:cursor-not-allowed
              ${a||d?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"}
            `,children:a||d?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"Demo Accounts"})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-3",children:[e.jsx("button",{onClick:()=>f({email:"admin@test.com",password:"Password123!"}),disabled:a||d,className:`
              w-full inline-flex justify-center items-center py-3 px-4 border border-gray-300
              rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700
              transition-all duration-200 hover:bg-gray-50 hover:border-gray-400
              disabled:opacity-50 disabled:cursor-not-allowed
              ${a||d?"cursor-not-allowed":"cursor-pointer"}
            `,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"ORGANIZATION ADMIN"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-mono",children:"admin@test.com"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"font-mono",children:"Password123!"})]})]})}),e.jsx("button",{onClick:()=>f({email:"customer@test.com",password:"Password123!"}),disabled:a||d,className:`
              w-full inline-flex justify-center items-center py-3 px-4 border border-gray-300
              rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700
              transition-all duration-200 hover:bg-gray-50 hover:border-gray-400
              disabled:opacity-50 disabled:cursor-not-allowed
              ${a||d?"cursor-not-allowed":"cursor-pointer"}
            `,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"CUSTOMER"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-mono",children:"customer@test.com"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"font-mono",children:"Password123!"})]})]})}),e.jsx("button",{onClick:()=>f({email:"agent@test.com",password:"Password123!"}),disabled:a||d,className:`
              w-full inline-flex justify-center items-center py-3 px-4 border border-gray-300
              rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700
              transition-all duration-200 hover:bg-gray-50 hover:border-gray-400
              disabled:opacity-50 disabled:cursor-not-allowed
              ${a||d?"cursor-not-allowed":"cursor-pointer"}
            `,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"AGENT"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-mono",children:"agent@test.com"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"font-mono",children:"Password123!"})]})]})}),e.jsx("button",{onClick:()=>f({email:"superadmin@test.com",password:"Password123!"}),disabled:a||d,className:`
              w-full inline-flex justify-center items-center py-3 px-4 border border-gray-300
              rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700
              transition-all duration-200 hover:bg-gray-50 hover:border-gray-400
              disabled:opacity-50 disabled:cursor-not-allowed
              ${a||d?"cursor-not-allowed":"cursor-pointer"}
            `,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:"SUPER ADMIN"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-mono",children:"superadmin@test.com"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"font-mono",children:"Password123!"})]})]})})]})]}),e.jsxs("div",{className:"mt-8 text-center space-y-3",children:[e.jsx(Ms,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500 hover:underline transition-colors duration-200",children:"Forgot your password?"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(Ms,{to:"/auth/register",className:"text-blue-600 hover:text-blue-500 hover:underline font-medium transition-colors duration-200",children:"Sign up"})]})]})]})},zS=()=>{const t=zm(),[s,a]=y.useState({name:"",email:"",password:"",confirmPassword:"",organization:"",role:"manager"}),[r,n]=y.useState(!1),[i,l]=y.useState(!1),[c,o]=y.useState(!1),[d,u]=y.useState({}),m=async h=>{h.preventDefault(),o(!0),u({});const x={};if(s.name.trim()||(x.name="Name is required"),s.email.trim()||(x.email="Email is required"),s.password||(x.password="Password is required"),s.password!==s.confirmPassword&&(x.confirmPassword="Passwords do not match"),s.password.length<6&&(x.password="Password must be at least 6 characters"),Object.keys(x).length>0){u(x),o(!1);return}try{console.log("Registering user:",s),await new Promise(f=>setTimeout(f,1e3)),t("/auth/login",{state:{message:"Registration successful! Please log in."}})}catch{u({general:"Registration failed. Please try again."})}finally{o(!1)}};return e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"text-center",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Create Account"}),e.jsx(Q,{children:"Join our chatbot platform and start managing your customer support"})]}),e.jsx(B,{children:e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d.general&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:d.general}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx(Vt,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"name",type:"text",placeholder:"Enter your full name",value:s.name,onChange:h=>a(x=>({...x,name:h.target.value})),className:`pl-10 ${d.name?"border-red-500":""}`})]}),d.name&&e.jsx("p",{className:"text-sm text-red-600",children:d.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"email",type:"email",placeholder:"Enter your email",value:s.email,onChange:h=>a(x=>({...x,email:h.target.value})),className:`pl-10 ${d.email?"border-red-500":""}`})]}),d.email&&e.jsx("p",{className:"text-sm text-red-600",children:d.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"organization",children:"Organization"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xd,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"organization",type:"text",placeholder:"Enter your organization name",value:s.organization,onChange:h=>a(x=>({...x,organization:h.target.value})),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ja,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"password",type:r?"text":"password",placeholder:"Create a password",value:s.password,onChange:h=>a(x=>({...x,password:h.target.value})),className:`pl-10 pr-10 ${d.password?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:r?e.jsx(It,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})})]}),d.password&&e.jsx("p",{className:"text-sm text-red-600",children:d.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ja,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"confirmPassword",type:i?"text":"password",placeholder:"Confirm your password",value:s.confirmPassword,onChange:h=>a(x=>({...x,confirmPassword:h.target.value})),className:`pl-10 pr-10 ${d.confirmPassword?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:i?e.jsx(It,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})})]}),d.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600",children:d.confirmPassword})]}),e.jsx(k,{type:"submit",className:"w-full",disabled:c,children:c?"Creating Account...":"Create Account"}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(Ms,{to:"/auth/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})]})})]})},WS=()=>{const[t,s]=y.useState(""),[a,r]=y.useState(!1),[n,i]=y.useState(!1),[l,c]=y.useState(""),o=async d=>{d.preventDefault(),r(!0),c("");try{console.log("Sending reset email to:",t),await new Promise(u=>setTimeout(u,1e3)),i(!0)}catch{c("Failed to send reset email. Please try again.")}finally{r(!1)}};return n?e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"text-center",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Check Your Email"}),e.jsx(Q,{children:"We've sent a password reset link to your email address"})]}),e.jsxs(B,{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-6",children:"If you don't see the email, check your spam folder."}),e.jsx(k,{asChild:!0,className:"w-full",children:e.jsxs(Ms,{to:"/auth/login",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back to Login"]})})]})]}):e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"text-center",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Forgot Password"}),e.jsx(Q,{children:"Enter your email address and we'll send you a reset link"})]}),e.jsx(B,{children:e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[l&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:l}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:d=>s(d.target.value),className:"pl-10",required:!0})]})]}),e.jsx(k,{type:"submit",className:"w-full",disabled:a,children:a?"Sending...":"Send Reset Link"}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(Ms,{to:"/auth/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})]})})]})},qS=()=>{const[t]=GN(),[s,a]=y.useState({password:"",confirmPassword:""}),[r,n]=y.useState(!1),[i,l]=y.useState(!1),[c,o]=y.useState(!1),[d,u]=y.useState(!1),[m,h]=y.useState({}),x=t.get("token"),f=async p=>{p.preventDefault(),o(!0),h({});const g={};if(s.password||(g.password="Password is required"),s.password.length<6&&(g.password="Password must be at least 6 characters"),s.password!==s.confirmPassword&&(g.confirmPassword="Passwords do not match"),Object.keys(g).length>0){h(g),o(!1);return}try{console.log("Resetting password with token:",x),await new Promise(w=>setTimeout(w,1e3)),u(!0)}catch{h({general:"Failed to reset password. Please try again."})}finally{o(!1)}};return d?e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsx(V,{className:"text-2xl font-bold",children:"Password Reset Successfully"}),e.jsx(Q,{children:"Your password has been updated. You can now sign in with your new password."})]}),e.jsx(B,{className:"text-center",children:e.jsx(k,{asChild:!0,className:"w-full",children:e.jsx(Ms,{to:"/auth/login",children:"Sign In"})})})]}):x?e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"text-center",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Reset Password"}),e.jsx(Q,{children:"Enter your new password below"})]}),e.jsx(B,{children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[m.general&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:m.general}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ja,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"password",type:r?"text":"password",placeholder:"Enter new password",value:s.password,onChange:p=>a(g=>({...g,password:p.target.value})),className:`pl-10 pr-10 ${m.password?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>n(!r),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:r?e.jsx(It,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})})]}),m.password&&e.jsx("p",{className:"text-sm text-red-600",children:m.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ja,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"confirmPassword",type:i?"text":"password",placeholder:"Confirm new password",value:s.confirmPassword,onChange:p=>a(g=>({...g,confirmPassword:p.target.value})),className:`pl-10 pr-10 ${m.confirmPassword?"border-red-500":""}`}),e.jsx("button",{type:"button",onClick:()=>l(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:i?e.jsx(It,{className:"h-4 w-4"}):e.jsx(ze,{className:"h-4 w-4"})})]}),m.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600",children:m.confirmPassword})]}),e.jsx(k,{type:"submit",className:"w-full",disabled:c,children:c?"Resetting...":"Reset Password"}),e.jsxs("div",{className:"text-center text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(Ms,{to:"/auth/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})]})})]}):e.jsxs(F,{className:"w-full max-w-md",children:[e.jsxs(H,{className:"text-center",children:[e.jsx(V,{className:"text-2xl font-bold",children:"Invalid Reset Link"}),e.jsx(Q,{children:"This password reset link is invalid or has expired."})]}),e.jsx(B,{className:"text-center",children:e.jsx(k,{asChild:!0,className:"w-full",children:e.jsx(Ms,{to:"/auth/forgot-password",children:"Request New Reset Link"})})})]})};var KS=Array.isArray,vs=KS,HS=typeof Cl=="object"&&Cl&&Cl.Object===Object&&Cl,Yj=HS,VS=Yj,GS=typeof self=="object"&&self&&self.Object===Object&&self,ZS=VS||GS||Function("return this")(),xa=ZS,YS=xa,XS=YS.Symbol,vl=XS,$x=vl,Xj=Object.prototype,JS=Xj.hasOwnProperty,QS=Xj.toString,ci=$x?$x.toStringTag:void 0;function ek(t){var s=JS.call(t,ci),a=t[ci];try{t[ci]=void 0;var r=!0}catch{}var n=QS.call(t);return r&&(s?t[ci]=a:delete t[ci]),n}var tk=ek,sk=Object.prototype,ak=sk.toString;function rk(t){return ak.call(t)}var nk=rk,Rx=vl,ik=tk,lk=nk,ck="[object Null]",ok="[object Undefined]",Lx=Rx?Rx.toStringTag:void 0;function dk(t){return t==null?t===void 0?ok:ck:Lx&&Lx in Object(t)?ik(t):lk(t)}var La=dk;function uk(t){return t!=null&&typeof t=="object"}var Fa=uk,mk=La,hk=Fa,xk="[object Symbol]";function fk(t){return typeof t=="symbol"||hk(t)&&mk(t)==xk}var Kn=fk,pk=vs,gk=Kn,vk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jk=/^\w*$/;function yk(t,s){if(pk(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||gk(t)?!0:jk.test(t)||!vk.test(t)||s!=null&&t in Object(s)}var ah=yk;function bk(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var sr=bk;const Hn=ht(sr);var Nk=La,wk=sr,Sk="[object AsyncFunction]",kk="[object Function]",Ak="[object GeneratorFunction]",Ck="[object Proxy]";function _k(t){if(!wk(t))return!1;var s=Nk(t);return s==kk||s==Ak||s==Sk||s==Ck}var rh=_k;const De=ht(rh);var Pk=xa,Tk=Pk["__core-js_shared__"],Ok=Tk,jd=Ok,Fx=function(){var t=/[^.]+$/.exec(jd&&jd.keys&&jd.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ek(t){return!!Fx&&Fx in t}var Ik=Ek,Dk=Function.prototype,Mk=Dk.toString;function $k(t){if(t!=null){try{return Mk.call(t)}catch{}try{return t+""}catch{}}return""}var Jj=$k,Rk=rh,Lk=Ik,Fk=sr,Bk=Jj,Uk=/[\\^$.*+?()[\]{}|]/g,zk=/^\[object .+?Constructor\]$/,Wk=Function.prototype,qk=Object.prototype,Kk=Wk.toString,Hk=qk.hasOwnProperty,Vk=RegExp("^"+Kk.call(Hk).replace(Uk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gk(t){if(!Fk(t)||Lk(t))return!1;var s=Rk(t)?Vk:zk;return s.test(Bk(t))}var Zk=Gk;function Yk(t,s){return t==null?void 0:t[s]}var Xk=Yk,Jk=Zk,Qk=Xk;function eA(t,s){var a=Qk(t,s);return Jk(a)?a:void 0}var Fr=eA,tA=Fr,sA=tA(Object,"create"),bo=sA,Bx=bo;function aA(){this.__data__=Bx?Bx(null):{},this.size=0}var rA=aA;function nA(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var iA=nA,lA=bo,cA="__lodash_hash_undefined__",oA=Object.prototype,dA=oA.hasOwnProperty;function uA(t){var s=this.__data__;if(lA){var a=s[t];return a===cA?void 0:a}return dA.call(s,t)?s[t]:void 0}var mA=uA,hA=bo,xA=Object.prototype,fA=xA.hasOwnProperty;function pA(t){var s=this.__data__;return hA?s[t]!==void 0:fA.call(s,t)}var gA=pA,vA=bo,jA="__lodash_hash_undefined__";function yA(t,s){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=vA&&s===void 0?jA:s,this}var bA=yA,NA=rA,wA=iA,SA=mA,kA=gA,AA=bA;function Vn(t){var s=-1,a=t==null?0:t.length;for(this.clear();++s<a;){var r=t[s];this.set(r[0],r[1])}}Vn.prototype.clear=NA;Vn.prototype.delete=wA;Vn.prototype.get=SA;Vn.prototype.has=kA;Vn.prototype.set=AA;var CA=Vn;function _A(){this.__data__=[],this.size=0}var PA=_A;function TA(t,s){return t===s||t!==t&&s!==s}var nh=TA,OA=nh;function EA(t,s){for(var a=t.length;a--;)if(OA(t[a][0],s))return a;return-1}var No=EA,IA=No,DA=Array.prototype,MA=DA.splice;function $A(t){var s=this.__data__,a=IA(s,t);if(a<0)return!1;var r=s.length-1;return a==r?s.pop():MA.call(s,a,1),--this.size,!0}var RA=$A,LA=No;function FA(t){var s=this.__data__,a=LA(s,t);return a<0?void 0:s[a][1]}var BA=FA,UA=No;function zA(t){return UA(this.__data__,t)>-1}var WA=zA,qA=No;function KA(t,s){var a=this.__data__,r=qA(a,t);return r<0?(++this.size,a.push([t,s])):a[r][1]=s,this}var HA=KA,VA=PA,GA=RA,ZA=BA,YA=WA,XA=HA;function Gn(t){var s=-1,a=t==null?0:t.length;for(this.clear();++s<a;){var r=t[s];this.set(r[0],r[1])}}Gn.prototype.clear=VA;Gn.prototype.delete=GA;Gn.prototype.get=ZA;Gn.prototype.has=YA;Gn.prototype.set=XA;var wo=Gn,JA=Fr,QA=xa,eC=JA(QA,"Map"),ih=eC,Ux=CA,tC=wo,sC=ih;function aC(){this.size=0,this.__data__={hash:new Ux,map:new(sC||tC),string:new Ux}}var rC=aC;function nC(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}var iC=nC,lC=iC;function cC(t,s){var a=t.__data__;return lC(s)?a[typeof s=="string"?"string":"hash"]:a.map}var So=cC,oC=So;function dC(t){var s=oC(this,t).delete(t);return this.size-=s?1:0,s}var uC=dC,mC=So;function hC(t){return mC(this,t).get(t)}var xC=hC,fC=So;function pC(t){return fC(this,t).has(t)}var gC=pC,vC=So;function jC(t,s){var a=vC(this,t),r=a.size;return a.set(t,s),this.size+=a.size==r?0:1,this}var yC=jC,bC=rC,NC=uC,wC=xC,SC=gC,kC=yC;function Zn(t){var s=-1,a=t==null?0:t.length;for(this.clear();++s<a;){var r=t[s];this.set(r[0],r[1])}}Zn.prototype.clear=bC;Zn.prototype.delete=NC;Zn.prototype.get=wC;Zn.prototype.has=SC;Zn.prototype.set=kC;var lh=Zn,Qj=lh,AC="Expected a function";function ch(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(AC);var a=function(){var r=arguments,n=s?s.apply(this,r):r[0],i=a.cache;if(i.has(n))return i.get(n);var l=t.apply(this,r);return a.cache=i.set(n,l)||i,l};return a.cache=new(ch.Cache||Qj),a}ch.Cache=Qj;var e0=ch;const CC=ht(e0);var _C=e0,PC=500;function TC(t){var s=_C(t,function(r){return a.size===PC&&a.clear(),r}),a=s.cache;return s}var OC=TC,EC=OC,IC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DC=/\\(\\)?/g,MC=EC(function(t){var s=[];return t.charCodeAt(0)===46&&s.push(""),t.replace(IC,function(a,r,n,i){s.push(n?i.replace(DC,"$1"):r||a)}),s}),$C=MC;function RC(t,s){for(var a=-1,r=t==null?0:t.length,n=Array(r);++a<r;)n[a]=s(t[a],a,t);return n}var oh=RC,zx=vl,LC=oh,FC=vs,BC=Kn,UC=1/0,Wx=zx?zx.prototype:void 0,qx=Wx?Wx.toString:void 0;function t0(t){if(typeof t=="string")return t;if(FC(t))return LC(t,t0)+"";if(BC(t))return qx?qx.call(t):"";var s=t+"";return s=="0"&&1/t==-UC?"-0":s}var zC=t0,WC=zC;function qC(t){return t==null?"":WC(t)}var s0=qC,KC=vs,HC=ah,VC=$C,GC=s0;function ZC(t,s){return KC(t)?t:HC(t,s)?[t]:VC(GC(t))}var a0=ZC,YC=Kn,XC=1/0;function JC(t){if(typeof t=="string"||YC(t))return t;var s=t+"";return s=="0"&&1/t==-XC?"-0":s}var ko=JC,QC=a0,e4=ko;function t4(t,s){s=QC(s,t);for(var a=0,r=s.length;t!=null&&a<r;)t=t[e4(s[a++])];return a&&a==r?t:void 0}var dh=t4,s4=dh;function a4(t,s,a){var r=t==null?void 0:s4(t,s);return r===void 0?a:r}var r0=a4;const ks=ht(r0);function r4(t){return t==null}var n4=r4;const Fe=ht(n4);var i4=La,l4=vs,c4=Fa,o4="[object String]";function d4(t){return typeof t=="string"||!l4(t)&&c4(t)&&i4(t)==o4}var u4=d4;const Er=ht(u4);var n0={exports:{}},ct={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uh=Symbol.for("react.element"),mh=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),Co=Symbol.for("react.strict_mode"),_o=Symbol.for("react.profiler"),Po=Symbol.for("react.provider"),To=Symbol.for("react.context"),m4=Symbol.for("react.server_context"),Oo=Symbol.for("react.forward_ref"),Eo=Symbol.for("react.suspense"),Io=Symbol.for("react.suspense_list"),Do=Symbol.for("react.memo"),Mo=Symbol.for("react.lazy"),h4=Symbol.for("react.offscreen"),i0;i0=Symbol.for("react.module.reference");function Ls(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case uh:switch(t=t.type,t){case Ao:case _o:case Co:case Eo:case Io:return t;default:switch(t=t&&t.$$typeof,t){case m4:case To:case Oo:case Mo:case Do:case Po:return t;default:return s}}case mh:return s}}}ct.ContextConsumer=To;ct.ContextProvider=Po;ct.Element=uh;ct.ForwardRef=Oo;ct.Fragment=Ao;ct.Lazy=Mo;ct.Memo=Do;ct.Portal=mh;ct.Profiler=_o;ct.StrictMode=Co;ct.Suspense=Eo;ct.SuspenseList=Io;ct.isAsyncMode=function(){return!1};ct.isConcurrentMode=function(){return!1};ct.isContextConsumer=function(t){return Ls(t)===To};ct.isContextProvider=function(t){return Ls(t)===Po};ct.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===uh};ct.isForwardRef=function(t){return Ls(t)===Oo};ct.isFragment=function(t){return Ls(t)===Ao};ct.isLazy=function(t){return Ls(t)===Mo};ct.isMemo=function(t){return Ls(t)===Do};ct.isPortal=function(t){return Ls(t)===mh};ct.isProfiler=function(t){return Ls(t)===_o};ct.isStrictMode=function(t){return Ls(t)===Co};ct.isSuspense=function(t){return Ls(t)===Eo};ct.isSuspenseList=function(t){return Ls(t)===Io};ct.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ao||t===_o||t===Co||t===Eo||t===Io||t===h4||typeof t=="object"&&t!==null&&(t.$$typeof===Mo||t.$$typeof===Do||t.$$typeof===Po||t.$$typeof===To||t.$$typeof===Oo||t.$$typeof===i0||t.getModuleId!==void 0)};ct.typeOf=Ls;n0.exports=ct;var x4=n0.exports,f4=La,p4=Fa,g4="[object Number]";function v4(t){return typeof t=="number"||p4(t)&&f4(t)==g4}var l0=v4;const j4=ht(l0);var y4=l0;function b4(t){return y4(t)&&t!=+t}var N4=b4;const Yn=ht(N4);var ms=function(s){return s===0?0:s>0?1:-1},vr=function(s){return Er(s)&&s.indexOf("%")===s.length-1},xe=function(s){return j4(s)&&!Yn(s)},w4=function(s){return Fe(s)},zt=function(s){return xe(s)||Er(s)},S4=0,Br=function(s){var a=++S4;return"".concat(s||"").concat(a)},hs=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(s)&&!Er(s))return r;var i;if(vr(s)){var l=s.indexOf("%");i=a*parseFloat(s.slice(0,l))/100}else i=+s;return Yn(i)&&(i=r),n&&i>a&&(i=a),i},Ha=function(s){if(!s)return null;var a=Object.keys(s);return a&&a.length?s[a[0]]:null},k4=function(s){if(!Array.isArray(s))return!1;for(var a=s.length,r={},n=0;n<a;n++)if(!r[s[n]])r[s[n]]=!0;else return!0;return!1},Ut=function(s,a){return xe(s)&&xe(a)?function(r){return s+r*(a-s)}:function(){return a}};function nc(t,s,a){return!t||!t.length?null:t.find(function(r){return r&&(typeof s=="function"?s(r):ks(r,s))===a})}var A4=function(s,a){return xe(s)&&xe(a)?s-a:Er(s)&&Er(a)?s.localeCompare(a):s instanceof Date&&a instanceof Date?s.getTime()-a.getTime():String(s).localeCompare(String(a))};function sn(t,s){for(var a in t)if({}.hasOwnProperty.call(t,a)&&(!{}.hasOwnProperty.call(s,a)||t[a]!==s[a]))return!1;for(var r in s)if({}.hasOwnProperty.call(s,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function hu(t){"@babel/helpers - typeof";return hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},hu(t)}var C4=["viewBox","children"],_4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Kx=["points","pathLength"],yd={svg:C4,polygon:Kx,polyline:Kx},hh=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ic=function(s,a){if(!s||typeof s=="function"||typeof s=="boolean")return null;var r=s;if(y.isValidElement(s)&&(r=s.props),!Hn(r))return null;var n={};return Object.keys(r).forEach(function(i){hh.includes(i)&&(n[i]=a||function(l){return r[i](r,l)})}),n},P4=function(s,a,r){return function(n){return s(a,r,n),null}},Ir=function(s,a,r){if(!Hn(s)||hu(s)!=="object")return null;var n=null;return Object.keys(s).forEach(function(i){var l=s[i];hh.includes(i)&&typeof l=="function"&&(n||(n={}),n[i]=P4(l,a,r))}),n},T4=["children"],O4=["children"];function Hx(t,s){if(t==null)return{};var a=E4(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function E4(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function xu(t){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},xu(t)}var Vx={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Aa=function(s){return typeof s=="string"?s:s?s.displayName||s.name||"Component":""},Gx=null,bd=null,xh=function t(s){if(s===Gx&&Array.isArray(bd))return bd;var a=[];return y.Children.forEach(s,function(r){Fe(r)||(x4.isFragment(r)?a=a.concat(t(r.props.children)):a.push(r))}),bd=a,Gx=s,a};function As(t,s){var a=[],r=[];return Array.isArray(s)?r=s.map(function(n){return Aa(n)}):r=[Aa(s)],xh(t).forEach(function(n){var i=ks(n,"type.displayName")||ks(n,"type.name");r.indexOf(i)!==-1&&a.push(n)}),a}function bs(t,s){var a=As(t,s);return a&&a[0]}var Zx=function(s){if(!s||!s.props)return!1;var a=s.props,r=a.width,n=a.height;return!(!xe(r)||r<=0||!xe(n)||n<=0)},I4=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],D4=function(s){return s&&s.type&&Er(s.type)&&I4.indexOf(s.type)>=0},c0=function(s){return s&&xu(s)==="object"&&"clipDot"in s},M4=function(s,a,r,n){var i,l=(i=yd==null?void 0:yd[n])!==null&&i!==void 0?i:[];return a.startsWith("data-")||!De(s)&&(n&&l.includes(a)||_4.includes(a))||r&&hh.includes(a)},Ce=function(s,a,r){if(!s||typeof s=="function"||typeof s=="boolean")return null;var n=s;if(y.isValidElement(s)&&(n=s.props),!Hn(n))return null;var i={};return Object.keys(n).forEach(function(l){var c;M4((c=n)===null||c===void 0?void 0:c[l],l,a,r)&&(i[l]=n[l])}),i},fu=function t(s,a){if(s===a)return!0;var r=y.Children.count(s);if(r!==y.Children.count(a))return!1;if(r===0)return!0;if(r===1)return Yx(Array.isArray(s)?s[0]:s,Array.isArray(a)?a[0]:a);for(var n=0;n<r;n++){var i=s[n],l=a[n];if(Array.isArray(i)||Array.isArray(l)){if(!t(i,l))return!1}else if(!Yx(i,l))return!1}return!0},Yx=function(s,a){if(Fe(s)&&Fe(a))return!0;if(!Fe(s)&&!Fe(a)){var r=s.props||{},n=r.children,i=Hx(r,T4),l=a.props||{},c=l.children,o=Hx(l,O4);return n&&c?sn(i,o)&&fu(n,c):!n&&!c?sn(i,o):!1}return!1},Xx=function(s,a){var r=[],n={};return xh(s).forEach(function(i,l){if(D4(i))r.push(i);else if(i){var c=Aa(i.type),o=a[c]||{},d=o.handler,u=o.once;if(d&&(!u||!n[c])){var m=d(i,c,l);r.push(m),n[c]=!0}}}),r},$4=function(s){var a=s&&s.type;return a&&Vx[a]?Vx[a]:null},R4=function(s,a){return xh(a).indexOf(s)},L4=["children","width","height","viewBox","className","style","title","desc"];function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},pu.apply(this,arguments)}function F4(t,s){if(t==null)return{};var a=B4(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function B4(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function gu(t){var s=t.children,a=t.width,r=t.height,n=t.viewBox,i=t.className,l=t.style,c=t.title,o=t.desc,d=F4(t,L4),u=n||{width:a,height:r,x:0,y:0},m=We("recharts-surface",i);return $.createElement("svg",pu({},Ce(d,!0,"svg"),{className:m,width:a,height:r,style:l,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),$.createElement("title",null,c),$.createElement("desc",null,o),s)}var U4=["children","className"];function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},vu.apply(this,arguments)}function z4(t,s){if(t==null)return{};var a=W4(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function W4(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Ze=$.forwardRef(function(t,s){var a=t.children,r=t.className,n=z4(t,U4),i=We("recharts-layer",r);return $.createElement("g",vu({className:i},Ce(n,!0),{ref:s}),a)}),Vs=function(s,a){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i]};function q4(t,s,a){var r=-1,n=t.length;s<0&&(s=-s>n?0:n+s),a=a>n?n:a,a<0&&(a+=n),n=s>a?0:a-s>>>0,s>>>=0;for(var i=Array(n);++r<n;)i[r]=t[r+s];return i}var K4=q4,H4=K4;function V4(t,s,a){var r=t.length;return a=a===void 0?r:a,!s&&a>=r?t:H4(t,s,a)}var G4=V4,Z4="\\ud800-\\udfff",Y4="\\u0300-\\u036f",X4="\\ufe20-\\ufe2f",J4="\\u20d0-\\u20ff",Q4=Y4+X4+J4,e_="\\ufe0e\\ufe0f",t_="\\u200d",s_=RegExp("["+t_+Z4+Q4+e_+"]");function a_(t){return s_.test(t)}var o0=a_;function r_(t){return t.split("")}var n_=r_,d0="\\ud800-\\udfff",i_="\\u0300-\\u036f",l_="\\ufe20-\\ufe2f",c_="\\u20d0-\\u20ff",o_=i_+l_+c_,d_="\\ufe0e\\ufe0f",u_="["+d0+"]",ju="["+o_+"]",yu="\\ud83c[\\udffb-\\udfff]",m_="(?:"+ju+"|"+yu+")",u0="[^"+d0+"]",m0="(?:\\ud83c[\\udde6-\\uddff]){2}",h0="[\\ud800-\\udbff][\\udc00-\\udfff]",h_="\\u200d",x0=m_+"?",f0="["+d_+"]?",x_="(?:"+h_+"(?:"+[u0,m0,h0].join("|")+")"+f0+x0+")*",f_=f0+x0+x_,p_="(?:"+[u0+ju+"?",ju,m0,h0,u_].join("|")+")",g_=RegExp(yu+"(?="+yu+")|"+p_+f_,"g");function v_(t){return t.match(g_)||[]}var j_=v_,y_=n_,b_=o0,N_=j_;function w_(t){return b_(t)?N_(t):y_(t)}var S_=w_,k_=G4,A_=o0,C_=S_,__=s0;function P_(t){return function(s){s=__(s);var a=A_(s)?C_(s):void 0,r=a?a[0]:s.charAt(0),n=a?k_(a,1).join(""):s.slice(1);return r[t]()+n}}var T_=P_,O_=T_,E_=O_("toUpperCase"),I_=E_;const $o=ht(I_);function gt(t){return function(){return t}}const p0=Math.cos,lc=Math.sin,Js=Math.sqrt,cc=Math.PI,Ro=2*cc,bu=Math.PI,Nu=2*bu,mr=1e-6,D_=Nu-mr;function g0(t){this._+=t[0];for(let s=1,a=t.length;s<a;++s)this._+=arguments[s]+t[s]}function M_(t){let s=Math.floor(t);if(!(s>=0))throw new Error(`invalid digits: ${t}`);if(s>15)return g0;const a=10**s;return function(r){this._+=r[0];for(let n=1,i=r.length;n<i;++n)this._+=Math.round(arguments[n]*a)/a+r[n]}}class $_{constructor(s){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=s==null?g0:M_(s)}moveTo(s,a){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(s,a){this._append`L${this._x1=+s},${this._y1=+a}`}quadraticCurveTo(s,a,r,n){this._append`Q${+s},${+a},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(s,a,r,n,i,l){this._append`C${+s},${+a},${+r},${+n},${this._x1=+i},${this._y1=+l}`}arcTo(s,a,r,n,i){if(s=+s,a=+a,r=+r,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,c=this._y1,o=r-s,d=n-a,u=l-s,m=c-a,h=u*u+m*m;if(this._x1===null)this._append`M${this._x1=s},${this._y1=a}`;else if(h>mr)if(!(Math.abs(m*o-d*u)>mr)||!i)this._append`L${this._x1=s},${this._y1=a}`;else{let x=r-l,f=n-c,p=o*o+d*d,g=x*x+f*f,w=Math.sqrt(p),S=Math.sqrt(h),b=i*Math.tan((bu-Math.acos((p+h-g)/(2*w*S)))/2),A=b/S,v=b/w;Math.abs(A-1)>mr&&this._append`L${s+A*u},${a+A*m}`,this._append`A${i},${i},0,0,${+(m*x>u*f)},${this._x1=s+v*o},${this._y1=a+v*d}`}}arc(s,a,r,n,i,l){if(s=+s,a=+a,r=+r,l=!!l,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(n),o=r*Math.sin(n),d=s+c,u=a+o,m=1^l,h=l?n-i:i-n;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>mr||Math.abs(this._y1-u)>mr)&&this._append`L${d},${u}`,r&&(h<0&&(h=h%Nu+Nu),h>D_?this._append`A${r},${r},0,1,${m},${s-c},${a-o}A${r},${r},0,1,${m},${this._x1=d},${this._y1=u}`:h>mr&&this._append`A${r},${r},0,${+(h>=bu)},${m},${this._x1=s+r*Math.cos(i)},${this._y1=a+r*Math.sin(i)}`)}rect(s,a,r,n){this._append`M${this._x0=this._x1=+s},${this._y0=this._y1=+a}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function fh(t){let s=3;return t.digits=function(a){if(!arguments.length)return s;if(a==null)s=null;else{const r=Math.floor(a);if(!(r>=0))throw new RangeError(`invalid digits: ${a}`);s=r}return t},()=>new $_(s)}function ph(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function v0(t){this._context=t}v0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s);break}}};function Lo(t){return new v0(t)}function j0(t){return t[0]}function y0(t){return t[1]}function b0(t,s){var a=gt(!0),r=null,n=Lo,i=null,l=fh(c);t=typeof t=="function"?t:t===void 0?j0:gt(t),s=typeof s=="function"?s:s===void 0?y0:gt(s);function c(o){var d,u=(o=ph(o)).length,m,h=!1,x;for(r==null&&(i=n(x=l())),d=0;d<=u;++d)!(d<u&&a(m=o[d],d,o))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+t(m,d,o),+s(m,d,o));if(x)return i=null,x+""||null}return c.x=function(o){return arguments.length?(t=typeof o=="function"?o:gt(+o),c):t},c.y=function(o){return arguments.length?(s=typeof o=="function"?o:gt(+o),c):s},c.defined=function(o){return arguments.length?(a=typeof o=="function"?o:gt(!!o),c):a},c.curve=function(o){return arguments.length?(n=o,r!=null&&(i=n(r)),c):n},c.context=function(o){return arguments.length?(o==null?r=i=null:i=n(r=o),c):r},c}function Pl(t,s,a){var r=null,n=gt(!0),i=null,l=Lo,c=null,o=fh(d);t=typeof t=="function"?t:t===void 0?j0:gt(+t),s=typeof s=="function"?s:gt(s===void 0?0:+s),a=typeof a=="function"?a:a===void 0?y0:gt(+a);function d(m){var h,x,f,p=(m=ph(m)).length,g,w=!1,S,b=new Array(p),A=new Array(p);for(i==null&&(c=l(S=o())),h=0;h<=p;++h){if(!(h<p&&n(g=m[h],h,m))===w)if(w=!w)x=h,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=h-1;f>=x;--f)c.point(b[f],A[f]);c.lineEnd(),c.areaEnd()}w&&(b[h]=+t(g,h,m),A[h]=+s(g,h,m),c.point(r?+r(g,h,m):b[h],a?+a(g,h,m):A[h]))}if(S)return c=null,S+""||null}function u(){return b0().defined(n).curve(l).context(i)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:gt(+m),r=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:gt(+m),d):t},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:gt(+m),d):r},d.y=function(m){return arguments.length?(s=typeof m=="function"?m:gt(+m),a=null,d):s},d.y0=function(m){return arguments.length?(s=typeof m=="function"?m:gt(+m),d):s},d.y1=function(m){return arguments.length?(a=m==null?null:typeof m=="function"?m:gt(+m),d):a},d.lineX0=d.lineY0=function(){return u().x(t).y(s)},d.lineY1=function(){return u().x(t).y(a)},d.lineX1=function(){return u().x(r).y(s)},d.defined=function(m){return arguments.length?(n=typeof m=="function"?m:gt(!!m),d):n},d.curve=function(m){return arguments.length?(l=m,i!=null&&(c=l(i)),d):l},d.context=function(m){return arguments.length?(m==null?i=c=null:c=l(i=m),d):i},d}class N0{constructor(s,a){this._context=s,this._x=a}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,a){switch(s=+s,a=+a,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,a):this._context.moveTo(s,a);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,a,s,a):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+a)/2,s,this._y0,s,a);break}}this._x0=s,this._y0=a}}function R_(t){return new N0(t,!0)}function L_(t){return new N0(t,!1)}const gh={draw(t,s){const a=Js(s/cc);t.moveTo(a,0),t.arc(0,0,a,0,Ro)}},F_={draw(t,s){const a=Js(s/5)/2;t.moveTo(-3*a,-a),t.lineTo(-a,-a),t.lineTo(-a,-3*a),t.lineTo(a,-3*a),t.lineTo(a,-a),t.lineTo(3*a,-a),t.lineTo(3*a,a),t.lineTo(a,a),t.lineTo(a,3*a),t.lineTo(-a,3*a),t.lineTo(-a,a),t.lineTo(-3*a,a),t.closePath()}},w0=Js(1/3),B_=w0*2,U_={draw(t,s){const a=Js(s/B_),r=a*w0;t.moveTo(0,-a),t.lineTo(r,0),t.lineTo(0,a),t.lineTo(-r,0),t.closePath()}},z_={draw(t,s){const a=Js(s),r=-a/2;t.rect(r,r,a,a)}},W_=.8908130915292852,S0=lc(cc/10)/lc(7*cc/10),q_=lc(Ro/10)*S0,K_=-p0(Ro/10)*S0,H_={draw(t,s){const a=Js(s*W_),r=q_*a,n=K_*a;t.moveTo(0,-a),t.lineTo(r,n);for(let i=1;i<5;++i){const l=Ro*i/5,c=p0(l),o=lc(l);t.lineTo(o*a,-c*a),t.lineTo(c*r-o*n,o*r+c*n)}t.closePath()}},Nd=Js(3),V_={draw(t,s){const a=-Js(s/(Nd*3));t.moveTo(0,a*2),t.lineTo(-Nd*a,-a),t.lineTo(Nd*a,-a),t.closePath()}},Ps=-.5,Ts=Js(3)/2,wu=1/Js(12),G_=(wu/2+1)*3,Z_={draw(t,s){const a=Js(s/G_),r=a/2,n=a*wu,i=r,l=a*wu+a,c=-i,o=l;t.moveTo(r,n),t.lineTo(i,l),t.lineTo(c,o),t.lineTo(Ps*r-Ts*n,Ts*r+Ps*n),t.lineTo(Ps*i-Ts*l,Ts*i+Ps*l),t.lineTo(Ps*c-Ts*o,Ts*c+Ps*o),t.lineTo(Ps*r+Ts*n,Ps*n-Ts*r),t.lineTo(Ps*i+Ts*l,Ps*l-Ts*i),t.lineTo(Ps*c+Ts*o,Ps*o-Ts*c),t.closePath()}};function Y_(t,s){let a=null,r=fh(n);t=typeof t=="function"?t:gt(t||gh),s=typeof s=="function"?s:gt(s===void 0?64:+s);function n(){let i;if(a||(a=i=r()),t.apply(this,arguments).draw(a,+s.apply(this,arguments)),i)return a=null,i+""||null}return n.type=function(i){return arguments.length?(t=typeof i=="function"?i:gt(i),n):t},n.size=function(i){return arguments.length?(s=typeof i=="function"?i:gt(+i),n):s},n.context=function(i){return arguments.length?(a=i??null,n):a},n}function oc(){}function dc(t,s,a){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+a)/6)}function k0(t){this._context=t}k0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dc(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function X_(t){return new k0(t)}function A0(t){this._context=t}A0.prototype={areaStart:oc,areaEnd:oc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:dc(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function J_(t){return new A0(t)}function C0(t){this._context=t}C0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var a=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(a,r):this._context.moveTo(a,r);break;case 3:this._point=4;default:dc(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function Q_(t){return new C0(t)}function _0(t){this._context=t}_0.prototype={areaStart:oc,areaEnd:oc,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}};function eP(t){return new _0(t)}function Jx(t){return t<0?-1:1}function Qx(t,s,a){var r=t._x1-t._x0,n=s-t._x1,i=(t._y1-t._y0)/(r||n<0&&-0),l=(a-t._y1)/(n||r<0&&-0),c=(i*n+l*r)/(r+n);return(Jx(i)+Jx(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(c))||0}function ef(t,s){var a=t._x1-t._x0;return a?(3*(t._y1-t._y0)/a-s)/2:s}function wd(t,s,a){var r=t._x0,n=t._y0,i=t._x1,l=t._y1,c=(i-r)/3;t._context.bezierCurveTo(r+c,n+c*s,i-c,l-c*a,i,l)}function uc(t){this._context=t}uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wd(this,this._t0,ef(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var a=NaN;if(t=+t,s=+s,!(t===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,wd(this,ef(this,a=Qx(this,t,s)),a);break;default:wd(this,this._t0,a=Qx(this,t,s));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=a}}};function P0(t){this._context=new T0(t)}(P0.prototype=Object.create(uc.prototype)).point=function(t,s){uc.prototype.point.call(this,s,t)};function T0(t){this._context=t}T0.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,a,r,n,i){this._context.bezierCurveTo(s,t,r,a,i,n)}};function tP(t){return new uc(t)}function sP(t){return new P0(t)}function O0(t){this._context=t}O0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,a=t.length;if(a)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),a===2)this._context.lineTo(t[1],s[1]);else for(var r=tf(t),n=tf(s),i=0,l=1;l<a;++i,++l)this._context.bezierCurveTo(r[0][i],n[0][i],r[1][i],n[1][i],t[l],s[l]);(this._line||this._line!==0&&a===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}};function tf(t){var s,a=t.length-1,r,n=new Array(a),i=new Array(a),l=new Array(a);for(n[0]=0,i[0]=2,l[0]=t[0]+2*t[1],s=1;s<a-1;++s)n[s]=1,i[s]=4,l[s]=4*t[s]+2*t[s+1];for(n[a-1]=2,i[a-1]=7,l[a-1]=8*t[a-1]+t[a],s=1;s<a;++s)r=n[s]/i[s-1],i[s]-=r,l[s]-=r*l[s-1];for(n[a-1]=l[a-1]/i[a-1],s=a-2;s>=0;--s)n[s]=(l[s]-n[s+1])/i[s];for(i[a-1]=(t[a]+n[a-1])/2,s=0;s<a-1;++s)i[s]=2*t[s+1]-n[s+1];return[n,i]}function aP(t){return new O0(t)}function Fo(t,s){this._context=t,this._t=s}Fo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var a=this._x*(1-this._t)+t*this._t;this._context.lineTo(a,this._y),this._context.lineTo(a,s)}break}}this._x=t,this._y=s}};function rP(t){return new Fo(t,.5)}function nP(t){return new Fo(t,0)}function iP(t){return new Fo(t,1)}function pn(t,s){if((l=t.length)>1)for(var a=1,r,n,i=t[s[0]],l,c=i.length;a<l;++a)for(n=i,i=t[s[a]],r=0;r<c;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function Su(t){for(var s=t.length,a=new Array(s);--s>=0;)a[s]=s;return a}function lP(t,s){return t[s]}function cP(t){const s=[];return s.key=t,s}function oP(){var t=gt([]),s=Su,a=pn,r=lP;function n(i){var l=Array.from(t.apply(this,arguments),cP),c,o=l.length,d=-1,u;for(const m of i)for(c=0,++d;c<o;++c)(l[c][d]=[0,+r(m,l[c].key,d,i)]).data=m;for(c=0,u=ph(s(l));c<o;++c)l[u[c]].index=c;return a(l,u),l}return n.keys=function(i){return arguments.length?(t=typeof i=="function"?i:gt(Array.from(i)),n):t},n.value=function(i){return arguments.length?(r=typeof i=="function"?i:gt(+i),n):r},n.order=function(i){return arguments.length?(s=i==null?Su:typeof i=="function"?i:gt(Array.from(i)),n):s},n.offset=function(i){return arguments.length?(a=i??pn,n):a},n}function dP(t,s){if((r=t.length)>0){for(var a,r,n=0,i=t[0].length,l;n<i;++n){for(l=a=0;a<r;++a)l+=t[a][n][1]||0;if(l)for(a=0;a<r;++a)t[a][n][1]/=l}pn(t,s)}}function uP(t,s){if((n=t.length)>0){for(var a=0,r=t[s[0]],n,i=r.length;a<i;++a){for(var l=0,c=0;l<n;++l)c+=t[l][a][1]||0;r[a][1]+=r[a][0]=-c/2}pn(t,s)}}function mP(t,s){if(!(!((l=t.length)>0)||!((i=(n=t[s[0]]).length)>0))){for(var a=0,r=1,n,i,l;r<i;++r){for(var c=0,o=0,d=0;c<l;++c){for(var u=t[s[c]],m=u[r][1]||0,h=u[r-1][1]||0,x=(m-h)/2,f=0;f<c;++f){var p=t[s[f]],g=p[r][1]||0,w=p[r-1][1]||0;x+=g-w}o+=m,d+=x*m}n[r-1][1]+=n[r-1][0]=a,o&&(a-=d/o)}n[r-1][1]+=n[r-1][0]=a,pn(t,s)}}function Ei(t){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ei(t)}var hP=["type","size","sizeType"];function ku(){return ku=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ku.apply(this,arguments)}function sf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function af(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?sf(Object(a),!0).forEach(function(r){xP(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):sf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function xP(t,s,a){return s=fP(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function fP(t){var s=pP(t,"string");return Ei(s)=="symbol"?s:s+""}function pP(t,s){if(Ei(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Ei(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function gP(t,s){if(t==null)return{};var a=vP(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function vP(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}var E0={symbolCircle:gh,symbolCross:F_,symbolDiamond:U_,symbolSquare:z_,symbolStar:H_,symbolTriangle:V_,symbolWye:Z_},jP=Math.PI/180,yP=function(s){var a="symbol".concat($o(s));return E0[a]||gh},bP=function(s,a,r){if(a==="area")return s;switch(r){case"cross":return 5*s*s/9;case"diamond":return .5*s*s/Math.sqrt(3);case"square":return s*s;case"star":{var n=18*jP;return 1.25*s*s*(Math.tan(n)-Math.tan(n*2)*Math.pow(Math.tan(n),2))}case"triangle":return Math.sqrt(3)*s*s/4;case"wye":return(21-10*Math.sqrt(3))*s*s/8;default:return Math.PI*s*s/4}},NP=function(s,a){E0["symbol".concat($o(s))]=a},vh=function(s){var a=s.type,r=a===void 0?"circle":a,n=s.size,i=n===void 0?64:n,l=s.sizeType,c=l===void 0?"area":l,o=gP(s,hP),d=af(af({},o),{},{type:r,size:i,sizeType:c}),u=function(){var g=yP(r),w=Y_().type(g).size(bP(i,c,r));return w()},m=d.className,h=d.cx,x=d.cy,f=Ce(d,!0);return h===+h&&x===+x&&i===+i?$.createElement("path",ku({},f,{className:We("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:u()})):null};vh.registerSymbol=NP;function gn(t){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},gn(t)}function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Au.apply(this,arguments)}function rf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function wP(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?rf(Object(a),!0).forEach(function(r){Ii(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):rf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function SP(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function nf(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D0(r.key),r)}}function kP(t,s,a){return s&&nf(t.prototype,s),a&&nf(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function AP(t,s,a){return s=mc(s),CP(t,I0()?Reflect.construct(s,a||[],mc(t).constructor):s.apply(t,a))}function CP(t,s){if(s&&(gn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _P(t)}function _P(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I0(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I0=function(){return!!t})()}function mc(t){return mc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},mc(t)}function PP(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Cu(t,s)}function Cu(t,s){return Cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Cu(t,s)}function Ii(t,s,a){return s=D0(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function D0(t){var s=TP(t,"string");return gn(s)=="symbol"?s:s+""}function TP(t,s){if(gn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(gn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Os=32,jh=function(t){function s(){return SP(this,s),AP(this,s,arguments)}return PP(s,t),kP(s,[{key:"renderIcon",value:function(r){var n=this.props.inactiveColor,i=Os/2,l=Os/6,c=Os/3,o=r.inactive?n:r.color;if(r.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:Os,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(i,"h").concat(c,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*c,",").concat(i,`
            H`).concat(Os,"M").concat(2*c,",").concat(i,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(c,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return $.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Os/8,"h").concat(Os,"v").concat(Os*3/4,"h").concat(-Os,"z"),className:"recharts-legend-icon"});if($.isValidElement(r.legendIcon)){var d=wP({},r);return delete d.legendIcon,$.cloneElement(r.legendIcon,d)}return $.createElement(vh,{fill:o,cx:i,cy:i,size:Os,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,n=this.props,i=n.payload,l=n.iconSize,c=n.layout,o=n.formatter,d=n.inactiveColor,u={x:0,y:0,width:Os,height:Os},m={display:c==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,f){var p=x.formatter||o,g=We(Ii(Ii({"recharts-legend-item":!0},"legend-item-".concat(f),!0),"inactive",x.inactive));if(x.type==="none")return null;var w=De(x.value)?null:x.value;Vs(!De(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var S=x.inactive?d:x.color;return $.createElement("li",Au({className:g,style:m,key:"legend-item-".concat(f)},Ir(r.props,x,f)),$.createElement(gu,{width:l,height:l,viewBox:u,style:h},r.renderIcon(x)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:S}},p?p(w,x,f):w))})}},{key:"render",value:function(){var r=this.props,n=r.payload,i=r.layout,l=r.align;if(!n||!n.length)return null;var c={padding:0,margin:0,textAlign:i==="horizontal"?l:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:c},this.renderItems())}}])}(y.PureComponent);Ii(jh,"displayName","Legend");Ii(jh,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var OP=wo;function EP(){this.__data__=new OP,this.size=0}var IP=EP;function DP(t){var s=this.__data__,a=s.delete(t);return this.size=s.size,a}var MP=DP;function $P(t){return this.__data__.get(t)}var RP=$P;function LP(t){return this.__data__.has(t)}var FP=LP,BP=wo,UP=ih,zP=lh,WP=200;function qP(t,s){var a=this.__data__;if(a instanceof BP){var r=a.__data__;if(!UP||r.length<WP-1)return r.push([t,s]),this.size=++a.size,this;a=this.__data__=new zP(r)}return a.set(t,s),this.size=a.size,this}var KP=qP,HP=wo,VP=IP,GP=MP,ZP=RP,YP=FP,XP=KP;function Xn(t){var s=this.__data__=new HP(t);this.size=s.size}Xn.prototype.clear=VP;Xn.prototype.delete=GP;Xn.prototype.get=ZP;Xn.prototype.has=YP;Xn.prototype.set=XP;var M0=Xn,JP="__lodash_hash_undefined__";function QP(t){return this.__data__.set(t,JP),this}var eT=QP;function tT(t){return this.__data__.has(t)}var sT=tT,aT=lh,rT=eT,nT=sT;function hc(t){var s=-1,a=t==null?0:t.length;for(this.__data__=new aT;++s<a;)this.add(t[s])}hc.prototype.add=hc.prototype.push=rT;hc.prototype.has=nT;var $0=hc;function iT(t,s){for(var a=-1,r=t==null?0:t.length;++a<r;)if(s(t[a],a,t))return!0;return!1}var R0=iT;function lT(t,s){return t.has(s)}var L0=lT,cT=$0,oT=R0,dT=L0,uT=1,mT=2;function hT(t,s,a,r,n,i){var l=a&uT,c=t.length,o=s.length;if(c!=o&&!(l&&o>c))return!1;var d=i.get(t),u=i.get(s);if(d&&u)return d==s&&u==t;var m=-1,h=!0,x=a&mT?new cT:void 0;for(i.set(t,s),i.set(s,t);++m<c;){var f=t[m],p=s[m];if(r)var g=l?r(p,f,m,s,t,i):r(f,p,m,t,s,i);if(g!==void 0){if(g)continue;h=!1;break}if(x){if(!oT(s,function(w,S){if(!dT(x,S)&&(f===w||n(f,w,a,r,i)))return x.push(S)})){h=!1;break}}else if(!(f===p||n(f,p,a,r,i))){h=!1;break}}return i.delete(t),i.delete(s),h}var F0=hT,xT=xa,fT=xT.Uint8Array,pT=fT;function gT(t){var s=-1,a=Array(t.size);return t.forEach(function(r,n){a[++s]=[n,r]}),a}var vT=gT;function jT(t){var s=-1,a=Array(t.size);return t.forEach(function(r){a[++s]=r}),a}var yh=jT,lf=vl,cf=pT,yT=nh,bT=F0,NT=vT,wT=yh,ST=1,kT=2,AT="[object Boolean]",CT="[object Date]",_T="[object Error]",PT="[object Map]",TT="[object Number]",OT="[object RegExp]",ET="[object Set]",IT="[object String]",DT="[object Symbol]",MT="[object ArrayBuffer]",$T="[object DataView]",of=lf?lf.prototype:void 0,Sd=of?of.valueOf:void 0;function RT(t,s,a,r,n,i,l){switch(a){case $T:if(t.byteLength!=s.byteLength||t.byteOffset!=s.byteOffset)return!1;t=t.buffer,s=s.buffer;case MT:return!(t.byteLength!=s.byteLength||!i(new cf(t),new cf(s)));case AT:case CT:case TT:return yT(+t,+s);case _T:return t.name==s.name&&t.message==s.message;case OT:case IT:return t==s+"";case PT:var c=NT;case ET:var o=r&ST;if(c||(c=wT),t.size!=s.size&&!o)return!1;var d=l.get(t);if(d)return d==s;r|=kT,l.set(t,s);var u=bT(c(t),c(s),r,n,i,l);return l.delete(t),u;case DT:if(Sd)return Sd.call(t)==Sd.call(s)}return!1}var LT=RT;function FT(t,s){for(var a=-1,r=s.length,n=t.length;++a<r;)t[n+a]=s[a];return t}var B0=FT,BT=B0,UT=vs;function zT(t,s,a){var r=s(t);return UT(t)?r:BT(r,a(t))}var WT=zT;function qT(t,s){for(var a=-1,r=t==null?0:t.length,n=0,i=[];++a<r;){var l=t[a];s(l,a,t)&&(i[n++]=l)}return i}var KT=qT;function HT(){return[]}var VT=HT,GT=KT,ZT=VT,YT=Object.prototype,XT=YT.propertyIsEnumerable,df=Object.getOwnPropertySymbols,JT=df?function(t){return t==null?[]:(t=Object(t),GT(df(t),function(s){return XT.call(t,s)}))}:ZT,QT=JT;function eO(t,s){for(var a=-1,r=Array(t);++a<t;)r[a]=s(a);return r}var tO=eO,sO=La,aO=Fa,rO="[object Arguments]";function nO(t){return aO(t)&&sO(t)==rO}var iO=nO,uf=iO,lO=Fa,U0=Object.prototype,cO=U0.hasOwnProperty,oO=U0.propertyIsEnumerable,dO=uf(function(){return arguments}())?uf:function(t){return lO(t)&&cO.call(t,"callee")&&!oO.call(t,"callee")},bh=dO,xc={exports:{}};function uO(){return!1}var mO=uO;xc.exports;(function(t,s){var a=xa,r=mO,n=s&&!s.nodeType&&s,i=n&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===n,c=l?a.Buffer:void 0,o=c?c.isBuffer:void 0,d=o||r;t.exports=d})(xc,xc.exports);var z0=xc.exports,hO=9007199254740991,xO=/^(?:0|[1-9]\d*)$/;function fO(t,s){var a=typeof t;return s=s??hO,!!s&&(a=="number"||a!="symbol"&&xO.test(t))&&t>-1&&t%1==0&&t<s}var Nh=fO,pO=9007199254740991;function gO(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pO}var wh=gO,vO=La,jO=wh,yO=Fa,bO="[object Arguments]",NO="[object Array]",wO="[object Boolean]",SO="[object Date]",kO="[object Error]",AO="[object Function]",CO="[object Map]",_O="[object Number]",PO="[object Object]",TO="[object RegExp]",OO="[object Set]",EO="[object String]",IO="[object WeakMap]",DO="[object ArrayBuffer]",MO="[object DataView]",$O="[object Float32Array]",RO="[object Float64Array]",LO="[object Int8Array]",FO="[object Int16Array]",BO="[object Int32Array]",UO="[object Uint8Array]",zO="[object Uint8ClampedArray]",WO="[object Uint16Array]",qO="[object Uint32Array]",bt={};bt[$O]=bt[RO]=bt[LO]=bt[FO]=bt[BO]=bt[UO]=bt[zO]=bt[WO]=bt[qO]=!0;bt[bO]=bt[NO]=bt[DO]=bt[wO]=bt[MO]=bt[SO]=bt[kO]=bt[AO]=bt[CO]=bt[_O]=bt[PO]=bt[TO]=bt[OO]=bt[EO]=bt[IO]=!1;function KO(t){return yO(t)&&jO(t.length)&&!!bt[vO(t)]}var HO=KO;function VO(t){return function(s){return t(s)}}var W0=VO,fc={exports:{}};fc.exports;(function(t,s){var a=Yj,r=s&&!s.nodeType&&s,n=r&&!0&&t&&!t.nodeType&&t,i=n&&n.exports===r,l=i&&a.process,c=function(){try{var o=n&&n.require&&n.require("util").types;return o||l&&l.binding&&l.binding("util")}catch{}}();t.exports=c})(fc,fc.exports);var GO=fc.exports,ZO=HO,YO=W0,mf=GO,hf=mf&&mf.isTypedArray,XO=hf?YO(hf):ZO,q0=XO,JO=tO,QO=bh,eE=vs,tE=z0,sE=Nh,aE=q0,rE=Object.prototype,nE=rE.hasOwnProperty;function iE(t,s){var a=eE(t),r=!a&&QO(t),n=!a&&!r&&tE(t),i=!a&&!r&&!n&&aE(t),l=a||r||n||i,c=l?JO(t.length,String):[],o=c.length;for(var d in t)(s||nE.call(t,d))&&!(l&&(d=="length"||n&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||sE(d,o)))&&c.push(d);return c}var lE=iE,cE=Object.prototype;function oE(t){var s=t&&t.constructor,a=typeof s=="function"&&s.prototype||cE;return t===a}var dE=oE;function uE(t,s){return function(a){return t(s(a))}}var K0=uE,mE=K0,hE=mE(Object.keys,Object),xE=hE,fE=dE,pE=xE,gE=Object.prototype,vE=gE.hasOwnProperty;function jE(t){if(!fE(t))return pE(t);var s=[];for(var a in Object(t))vE.call(t,a)&&a!="constructor"&&s.push(a);return s}var yE=jE,bE=rh,NE=wh;function wE(t){return t!=null&&NE(t.length)&&!bE(t)}var jl=wE,SE=lE,kE=yE,AE=jl;function CE(t){return AE(t)?SE(t):kE(t)}var Bo=CE,_E=WT,PE=QT,TE=Bo;function OE(t){return _E(t,TE,PE)}var EE=OE,xf=EE,IE=1,DE=Object.prototype,ME=DE.hasOwnProperty;function $E(t,s,a,r,n,i){var l=a&IE,c=xf(t),o=c.length,d=xf(s),u=d.length;if(o!=u&&!l)return!1;for(var m=o;m--;){var h=c[m];if(!(l?h in s:ME.call(s,h)))return!1}var x=i.get(t),f=i.get(s);if(x&&f)return x==s&&f==t;var p=!0;i.set(t,s),i.set(s,t);for(var g=l;++m<o;){h=c[m];var w=t[h],S=s[h];if(r)var b=l?r(S,w,h,s,t,i):r(w,S,h,t,s,i);if(!(b===void 0?w===S||n(w,S,a,r,i):b)){p=!1;break}g||(g=h=="constructor")}if(p&&!g){var A=t.constructor,v=s.constructor;A!=v&&"constructor"in t&&"constructor"in s&&!(typeof A=="function"&&A instanceof A&&typeof v=="function"&&v instanceof v)&&(p=!1)}return i.delete(t),i.delete(s),p}var RE=$E,LE=Fr,FE=xa,BE=LE(FE,"DataView"),UE=BE,zE=Fr,WE=xa,qE=zE(WE,"Promise"),KE=qE,HE=Fr,VE=xa,GE=HE(VE,"Set"),H0=GE,ZE=Fr,YE=xa,XE=ZE(YE,"WeakMap"),JE=XE,_u=UE,Pu=ih,Tu=KE,Ou=H0,Eu=JE,V0=La,Jn=Jj,ff="[object Map]",QE="[object Object]",pf="[object Promise]",gf="[object Set]",vf="[object WeakMap]",jf="[object DataView]",e5=Jn(_u),t5=Jn(Pu),s5=Jn(Tu),a5=Jn(Ou),r5=Jn(Eu),hr=V0;(_u&&hr(new _u(new ArrayBuffer(1)))!=jf||Pu&&hr(new Pu)!=ff||Tu&&hr(Tu.resolve())!=pf||Ou&&hr(new Ou)!=gf||Eu&&hr(new Eu)!=vf)&&(hr=function(t){var s=V0(t),a=s==QE?t.constructor:void 0,r=a?Jn(a):"";if(r)switch(r){case e5:return jf;case t5:return ff;case s5:return pf;case a5:return gf;case r5:return vf}return s});var n5=hr,kd=M0,i5=F0,l5=LT,c5=RE,yf=n5,bf=vs,Nf=z0,o5=q0,d5=1,wf="[object Arguments]",Sf="[object Array]",Tl="[object Object]",u5=Object.prototype,kf=u5.hasOwnProperty;function m5(t,s,a,r,n,i){var l=bf(t),c=bf(s),o=l?Sf:yf(t),d=c?Sf:yf(s);o=o==wf?Tl:o,d=d==wf?Tl:d;var u=o==Tl,m=d==Tl,h=o==d;if(h&&Nf(t)){if(!Nf(s))return!1;l=!0,u=!1}if(h&&!u)return i||(i=new kd),l||o5(t)?i5(t,s,a,r,n,i):l5(t,s,o,a,r,n,i);if(!(a&d5)){var x=u&&kf.call(t,"__wrapped__"),f=m&&kf.call(s,"__wrapped__");if(x||f){var p=x?t.value():t,g=f?s.value():s;return i||(i=new kd),n(p,g,a,r,i)}}return h?(i||(i=new kd),c5(t,s,a,r,n,i)):!1}var h5=m5,x5=h5,Af=Fa;function G0(t,s,a,r,n){return t===s?!0:t==null||s==null||!Af(t)&&!Af(s)?t!==t&&s!==s:x5(t,s,a,r,G0,n)}var Sh=G0,f5=M0,p5=Sh,g5=1,v5=2;function j5(t,s,a,r){var n=a.length,i=n,l=!r;if(t==null)return!i;for(t=Object(t);n--;){var c=a[n];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++n<i;){c=a[n];var o=c[0],d=t[o],u=c[1];if(l&&c[2]){if(d===void 0&&!(o in t))return!1}else{var m=new f5;if(r)var h=r(d,u,o,t,s,m);if(!(h===void 0?p5(u,d,g5|v5,r,m):h))return!1}}return!0}var y5=j5,b5=sr;function N5(t){return t===t&&!b5(t)}var Z0=N5,w5=Z0,S5=Bo;function k5(t){for(var s=S5(t),a=s.length;a--;){var r=s[a],n=t[r];s[a]=[r,n,w5(n)]}return s}var A5=k5;function C5(t,s){return function(a){return a==null?!1:a[t]===s&&(s!==void 0||t in Object(a))}}var Y0=C5,_5=y5,P5=A5,T5=Y0;function O5(t){var s=P5(t);return s.length==1&&s[0][2]?T5(s[0][0],s[0][1]):function(a){return a===t||_5(a,t,s)}}var E5=O5;function I5(t,s){return t!=null&&s in Object(t)}var D5=I5,M5=a0,$5=bh,R5=vs,L5=Nh,F5=wh,B5=ko;function U5(t,s,a){s=M5(s,t);for(var r=-1,n=s.length,i=!1;++r<n;){var l=B5(s[r]);if(!(i=t!=null&&a(t,l)))break;t=t[l]}return i||++r!=n?i:(n=t==null?0:t.length,!!n&&F5(n)&&L5(l,n)&&(R5(t)||$5(t)))}var z5=U5,W5=D5,q5=z5;function K5(t,s){return t!=null&&q5(t,s,W5)}var H5=K5,V5=Sh,G5=r0,Z5=H5,Y5=ah,X5=Z0,J5=Y0,Q5=ko,e3=1,t3=2;function s3(t,s){return Y5(t)&&X5(s)?J5(Q5(t),s):function(a){var r=G5(a,t);return r===void 0&&r===s?Z5(a,t):V5(s,r,e3|t3)}}var a3=s3;function r3(t){return t}var Qn=r3;function n3(t){return function(s){return s==null?void 0:s[t]}}var i3=n3,l3=dh;function c3(t){return function(s){return l3(s,t)}}var o3=c3,d3=i3,u3=o3,m3=ah,h3=ko;function x3(t){return m3(t)?d3(h3(t)):u3(t)}var f3=x3,p3=E5,g3=a3,v3=Qn,j3=vs,y3=f3;function b3(t){return typeof t=="function"?t:t==null?v3:typeof t=="object"?j3(t)?g3(t[0],t[1]):p3(t):y3(t)}var fa=b3;function N3(t,s,a,r){for(var n=t.length,i=a+(r?1:-1);r?i--:++i<n;)if(s(t[i],i,t))return i;return-1}var X0=N3;function w3(t){return t!==t}var S3=w3;function k3(t,s,a){for(var r=a-1,n=t.length;++r<n;)if(t[r]===s)return r;return-1}var A3=k3,C3=X0,_3=S3,P3=A3;function T3(t,s,a){return s===s?P3(t,s,a):C3(t,_3,a)}var O3=T3,E3=O3;function I3(t,s){var a=t==null?0:t.length;return!!a&&E3(t,s,0)>-1}var D3=I3;function M3(t,s,a){for(var r=-1,n=t==null?0:t.length;++r<n;)if(a(s,t[r]))return!0;return!1}var $3=M3;function R3(){}var L3=R3,Ad=H0,F3=L3,B3=yh,U3=1/0,z3=Ad&&1/B3(new Ad([,-0]))[1]==U3?function(t){return new Ad(t)}:F3,W3=z3,q3=$0,K3=D3,H3=$3,V3=L0,G3=W3,Z3=yh,Y3=200;function X3(t,s,a){var r=-1,n=K3,i=t.length,l=!0,c=[],o=c;if(a)l=!1,n=H3;else if(i>=Y3){var d=s?null:G3(t);if(d)return Z3(d);l=!1,n=V3,o=new q3}else o=s?[]:c;e:for(;++r<i;){var u=t[r],m=s?s(u):u;if(u=a||u!==0?u:0,l&&m===m){for(var h=o.length;h--;)if(o[h]===m)continue e;s&&o.push(m),c.push(u)}else n(o,m,a)||(o!==c&&o.push(m),c.push(u))}return c}var J3=X3,Q3=fa,e6=J3;function t6(t,s){return t&&t.length?e6(t,Q3(s)):[]}var s6=t6;const Cf=ht(s6);function J0(t,s,a){return s===!0?Cf(t,a):De(s)?Cf(t,s):t}function vn(t){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},vn(t)}var a6=["ref"];function _f(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function va(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?_f(Object(a),!0).forEach(function(r){Uo(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_f(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function r6(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Pf(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ey(r.key),r)}}function n6(t,s,a){return s&&Pf(t.prototype,s),a&&Pf(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function i6(t,s,a){return s=pc(s),l6(t,Q0()?Reflect.construct(s,a||[],pc(t).constructor):s.apply(t,a))}function l6(t,s){if(s&&(vn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c6(t)}function c6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q0(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q0=function(){return!!t})()}function pc(t){return pc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},pc(t)}function o6(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Iu(t,s)}function Iu(t,s){return Iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Iu(t,s)}function Uo(t,s,a){return s=ey(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function ey(t){var s=d6(t,"string");return vn(s)=="symbol"?s:s+""}function d6(t,s){if(vn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(vn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function u6(t,s){if(t==null)return{};var a=m6(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function m6(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function h6(t){return t.value}function x6(t,s){if($.isValidElement(t))return $.cloneElement(t,s);if(typeof t=="function")return $.createElement(t,s);s.ref;var a=u6(s,a6);return $.createElement(jh,a)}var Tf=1,Ya=function(t){function s(){var a;r6(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=i6(this,s,[].concat(n)),Uo(a,"lastBoundingBox",{width:-1,height:-1}),a}return o6(s,t),n6(s,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,n=this.getBBox();n?(Math.abs(n.width-this.lastBoundingBox.width)>Tf||Math.abs(n.height-this.lastBoundingBox.height)>Tf)&&(this.lastBoundingBox.width=n.width,this.lastBoundingBox.height=n.height,r&&r(n)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?va({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var n=this.props,i=n.layout,l=n.align,c=n.verticalAlign,o=n.margin,d=n.chartWidth,u=n.chartHeight,m,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(l==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();m={left:((d||0)-x.width)/2}}else m=l==="right"?{right:o&&o.right||0}:{left:o&&o.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(c==="middle"){var f=this.getBBoxSnapshot();h={top:((u||0)-f.height)/2}}else h=c==="bottom"?{bottom:o&&o.bottom||0}:{top:o&&o.top||0};return va(va({},m),h)}},{key:"render",value:function(){var r=this,n=this.props,i=n.content,l=n.width,c=n.height,o=n.wrapperStyle,d=n.payloadUniqBy,u=n.payload,m=va(va({position:"absolute",width:l||"auto",height:c||"auto"},this.getDefaultPosition(o)),o);return $.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:function(x){r.wrapperNode=x}},x6(i,va(va({},this.props),{},{payload:J0(u,d,h6)})))}}],[{key:"getWithHeight",value:function(r,n){var i=va(va({},this.defaultProps),r.props),l=i.layout;return l==="vertical"&&xe(r.props.height)?{height:r.props.height}:l==="horizontal"?{width:r.props.width||n}:null}}])}(y.PureComponent);Uo(Ya,"displayName","Legend");Uo(Ya,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Of=vl,f6=bh,p6=vs,Ef=Of?Of.isConcatSpreadable:void 0;function g6(t){return p6(t)||f6(t)||!!(Ef&&t&&t[Ef])}var v6=g6,j6=B0,y6=v6;function ty(t,s,a,r,n){var i=-1,l=t.length;for(a||(a=y6),n||(n=[]);++i<l;){var c=t[i];s>0&&a(c)?s>1?ty(c,s-1,a,r,n):j6(n,c):r||(n[n.length]=c)}return n}var sy=ty;function b6(t){return function(s,a,r){for(var n=-1,i=Object(s),l=r(s),c=l.length;c--;){var o=l[t?c:++n];if(a(i[o],o,i)===!1)break}return s}}var N6=b6,w6=N6,S6=w6(),k6=S6,A6=k6,C6=Bo;function _6(t,s){return t&&A6(t,s,C6)}var ay=_6,P6=jl;function T6(t,s){return function(a,r){if(a==null)return a;if(!P6(a))return t(a,r);for(var n=a.length,i=s?n:-1,l=Object(a);(s?i--:++i<n)&&r(l[i],i,l)!==!1;);return a}}var O6=T6,E6=ay,I6=O6,D6=I6(E6),kh=D6,M6=kh,$6=jl;function R6(t,s){var a=-1,r=$6(t)?Array(t.length):[];return M6(t,function(n,i,l){r[++a]=s(n,i,l)}),r}var ry=R6;function L6(t,s){var a=t.length;for(t.sort(s);a--;)t[a]=t[a].value;return t}var F6=L6,If=Kn;function B6(t,s){if(t!==s){var a=t!==void 0,r=t===null,n=t===t,i=If(t),l=s!==void 0,c=s===null,o=s===s,d=If(s);if(!c&&!d&&!i&&t>s||i&&l&&o&&!c&&!d||r&&l&&o||!a&&o||!n)return 1;if(!r&&!i&&!d&&t<s||d&&a&&n&&!r&&!i||c&&a&&n||!l&&n||!o)return-1}return 0}var U6=B6,z6=U6;function W6(t,s,a){for(var r=-1,n=t.criteria,i=s.criteria,l=n.length,c=a.length;++r<l;){var o=z6(n[r],i[r]);if(o){if(r>=c)return o;var d=a[r];return o*(d=="desc"?-1:1)}}return t.index-s.index}var q6=W6,Cd=oh,K6=dh,H6=fa,V6=ry,G6=F6,Z6=W0,Y6=q6,X6=Qn,J6=vs;function Q6(t,s,a){s.length?s=Cd(s,function(i){return J6(i)?function(l){return K6(l,i.length===1?i[0]:i)}:i}):s=[X6];var r=-1;s=Cd(s,Z6(H6));var n=V6(t,function(i,l,c){var o=Cd(s,function(d){return d(i)});return{criteria:o,index:++r,value:i}});return G6(n,function(i,l){return Y6(i,l,a)})}var eI=Q6;function tI(t,s,a){switch(a.length){case 0:return t.call(s);case 1:return t.call(s,a[0]);case 2:return t.call(s,a[0],a[1]);case 3:return t.call(s,a[0],a[1],a[2])}return t.apply(s,a)}var sI=tI,aI=sI,Df=Math.max;function rI(t,s,a){return s=Df(s===void 0?t.length-1:s,0),function(){for(var r=arguments,n=-1,i=Df(r.length-s,0),l=Array(i);++n<i;)l[n]=r[s+n];n=-1;for(var c=Array(s+1);++n<s;)c[n]=r[n];return c[s]=a(l),aI(t,this,c)}}var nI=rI;function iI(t){return function(){return t}}var lI=iI,cI=Fr,oI=function(){try{var t=cI(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ny=oI,dI=lI,Mf=ny,uI=Qn,mI=Mf?function(t,s){return Mf(t,"toString",{configurable:!0,enumerable:!1,value:dI(s),writable:!0})}:uI,hI=mI,xI=800,fI=16,pI=Date.now;function gI(t){var s=0,a=0;return function(){var r=pI(),n=fI-(r-a);if(a=r,n>0){if(++s>=xI)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}var vI=gI,jI=hI,yI=vI,bI=yI(jI),NI=bI,wI=Qn,SI=nI,kI=NI;function AI(t,s){return kI(SI(t,s,wI),t+"")}var CI=AI,_I=nh,PI=jl,TI=Nh,OI=sr;function EI(t,s,a){if(!OI(a))return!1;var r=typeof s;return(r=="number"?PI(a)&&TI(s,a.length):r=="string"&&s in a)?_I(a[s],t):!1}var zo=EI,II=sy,DI=eI,MI=CI,$f=zo,$I=MI(function(t,s){if(t==null)return[];var a=s.length;return a>1&&$f(t,s[0],s[1])?s=[]:a>2&&$f(s[0],s[1],s[2])&&(s=[s[0]]),DI(t,II(s,1),[])}),RI=$I;const Ah=ht(RI);function Di(t){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Di(t)}function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Du.apply(this,arguments)}function LI(t,s){return zI(t)||UI(t,s)||BI(t,s)||FI()}function FI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BI(t,s){if(t){if(typeof t=="string")return Rf(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Rf(t,s)}}function Rf(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function UI(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function zI(t){if(Array.isArray(t))return t}function Lf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function _d(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Lf(Object(a),!0).forEach(function(r){WI(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Lf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function WI(t,s,a){return s=qI(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function qI(t){var s=KI(t,"string");return Di(s)=="symbol"?s:s+""}function KI(t,s){if(Di(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Di(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function HI(t){return Array.isArray(t)&&zt(t[0])&&zt(t[1])?t.join(" ~ "):t}var VI=function(s){var a=s.separator,r=a===void 0?" : ":a,n=s.contentStyle,i=n===void 0?{}:n,l=s.itemStyle,c=l===void 0?{}:l,o=s.labelStyle,d=o===void 0?{}:o,u=s.payload,m=s.formatter,h=s.itemSorter,x=s.wrapperClassName,f=s.labelClassName,p=s.label,g=s.labelFormatter,w=s.accessibilityLayer,S=w===void 0?!1:w,b=function(){if(u&&u.length){var P={padding:0,margin:0},R=(h?Ah(u,h):u).map(function(U,I){if(U.type==="none")return null;var L=_d({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},c),Z=U.formatter||m||HI,q=U.value,z=U.name,ne=q,Y=z;if(Z&&ne!=null&&Y!=null){var se=Z(q,z,U,I,u);if(Array.isArray(se)){var ve=LI(se,2);ne=ve[0],Y=ve[1]}else ne=se}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:L},zt(Y)?$.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,zt(Y)?$.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,$.createElement("span",{className:"recharts-tooltip-item-value"},ne),$.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:P},R)}return null},A=_d({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),v=_d({margin:0},d),j=!Fe(p),N=j?p:"",O=We("recharts-default-tooltip",x),C=We("recharts-tooltip-label",f);j&&g&&u!==void 0&&u!==null&&(N=g(p,u));var D=S?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",Du({className:O,style:A},D),$.createElement("p",{className:C,style:v},$.isValidElement(N)?N:"".concat(N)),b())};function Mi(t){"@babel/helpers - typeof";return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Mi(t)}function Ol(t,s,a){return s=GI(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function GI(t){var s=ZI(t,"string");return Mi(s)=="symbol"?s:s+""}function ZI(t,s){if(Mi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Mi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var oi="recharts-tooltip-wrapper",YI={visibility:"hidden"};function XI(t){var s=t.coordinate,a=t.translateX,r=t.translateY;return We(oi,Ol(Ol(Ol(Ol({},"".concat(oi,"-right"),xe(a)&&s&&xe(s.x)&&a>=s.x),"".concat(oi,"-left"),xe(a)&&s&&xe(s.x)&&a<s.x),"".concat(oi,"-bottom"),xe(r)&&s&&xe(s.y)&&r>=s.y),"".concat(oi,"-top"),xe(r)&&s&&xe(s.y)&&r<s.y))}function Ff(t){var s=t.allowEscapeViewBox,a=t.coordinate,r=t.key,n=t.offsetTopLeft,i=t.position,l=t.reverseDirection,c=t.tooltipDimension,o=t.viewBox,d=t.viewBoxDimension;if(i&&xe(i[r]))return i[r];var u=a[r]-c-n,m=a[r]+n;if(s[r])return l[r]?u:m;if(l[r]){var h=u,x=o[r];return h<x?Math.max(m,o[r]):Math.max(u,o[r])}var f=m+c,p=o[r]+d;return f>p?Math.max(u,o[r]):Math.max(m,o[r])}function JI(t){var s=t.translateX,a=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(s,"px, ").concat(a,"px, 0)"):"translate(".concat(s,"px, ").concat(a,"px)")}}function QI(t){var s=t.allowEscapeViewBox,a=t.coordinate,r=t.offsetTopLeft,n=t.position,i=t.reverseDirection,l=t.tooltipBox,c=t.useTranslate3d,o=t.viewBox,d,u,m;return l.height>0&&l.width>0&&a?(u=Ff({allowEscapeViewBox:s,coordinate:a,key:"x",offsetTopLeft:r,position:n,reverseDirection:i,tooltipDimension:l.width,viewBox:o,viewBoxDimension:o.width}),m=Ff({allowEscapeViewBox:s,coordinate:a,key:"y",offsetTopLeft:r,position:n,reverseDirection:i,tooltipDimension:l.height,viewBox:o,viewBoxDimension:o.height}),d=JI({translateX:u,translateY:m,useTranslate3d:c})):d=YI,{cssProperties:d,cssClasses:XI({translateX:u,translateY:m,coordinate:a})}}function jn(t){"@babel/helpers - typeof";return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},jn(t)}function Bf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Uf(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Bf(Object(a),!0).forEach(function(r){$u(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Bf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function eD(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function zf(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ly(r.key),r)}}function tD(t,s,a){return s&&zf(t.prototype,s),a&&zf(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function sD(t,s,a){return s=gc(s),aD(t,iy()?Reflect.construct(s,a||[],gc(t).constructor):s.apply(t,a))}function aD(t,s){if(s&&(jn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rD(t)}function rD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iy=function(){return!!t})()}function gc(t){return gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},gc(t)}function nD(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Mu(t,s)}function Mu(t,s){return Mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Mu(t,s)}function $u(t,s,a){return s=ly(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function ly(t){var s=iD(t,"string");return jn(s)=="symbol"?s:s+""}function iD(t,s){if(jn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(jn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Wf=1,lD=function(t){function s(){var a;eD(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=sD(this,s,[].concat(n)),$u(a,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),$u(a,"handleKeyDown",function(l){if(l.key==="Escape"){var c,o,d,u;a.setState({dismissed:!0,dismissedAtCoordinate:{x:(c=(o=a.props.coordinate)===null||o===void 0?void 0:o.x)!==null&&c!==void 0?c:0,y:(d=(u=a.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),a}return nD(s,t),tD(s,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>Wf||Math.abs(r.height-this.state.lastBoundingBox.height)>Wf)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,n;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,c=n.animationDuration,o=n.animationEasing,d=n.children,u=n.coordinate,m=n.hasPayload,h=n.isAnimationActive,x=n.offset,f=n.position,p=n.reverseDirection,g=n.useTranslate3d,w=n.viewBox,S=n.wrapperStyle,b=QI({allowEscapeViewBox:l,coordinate:u,offsetTopLeft:x,position:f,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:w}),A=b.cssClasses,v=b.cssProperties,j=Uf(Uf({transition:h&&i?"transform ".concat(c,"ms ").concat(o):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&m?"visible":"hidden",position:"absolute",top:0,left:0},S);return $.createElement("div",{tabIndex:-1,className:A,style:j,ref:function(O){r.wrapperNode=O}},d)}}])}(y.PureComponent),cD=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Gs={isSsr:cD(),get:function(s){return Gs[s]},set:function(s,a){if(typeof s=="string")Gs[s]=a;else{var r=Object.keys(s);r&&r.length&&r.forEach(function(n){Gs[n]=s[n]})}}};function yn(t){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},yn(t)}function qf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Kf(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?qf(Object(a),!0).forEach(function(r){Ch(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function oD(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Hf(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oy(r.key),r)}}function dD(t,s,a){return s&&Hf(t.prototype,s),a&&Hf(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function uD(t,s,a){return s=vc(s),mD(t,cy()?Reflect.construct(s,a||[],vc(t).constructor):s.apply(t,a))}function mD(t,s){if(s&&(yn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hD(t)}function hD(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cy=function(){return!!t})()}function vc(t){return vc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},vc(t)}function xD(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ru(t,s)}function Ru(t,s){return Ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ru(t,s)}function Ch(t,s,a){return s=oy(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function oy(t){var s=fD(t,"string");return yn(s)=="symbol"?s:s+""}function fD(t,s){if(yn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(yn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function pD(t){return t.dataKey}function gD(t,s){return $.isValidElement(t)?$.cloneElement(t,s):typeof t=="function"?$.createElement(t,s):$.createElement(VI,s)}var Xt=function(t){function s(){return oD(this,s),uD(this,s,arguments)}return xD(s,t),dD(s,[{key:"render",value:function(){var r=this,n=this.props,i=n.active,l=n.allowEscapeViewBox,c=n.animationDuration,o=n.animationEasing,d=n.content,u=n.coordinate,m=n.filterNull,h=n.isAnimationActive,x=n.offset,f=n.payload,p=n.payloadUniqBy,g=n.position,w=n.reverseDirection,S=n.useTranslate3d,b=n.viewBox,A=n.wrapperStyle,v=f??[];m&&v.length&&(v=J0(f.filter(function(N){return N.value!=null&&(N.hide!==!0||r.props.includeHidden)}),p,pD));var j=v.length>0;return $.createElement(lD,{allowEscapeViewBox:l,animationDuration:c,animationEasing:o,isAnimationActive:h,active:i,coordinate:u,hasPayload:j,offset:x,position:g,reverseDirection:w,useTranslate3d:S,viewBox:b,wrapperStyle:A},gD(d,Kf(Kf({},this.props),{},{payload:v})))}}])}(y.PureComponent);Ch(Xt,"displayName","Tooltip");Ch(Xt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Gs.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var vD=xa,jD=function(){return vD.Date.now()},yD=jD,bD=/\s/;function ND(t){for(var s=t.length;s--&&bD.test(t.charAt(s)););return s}var wD=ND,SD=wD,kD=/^\s+/;function AD(t){return t&&t.slice(0,SD(t)+1).replace(kD,"")}var CD=AD,_D=CD,Vf=sr,PD=Kn,Gf=0/0,TD=/^[-+]0x[0-9a-f]+$/i,OD=/^0b[01]+$/i,ED=/^0o[0-7]+$/i,ID=parseInt;function DD(t){if(typeof t=="number")return t;if(PD(t))return Gf;if(Vf(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=Vf(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=_D(t);var a=OD.test(t);return a||ED.test(t)?ID(t.slice(2),a?2:8):TD.test(t)?Gf:+t}var dy=DD,MD=sr,Pd=yD,Zf=dy,$D="Expected a function",RD=Math.max,LD=Math.min;function FD(t,s,a){var r,n,i,l,c,o,d=0,u=!1,m=!1,h=!0;if(typeof t!="function")throw new TypeError($D);s=Zf(s)||0,MD(a)&&(u=!!a.leading,m="maxWait"in a,i=m?RD(Zf(a.maxWait)||0,s):i,h="trailing"in a?!!a.trailing:h);function x(j){var N=r,O=n;return r=n=void 0,d=j,l=t.apply(O,N),l}function f(j){return d=j,c=setTimeout(w,s),u?x(j):l}function p(j){var N=j-o,O=j-d,C=s-N;return m?LD(C,i-O):C}function g(j){var N=j-o,O=j-d;return o===void 0||N>=s||N<0||m&&O>=i}function w(){var j=Pd();if(g(j))return S(j);c=setTimeout(w,p(j))}function S(j){return c=void 0,h&&r?x(j):(r=n=void 0,l)}function b(){c!==void 0&&clearTimeout(c),d=0,r=o=n=c=void 0}function A(){return c===void 0?l:S(Pd())}function v(){var j=Pd(),N=g(j);if(r=arguments,n=this,o=j,N){if(c===void 0)return f(o);if(m)return clearTimeout(c),c=setTimeout(w,s),x(o)}return c===void 0&&(c=setTimeout(w,s)),l}return v.cancel=b,v.flush=A,v}var BD=FD,UD=BD,zD=sr,WD="Expected a function";function qD(t,s,a){var r=!0,n=!0;if(typeof t!="function")throw new TypeError(WD);return zD(a)&&(r="leading"in a?!!a.leading:r,n="trailing"in a?!!a.trailing:n),UD(t,s,{leading:r,maxWait:s,trailing:n})}var KD=qD;const uy=ht(KD);function $i(t){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$i(t)}function Yf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function El(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Yf(Object(a),!0).forEach(function(r){HD(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Yf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function HD(t,s,a){return s=VD(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function VD(t){var s=GD(t,"string");return $i(s)=="symbol"?s:s+""}function GD(t,s){if($i(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if($i(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function ZD(t,s){return QD(t)||JD(t,s)||XD(t,s)||YD()}function YD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XD(t,s){if(t){if(typeof t=="string")return Xf(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xf(t,s)}}function Xf(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function JD(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function QD(t){if(Array.isArray(t))return t}var Va=y.forwardRef(function(t,s){var a=t.aspect,r=t.initialDimension,n=r===void 0?{width:-1,height:-1}:r,i=t.width,l=i===void 0?"100%":i,c=t.height,o=c===void 0?"100%":c,d=t.minWidth,u=d===void 0?0:d,m=t.minHeight,h=t.maxHeight,x=t.children,f=t.debounce,p=f===void 0?0:f,g=t.id,w=t.className,S=t.onResize,b=t.style,A=b===void 0?{}:b,v=y.useRef(null),j=y.useRef();j.current=S,y.useImperativeHandle(s,function(){return Object.defineProperty(v.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),v.current},configurable:!0})});var N=y.useState({containerWidth:n.width,containerHeight:n.height}),O=ZD(N,2),C=O[0],D=O[1],E=y.useCallback(function(R,U){D(function(I){var L=Math.round(R),Z=Math.round(U);return I.containerWidth===L&&I.containerHeight===Z?I:{containerWidth:L,containerHeight:Z}})},[]);y.useEffect(function(){var R=function(z){var ne,Y=z[0].contentRect,se=Y.width,ve=Y.height;E(se,ve),(ne=j.current)===null||ne===void 0||ne.call(j,se,ve)};p>0&&(R=uy(R,p,{trailing:!0,leading:!1}));var U=new ResizeObserver(R),I=v.current.getBoundingClientRect(),L=I.width,Z=I.height;return E(L,Z),U.observe(v.current),function(){U.disconnect()}},[E,p]);var P=y.useMemo(function(){var R=C.containerWidth,U=C.containerHeight;if(R<0||U<0)return null;Vs(vr(l)||vr(o),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,l,o),Vs(!a||a>0,"The aspect(%s) must be greater than zero.",a);var I=vr(l)?R:l,L=vr(o)?U:o;a&&a>0&&(I?L=I/a:L&&(I=L*a),h&&L>h&&(L=h)),Vs(I>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,L,l,o,u,m,a);var Z=!Array.isArray(x)&&Aa(x.type).endsWith("Chart");return $.Children.map(x,function(q){return $.isValidElement(q)?y.cloneElement(q,El({width:I,height:L},Z?{style:El({height:"100%",width:"100%",maxHeight:L,maxWidth:I},q.props.style)}:{})):q})},[a,x,o,h,m,u,C,l]);return $.createElement("div",{id:g?"".concat(g):void 0,className:We("recharts-responsive-container",w),style:El(El({},A),{},{width:l,height:o,minWidth:u,minHeight:m,maxHeight:h}),ref:v},P)}),yl=function(s){return null};yl.displayName="Cell";function Ri(t){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ri(t)}function Jf(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Lu(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Jf(Object(a),!0).forEach(function(r){eM(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Jf(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function eM(t,s,a){return s=tM(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function tM(t){var s=sM(t,"string");return Ri(s)=="symbol"?s:s+""}function sM(t,s){if(Ri(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Ri(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Kr={widthCache:{},cacheCount:0},aM=2e3,rM={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Qf="recharts_measurement_span";function nM(t){var s=Lu({},t);return Object.keys(s).forEach(function(a){s[a]||delete s[a]}),s}var bi=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s==null||Gs.isSsr)return{width:0,height:0};var r=nM(a),n=JSON.stringify({text:s,copyStyle:r});if(Kr.widthCache[n])return Kr.widthCache[n];try{var i=document.getElementById(Qf);i||(i=document.createElement("span"),i.setAttribute("id",Qf),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var l=Lu(Lu({},rM),r);Object.assign(i.style,l),i.textContent="".concat(s);var c=i.getBoundingClientRect(),o={width:c.width,height:c.height};return Kr.widthCache[n]=o,++Kr.cacheCount>aM&&(Kr.cacheCount=0,Kr.widthCache={}),o}catch{return{width:0,height:0}}},iM=function(s){return{top:s.top+window.scrollY-document.documentElement.clientTop,left:s.left+window.scrollX-document.documentElement.clientLeft}};function Li(t){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Li(t)}function jc(t,s){return dM(t)||oM(t,s)||cM(t,s)||lM()}function lM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cM(t,s){if(t){if(typeof t=="string")return ep(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ep(t,s)}}function ep(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function oM(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function dM(t){if(Array.isArray(t))return t}function uM(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function tp(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hM(r.key),r)}}function mM(t,s,a){return s&&tp(t.prototype,s),a&&tp(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function hM(t){var s=xM(t,"string");return Li(s)=="symbol"?s:s+""}function xM(t,s){if(Li(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Li(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var sp=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ap=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fM=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pM=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,my={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},gM=Object.keys(my),Xr="NaN";function vM(t,s){return t*my[s]}var Il=function(){function t(s,a){uM(this,t),this.num=s,this.unit=a,this.num=s,this.unit=a,Number.isNaN(s)&&(this.unit=""),a!==""&&!fM.test(a)&&(this.num=NaN,this.unit=""),gM.includes(a)&&(this.num=vM(s,a),this.unit="px")}return mM(t,[{key:"add",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num+a.num,this.unit)}},{key:"subtract",value:function(a){return this.unit!==a.unit?new t(NaN,""):new t(this.num-a.num,this.unit)}},{key:"multiply",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num*a.num,this.unit||a.unit)}},{key:"divide",value:function(a){return this.unit!==""&&a.unit!==""&&this.unit!==a.unit?new t(NaN,""):new t(this.num/a.num,this.unit||a.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(a){var r,n=(r=pM.exec(a))!==null&&r!==void 0?r:[],i=jc(n,3),l=i[1],c=i[2];return new t(parseFloat(l),c??"")}}])}();function hy(t){if(t.includes(Xr))return Xr;for(var s=t;s.includes("*")||s.includes("/");){var a,r=(a=sp.exec(s))!==null&&a!==void 0?a:[],n=jc(r,4),i=n[1],l=n[2],c=n[3],o=Il.parse(i??""),d=Il.parse(c??""),u=l==="*"?o.multiply(d):o.divide(d);if(u.isNaN())return Xr;s=s.replace(sp,u.toString())}for(;s.includes("+")||/.-\d+(?:\.\d+)?/.test(s);){var m,h=(m=ap.exec(s))!==null&&m!==void 0?m:[],x=jc(h,4),f=x[1],p=x[2],g=x[3],w=Il.parse(f??""),S=Il.parse(g??""),b=p==="+"?w.add(S):w.subtract(S);if(b.isNaN())return Xr;s=s.replace(ap,b.toString())}return s}var rp=/\(([^()]*)\)/;function jM(t){for(var s=t;s.includes("(");){var a=rp.exec(s),r=jc(a,2),n=r[1];s=s.replace(rp,hy(n))}return s}function yM(t){var s=t.replace(/\s+/g,"");return s=jM(s),s=hy(s),s}function bM(t){try{return yM(t)}catch{return Xr}}function Td(t){var s=bM(t.slice(5,-1));return s===Xr?"":s}var NM=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],wM=["dx","dy","angle","className","breakAll"];function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Fu.apply(this,arguments)}function np(t,s){if(t==null)return{};var a=SM(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function SM(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ip(t,s){return _M(t)||CM(t,s)||AM(t,s)||kM()}function kM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AM(t,s){if(t){if(typeof t=="string")return lp(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return lp(t,s)}}function lp(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function CM(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function _M(t){if(Array.isArray(t))return t}var xy=/[ \f\n\r\t\v\u2028\u2029]+/,fy=function(s){var a=s.children,r=s.breakAll,n=s.style;try{var i=[];Fe(a)||(r?i=a.toString().split(""):i=a.toString().split(xy));var l=i.map(function(o){return{word:o,width:bi(o,n).width}}),c=r?0:bi(" ",n).width;return{wordsWithComputedWidth:l,spaceWidth:c}}catch{return null}},PM=function(s,a,r,n,i){var l=s.maxLines,c=s.children,o=s.style,d=s.breakAll,u=xe(l),m=c,h=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(L,Z){var q=Z.word,z=Z.width,ne=L[L.length-1];if(ne&&(n==null||i||ne.width+z+r<Number(n)))ne.words.push(q),ne.width+=z+r;else{var Y={words:[q],width:z};L.push(Y)}return L},[])},x=h(a),f=function(I){return I.reduce(function(L,Z){return L.width>Z.width?L:Z})};if(!u)return x;for(var p="…",g=function(I){var L=m.slice(0,I),Z=fy({breakAll:d,style:o,children:L+p}).wordsWithComputedWidth,q=h(Z),z=q.length>l||f(q).width>Number(n);return[z,q]},w=0,S=m.length-1,b=0,A;w<=S&&b<=m.length-1;){var v=Math.floor((w+S)/2),j=v-1,N=g(j),O=ip(N,2),C=O[0],D=O[1],E=g(v),P=ip(E,1),R=P[0];if(!C&&!R&&(w=v+1),C&&R&&(S=v-1),!C&&R){A=D;break}b++}return A||x},cp=function(s){var a=Fe(s)?[]:s.toString().split(xy);return[{words:a}]},TM=function(s){var a=s.width,r=s.scaleToFit,n=s.children,i=s.style,l=s.breakAll,c=s.maxLines;if((a||r)&&!Gs.isSsr){var o,d,u=fy({breakAll:l,children:n,style:i});if(u){var m=u.wordsWithComputedWidth,h=u.spaceWidth;o=m,d=h}else return cp(n);return PM({breakAll:l,children:n,maxLines:c,style:i},o,d,a,r)}return cp(n)},op="#808080",Dr=function(s){var a=s.x,r=a===void 0?0:a,n=s.y,i=n===void 0?0:n,l=s.lineHeight,c=l===void 0?"1em":l,o=s.capHeight,d=o===void 0?"0.71em":o,u=s.scaleToFit,m=u===void 0?!1:u,h=s.textAnchor,x=h===void 0?"start":h,f=s.verticalAnchor,p=f===void 0?"end":f,g=s.fill,w=g===void 0?op:g,S=np(s,NM),b=y.useMemo(function(){return TM({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:m,style:S.style,width:S.width})},[S.breakAll,S.children,S.maxLines,m,S.style,S.width]),A=S.dx,v=S.dy,j=S.angle,N=S.className,O=S.breakAll,C=np(S,wM);if(!zt(r)||!zt(i))return null;var D=r+(xe(A)?A:0),E=i+(xe(v)?v:0),P;switch(p){case"start":P=Td("calc(".concat(d,")"));break;case"middle":P=Td("calc(".concat((b.length-1)/2," * -").concat(c," + (").concat(d," / 2))"));break;default:P=Td("calc(".concat(b.length-1," * -").concat(c,")"));break}var R=[];if(m){var U=b[0].width,I=S.width;R.push("scale(".concat((xe(I)?I/U:1)/U,")"))}return j&&R.push("rotate(".concat(j,", ").concat(D,", ").concat(E,")")),R.length&&(C.transform=R.join(" ")),$.createElement("text",Fu({},Ce(C,!0),{x:D,y:E,className:We("recharts-text",N),textAnchor:x,fill:w.includes("url")?op:w}),b.map(function(L,Z){var q=L.words.join(O?"":" ");return $.createElement("tspan",{x:D,dy:Z===0?P:c,key:"".concat(q,"-").concat(Z)},q)}))};function Xa(t,s){return t==null||s==null?NaN:t<s?-1:t>s?1:t>=s?0:NaN}function OM(t,s){return t==null||s==null?NaN:s<t?-1:s>t?1:s>=t?0:NaN}function _h(t){let s,a,r;t.length!==2?(s=Xa,a=(c,o)=>Xa(t(c),o),r=(c,o)=>t(c)-o):(s=t===Xa||t===OM?t:EM,a=t,r=t);function n(c,o,d=0,u=c.length){if(d<u){if(s(o,o)!==0)return u;do{const m=d+u>>>1;a(c[m],o)<0?d=m+1:u=m}while(d<u)}return d}function i(c,o,d=0,u=c.length){if(d<u){if(s(o,o)!==0)return u;do{const m=d+u>>>1;a(c[m],o)<=0?d=m+1:u=m}while(d<u)}return d}function l(c,o,d=0,u=c.length){const m=n(c,o,d,u-1);return m>d&&r(c[m-1],o)>-r(c[m],o)?m-1:m}return{left:n,center:l,right:i}}function EM(){return 0}function py(t){return t===null?NaN:+t}function*IM(t,s){if(s===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(yield a);else{let a=-1;for(let r of t)(r=s(r,++a,t))!=null&&(r=+r)>=r&&(yield r)}}const DM=_h(Xa),MM=DM.right;_h(py).center;const bl=MM;class dp extends Map{constructor(s,a=LM){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),s!=null)for(const[r,n]of s)this.set(r,n)}get(s){return super.get(up(this,s))}has(s){return super.has(up(this,s))}set(s,a){return super.set($M(this,s),a)}delete(s){return super.delete(RM(this,s))}}function up({_intern:t,_key:s},a){const r=s(a);return t.has(r)?t.get(r):a}function $M({_intern:t,_key:s},a){const r=s(a);return t.has(r)?t.get(r):(t.set(r,a),a)}function RM({_intern:t,_key:s},a){const r=s(a);return t.has(r)&&(a=t.get(r),t.delete(r)),a}function LM(t){return t!==null&&typeof t=="object"?t.valueOf():t}function FM(t=Xa){if(t===Xa)return gy;if(typeof t!="function")throw new TypeError("compare is not a function");return(s,a)=>{const r=t(s,a);return r||r===0?r:(t(a,a)===0)-(t(s,s)===0)}}function gy(t,s){return(t==null||!(t>=t))-(s==null||!(s>=s))||(t<s?-1:t>s?1:0)}const BM=Math.sqrt(50),UM=Math.sqrt(10),zM=Math.sqrt(2);function yc(t,s,a){const r=(s-t)/Math.max(0,a),n=Math.floor(Math.log10(r)),i=r/Math.pow(10,n),l=i>=BM?10:i>=UM?5:i>=zM?2:1;let c,o,d;return n<0?(d=Math.pow(10,-n)/l,c=Math.round(t*d),o=Math.round(s*d),c/d<t&&++c,o/d>s&&--o,d=-d):(d=Math.pow(10,n)*l,c=Math.round(t/d),o=Math.round(s/d),c*d<t&&++c,o*d>s&&--o),o<c&&.5<=a&&a<2?yc(t,s,a*2):[c,o,d]}function Bu(t,s,a){if(s=+s,t=+t,a=+a,!(a>0))return[];if(t===s)return[t];const r=s<t,[n,i,l]=r?yc(s,t,a):yc(t,s,a);if(!(i>=n))return[];const c=i-n+1,o=new Array(c);if(r)if(l<0)for(let d=0;d<c;++d)o[d]=(i-d)/-l;else for(let d=0;d<c;++d)o[d]=(i-d)*l;else if(l<0)for(let d=0;d<c;++d)o[d]=(n+d)/-l;else for(let d=0;d<c;++d)o[d]=(n+d)*l;return o}function Uu(t,s,a){return s=+s,t=+t,a=+a,yc(t,s,a)[2]}function zu(t,s,a){s=+s,t=+t,a=+a;const r=s<t,n=r?Uu(s,t,a):Uu(t,s,a);return(r?-1:1)*(n<0?1/-n:n)}function mp(t,s){let a;if(s===void 0)for(const r of t)r!=null&&(a<r||a===void 0&&r>=r)&&(a=r);else{let r=-1;for(let n of t)(n=s(n,++r,t))!=null&&(a<n||a===void 0&&n>=n)&&(a=n)}return a}function hp(t,s){let a;if(s===void 0)for(const r of t)r!=null&&(a>r||a===void 0&&r>=r)&&(a=r);else{let r=-1;for(let n of t)(n=s(n,++r,t))!=null&&(a>n||a===void 0&&n>=n)&&(a=n)}return a}function vy(t,s,a=0,r=1/0,n){if(s=Math.floor(s),a=Math.floor(Math.max(0,a)),r=Math.floor(Math.min(t.length-1,r)),!(a<=s&&s<=r))return t;for(n=n===void 0?gy:FM(n);r>a;){if(r-a>600){const o=r-a+1,d=s-a+1,u=Math.log(o),m=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*m*(o-m)/o)*(d-o/2<0?-1:1),x=Math.max(a,Math.floor(s-d*m/o+h)),f=Math.min(r,Math.floor(s+(o-d)*m/o+h));vy(t,s,x,f,n)}const i=t[s];let l=a,c=r;for(di(t,a,s),n(t[r],i)>0&&di(t,a,r);l<c;){for(di(t,l,c),++l,--c;n(t[l],i)<0;)++l;for(;n(t[c],i)>0;)--c}n(t[a],i)===0?di(t,a,c):(++c,di(t,c,r)),c<=s&&(a=c+1),s<=c&&(r=c-1)}return t}function di(t,s,a){const r=t[s];t[s]=t[a],t[a]=r}function WM(t,s,a){if(t=Float64Array.from(IM(t,a)),!(!(r=t.length)||isNaN(s=+s))){if(s<=0||r<2)return hp(t);if(s>=1)return mp(t);var r,n=(r-1)*s,i=Math.floor(n),l=mp(vy(t,i).subarray(0,i+1)),c=hp(t.subarray(i+1));return l+(c-l)*(n-i)}}function qM(t,s,a=py){if(!(!(r=t.length)||isNaN(s=+s))){if(s<=0||r<2)return+a(t[0],0,t);if(s>=1)return+a(t[r-1],r-1,t);var r,n=(r-1)*s,i=Math.floor(n),l=+a(t[i],i,t),c=+a(t[i+1],i+1,t);return l+(c-l)*(n-i)}}function KM(t,s,a){t=+t,s=+s,a=(n=arguments.length)<2?(s=t,t=0,1):n<3?1:+a;for(var r=-1,n=Math.max(0,Math.ceil((s-t)/a))|0,i=new Array(n);++r<n;)i[r]=t+r*a;return i}function Fs(t,s){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(s).domain(t);break}return this}function Ba(t,s){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof s=="function"?this.interpolator(s):this.range(s);break}}return this}const Wu=Symbol("implicit");function Ph(){var t=new dp,s=[],a=[],r=Wu;function n(i){let l=t.get(i);if(l===void 0){if(r!==Wu)return r;t.set(i,l=s.push(i)-1)}return a[l%a.length]}return n.domain=function(i){if(!arguments.length)return s.slice();s=[],t=new dp;for(const l of i)t.has(l)||t.set(l,s.push(l)-1);return n},n.range=function(i){return arguments.length?(a=Array.from(i),n):a.slice()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return Ph(s,a).unknown(r)},Fs.apply(n,arguments),n}function Fi(){var t=Ph().unknown(void 0),s=t.domain,a=t.range,r=0,n=1,i,l,c=!1,o=0,d=0,u=.5;delete t.unknown;function m(){var h=s().length,x=n<r,f=x?n:r,p=x?r:n;i=(p-f)/Math.max(1,h-o+d*2),c&&(i=Math.floor(i)),f+=(p-f-i*(h-o))*u,l=i*(1-o),c&&(f=Math.round(f),l=Math.round(l));var g=KM(h).map(function(w){return f+i*w});return a(x?g.reverse():g)}return t.domain=function(h){return arguments.length?(s(h),m()):s()},t.range=function(h){return arguments.length?([r,n]=h,r=+r,n=+n,m()):[r,n]},t.rangeRound=function(h){return[r,n]=h,r=+r,n=+n,c=!0,m()},t.bandwidth=function(){return l},t.step=function(){return i},t.round=function(h){return arguments.length?(c=!!h,m()):c},t.padding=function(h){return arguments.length?(o=Math.min(1,d=+h),m()):o},t.paddingInner=function(h){return arguments.length?(o=Math.min(1,h),m()):o},t.paddingOuter=function(h){return arguments.length?(d=+h,m()):d},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),m()):u},t.copy=function(){return Fi(s(),[r,n]).round(c).paddingInner(o).paddingOuter(d).align(u)},Fs.apply(m(),arguments)}function jy(t){var s=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return jy(s())},t}function Ni(){return jy(Fi.apply(null,arguments).paddingInner(1))}function Th(t,s,a){t.prototype=s.prototype=a,a.constructor=t}function yy(t,s){var a=Object.create(t.prototype);for(var r in s)a[r]=s[r];return a}function Nl(){}var Bi=.7,bc=1/Bi,an="\\s*([+-]?\\d+)\\s*",Ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HM=/^#([0-9a-f]{3,8})$/,VM=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),GM=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),ZM=new RegExp(`^rgba\\(${an},${an},${an},${Ui}\\)$`),YM=new RegExp(`^rgba\\(${ra},${ra},${ra},${Ui}\\)$`),XM=new RegExp(`^hsl\\(${Ui},${ra},${ra}\\)$`),JM=new RegExp(`^hsla\\(${Ui},${ra},${ra},${Ui}\\)$`),xp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Th(Nl,zi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fp,formatHex:fp,formatHex8:QM,formatHsl:e$,formatRgb:pp,toString:pp});function fp(){return this.rgb().formatHex()}function QM(){return this.rgb().formatHex8()}function e$(){return by(this).formatHsl()}function pp(){return this.rgb().formatRgb()}function zi(t){var s,a;return t=(t+"").trim().toLowerCase(),(s=HM.exec(t))?(a=s[1].length,s=parseInt(s[1],16),a===6?gp(s):a===3?new ps(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):a===8?Dl(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):a===4?Dl(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=VM.exec(t))?new ps(s[1],s[2],s[3],1):(s=GM.exec(t))?new ps(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=ZM.exec(t))?Dl(s[1],s[2],s[3],s[4]):(s=YM.exec(t))?Dl(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=XM.exec(t))?yp(s[1],s[2]/100,s[3]/100,1):(s=JM.exec(t))?yp(s[1],s[2]/100,s[3]/100,s[4]):xp.hasOwnProperty(t)?gp(xp[t]):t==="transparent"?new ps(NaN,NaN,NaN,0):null}function gp(t){return new ps(t>>16&255,t>>8&255,t&255,1)}function Dl(t,s,a,r){return r<=0&&(t=s=a=NaN),new ps(t,s,a,r)}function t$(t){return t instanceof Nl||(t=zi(t)),t?(t=t.rgb(),new ps(t.r,t.g,t.b,t.opacity)):new ps}function qu(t,s,a,r){return arguments.length===1?t$(t):new ps(t,s,a,r??1)}function ps(t,s,a,r){this.r=+t,this.g=+s,this.b=+a,this.opacity=+r}Th(ps,qu,yy(Nl,{brighter(t){return t=t==null?bc:Math.pow(bc,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bi:Math.pow(Bi,t),new ps(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ps(kr(this.r),kr(this.g),kr(this.b),Nc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vp,formatHex:vp,formatHex8:s$,formatRgb:jp,toString:jp}));function vp(){return`#${jr(this.r)}${jr(this.g)}${jr(this.b)}`}function s$(){return`#${jr(this.r)}${jr(this.g)}${jr(this.b)}${jr((isNaN(this.opacity)?1:this.opacity)*255)}`}function jp(){const t=Nc(this.opacity);return`${t===1?"rgb(":"rgba("}${kr(this.r)}, ${kr(this.g)}, ${kr(this.b)}${t===1?")":`, ${t})`}`}function Nc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kr(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jr(t){return t=kr(t),(t<16?"0":"")+t.toString(16)}function yp(t,s,a,r){return r<=0?t=s=a=NaN:a<=0||a>=1?t=s=NaN:s<=0&&(t=NaN),new qs(t,s,a,r)}function by(t){if(t instanceof qs)return new qs(t.h,t.s,t.l,t.opacity);if(t instanceof Nl||(t=zi(t)),!t)return new qs;if(t instanceof qs)return t;t=t.rgb();var s=t.r/255,a=t.g/255,r=t.b/255,n=Math.min(s,a,r),i=Math.max(s,a,r),l=NaN,c=i-n,o=(i+n)/2;return c?(s===i?l=(a-r)/c+(a<r)*6:a===i?l=(r-s)/c+2:l=(s-a)/c+4,c/=o<.5?i+n:2-i-n,l*=60):c=o>0&&o<1?0:l,new qs(l,c,o,t.opacity)}function a$(t,s,a,r){return arguments.length===1?by(t):new qs(t,s,a,r??1)}function qs(t,s,a,r){this.h=+t,this.s=+s,this.l=+a,this.opacity=+r}Th(qs,a$,yy(Nl,{brighter(t){return t=t==null?bc:Math.pow(bc,t),new qs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bi:Math.pow(Bi,t),new qs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,r=a+(a<.5?a:1-a)*s,n=2*a-r;return new ps(Od(t>=240?t-240:t+120,n,r),Od(t,n,r),Od(t<120?t+240:t-120,n,r),this.opacity)},clamp(){return new qs(bp(this.h),Ml(this.s),Ml(this.l),Nc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Nc(this.opacity);return`${t===1?"hsl(":"hsla("}${bp(this.h)}, ${Ml(this.s)*100}%, ${Ml(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bp(t){return t=(t||0)%360,t<0?t+360:t}function Ml(t){return Math.max(0,Math.min(1,t||0))}function Od(t,s,a){return(t<60?s+(a-s)*t/60:t<180?a:t<240?s+(a-s)*(240-t)/60:s)*255}const Oh=t=>()=>t;function r$(t,s){return function(a){return t+a*s}}function n$(t,s,a){return t=Math.pow(t,a),s=Math.pow(s,a)-t,a=1/a,function(r){return Math.pow(t+r*s,a)}}function i$(t){return(t=+t)==1?Ny:function(s,a){return a-s?n$(s,a,t):Oh(isNaN(s)?a:s)}}function Ny(t,s){var a=s-t;return a?r$(t,a):Oh(isNaN(t)?s:t)}const Np=function t(s){var a=i$(s);function r(n,i){var l=a((n=qu(n)).r,(i=qu(i)).r),c=a(n.g,i.g),o=a(n.b,i.b),d=Ny(n.opacity,i.opacity);return function(u){return n.r=l(u),n.g=c(u),n.b=o(u),n.opacity=d(u),n+""}}return r.gamma=t,r}(1);function l$(t,s){s||(s=[]);var a=t?Math.min(s.length,t.length):0,r=s.slice(),n;return function(i){for(n=0;n<a;++n)r[n]=t[n]*(1-i)+s[n]*i;return r}}function c$(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function o$(t,s){var a=s?s.length:0,r=t?Math.min(a,t.length):0,n=new Array(r),i=new Array(a),l;for(l=0;l<r;++l)n[l]=ei(t[l],s[l]);for(;l<a;++l)i[l]=s[l];return function(c){for(l=0;l<r;++l)i[l]=n[l](c);return i}}function d$(t,s){var a=new Date;return t=+t,s=+s,function(r){return a.setTime(t*(1-r)+s*r),a}}function wc(t,s){return t=+t,s=+s,function(a){return t*(1-a)+s*a}}function u$(t,s){var a={},r={},n;(t===null||typeof t!="object")&&(t={}),(s===null||typeof s!="object")&&(s={});for(n in s)n in t?a[n]=ei(t[n],s[n]):r[n]=s[n];return function(i){for(n in a)r[n]=a[n](i);return r}}var Ku=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ed=new RegExp(Ku.source,"g");function m$(t){return function(){return t}}function h$(t){return function(s){return t(s)+""}}function x$(t,s){var a=Ku.lastIndex=Ed.lastIndex=0,r,n,i,l=-1,c=[],o=[];for(t=t+"",s=s+"";(r=Ku.exec(t))&&(n=Ed.exec(s));)(i=n.index)>a&&(i=s.slice(a,i),c[l]?c[l]+=i:c[++l]=i),(r=r[0])===(n=n[0])?c[l]?c[l]+=n:c[++l]=n:(c[++l]=null,o.push({i:l,x:wc(r,n)})),a=Ed.lastIndex;return a<s.length&&(i=s.slice(a),c[l]?c[l]+=i:c[++l]=i),c.length<2?o[0]?h$(o[0].x):m$(s):(s=o.length,function(d){for(var u=0,m;u<s;++u)c[(m=o[u]).i]=m.x(d);return c.join("")})}function ei(t,s){var a=typeof s,r;return s==null||a==="boolean"?Oh(s):(a==="number"?wc:a==="string"?(r=zi(s))?(s=r,Np):x$:s instanceof zi?Np:s instanceof Date?d$:c$(s)?l$:Array.isArray(s)?o$:typeof s.valueOf!="function"&&typeof s.toString!="function"||isNaN(s)?u$:wc)(t,s)}function Eh(t,s){return t=+t,s=+s,function(a){return Math.round(t*(1-a)+s*a)}}function f$(t,s){s===void 0&&(s=t,t=ei);for(var a=0,r=s.length-1,n=s[0],i=new Array(r<0?0:r);a<r;)i[a]=t(n,n=s[++a]);return function(l){var c=Math.max(0,Math.min(r-1,Math.floor(l*=r)));return i[c](l-c)}}function p$(t){return function(){return t}}function Sc(t){return+t}var wp=[0,1];function xs(t){return t}function Hu(t,s){return(s-=t=+t)?function(a){return(a-t)/s}:p$(isNaN(s)?NaN:.5)}function g$(t,s){var a;return t>s&&(a=t,t=s,s=a),function(r){return Math.max(t,Math.min(s,r))}}function v$(t,s,a){var r=t[0],n=t[1],i=s[0],l=s[1];return n<r?(r=Hu(n,r),i=a(l,i)):(r=Hu(r,n),i=a(i,l)),function(c){return i(r(c))}}function j$(t,s,a){var r=Math.min(t.length,s.length)-1,n=new Array(r),i=new Array(r),l=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),s=s.slice().reverse());++l<r;)n[l]=Hu(t[l],t[l+1]),i[l]=a(s[l],s[l+1]);return function(c){var o=bl(t,c,1,r)-1;return i[o](n[o](c))}}function wl(t,s){return s.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Wo(){var t=wp,s=wp,a=ei,r,n,i,l=xs,c,o,d;function u(){var h=Math.min(t.length,s.length);return l!==xs&&(l=g$(t[0],t[h-1])),c=h>2?j$:v$,o=d=null,m}function m(h){return h==null||isNaN(h=+h)?i:(o||(o=c(t.map(r),s,a)))(r(l(h)))}return m.invert=function(h){return l(n((d||(d=c(s,t.map(r),wc)))(h)))},m.domain=function(h){return arguments.length?(t=Array.from(h,Sc),u()):t.slice()},m.range=function(h){return arguments.length?(s=Array.from(h),u()):s.slice()},m.rangeRound=function(h){return s=Array.from(h),a=Eh,u()},m.clamp=function(h){return arguments.length?(l=h?!0:xs,u()):l!==xs},m.interpolate=function(h){return arguments.length?(a=h,u()):a},m.unknown=function(h){return arguments.length?(i=h,m):i},function(h,x){return r=h,n=x,u()}}function Ih(){return Wo()(xs,xs)}function y$(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kc(t,s){if((a=(t=s?t.toExponential(s-1):t.toExponential()).indexOf("e"))<0)return null;var a,r=t.slice(0,a);return[r.length>1?r[0]+r.slice(2):r,+t.slice(a+1)]}function bn(t){return t=kc(Math.abs(t)),t?t[1]:NaN}function b$(t,s){return function(a,r){for(var n=a.length,i=[],l=0,c=t[0],o=0;n>0&&c>0&&(o+c+1>r&&(c=Math.max(1,r-o)),i.push(a.substring(n-=c,n+c)),!((o+=c+1)>r));)c=t[l=(l+1)%t.length];return i.reverse().join(s)}}function N$(t){return function(s){return s.replace(/[0-9]/g,function(a){return t[+a]})}}var w$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wi(t){if(!(s=w$.exec(t)))throw new Error("invalid format: "+t);var s;return new Dh({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}Wi.prototype=Dh.prototype;function Dh(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Dh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function S$(t){e:for(var s=t.length,a=1,r=-1,n;a<s;++a)switch(t[a]){case".":r=n=a;break;case"0":r===0&&(r=a),n=a;break;default:if(!+t[a])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(n+1):t}var wy;function k$(t,s){var a=kc(t,s);if(!a)return t+"";var r=a[0],n=a[1],i=n-(wy=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,l=r.length;return i===l?r:i>l?r+new Array(i-l+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+kc(t,Math.max(0,s+i-1))[0]}function Sp(t,s){var a=kc(t,s);if(!a)return t+"";var r=a[0],n=a[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}const kp={"%":(t,s)=>(t*100).toFixed(s),b:t=>Math.round(t).toString(2),c:t=>t+"",d:y$,e:(t,s)=>t.toExponential(s),f:(t,s)=>t.toFixed(s),g:(t,s)=>t.toPrecision(s),o:t=>Math.round(t).toString(8),p:(t,s)=>Sp(t*100,s),r:Sp,s:k$,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ap(t){return t}var Cp=Array.prototype.map,_p=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function A$(t){var s=t.grouping===void 0||t.thousands===void 0?Ap:b$(Cp.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",n=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Ap:N$(Cp.call(t.numerals,String)),l=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",o=t.nan===void 0?"NaN":t.nan+"";function d(m){m=Wi(m);var h=m.fill,x=m.align,f=m.sign,p=m.symbol,g=m.zero,w=m.width,S=m.comma,b=m.precision,A=m.trim,v=m.type;v==="n"?(S=!0,v="g"):kp[v]||(b===void 0&&(b=12),A=!0,v="g"),(g||h==="0"&&x==="=")&&(g=!0,h="0",x="=");var j=p==="$"?a:p==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",N=p==="$"?r:/[%p]/.test(v)?l:"",O=kp[v],C=/[defgprs%]/.test(v);b=b===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(E){var P=j,R=N,U,I,L;if(v==="c")R=O(E)+R,E="";else{E=+E;var Z=E<0||1/E<0;if(E=isNaN(E)?o:O(Math.abs(E),b),A&&(E=S$(E)),Z&&+E==0&&f!=="+"&&(Z=!1),P=(Z?f==="("?f:c:f==="-"||f==="("?"":f)+P,R=(v==="s"?_p[8+wy/3]:"")+R+(Z&&f==="("?")":""),C){for(U=-1,I=E.length;++U<I;)if(L=E.charCodeAt(U),48>L||L>57){R=(L===46?n+E.slice(U+1):E.slice(U))+R,E=E.slice(0,U);break}}}S&&!g&&(E=s(E,1/0));var q=P.length+E.length+R.length,z=q<w?new Array(w-q+1).join(h):"";switch(S&&g&&(E=s(z+E,z.length?w-R.length:1/0),z=""),x){case"<":E=P+E+R+z;break;case"=":E=P+z+E+R;break;case"^":E=z.slice(0,q=z.length>>1)+P+E+R+z.slice(q);break;default:E=z+P+E+R;break}return i(E)}return D.toString=function(){return m+""},D}function u(m,h){var x=d((m=Wi(m),m.type="f",m)),f=Math.max(-8,Math.min(8,Math.floor(bn(h)/3)))*3,p=Math.pow(10,-f),g=_p[8+f/3];return function(w){return x(p*w)+g}}return{format:d,formatPrefix:u}}var $l,Mh,Sy;C$({thousands:",",grouping:[3],currency:["$",""]});function C$(t){return $l=A$(t),Mh=$l.format,Sy=$l.formatPrefix,$l}function _$(t){return Math.max(0,-bn(Math.abs(t)))}function P$(t,s){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bn(s)/3)))*3-bn(Math.abs(t)))}function T$(t,s){return t=Math.abs(t),s=Math.abs(s)-t,Math.max(0,bn(s)-bn(t))+1}function ky(t,s,a,r){var n=zu(t,s,a),i;switch(r=Wi(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(t),Math.abs(s));return r.precision==null&&!isNaN(i=P$(n,l))&&(r.precision=i),Sy(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=T$(n,Math.max(Math.abs(t),Math.abs(s))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=_$(n))&&(r.precision=i-(r.type==="%")*2);break}}return Mh(r)}function ar(t){var s=t.domain;return t.ticks=function(a){var r=s();return Bu(r[0],r[r.length-1],a??10)},t.tickFormat=function(a,r){var n=s();return ky(n[0],n[n.length-1],a??10,r)},t.nice=function(a){a==null&&(a=10);var r=s(),n=0,i=r.length-1,l=r[n],c=r[i],o,d,u=10;for(c<l&&(d=l,l=c,c=d,d=n,n=i,i=d);u-- >0;){if(d=Uu(l,c,a),d===o)return r[n]=l,r[i]=c,s(r);if(d>0)l=Math.floor(l/d)*d,c=Math.ceil(c/d)*d;else if(d<0)l=Math.ceil(l*d)/d,c=Math.floor(c*d)/d;else break;o=d}return t},t}function Ac(){var t=Ih();return t.copy=function(){return wl(t,Ac())},Fs.apply(t,arguments),ar(t)}function Ay(t){var s;function a(r){return r==null||isNaN(r=+r)?s:r}return a.invert=a,a.domain=a.range=function(r){return arguments.length?(t=Array.from(r,Sc),a):t.slice()},a.unknown=function(r){return arguments.length?(s=r,a):s},a.copy=function(){return Ay(t).unknown(s)},t=arguments.length?Array.from(t,Sc):[0,1],ar(a)}function Cy(t,s){t=t.slice();var a=0,r=t.length-1,n=t[a],i=t[r],l;return i<n&&(l=a,a=r,r=l,l=n,n=i,i=l),t[a]=s.floor(n),t[r]=s.ceil(i),t}function Pp(t){return Math.log(t)}function Tp(t){return Math.exp(t)}function O$(t){return-Math.log(-t)}function E$(t){return-Math.exp(-t)}function I$(t){return isFinite(t)?+("1e"+t):t<0?0:t}function D$(t){return t===10?I$:t===Math.E?Math.exp:s=>Math.pow(t,s)}function M$(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),s=>Math.log(s)/t)}function Op(t){return(s,a)=>-t(-s,a)}function $h(t){const s=t(Pp,Tp),a=s.domain;let r=10,n,i;function l(){return n=M$(r),i=D$(r),a()[0]<0?(n=Op(n),i=Op(i),t(O$,E$)):t(Pp,Tp),s}return s.base=function(c){return arguments.length?(r=+c,l()):r},s.domain=function(c){return arguments.length?(a(c),l()):a()},s.ticks=c=>{const o=a();let d=o[0],u=o[o.length-1];const m=u<d;m&&([d,u]=[u,d]);let h=n(d),x=n(u),f,p;const g=c==null?10:+c;let w=[];if(!(r%1)&&x-h<g){if(h=Math.floor(h),x=Math.ceil(x),d>0){for(;h<=x;++h)for(f=1;f<r;++f)if(p=h<0?f/i(-h):f*i(h),!(p<d)){if(p>u)break;w.push(p)}}else for(;h<=x;++h)for(f=r-1;f>=1;--f)if(p=h>0?f/i(-h):f*i(h),!(p<d)){if(p>u)break;w.push(p)}w.length*2<g&&(w=Bu(d,u,g))}else w=Bu(h,x,Math.min(x-h,g)).map(i);return m?w.reverse():w},s.tickFormat=(c,o)=>{if(c==null&&(c=10),o==null&&(o=r===10?"s":","),typeof o!="function"&&(!(r%1)&&(o=Wi(o)).precision==null&&(o.trim=!0),o=Mh(o)),c===1/0)return o;const d=Math.max(1,r*c/s.ticks().length);return u=>{let m=u/i(Math.round(n(u)));return m*r<r-.5&&(m*=r),m<=d?o(u):""}},s.nice=()=>a(Cy(a(),{floor:c=>i(Math.floor(n(c))),ceil:c=>i(Math.ceil(n(c)))})),s}function _y(){const t=$h(Wo()).domain([1,10]);return t.copy=()=>wl(t,_y()).base(t.base()),Fs.apply(t,arguments),t}function Ep(t){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/t))}}function Ip(t){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*t}}function Rh(t){var s=1,a=t(Ep(s),Ip(s));return a.constant=function(r){return arguments.length?t(Ep(s=+r),Ip(s)):s},ar(a)}function Py(){var t=Rh(Wo());return t.copy=function(){return wl(t,Py()).constant(t.constant())},Fs.apply(t,arguments)}function Dp(t){return function(s){return s<0?-Math.pow(-s,t):Math.pow(s,t)}}function $$(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function R$(t){return t<0?-t*t:t*t}function Lh(t){var s=t(xs,xs),a=1;function r(){return a===1?t(xs,xs):a===.5?t($$,R$):t(Dp(a),Dp(1/a))}return s.exponent=function(n){return arguments.length?(a=+n,r()):a},ar(s)}function Fh(){var t=Lh(Wo());return t.copy=function(){return wl(t,Fh()).exponent(t.exponent())},Fs.apply(t,arguments),t}function L$(){return Fh.apply(null,arguments).exponent(.5)}function Mp(t){return Math.sign(t)*t*t}function F$(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Ty(){var t=Ih(),s=[0,1],a=!1,r;function n(i){var l=F$(t(i));return isNaN(l)?r:a?Math.round(l):l}return n.invert=function(i){return t.invert(Mp(i))},n.domain=function(i){return arguments.length?(t.domain(i),n):t.domain()},n.range=function(i){return arguments.length?(t.range((s=Array.from(i,Sc)).map(Mp)),n):s.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(a=!!i,n):a},n.clamp=function(i){return arguments.length?(t.clamp(i),n):t.clamp()},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return Ty(t.domain(),s).round(a).clamp(t.clamp()).unknown(r)},Fs.apply(n,arguments),ar(n)}function Oy(){var t=[],s=[],a=[],r;function n(){var l=0,c=Math.max(1,s.length);for(a=new Array(c-1);++l<c;)a[l-1]=qM(t,l/c);return i}function i(l){return l==null||isNaN(l=+l)?r:s[bl(a,l)]}return i.invertExtent=function(l){var c=s.indexOf(l);return c<0?[NaN,NaN]:[c>0?a[c-1]:t[0],c<a.length?a[c]:t[t.length-1]]},i.domain=function(l){if(!arguments.length)return t.slice();t=[];for(let c of l)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Xa),n()},i.range=function(l){return arguments.length?(s=Array.from(l),n()):s.slice()},i.unknown=function(l){return arguments.length?(r=l,i):r},i.quantiles=function(){return a.slice()},i.copy=function(){return Oy().domain(t).range(s).unknown(r)},Fs.apply(i,arguments)}function Ey(){var t=0,s=1,a=1,r=[.5],n=[0,1],i;function l(o){return o!=null&&o<=o?n[bl(r,o,0,a)]:i}function c(){var o=-1;for(r=new Array(a);++o<a;)r[o]=((o+1)*s-(o-a)*t)/(a+1);return l}return l.domain=function(o){return arguments.length?([t,s]=o,t=+t,s=+s,c()):[t,s]},l.range=function(o){return arguments.length?(a=(n=Array.from(o)).length-1,c()):n.slice()},l.invertExtent=function(o){var d=n.indexOf(o);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=a?[r[a-1],s]:[r[d-1],r[d]]},l.unknown=function(o){return arguments.length&&(i=o),l},l.thresholds=function(){return r.slice()},l.copy=function(){return Ey().domain([t,s]).range(n).unknown(i)},Fs.apply(ar(l),arguments)}function Iy(){var t=[.5],s=[0,1],a,r=1;function n(i){return i!=null&&i<=i?s[bl(t,i,0,r)]:a}return n.domain=function(i){return arguments.length?(t=Array.from(i),r=Math.min(t.length,s.length-1),n):t.slice()},n.range=function(i){return arguments.length?(s=Array.from(i),r=Math.min(t.length,s.length-1),n):s.slice()},n.invertExtent=function(i){var l=s.indexOf(i);return[t[l-1],t[l]]},n.unknown=function(i){return arguments.length?(a=i,n):a},n.copy=function(){return Iy().domain(t).range(s).unknown(a)},Fs.apply(n,arguments)}const Id=new Date,Dd=new Date;function Wt(t,s,a,r){function n(i){return t(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(t(i=new Date(+i)),i),n.ceil=i=>(t(i=new Date(i-1)),s(i,1),t(i),i),n.round=i=>{const l=n(i),c=n.ceil(i);return i-l<c-i?l:c},n.offset=(i,l)=>(s(i=new Date(+i),l==null?1:Math.floor(l)),i),n.range=(i,l,c)=>{const o=[];if(i=n.ceil(i),c=c==null?1:Math.floor(c),!(i<l)||!(c>0))return o;let d;do o.push(d=new Date(+i)),s(i,c),t(i);while(d<i&&i<l);return o},n.filter=i=>Wt(l=>{if(l>=l)for(;t(l),!i(l);)l.setTime(l-1)},(l,c)=>{if(l>=l)if(c<0)for(;++c<=0;)for(;s(l,-1),!i(l););else for(;--c>=0;)for(;s(l,1),!i(l););}),a&&(n.count=(i,l)=>(Id.setTime(+i),Dd.setTime(+l),t(Id),t(Dd),Math.floor(a(Id,Dd))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(r?l=>r(l)%i===0:l=>n.count(0,l)%i===0):n)),n}const Cc=Wt(()=>{},(t,s)=>{t.setTime(+t+s)},(t,s)=>s-t);Cc.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wt(s=>{s.setTime(Math.floor(s/t)*t)},(s,a)=>{s.setTime(+s+a*t)},(s,a)=>(a-s)/t):Cc);Cc.range;const Na=1e3,Is=Na*60,wa=Is*60,Da=wa*24,Bh=Da*7,$p=Da*30,Md=Da*365,yr=Wt(t=>{t.setTime(t-t.getMilliseconds())},(t,s)=>{t.setTime(+t+s*Na)},(t,s)=>(s-t)/Na,t=>t.getUTCSeconds());yr.range;const Uh=Wt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Na)},(t,s)=>{t.setTime(+t+s*Is)},(t,s)=>(s-t)/Is,t=>t.getMinutes());Uh.range;const zh=Wt(t=>{t.setUTCSeconds(0,0)},(t,s)=>{t.setTime(+t+s*Is)},(t,s)=>(s-t)/Is,t=>t.getUTCMinutes());zh.range;const Wh=Wt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Na-t.getMinutes()*Is)},(t,s)=>{t.setTime(+t+s*wa)},(t,s)=>(s-t)/wa,t=>t.getHours());Wh.range;const qh=Wt(t=>{t.setUTCMinutes(0,0,0)},(t,s)=>{t.setTime(+t+s*wa)},(t,s)=>(s-t)/wa,t=>t.getUTCHours());qh.range;const Sl=Wt(t=>t.setHours(0,0,0,0),(t,s)=>t.setDate(t.getDate()+s),(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*Is)/Da,t=>t.getDate()-1);Sl.range;const qo=Wt(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/Da,t=>t.getUTCDate()-1);qo.range;const Dy=Wt(t=>{t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCDate(t.getUTCDate()+s)},(t,s)=>(s-t)/Da,t=>Math.floor(t/Da));Dy.range;function Ur(t){return Wt(s=>{s.setDate(s.getDate()-(s.getDay()+7-t)%7),s.setHours(0,0,0,0)},(s,a)=>{s.setDate(s.getDate()+a*7)},(s,a)=>(a-s-(a.getTimezoneOffset()-s.getTimezoneOffset())*Is)/Bh)}const Ko=Ur(0),_c=Ur(1),B$=Ur(2),U$=Ur(3),Nn=Ur(4),z$=Ur(5),W$=Ur(6);Ko.range;_c.range;B$.range;U$.range;Nn.range;z$.range;W$.range;function zr(t){return Wt(s=>{s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-t)%7),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCDate(s.getUTCDate()+a*7)},(s,a)=>(a-s)/Bh)}const Ho=zr(0),Pc=zr(1),q$=zr(2),K$=zr(3),wn=zr(4),H$=zr(5),V$=zr(6);Ho.range;Pc.range;q$.range;K$.range;wn.range;H$.range;V$.range;const Kh=Wt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,s)=>{t.setMonth(t.getMonth()+s)},(t,s)=>s.getMonth()-t.getMonth()+(s.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Kh.range;const Hh=Wt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCMonth(t.getUTCMonth()+s)},(t,s)=>s.getUTCMonth()-t.getUTCMonth()+(s.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Hh.range;const Ma=Wt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,s)=>{t.setFullYear(t.getFullYear()+s)},(t,s)=>s.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ma.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wt(s=>{s.setFullYear(Math.floor(s.getFullYear()/t)*t),s.setMonth(0,1),s.setHours(0,0,0,0)},(s,a)=>{s.setFullYear(s.getFullYear()+a*t)});Ma.range;const $a=Wt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s)},(t,s)=>s.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());$a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wt(s=>{s.setUTCFullYear(Math.floor(s.getUTCFullYear()/t)*t),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},(s,a)=>{s.setUTCFullYear(s.getUTCFullYear()+a*t)});$a.range;function My(t,s,a,r,n,i){const l=[[yr,1,Na],[yr,5,5*Na],[yr,15,15*Na],[yr,30,30*Na],[i,1,Is],[i,5,5*Is],[i,15,15*Is],[i,30,30*Is],[n,1,wa],[n,3,3*wa],[n,6,6*wa],[n,12,12*wa],[r,1,Da],[r,2,2*Da],[a,1,Bh],[s,1,$p],[s,3,3*$p],[t,1,Md]];function c(d,u,m){const h=u<d;h&&([d,u]=[u,d]);const x=m&&typeof m.range=="function"?m:o(d,u,m),f=x?x.range(d,+u+1):[];return h?f.reverse():f}function o(d,u,m){const h=Math.abs(u-d)/m,x=_h(([,,g])=>g).right(l,h);if(x===l.length)return t.every(zu(d/Md,u/Md,m));if(x===0)return Cc.every(Math.max(zu(d,u,m),1));const[f,p]=l[h/l[x-1][2]<l[x][2]/h?x-1:x];return f.every(p)}return[c,o]}const[G$,Z$]=My($a,Hh,Ho,Dy,qh,zh),[Y$,X$]=My(Ma,Kh,Ko,Sl,Wh,Uh);function $d(t){if(0<=t.y&&t.y<100){var s=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return s.setFullYear(t.y),s}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rd(t){if(0<=t.y&&t.y<100){var s=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return s.setUTCFullYear(t.y),s}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ui(t,s,a){return{y:t,m:s,d:a,H:0,M:0,S:0,L:0}}function J$(t){var s=t.dateTime,a=t.date,r=t.time,n=t.periods,i=t.days,l=t.shortDays,c=t.months,o=t.shortMonths,d=mi(n),u=hi(n),m=mi(i),h=hi(i),x=mi(l),f=hi(l),p=mi(c),g=hi(c),w=mi(o),S=hi(o),b={a:Z,A:q,b:z,B:ne,c:null,d:zp,e:zp,f:bR,g:OR,G:IR,H:vR,I:jR,j:yR,L:$y,m:NR,M:wR,p:Y,q:se,Q:Kp,s:Hp,S:SR,u:kR,U:AR,V:CR,w:_R,W:PR,x:null,X:null,y:TR,Y:ER,Z:DR,"%":qp},A={a:ve,A:Be,b:ae,B:Ee,c:null,d:Wp,e:Wp,f:LR,g:GR,G:YR,H:MR,I:$R,j:RR,L:Ly,m:FR,M:BR,p:me,q:ye,Q:Kp,s:Hp,S:UR,u:zR,U:WR,V:qR,w:KR,W:HR,x:null,X:null,y:VR,Y:ZR,Z:XR,"%":qp},v={a:D,A:E,b:P,B:R,c:U,d:Bp,e:Bp,f:xR,g:Fp,G:Lp,H:Up,I:Up,j:dR,L:hR,m:oR,M:uR,p:C,q:cR,Q:pR,s:gR,S:mR,u:aR,U:rR,V:nR,w:sR,W:iR,x:I,X:L,y:Fp,Y:Lp,Z:lR,"%":fR};b.x=j(a,b),b.X=j(r,b),b.c=j(s,b),A.x=j(a,A),A.X=j(r,A),A.c=j(s,A);function j(he,Oe){return function(ke){var M=[],ue=-1,fe=0,qe=he.length,Ge,it,Ue;for(ke instanceof Date||(ke=new Date(+ke));++ue<qe;)he.charCodeAt(ue)===37&&(M.push(he.slice(fe,ue)),(it=Rp[Ge=he.charAt(++ue)])!=null?Ge=he.charAt(++ue):it=Ge==="e"?" ":"0",(Ue=Oe[Ge])&&(Ge=Ue(ke,it)),M.push(Ge),fe=ue+1);return M.push(he.slice(fe,ue)),M.join("")}}function N(he,Oe){return function(ke){var M=ui(1900,void 0,1),ue=O(M,he,ke+="",0),fe,qe;if(ue!=ke.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(Oe&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(fe=Rd(ui(M.y,0,1)),qe=fe.getUTCDay(),fe=qe>4||qe===0?Pc.ceil(fe):Pc(fe),fe=qo.offset(fe,(M.V-1)*7),M.y=fe.getUTCFullYear(),M.m=fe.getUTCMonth(),M.d=fe.getUTCDate()+(M.w+6)%7):(fe=$d(ui(M.y,0,1)),qe=fe.getDay(),fe=qe>4||qe===0?_c.ceil(fe):_c(fe),fe=Sl.offset(fe,(M.V-1)*7),M.y=fe.getFullYear(),M.m=fe.getMonth(),M.d=fe.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),qe="Z"in M?Rd(ui(M.y,0,1)).getUTCDay():$d(ui(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(qe+5)%7:M.w+M.U*7-(qe+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,Rd(M)):$d(M)}}function O(he,Oe,ke,M){for(var ue=0,fe=Oe.length,qe=ke.length,Ge,it;ue<fe;){if(M>=qe)return-1;if(Ge=Oe.charCodeAt(ue++),Ge===37){if(Ge=Oe.charAt(ue++),it=v[Ge in Rp?Oe.charAt(ue++):Ge],!it||(M=it(he,ke,M))<0)return-1}else if(Ge!=ke.charCodeAt(M++))return-1}return M}function C(he,Oe,ke){var M=d.exec(Oe.slice(ke));return M?(he.p=u.get(M[0].toLowerCase()),ke+M[0].length):-1}function D(he,Oe,ke){var M=x.exec(Oe.slice(ke));return M?(he.w=f.get(M[0].toLowerCase()),ke+M[0].length):-1}function E(he,Oe,ke){var M=m.exec(Oe.slice(ke));return M?(he.w=h.get(M[0].toLowerCase()),ke+M[0].length):-1}function P(he,Oe,ke){var M=w.exec(Oe.slice(ke));return M?(he.m=S.get(M[0].toLowerCase()),ke+M[0].length):-1}function R(he,Oe,ke){var M=p.exec(Oe.slice(ke));return M?(he.m=g.get(M[0].toLowerCase()),ke+M[0].length):-1}function U(he,Oe,ke){return O(he,s,Oe,ke)}function I(he,Oe,ke){return O(he,a,Oe,ke)}function L(he,Oe,ke){return O(he,r,Oe,ke)}function Z(he){return l[he.getDay()]}function q(he){return i[he.getDay()]}function z(he){return o[he.getMonth()]}function ne(he){return c[he.getMonth()]}function Y(he){return n[+(he.getHours()>=12)]}function se(he){return 1+~~(he.getMonth()/3)}function ve(he){return l[he.getUTCDay()]}function Be(he){return i[he.getUTCDay()]}function ae(he){return o[he.getUTCMonth()]}function Ee(he){return c[he.getUTCMonth()]}function me(he){return n[+(he.getUTCHours()>=12)]}function ye(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var Oe=j(he+="",b);return Oe.toString=function(){return he},Oe},parse:function(he){var Oe=N(he+="",!1);return Oe.toString=function(){return he},Oe},utcFormat:function(he){var Oe=j(he+="",A);return Oe.toString=function(){return he},Oe},utcParse:function(he){var Oe=N(he+="",!0);return Oe.toString=function(){return he},Oe}}}var Rp={"-":"",_:" ",0:"0"},Zt=/^\s*\d+/,Q$=/^%/,eR=/[\\^$*+?|[\]().{}]/g;function rt(t,s,a){var r=t<0?"-":"",n=(r?-t:t)+"",i=n.length;return r+(i<a?new Array(a-i+1).join(s)+n:n)}function tR(t){return t.replace(eR,"\\$&")}function mi(t){return new RegExp("^(?:"+t.map(tR).join("|")+")","i")}function hi(t){return new Map(t.map((s,a)=>[s.toLowerCase(),a]))}function sR(t,s,a){var r=Zt.exec(s.slice(a,a+1));return r?(t.w=+r[0],a+r[0].length):-1}function aR(t,s,a){var r=Zt.exec(s.slice(a,a+1));return r?(t.u=+r[0],a+r[0].length):-1}function rR(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.U=+r[0],a+r[0].length):-1}function nR(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.V=+r[0],a+r[0].length):-1}function iR(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.W=+r[0],a+r[0].length):-1}function Lp(t,s,a){var r=Zt.exec(s.slice(a,a+4));return r?(t.y=+r[0],a+r[0].length):-1}function Fp(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),a+r[0].length):-1}function lR(t,s,a){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(a,a+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),a+r[0].length):-1}function cR(t,s,a){var r=Zt.exec(s.slice(a,a+1));return r?(t.q=r[0]*3-3,a+r[0].length):-1}function oR(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.m=r[0]-1,a+r[0].length):-1}function Bp(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.d=+r[0],a+r[0].length):-1}function dR(t,s,a){var r=Zt.exec(s.slice(a,a+3));return r?(t.m=0,t.d=+r[0],a+r[0].length):-1}function Up(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.H=+r[0],a+r[0].length):-1}function uR(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.M=+r[0],a+r[0].length):-1}function mR(t,s,a){var r=Zt.exec(s.slice(a,a+2));return r?(t.S=+r[0],a+r[0].length):-1}function hR(t,s,a){var r=Zt.exec(s.slice(a,a+3));return r?(t.L=+r[0],a+r[0].length):-1}function xR(t,s,a){var r=Zt.exec(s.slice(a,a+6));return r?(t.L=Math.floor(r[0]/1e3),a+r[0].length):-1}function fR(t,s,a){var r=Q$.exec(s.slice(a,a+1));return r?a+r[0].length:-1}function pR(t,s,a){var r=Zt.exec(s.slice(a));return r?(t.Q=+r[0],a+r[0].length):-1}function gR(t,s,a){var r=Zt.exec(s.slice(a));return r?(t.s=+r[0],a+r[0].length):-1}function zp(t,s){return rt(t.getDate(),s,2)}function vR(t,s){return rt(t.getHours(),s,2)}function jR(t,s){return rt(t.getHours()%12||12,s,2)}function yR(t,s){return rt(1+Sl.count(Ma(t),t),s,3)}function $y(t,s){return rt(t.getMilliseconds(),s,3)}function bR(t,s){return $y(t,s)+"000"}function NR(t,s){return rt(t.getMonth()+1,s,2)}function wR(t,s){return rt(t.getMinutes(),s,2)}function SR(t,s){return rt(t.getSeconds(),s,2)}function kR(t){var s=t.getDay();return s===0?7:s}function AR(t,s){return rt(Ko.count(Ma(t)-1,t),s,2)}function Ry(t){var s=t.getDay();return s>=4||s===0?Nn(t):Nn.ceil(t)}function CR(t,s){return t=Ry(t),rt(Nn.count(Ma(t),t)+(Ma(t).getDay()===4),s,2)}function _R(t){return t.getDay()}function PR(t,s){return rt(_c.count(Ma(t)-1,t),s,2)}function TR(t,s){return rt(t.getFullYear()%100,s,2)}function OR(t,s){return t=Ry(t),rt(t.getFullYear()%100,s,2)}function ER(t,s){return rt(t.getFullYear()%1e4,s,4)}function IR(t,s){var a=t.getDay();return t=a>=4||a===0?Nn(t):Nn.ceil(t),rt(t.getFullYear()%1e4,s,4)}function DR(t){var s=t.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+rt(s/60|0,"0",2)+rt(s%60,"0",2)}function Wp(t,s){return rt(t.getUTCDate(),s,2)}function MR(t,s){return rt(t.getUTCHours(),s,2)}function $R(t,s){return rt(t.getUTCHours()%12||12,s,2)}function RR(t,s){return rt(1+qo.count($a(t),t),s,3)}function Ly(t,s){return rt(t.getUTCMilliseconds(),s,3)}function LR(t,s){return Ly(t,s)+"000"}function FR(t,s){return rt(t.getUTCMonth()+1,s,2)}function BR(t,s){return rt(t.getUTCMinutes(),s,2)}function UR(t,s){return rt(t.getUTCSeconds(),s,2)}function zR(t){var s=t.getUTCDay();return s===0?7:s}function WR(t,s){return rt(Ho.count($a(t)-1,t),s,2)}function Fy(t){var s=t.getUTCDay();return s>=4||s===0?wn(t):wn.ceil(t)}function qR(t,s){return t=Fy(t),rt(wn.count($a(t),t)+($a(t).getUTCDay()===4),s,2)}function KR(t){return t.getUTCDay()}function HR(t,s){return rt(Pc.count($a(t)-1,t),s,2)}function VR(t,s){return rt(t.getUTCFullYear()%100,s,2)}function GR(t,s){return t=Fy(t),rt(t.getUTCFullYear()%100,s,2)}function ZR(t,s){return rt(t.getUTCFullYear()%1e4,s,4)}function YR(t,s){var a=t.getUTCDay();return t=a>=4||a===0?wn(t):wn.ceil(t),rt(t.getUTCFullYear()%1e4,s,4)}function XR(){return"+0000"}function qp(){return"%"}function Kp(t){return+t}function Hp(t){return Math.floor(+t/1e3)}var Hr,By,Uy;JR({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JR(t){return Hr=J$(t),By=Hr.format,Hr.parse,Uy=Hr.utcFormat,Hr.utcParse,Hr}function QR(t){return new Date(t)}function eL(t){return t instanceof Date?+t:+new Date(+t)}function Vh(t,s,a,r,n,i,l,c,o,d){var u=Ih(),m=u.invert,h=u.domain,x=d(".%L"),f=d(":%S"),p=d("%I:%M"),g=d("%I %p"),w=d("%a %d"),S=d("%b %d"),b=d("%B"),A=d("%Y");function v(j){return(o(j)<j?x:c(j)<j?f:l(j)<j?p:i(j)<j?g:r(j)<j?n(j)<j?w:S:a(j)<j?b:A)(j)}return u.invert=function(j){return new Date(m(j))},u.domain=function(j){return arguments.length?h(Array.from(j,eL)):h().map(QR)},u.ticks=function(j){var N=h();return t(N[0],N[N.length-1],j??10)},u.tickFormat=function(j,N){return N==null?v:d(N)},u.nice=function(j){var N=h();return(!j||typeof j.range!="function")&&(j=s(N[0],N[N.length-1],j??10)),j?h(Cy(N,j)):u},u.copy=function(){return wl(u,Vh(t,s,a,r,n,i,l,c,o,d))},u}function tL(){return Fs.apply(Vh(Y$,X$,Ma,Kh,Ko,Sl,Wh,Uh,yr,By).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sL(){return Fs.apply(Vh(G$,Z$,$a,Hh,Ho,qo,qh,zh,yr,Uy).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vo(){var t=0,s=1,a,r,n,i,l=xs,c=!1,o;function d(m){return m==null||isNaN(m=+m)?o:l(n===0?.5:(m=(i(m)-a)*n,c?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,s]=m,a=i(t=+t),r=i(s=+s),n=a===r?0:1/(r-a),d):[t,s]},d.clamp=function(m){return arguments.length?(c=!!m,d):c},d.interpolator=function(m){return arguments.length?(l=m,d):l};function u(m){return function(h){var x,f;return arguments.length?([x,f]=h,l=m(x,f),d):[l(0),l(1)]}}return d.range=u(ei),d.rangeRound=u(Eh),d.unknown=function(m){return arguments.length?(o=m,d):o},function(m){return i=m,a=m(t),r=m(s),n=a===r?0:1/(r-a),d}}function rr(t,s){return s.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function zy(){var t=ar(Vo()(xs));return t.copy=function(){return rr(t,zy())},Ba.apply(t,arguments)}function Wy(){var t=$h(Vo()).domain([1,10]);return t.copy=function(){return rr(t,Wy()).base(t.base())},Ba.apply(t,arguments)}function qy(){var t=Rh(Vo());return t.copy=function(){return rr(t,qy()).constant(t.constant())},Ba.apply(t,arguments)}function Gh(){var t=Lh(Vo());return t.copy=function(){return rr(t,Gh()).exponent(t.exponent())},Ba.apply(t,arguments)}function aL(){return Gh.apply(null,arguments).exponent(.5)}function Ky(){var t=[],s=xs;function a(r){if(r!=null&&!isNaN(r=+r))return s((bl(t,r,1)-1)/(t.length-1))}return a.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let n of r)n!=null&&!isNaN(n=+n)&&t.push(n);return t.sort(Xa),a},a.interpolator=function(r){return arguments.length?(s=r,a):s},a.range=function(){return t.map((r,n)=>s(n/(t.length-1)))},a.quantiles=function(r){return Array.from({length:r+1},(n,i)=>WM(t,i/r))},a.copy=function(){return Ky(s).domain(t)},Ba.apply(a,arguments)}function Go(){var t=0,s=.5,a=1,r=1,n,i,l,c,o,d=xs,u,m=!1,h;function x(p){return isNaN(p=+p)?h:(p=.5+((p=+u(p))-i)*(r*p<r*i?c:o),d(m?Math.max(0,Math.min(1,p)):p))}x.domain=function(p){return arguments.length?([t,s,a]=p,n=u(t=+t),i=u(s=+s),l=u(a=+a),c=n===i?0:.5/(i-n),o=i===l?0:.5/(l-i),r=i<n?-1:1,x):[t,s,a]},x.clamp=function(p){return arguments.length?(m=!!p,x):m},x.interpolator=function(p){return arguments.length?(d=p,x):d};function f(p){return function(g){var w,S,b;return arguments.length?([w,S,b]=g,d=f$(p,[w,S,b]),x):[d(0),d(.5),d(1)]}}return x.range=f(ei),x.rangeRound=f(Eh),x.unknown=function(p){return arguments.length?(h=p,x):h},function(p){return u=p,n=p(t),i=p(s),l=p(a),c=n===i?0:.5/(i-n),o=i===l?0:.5/(l-i),r=i<n?-1:1,x}}function Hy(){var t=ar(Go()(xs));return t.copy=function(){return rr(t,Hy())},Ba.apply(t,arguments)}function Vy(){var t=$h(Go()).domain([.1,1,10]);return t.copy=function(){return rr(t,Vy()).base(t.base())},Ba.apply(t,arguments)}function Gy(){var t=Rh(Go());return t.copy=function(){return rr(t,Gy()).constant(t.constant())},Ba.apply(t,arguments)}function Zh(){var t=Lh(Go());return t.copy=function(){return rr(t,Zh()).exponent(t.exponent())},Ba.apply(t,arguments)}function rL(){return Zh.apply(null,arguments).exponent(.5)}const Vp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Fi,scaleDiverging:Hy,scaleDivergingLog:Vy,scaleDivergingPow:Zh,scaleDivergingSqrt:rL,scaleDivergingSymlog:Gy,scaleIdentity:Ay,scaleImplicit:Wu,scaleLinear:Ac,scaleLog:_y,scaleOrdinal:Ph,scalePoint:Ni,scalePow:Fh,scaleQuantile:Oy,scaleQuantize:Ey,scaleRadial:Ty,scaleSequential:zy,scaleSequentialLog:Wy,scaleSequentialPow:Gh,scaleSequentialQuantile:Ky,scaleSequentialSqrt:aL,scaleSequentialSymlog:qy,scaleSqrt:L$,scaleSymlog:Py,scaleThreshold:Iy,scaleTime:tL,scaleUtc:sL,tickFormat:ky},Symbol.toStringTag,{value:"Module"}));var nL=Kn;function iL(t,s,a){for(var r=-1,n=t.length;++r<n;){var i=t[r],l=s(i);if(l!=null&&(c===void 0?l===l&&!nL(l):a(l,c)))var c=l,o=i}return o}var Zo=iL;function lL(t,s){return t>s}var Zy=lL,cL=Zo,oL=Zy,dL=Qn;function uL(t){return t&&t.length?cL(t,dL,oL):void 0}var mL=uL;const Ga=ht(mL);function hL(t,s){return t<s}var Yy=hL,xL=Zo,fL=Yy,pL=Qn;function gL(t){return t&&t.length?xL(t,pL,fL):void 0}var vL=gL;const Yo=ht(vL);var jL=oh,yL=fa,bL=ry,NL=vs;function wL(t,s){var a=NL(t)?jL:bL;return a(t,yL(s))}var SL=wL,kL=sy,AL=SL;function CL(t,s){return kL(AL(t,s),1)}var _L=CL;const PL=ht(_L);var TL=Sh;function OL(t,s){return TL(t,s)}var EL=OL;const Mr=ht(EL);var ti=1e9,IL={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Xh,St=!0,Rs="[DecimalError] ",Ar=Rs+"Invalid argument: ",Yh=Rs+"Exponent out of range: ",si=Math.floor,xr=Math.pow,DL=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ns,qt=1e7,Nt=7,Xy=9007199254740991,Tc=si(Xy/Nt),Ne={};Ne.absoluteValue=Ne.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ne.comparedTo=Ne.cmp=function(t){var s,a,r,n,i=this;if(t=new i.constructor(t),i.s!==t.s)return i.s||-t.s;if(i.e!==t.e)return i.e>t.e^i.s<0?1:-1;for(r=i.d.length,n=t.d.length,s=0,a=r<n?r:n;s<a;++s)if(i.d[s]!==t.d[s])return i.d[s]>t.d[s]^i.s<0?1:-1;return r===n?0:r>n^i.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var t=this,s=t.d.length-1,a=(s-t.e)*Nt;if(s=t.d[s],s)for(;s%10==0;s/=10)a--;return a<0?0:a};Ne.dividedBy=Ne.div=function(t){return Ca(this,new this.constructor(t))};Ne.dividedToIntegerBy=Ne.idiv=function(t){var s=this,a=s.constructor;return ft(Ca(s,new a(t),0,1),a.precision)};Ne.equals=Ne.eq=function(t){return!this.cmp(t)};Ne.exponent=function(){return Rt(this)};Ne.greaterThan=Ne.gt=function(t){return this.cmp(t)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(t){return this.cmp(t)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(t){return this.cmp(t)<0};Ne.lessThanOrEqualTo=Ne.lte=function(t){return this.cmp(t)<1};Ne.logarithm=Ne.log=function(t){var s,a=this,r=a.constructor,n=r.precision,i=n+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ns))throw Error(Rs+"NaN");if(a.s<1)throw Error(Rs+(a.s?"NaN":"-Infinity"));return a.eq(Ns)?new r(0):(St=!1,s=Ca(qi(a,i),qi(t,i),i),St=!0,ft(s,n))};Ne.minus=Ne.sub=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?eb(s,t):Jy(s,(t.s=-t.s,t))};Ne.modulo=Ne.mod=function(t){var s,a=this,r=a.constructor,n=r.precision;if(t=new r(t),!t.s)throw Error(Rs+"NaN");return a.s?(St=!1,s=Ca(a,t,0,1).times(t),St=!0,a.minus(s)):ft(new r(a),n)};Ne.naturalExponential=Ne.exp=function(){return Qy(this)};Ne.naturalLogarithm=Ne.ln=function(){return qi(this)};Ne.negated=Ne.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ne.plus=Ne.add=function(t){var s=this;return t=new s.constructor(t),s.s==t.s?Jy(s,t):eb(s,(t.s=-t.s,t))};Ne.precision=Ne.sd=function(t){var s,a,r,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ar+t);if(s=Rt(n)+1,r=n.d.length-1,a=r*Nt+1,r=n.d[r],r){for(;r%10==0;r/=10)a--;for(r=n.d[0];r>=10;r/=10)a++}return t&&s>a?s:a};Ne.squareRoot=Ne.sqrt=function(){var t,s,a,r,n,i,l,c=this,o=c.constructor;if(c.s<1){if(!c.s)return new o(0);throw Error(Rs+"NaN")}for(t=Rt(c),St=!1,n=Math.sqrt(+c),n==0||n==1/0?(s=ta(c.d),(s.length+t)%2==0&&(s+="0"),n=Math.sqrt(s),t=si((t+1)/2)-(t<0||t%2),n==1/0?s="5e"+t:(s=n.toExponential(),s=s.slice(0,s.indexOf("e")+1)+t),r=new o(s)):r=new o(n.toString()),a=o.precision,n=l=a+3;;)if(i=r,r=i.plus(Ca(c,i,l+2)).times(.5),ta(i.d).slice(0,l)===(s=ta(r.d)).slice(0,l)){if(s=s.slice(l-3,l+1),n==l&&s=="4999"){if(ft(i,a+1,0),i.times(i).eq(c)){r=i;break}}else if(s!="9999")break;l+=4}return St=!0,ft(r,a)};Ne.times=Ne.mul=function(t){var s,a,r,n,i,l,c,o,d,u=this,m=u.constructor,h=u.d,x=(t=new m(t)).d;if(!u.s||!t.s)return new m(0);for(t.s*=u.s,a=u.e+t.e,o=h.length,d=x.length,o<d&&(i=h,h=x,x=i,l=o,o=d,d=l),i=[],l=o+d,r=l;r--;)i.push(0);for(r=d;--r>=0;){for(s=0,n=o+r;n>r;)c=i[n]+x[r]*h[n-r-1]+s,i[n--]=c%qt|0,s=c/qt|0;i[n]=(i[n]+s)%qt|0}for(;!i[--l];)i.pop();return s?++a:i.shift(),t.d=i,t.e=a,St?ft(t,m.precision):t};Ne.toDecimalPlaces=Ne.todp=function(t,s){var a=this,r=a.constructor;return a=new r(a),t===void 0?a:(ha(t,0,ti),s===void 0?s=r.rounding:ha(s,0,8),ft(a,t+Rt(a)+1,s))};Ne.toExponential=function(t,s){var a,r=this,n=r.constructor;return t===void 0?a=$r(r,!0):(ha(t,0,ti),s===void 0?s=n.rounding:ha(s,0,8),r=ft(new n(r),t+1,s),a=$r(r,!0,t+1)),a};Ne.toFixed=function(t,s){var a,r,n=this,i=n.constructor;return t===void 0?$r(n):(ha(t,0,ti),s===void 0?s=i.rounding:ha(s,0,8),r=ft(new i(n),t+Rt(n)+1,s),a=$r(r.abs(),!1,t+Rt(r)+1),n.isneg()&&!n.isZero()?"-"+a:a)};Ne.toInteger=Ne.toint=function(){var t=this,s=t.constructor;return ft(new s(t),Rt(t)+1,s.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(t){var s,a,r,n,i,l,c=this,o=c.constructor,d=12,u=+(t=new o(t));if(!t.s)return new o(Ns);if(c=new o(c),!c.s){if(t.s<1)throw Error(Rs+"Infinity");return c}if(c.eq(Ns))return c;if(r=o.precision,t.eq(Ns))return ft(c,r);if(s=t.e,a=t.d.length-1,l=s>=a,i=c.s,l){if((a=u<0?-u:u)<=Xy){for(n=new o(Ns),s=Math.ceil(r/Nt+4),St=!1;a%2&&(n=n.times(c),Zp(n.d,s)),a=si(a/2),a!==0;)c=c.times(c),Zp(c.d,s);return St=!0,t.s<0?new o(Ns).div(n):ft(n,r)}}else if(i<0)throw Error(Rs+"NaN");return i=i<0&&t.d[Math.max(s,a)]&1?-1:1,c.s=1,St=!1,n=t.times(qi(c,r+d)),St=!0,n=Qy(n),n.s=i,n};Ne.toPrecision=function(t,s){var a,r,n=this,i=n.constructor;return t===void 0?(a=Rt(n),r=$r(n,a<=i.toExpNeg||a>=i.toExpPos)):(ha(t,1,ti),s===void 0?s=i.rounding:ha(s,0,8),n=ft(new i(n),t,s),a=Rt(n),r=$r(n,t<=a||a<=i.toExpNeg,t)),r};Ne.toSignificantDigits=Ne.tosd=function(t,s){var a=this,r=a.constructor;return t===void 0?(t=r.precision,s=r.rounding):(ha(t,1,ti),s===void 0?s=r.rounding:ha(s,0,8)),ft(new r(a),t,s)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,s=Rt(t),a=t.constructor;return $r(t,s<=a.toExpNeg||s>=a.toExpPos)};function Jy(t,s){var a,r,n,i,l,c,o,d,u=t.constructor,m=u.precision;if(!t.s||!s.s)return s.s||(s=new u(t)),St?ft(s,m):s;if(o=t.d,d=s.d,l=t.e,n=s.e,o=o.slice(),i=l-n,i){for(i<0?(r=o,i=-i,c=d.length):(r=d,n=l,c=o.length),l=Math.ceil(m/Nt),c=l>c?l+1:c+1,i>c&&(i=c,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(c=o.length,i=d.length,c-i<0&&(i=c,r=d,d=o,o=r),a=0;i;)a=(o[--i]=o[i]+d[i]+a)/qt|0,o[i]%=qt;for(a&&(o.unshift(a),++n),c=o.length;o[--c]==0;)o.pop();return s.d=o,s.e=n,St?ft(s,m):s}function ha(t,s,a){if(t!==~~t||t<s||t>a)throw Error(Ar+t)}function ta(t){var s,a,r,n=t.length-1,i="",l=t[0];if(n>0){for(i+=l,s=1;s<n;s++)r=t[s]+"",a=Nt-r.length,a&&(i+=za(a)),i+=r;l=t[s],r=l+"",a=Nt-r.length,a&&(i+=za(a))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Ca=function(){function t(r,n){var i,l=0,c=r.length;for(r=r.slice();c--;)i=r[c]*n+l,r[c]=i%qt|0,l=i/qt|0;return l&&r.unshift(l),r}function s(r,n,i,l){var c,o;if(i!=l)o=i>l?1:-1;else for(c=o=0;c<i;c++)if(r[c]!=n[c]){o=r[c]>n[c]?1:-1;break}return o}function a(r,n,i){for(var l=0;i--;)r[i]-=l,l=r[i]<n[i]?1:0,r[i]=l*qt+r[i]-n[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,n,i,l){var c,o,d,u,m,h,x,f,p,g,w,S,b,A,v,j,N,O,C=r.constructor,D=r.s==n.s?1:-1,E=r.d,P=n.d;if(!r.s)return new C(r);if(!n.s)throw Error(Rs+"Division by zero");for(o=r.e-n.e,N=P.length,v=E.length,x=new C(D),f=x.d=[],d=0;P[d]==(E[d]||0);)++d;if(P[d]>(E[d]||0)&&--o,i==null?S=i=C.precision:l?S=i+(Rt(r)-Rt(n))+1:S=i,S<0)return new C(0);if(S=S/Nt+2|0,d=0,N==1)for(u=0,P=P[0],S++;(d<v||u)&&S--;d++)b=u*qt+(E[d]||0),f[d]=b/P|0,u=b%P|0;else{for(u=qt/(P[0]+1)|0,u>1&&(P=t(P,u),E=t(E,u),N=P.length,v=E.length),A=N,p=E.slice(0,N),g=p.length;g<N;)p[g++]=0;O=P.slice(),O.unshift(0),j=P[0],P[1]>=qt/2&&++j;do u=0,c=s(P,p,N,g),c<0?(w=p[0],N!=g&&(w=w*qt+(p[1]||0)),u=w/j|0,u>1?(u>=qt&&(u=qt-1),m=t(P,u),h=m.length,g=p.length,c=s(m,p,h,g),c==1&&(u--,a(m,N<h?O:P,h))):(u==0&&(c=u=1),m=P.slice()),h=m.length,h<g&&m.unshift(0),a(p,m,g),c==-1&&(g=p.length,c=s(P,p,N,g),c<1&&(u++,a(p,N<g?O:P,g))),g=p.length):c===0&&(u++,p=[0]),f[d++]=u,c&&p[0]?p[g++]=E[A]||0:(p=[E[A]],g=1);while((A++<v||p[0]!==void 0)&&S--)}return f[0]||f.shift(),x.e=o,ft(x,l?i+Rt(x)+1:i)}}();function Qy(t,s){var a,r,n,i,l,c,o=0,d=0,u=t.constructor,m=u.precision;if(Rt(t)>16)throw Error(Yh+Rt(t));if(!t.s)return new u(Ns);for(s==null?(St=!1,c=m):c=s,l=new u(.03125);t.abs().gte(.1);)t=t.times(l),d+=5;for(r=Math.log(xr(2,d))/Math.LN10*2+5|0,c+=r,a=n=i=new u(Ns),u.precision=c;;){if(n=ft(n.times(t),c),a=a.times(++o),l=i.plus(Ca(n,a,c)),ta(l.d).slice(0,c)===ta(i.d).slice(0,c)){for(;d--;)i=ft(i.times(i),c);return u.precision=m,s==null?(St=!0,ft(i,m)):i}i=l}}function Rt(t){for(var s=t.e*Nt,a=t.d[0];a>=10;a/=10)s++;return s}function Ld(t,s,a){if(s>t.LN10.sd())throw St=!0,a&&(t.precision=a),Error(Rs+"LN10 precision limit exceeded");return ft(new t(t.LN10),s)}function za(t){for(var s="";t--;)s+="0";return s}function qi(t,s){var a,r,n,i,l,c,o,d,u,m=1,h=10,x=t,f=x.d,p=x.constructor,g=p.precision;if(x.s<1)throw Error(Rs+(x.s?"NaN":"-Infinity"));if(x.eq(Ns))return new p(0);if(s==null?(St=!1,d=g):d=s,x.eq(10))return s==null&&(St=!0),Ld(p,d);if(d+=h,p.precision=d,a=ta(f),r=a.charAt(0),i=Rt(x),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&a.charAt(1)>3;)x=x.times(t),a=ta(x.d),r=a.charAt(0),m++;i=Rt(x),r>1?(x=new p("0."+a),i++):x=new p(r+"."+a.slice(1))}else return o=Ld(p,d+2,g).times(i+""),x=qi(new p(r+"."+a.slice(1)),d-h).plus(o),p.precision=g,s==null?(St=!0,ft(x,g)):x;for(c=l=x=Ca(x.minus(Ns),x.plus(Ns),d),u=ft(x.times(x),d),n=3;;){if(l=ft(l.times(u),d),o=c.plus(Ca(l,new p(n),d)),ta(o.d).slice(0,d)===ta(c.d).slice(0,d))return c=c.times(2),i!==0&&(c=c.plus(Ld(p,d+2,g).times(i+""))),c=Ca(c,new p(m),d),p.precision=g,s==null?(St=!0,ft(c,g)):c;c=o,n+=2}}function Gp(t,s){var a,r,n;for((a=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(a<0&&(a=r),a+=+s.slice(r+1),s=s.substring(0,r)):a<0&&(a=s.length),r=0;s.charCodeAt(r)===48;)++r;for(n=s.length;s.charCodeAt(n-1)===48;)--n;if(s=s.slice(r,n),s){if(n-=r,a=a-r-1,t.e=si(a/Nt),t.d=[],r=(a+1)%Nt,a<0&&(r+=Nt),r<n){for(r&&t.d.push(+s.slice(0,r)),n-=Nt;r<n;)t.d.push(+s.slice(r,r+=Nt));s=s.slice(r),r=Nt-s.length}else r-=n;for(;r--;)s+="0";if(t.d.push(+s),St&&(t.e>Tc||t.e<-Tc))throw Error(Yh+a)}else t.s=0,t.e=0,t.d=[0];return t}function ft(t,s,a){var r,n,i,l,c,o,d,u,m=t.d;for(l=1,i=m[0];i>=10;i/=10)l++;if(r=s-l,r<0)r+=Nt,n=s,d=m[u=0];else{if(u=Math.ceil((r+1)/Nt),i=m.length,u>=i)return t;for(d=i=m[u],l=1;i>=10;i/=10)l++;r%=Nt,n=r-Nt+l}if(a!==void 0&&(i=xr(10,l-n-1),c=d/i%10|0,o=s<0||m[u+1]!==void 0||d%i,o=a<4?(c||o)&&(a==0||a==(t.s<0?3:2)):c>5||c==5&&(a==4||o||a==6&&(r>0?n>0?d/xr(10,l-n):0:m[u-1])%10&1||a==(t.s<0?8:7))),s<1||!m[0])return o?(i=Rt(t),m.length=1,s=s-i-1,m[0]=xr(10,(Nt-s%Nt)%Nt),t.e=si(-s/Nt)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(r==0?(m.length=u,i=1,u--):(m.length=u+1,i=xr(10,Nt-r),m[u]=n>0?(d/xr(10,l-n)%xr(10,n)|0)*i:0),o)for(;;)if(u==0){(m[0]+=i)==qt&&(m[0]=1,++t.e);break}else{if(m[u]+=i,m[u]!=qt)break;m[u--]=0,i=1}for(r=m.length;m[--r]===0;)m.pop();if(St&&(t.e>Tc||t.e<-Tc))throw Error(Yh+Rt(t));return t}function eb(t,s){var a,r,n,i,l,c,o,d,u,m,h=t.constructor,x=h.precision;if(!t.s||!s.s)return s.s?s.s=-s.s:s=new h(t),St?ft(s,x):s;if(o=t.d,m=s.d,r=s.e,d=t.e,o=o.slice(),l=d-r,l){for(u=l<0,u?(a=o,l=-l,c=m.length):(a=m,r=d,c=o.length),n=Math.max(Math.ceil(x/Nt),c)+2,l>n&&(l=n,a.length=1),a.reverse(),n=l;n--;)a.push(0);a.reverse()}else{for(n=o.length,c=m.length,u=n<c,u&&(c=n),n=0;n<c;n++)if(o[n]!=m[n]){u=o[n]<m[n];break}l=0}for(u&&(a=o,o=m,m=a,s.s=-s.s),c=o.length,n=m.length-c;n>0;--n)o[c++]=0;for(n=m.length;n>l;){if(o[--n]<m[n]){for(i=n;i&&o[--i]===0;)o[i]=qt-1;--o[i],o[n]+=qt}o[n]-=m[n]}for(;o[--c]===0;)o.pop();for(;o[0]===0;o.shift())--r;return o[0]?(s.d=o,s.e=r,St?ft(s,x):s):new h(0)}function $r(t,s,a){var r,n=Rt(t),i=ta(t.d),l=i.length;return s?(a&&(r=a-l)>0?i=i.charAt(0)+"."+i.slice(1)+za(r):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+za(-n-1)+i,a&&(r=a-l)>0&&(i+=za(r))):n>=l?(i+=za(n+1-l),a&&(r=a-n-1)>0&&(i=i+"."+za(r))):((r=n+1)<l&&(i=i.slice(0,r)+"."+i.slice(r)),a&&(r=a-l)>0&&(n+1===l&&(i+="."),i+=za(r))),t.s<0?"-"+i:i}function Zp(t,s){if(t.length>s)return t.length=s,!0}function tb(t){var s,a,r;function n(i){var l=this;if(!(l instanceof n))return new n(i);if(l.constructor=n,i instanceof n){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ar+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return Gp(l,i.toString())}else if(typeof i!="string")throw Error(Ar+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,DL.test(i))Gp(l,i);else throw Error(Ar+i)}if(n.prototype=Ne,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=tb,n.config=n.set=ML,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],s=0;s<r.length;)t.hasOwnProperty(a=r[s++])||(t[a]=this[a]);return n.config(t),n}function ML(t){if(!t||typeof t!="object")throw Error(Rs+"Object expected");var s,a,r,n=["precision",1,ti,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(s=0;s<n.length;s+=3)if((r=t[a=n[s]])!==void 0)if(si(r)===r&&r>=n[s+1]&&r<=n[s+2])this[a]=r;else throw Error(Ar+a+": "+r);if((r=t[a="LN10"])!==void 0)if(r==Math.LN10)this[a]=new this(r);else throw Error(Ar+a+": "+r);return this}var Xh=tb(IL);Ns=new Xh(1);const ot=Xh;function $L(t){return BL(t)||FL(t)||LL(t)||RL()}function RL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LL(t,s){if(t){if(typeof t=="string")return Vu(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Vu(t,s)}}function FL(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function BL(t){if(Array.isArray(t))return Vu(t)}function Vu(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}var UL=function(s){return s},sb={"@@functional/placeholder":!0},ab=function(s){return s===sb},Yp=function(s){return function a(){return arguments.length===0||arguments.length===1&&ab(arguments.length<=0?void 0:arguments[0])?a:s.apply(void 0,arguments)}},zL=function t(s,a){return s===1?a:Yp(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var l=n.filter(function(c){return c!==sb}).length;return l>=s?a.apply(void 0,n):t(s-l,Yp(function(){for(var c=arguments.length,o=new Array(c),d=0;d<c;d++)o[d]=arguments[d];var u=n.map(function(m){return ab(m)?o.shift():m});return a.apply(void 0,$L(u).concat(o))}))})},Xo=function(s){return zL(s.length,s)},Gu=function(s,a){for(var r=[],n=s;n<a;++n)r[n-s]=n;return r},WL=Xo(function(t,s){return Array.isArray(s)?s.map(t):Object.keys(s).map(function(a){return s[a]}).map(t)}),qL=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];if(!a.length)return UL;var n=a.reverse(),i=n[0],l=n.slice(1);return function(){return l.reduce(function(c,o){return o(c)},i.apply(void 0,arguments))}},Zu=function(s){return Array.isArray(s)?s.reverse():s.split("").reverse.join("")},rb=function(s){var a=null,r=null;return function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return a&&i.every(function(c,o){return c===a[o]})||(a=i,r=s.apply(void 0,i)),r}};function KL(t){var s;return t===0?s=1:s=Math.floor(new ot(t).abs().log(10).toNumber())+1,s}function HL(t,s,a){for(var r=new ot(t),n=0,i=[];r.lt(s)&&n<1e5;)i.push(r.toNumber()),r=r.add(a),n++;return i}var VL=Xo(function(t,s,a){var r=+t,n=+s;return r+a*(n-r)}),GL=Xo(function(t,s,a){var r=s-+t;return r=r||1/0,(a-t)/r}),ZL=Xo(function(t,s,a){var r=s-+t;return r=r||1/0,Math.max(0,Math.min(1,(a-t)/r))});const Jo={rangeStep:HL,getDigitCount:KL,interpolateNumber:VL,uninterpolateNumber:GL,uninterpolateTruncation:ZL};function Yu(t){return JL(t)||XL(t)||nb(t)||YL()}function YL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XL(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function JL(t){if(Array.isArray(t))return Xu(t)}function Ki(t,s){return tF(t)||eF(t,s)||nb(t,s)||QL()}function QL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nb(t,s){if(t){if(typeof t=="string")return Xu(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xu(t,s)}}function Xu(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function eF(t,s){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var a=[],r=!0,n=!1,i=void 0;try{for(var l=t[Symbol.iterator](),c;!(r=(c=l.next()).done)&&(a.push(c.value),!(s&&a.length===s));r=!0);}catch(o){n=!0,i=o}finally{try{!r&&l.return!=null&&l.return()}finally{if(n)throw i}}return a}}function tF(t){if(Array.isArray(t))return t}function ib(t){var s=Ki(t,2),a=s[0],r=s[1],n=a,i=r;return a>r&&(n=r,i=a),[n,i]}function lb(t,s,a){if(t.lte(0))return new ot(0);var r=Jo.getDigitCount(t.toNumber()),n=new ot(10).pow(r),i=t.div(n),l=r!==1?.05:.1,c=new ot(Math.ceil(i.div(l).toNumber())).add(a).mul(l),o=c.mul(n);return s?o:new ot(Math.ceil(o))}function sF(t,s,a){var r=1,n=new ot(t);if(!n.isint()&&a){var i=Math.abs(t);i<1?(r=new ot(10).pow(Jo.getDigitCount(t)-1),n=new ot(Math.floor(n.div(r).toNumber())).mul(r)):i>1&&(n=new ot(Math.floor(t)))}else t===0?n=new ot(Math.floor((s-1)/2)):a||(n=new ot(Math.floor(t)));var l=Math.floor((s-1)/2),c=qL(WL(function(o){return n.add(new ot(o-l).mul(r)).toNumber()}),Gu);return c(0,s)}function cb(t,s,a,r){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((s-t)/(a-1)))return{step:new ot(0),tickMin:new ot(0),tickMax:new ot(0)};var i=lb(new ot(s).sub(t).div(a-1),r,n),l;t<=0&&s>=0?l=new ot(0):(l=new ot(t).add(s).div(2),l=l.sub(new ot(l).mod(i)));var c=Math.ceil(l.sub(t).div(i).toNumber()),o=Math.ceil(new ot(s).sub(l).div(i).toNumber()),d=c+o+1;return d>a?cb(t,s,a,r,n+1):(d<a&&(o=s>0?o+(a-d):o,c=s>0?c:c+(a-d)),{step:i,tickMin:l.sub(new ot(c).mul(i)),tickMax:l.add(new ot(o).mul(i))})}function aF(t){var s=Ki(t,2),a=s[0],r=s[1],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(n,2),c=ib([a,r]),o=Ki(c,2),d=o[0],u=o[1];if(d===-1/0||u===1/0){var m=u===1/0?[d].concat(Yu(Gu(0,n-1).map(function(){return 1/0}))):[].concat(Yu(Gu(0,n-1).map(function(){return-1/0})),[u]);return a>r?Zu(m):m}if(d===u)return sF(d,n,i);var h=cb(d,u,l,i),x=h.step,f=h.tickMin,p=h.tickMax,g=Jo.rangeStep(f,p.add(new ot(.1).mul(x)),x);return a>r?Zu(g):g}function rF(t,s){var a=Ki(t,2),r=a[0],n=a[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=ib([r,n]),c=Ki(l,2),o=c[0],d=c[1];if(o===-1/0||d===1/0)return[r,n];if(o===d)return[o];var u=Math.max(s,2),m=lb(new ot(d).sub(o).div(u-1),i,0),h=[].concat(Yu(Jo.rangeStep(new ot(o),new ot(d).sub(new ot(.99).mul(m)),m)),[d]);return r>n?Zu(h):h}var nF=rb(aF),iF=rb(rF),lF=!0,Fd="Invariant failed";function Rr(t,s){if(!t){if(lF)throw new Error(Fd);var a=typeof s=="function"?s():s,r=a?"".concat(Fd,": ").concat(a):Fd;throw new Error(r)}}var cF=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Sn(t){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Sn(t)}function Oc(){return Oc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Oc.apply(this,arguments)}function oF(t,s){return hF(t)||mF(t,s)||uF(t,s)||dF()}function dF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uF(t,s){if(t){if(typeof t=="string")return Xp(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xp(t,s)}}function Xp(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function mF(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function hF(t){if(Array.isArray(t))return t}function xF(t,s){if(t==null)return{};var a=fF(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function fF(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function pF(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Jp(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ub(r.key),r)}}function gF(t,s,a){return s&&Jp(t.prototype,s),a&&Jp(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function vF(t,s,a){return s=Ec(s),jF(t,ob()?Reflect.construct(s,a||[],Ec(t).constructor):s.apply(t,a))}function jF(t,s){if(s&&(Sn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yF(t)}function yF(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ob(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ob=function(){return!!t})()}function Ec(t){return Ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Ec(t)}function bF(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Ju(t,s)}function Ju(t,s){return Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ju(t,s)}function db(t,s,a){return s=ub(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function ub(t){var s=NF(t,"string");return Sn(s)=="symbol"?s:s+""}function NF(t,s){if(Sn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Sn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var kl=function(t){function s(){return pF(this,s),vF(this,s,arguments)}return bF(s,t),gF(s,[{key:"render",value:function(){var r=this.props,n=r.offset,i=r.layout,l=r.width,c=r.dataKey,o=r.data,d=r.dataPointFormatter,u=r.xAxis,m=r.yAxis,h=xF(r,cF),x=Ce(h,!1);this.props.direction==="x"&&u.type!=="number"&&Rr(!1);var f=o.map(function(p){var g=d(p,c),w=g.x,S=g.y,b=g.value,A=g.errorVal;if(!A)return null;var v=[],j,N;if(Array.isArray(A)){var O=oF(A,2);j=O[0],N=O[1]}else j=N=A;if(i==="vertical"){var C=u.scale,D=S+n,E=D+l,P=D-l,R=C(b-j),U=C(b+N);v.push({x1:U,y1:E,x2:U,y2:P}),v.push({x1:R,y1:D,x2:U,y2:D}),v.push({x1:R,y1:E,x2:R,y2:P})}else if(i==="horizontal"){var I=m.scale,L=w+n,Z=L-l,q=L+l,z=I(b-j),ne=I(b+N);v.push({x1:Z,y1:ne,x2:q,y2:ne}),v.push({x1:L,y1:z,x2:L,y2:ne}),v.push({x1:Z,y1:z,x2:q,y2:z})}return $.createElement(Ze,Oc({className:"recharts-errorBar",key:"bar-".concat(v.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},x),v.map(function(Y){return $.createElement("line",Oc({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return $.createElement(Ze,{className:"recharts-errorBars"},f)}}])}($.Component);db(kl,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});db(kl,"displayName","ErrorBar");function Hi(t){"@babel/helpers - typeof";return Hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Hi(t)}function Qp(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function lr(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Qp(Object(a),!0).forEach(function(r){wF(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Qp(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function wF(t,s,a){return s=SF(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function SF(t){var s=kF(t,"string");return Hi(s)=="symbol"?s:s+""}function kF(t,s){if(Hi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Hi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var mb=function(s){var a=s.children,r=s.formattedGraphicalItems,n=s.legendWidth,i=s.legendContent,l=bs(a,Ya);if(!l)return null;var c=Ya.defaultProps,o=c!==void 0?lr(lr({},c),l.props):{},d;return l.props&&l.props.payload?d=l.props&&l.props.payload:i==="children"?d=(r||[]).reduce(function(u,m){var h=m.item,x=m.props,f=x.sectors||x.data||[];return u.concat(f.map(function(p){return{type:l.props.iconType||h.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(r||[]).map(function(u){var m=u.item,h=m.type.defaultProps,x=h!==void 0?lr(lr({},h),m.props):{},f=x.dataKey,p=x.name,g=x.legendType,w=x.hide;return{inactive:w,dataKey:f,type:o.iconType||g||"square",color:Jh(m),value:p||f,payload:x}}),lr(lr(lr({},o),Ya.getWithHeight(l,n)),{},{payload:d,item:l})};function Vi(t){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Vi(t)}function eg(t){return PF(t)||_F(t)||CF(t)||AF()}function AF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CF(t,s){if(t){if(typeof t=="string")return Qu(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Qu(t,s)}}function _F(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function PF(t){if(Array.isArray(t))return Qu(t)}function Qu(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function tg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Ot(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?tg(Object(a),!0).forEach(function(r){rn(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function rn(t,s,a){return s=TF(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function TF(t){var s=OF(t,"string");return Vi(s)=="symbol"?s:s+""}function OF(t,s){if(Vi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Vi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Dt(t,s,a){return Fe(t)||Fe(s)?a:zt(s)?ks(t,s,a):De(s)?s(t):a}function wi(t,s,a,r){var n=PL(t,function(c){return Dt(c,s)});if(a==="number"){var i=n.filter(function(c){return xe(c)||parseFloat(c)});return i.length?[Yo(i),Ga(i)]:[1/0,-1/0]}var l=r?n.filter(function(c){return!Fe(c)}):n;return l.map(function(c){return zt(c)||c instanceof Date?c:""})}var EF=function(s){var a,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=-1,c=(a=r==null?void 0:r.length)!==null&&a!==void 0?a:0;if(c<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var o=i.range,d=0;d<c;d++){var u=d>0?n[d-1].coordinate:n[c-1].coordinate,m=n[d].coordinate,h=d>=c-1?n[0].coordinate:n[d+1].coordinate,x=void 0;if(ms(m-u)!==ms(h-m)){var f=[];if(ms(h-m)===ms(o[1]-o[0])){x=h;var p=m+o[1]-o[0];f[0]=Math.min(p,(p+u)/2),f[1]=Math.max(p,(p+u)/2)}else{x=u;var g=h+o[1]-o[0];f[0]=Math.min(m,(g+m)/2),f[1]=Math.max(m,(g+m)/2)}var w=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(s>w[0]&&s<=w[1]||s>=f[0]&&s<=f[1]){l=n[d].index;break}}else{var S=Math.min(u,h),b=Math.max(u,h);if(s>(S+m)/2&&s<=(b+m)/2){l=n[d].index;break}}}else for(var A=0;A<c;A++)if(A===0&&s<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<c-1&&s>(r[A].coordinate+r[A-1].coordinate)/2&&s<=(r[A].coordinate+r[A+1].coordinate)/2||A===c-1&&s>(r[A].coordinate+r[A-1].coordinate)/2){l=r[A].index;break}return l},Jh=function(s){var a,r=s,n=r.type.displayName,i=(a=s.type)!==null&&a!==void 0&&a.defaultProps?Ot(Ot({},s.type.defaultProps),s.props):s.props,l=i.stroke,c=i.fill,o;switch(n){case"Line":o=l;break;case"Area":case"Radar":o=l&&l!=="none"?l:c;break;default:o=c;break}return o},IF=function(s){var a=s.barSize,r=s.totalSize,n=s.stackGroups,i=n===void 0?{}:n;if(!i)return{};for(var l={},c=Object.keys(i),o=0,d=c.length;o<d;o++)for(var u=i[c[o]].stackGroups,m=Object.keys(u),h=0,x=m.length;h<x;h++){var f=u[m[h]],p=f.items,g=f.cateAxisId,w=p.filter(function(N){return Aa(N.type).indexOf("Bar")>=0});if(w&&w.length){var S=w[0].type.defaultProps,b=S!==void 0?Ot(Ot({},S),w[0].props):w[0].props,A=b.barSize,v=b[g];l[v]||(l[v]=[]);var j=Fe(A)?a:A;l[v].push({item:w[0],stackList:w.slice(1),barSize:Fe(j)?void 0:hs(j,r,0)})}}return l},DF=function(s){var a=s.barGap,r=s.barCategoryGap,n=s.bandSize,i=s.sizeList,l=i===void 0?[]:i,c=s.maxBarSize,o=l.length;if(o<1)return null;var d=hs(a,n,0,!0),u,m=[];if(l[0].barSize===+l[0].barSize){var h=!1,x=n/o,f=l.reduce(function(A,v){return A+v.barSize||0},0);f+=(o-1)*d,f>=n&&(f-=(o-1)*d,d=0),f>=n&&x>0&&(h=!0,x*=.9,f=o*x);var p=(n-f)/2>>0,g={offset:p-d,size:0};u=l.reduce(function(A,v){var j={item:v.item,position:{offset:g.offset+g.size+d,size:h?x:v.barSize}},N=[].concat(eg(A),[j]);return g=N[N.length-1].position,v.stackList&&v.stackList.length&&v.stackList.forEach(function(O){N.push({item:O,position:g})}),N},m)}else{var w=hs(r,n,0,!0);n-2*w-(o-1)*d<=0&&(d=0);var S=(n-2*w-(o-1)*d)/o;S>1&&(S>>=0);var b=c===+c?Math.min(S,c):S;u=l.reduce(function(A,v,j){var N=[].concat(eg(A),[{item:v.item,position:{offset:w+(S+d)*j+(S-b)/2,size:b}}]);return v.stackList&&v.stackList.length&&v.stackList.forEach(function(O){N.push({item:O,position:N[N.length-1].position})}),N},m)}return u},MF=function(s,a,r,n){var i=r.children,l=r.width,c=r.margin,o=l-(c.left||0)-(c.right||0),d=mb({children:i,legendWidth:o});if(d){var u=n||{},m=u.width,h=u.height,x=d.align,f=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&f==="middle")&&x!=="center"&&xe(s[x]))return Ot(Ot({},s),{},rn({},x,s[x]+(m||0)));if((p==="horizontal"||p==="vertical"&&x==="center")&&f!=="middle"&&xe(s[f]))return Ot(Ot({},s),{},rn({},f,s[f]+(h||0)))}return s},$F=function(s,a,r){return Fe(a)?!0:s==="horizontal"?a==="yAxis":s==="vertical"||r==="x"?a==="xAxis":r==="y"?a==="yAxis":!0},hb=function(s,a,r,n,i){var l=a.props.children,c=As(l,kl).filter(function(d){return $F(n,i,d.props.direction)});if(c&&c.length){var o=c.map(function(d){return d.props.dataKey});return s.reduce(function(d,u){var m=Dt(u,r);if(Fe(m))return d;var h=Array.isArray(m)?[Yo(m),Ga(m)]:[m,m],x=o.reduce(function(f,p){var g=Dt(u,p,0),w=h[0]-Math.abs(Array.isArray(g)?g[0]:g),S=h[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(w,f[0]),Math.max(S,f[1])]},[1/0,-1/0]);return[Math.min(x[0],d[0]),Math.max(x[1],d[1])]},[1/0,-1/0])}return null},RF=function(s,a,r,n,i){var l=a.map(function(c){return hb(s,c,r,i,n)}).filter(function(c){return!Fe(c)});return l&&l.length?l.reduce(function(c,o){return[Math.min(c[0],o[0]),Math.max(c[1],o[1])]},[1/0,-1/0]):null},xb=function(s,a,r,n,i){var l=a.map(function(o){var d=o.props.dataKey;return r==="number"&&d&&hb(s,o,d,n)||wi(s,d,r,i)});if(r==="number")return l.reduce(function(o,d){return[Math.min(o[0],d[0]),Math.max(o[1],d[1])]},[1/0,-1/0]);var c={};return l.reduce(function(o,d){for(var u=0,m=d.length;u<m;u++)c[d[u]]||(c[d[u]]=!0,o.push(d[u]));return o},[])},fb=function(s,a){return s==="horizontal"&&a==="xAxis"||s==="vertical"&&a==="yAxis"||s==="centric"&&a==="angleAxis"||s==="radial"&&a==="radiusAxis"},pb=function(s,a,r,n){if(n)return s.map(function(o){return o.coordinate});var i,l,c=s.map(function(o){return o.coordinate===a&&(i=!0),o.coordinate===r&&(l=!0),o.coordinate});return i||c.push(a),l||c.push(r),c},Sa=function(s,a,r){if(!s)return null;var n=s.scale,i=s.duplicateDomain,l=s.type,c=s.range,o=s.realScaleType==="scaleBand"?n.bandwidth()/2:2,d=(a||r)&&l==="category"&&n.bandwidth?n.bandwidth()/o:0;if(d=s.axisType==="angleAxis"&&(c==null?void 0:c.length)>=2?ms(c[0]-c[1])*2*d:d,a&&(s.ticks||s.niceTicks)){var u=(s.ticks||s.niceTicks).map(function(m){var h=i?i.indexOf(m):m;return{coordinate:n(h)+d,value:m,offset:d}});return u.filter(function(m){return!Yn(m.coordinate)})}return s.isCategorical&&s.categoricalDomain?s.categoricalDomain.map(function(m,h){return{coordinate:n(m)+d,value:m,index:h,offset:d}}):n.ticks&&!r?n.ticks(s.tickCount).map(function(m){return{coordinate:n(m)+d,value:m,offset:d}}):n.domain().map(function(m,h){return{coordinate:n(m)+d,value:i?i[m]:m,index:h,offset:d}})},Bd=new WeakMap,Rl=function(s,a){if(typeof a!="function")return s;Bd.has(s)||Bd.set(s,new WeakMap);var r=Bd.get(s);if(r.has(a))return r.get(a);var n=function(){s.apply(void 0,arguments),a.apply(void 0,arguments)};return r.set(a,n),n},gb=function(s,a,r){var n=s.scale,i=s.type,l=s.layout,c=s.axisType;if(n==="auto")return l==="radial"&&c==="radiusAxis"?{scale:Fi(),realScaleType:"band"}:l==="radial"&&c==="angleAxis"?{scale:Ac(),realScaleType:"linear"}:i==="category"&&a&&(a.indexOf("LineChart")>=0||a.indexOf("AreaChart")>=0||a.indexOf("ComposedChart")>=0&&!r)?{scale:Ni(),realScaleType:"point"}:i==="category"?{scale:Fi(),realScaleType:"band"}:{scale:Ac(),realScaleType:"linear"};if(Er(n)){var o="scale".concat($o(n));return{scale:(Vp[o]||Ni)(),realScaleType:Vp[o]?o:"point"}}return De(n)?{scale:n}:{scale:Ni(),realScaleType:"point"}},sg=1e-4,vb=function(s){var a=s.domain();if(!(!a||a.length<=2)){var r=a.length,n=s.range(),i=Math.min(n[0],n[1])-sg,l=Math.max(n[0],n[1])+sg,c=s(a[0]),o=s(a[r-1]);(c<i||c>l||o<i||o>l)&&s.domain([a[0],a[r-1]])}},LF=function(s,a){if(!s)return null;for(var r=0,n=s.length;r<n;r++)if(s[r].item===a)return s[r].position;return null},FF=function(s,a){if(!a||a.length!==2||!xe(a[0])||!xe(a[1]))return s;var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]),i=[s[0],s[1]];return(!xe(s[0])||s[0]<r)&&(i[0]=r),(!xe(s[1])||s[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},BF=function(s){var a=s.length;if(!(a<=0))for(var r=0,n=s[0].length;r<n;++r)for(var i=0,l=0,c=0;c<a;++c){var o=Yn(s[c][r][1])?s[c][r][0]:s[c][r][1];o>=0?(s[c][r][0]=i,s[c][r][1]=i+o,i=s[c][r][1]):(s[c][r][0]=l,s[c][r][1]=l+o,l=s[c][r][1])}},UF=function(s){var a=s.length;if(!(a<=0))for(var r=0,n=s[0].length;r<n;++r)for(var i=0,l=0;l<a;++l){var c=Yn(s[l][r][1])?s[l][r][0]:s[l][r][1];c>=0?(s[l][r][0]=i,s[l][r][1]=i+c,i=s[l][r][1]):(s[l][r][0]=0,s[l][r][1]=0)}},zF={sign:BF,expand:dP,none:pn,silhouette:uP,wiggle:mP,positive:UF},WF=function(s,a,r){var n=a.map(function(c){return c.props.dataKey}),i=zF[r],l=oP().keys(n).value(function(c,o){return+Dt(c,o,0)}).order(Su).offset(i);return l(s)},qF=function(s,a,r,n,i,l){if(!s)return null;var c=l?a.reverse():a,o={},d=c.reduce(function(m,h){var x,f=(x=h.type)!==null&&x!==void 0&&x.defaultProps?Ot(Ot({},h.type.defaultProps),h.props):h.props,p=f.stackId,g=f.hide;if(g)return m;var w=f[r],S=m[w]||{hasStack:!1,stackGroups:{}};if(zt(p)){var b=S.stackGroups[p]||{numericAxisId:r,cateAxisId:n,items:[]};b.items.push(h),S.hasStack=!0,S.stackGroups[p]=b}else S.stackGroups[Br("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[h]};return Ot(Ot({},m),{},rn({},w,S))},o),u={};return Object.keys(d).reduce(function(m,h){var x=d[h];if(x.hasStack){var f={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(p,g){var w=x.stackGroups[g];return Ot(Ot({},p),{},rn({},g,{numericAxisId:r,cateAxisId:n,items:w.items,stackedData:WF(s,w.items,i)}))},f)}return Ot(Ot({},m),{},rn({},h,x))},u)},jb=function(s,a){var r=a.realScaleType,n=a.type,i=a.tickCount,l=a.originalDomain,c=a.allowDecimals,o=r||a.scale;if(o!=="auto"&&o!=="linear")return null;if(i&&n==="number"&&l&&(l[0]==="auto"||l[1]==="auto")){var d=s.domain();if(!d.length)return null;var u=nF(d,i,c);return s.domain([Yo(u),Ga(u)]),{niceTicks:u}}if(i&&n==="number"){var m=s.domain(),h=iF(m,i,c);return{niceTicks:h}}return null};function Ic(t){var s=t.axis,a=t.ticks,r=t.bandSize,n=t.entry,i=t.index,l=t.dataKey;if(s.type==="category"){if(!s.allowDuplicatedCategory&&s.dataKey&&!Fe(n[s.dataKey])){var c=nc(a,"value",n[s.dataKey]);if(c)return c.coordinate+r/2}return a[i]?a[i].coordinate+r/2:null}var o=Dt(n,Fe(l)?s.dataKey:l);return Fe(o)?null:s.scale(o)}var ag=function(s){var a=s.axis,r=s.ticks,n=s.offset,i=s.bandSize,l=s.entry,c=s.index;if(a.type==="category")return r[c]?r[c].coordinate+n:null;var o=Dt(l,a.dataKey,a.domain[c]);return Fe(o)?null:a.scale(o)-i/2+n},KF=function(s){var a=s.numericAxis,r=a.scale.domain();if(a.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},HF=function(s,a){var r,n=(r=s.type)!==null&&r!==void 0&&r.defaultProps?Ot(Ot({},s.type.defaultProps),s.props):s.props,i=n.stackId;if(zt(i)){var l=a[i];if(l){var c=l.items.indexOf(s);return c>=0?l.stackedData[c]:null}}return null},VF=function(s){return s.reduce(function(a,r){return[Yo(r.concat([a[0]]).filter(xe)),Ga(r.concat([a[1]]).filter(xe))]},[1/0,-1/0])},yb=function(s,a,r){return Object.keys(s).reduce(function(n,i){var l=s[i],c=l.stackedData,o=c.reduce(function(d,u){var m=VF(u.slice(a,r+1));return[Math.min(d[0],m[0]),Math.max(d[1],m[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]).map(function(n){return n===1/0||n===-1/0?0:n})},rg=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ng=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,em=function(s,a,r){if(De(s))return s(a,r);if(!Array.isArray(s))return a;var n=[];if(xe(s[0]))n[0]=r?s[0]:Math.min(s[0],a[0]);else if(rg.test(s[0])){var i=+rg.exec(s[0])[1];n[0]=a[0]-i}else De(s[0])?n[0]=s[0](a[0]):n[0]=a[0];if(xe(s[1]))n[1]=r?s[1]:Math.max(s[1],a[1]);else if(ng.test(s[1])){var l=+ng.exec(s[1])[1];n[1]=a[1]+l}else De(s[1])?n[1]=s[1](a[1]):n[1]=a[1];return n},Dc=function(s,a,r){if(s&&s.scale&&s.scale.bandwidth){var n=s.scale.bandwidth();if(!r||n>0)return n}if(s&&a&&a.length>=2){for(var i=Ah(a,function(m){return m.coordinate}),l=1/0,c=1,o=i.length;c<o;c++){var d=i[c],u=i[c-1];l=Math.min((d.coordinate||0)-(u.coordinate||0),l)}return l===1/0?0:l}return r?void 0:0},ig=function(s,a,r){return!s||!s.length||Mr(s,ks(r,"type.defaultProps.domain"))?a:s},bb=function(s,a){var r=s.type.defaultProps?Ot(Ot({},s.type.defaultProps),s.props):s.props,n=r.dataKey,i=r.name,l=r.unit,c=r.formatter,o=r.tooltipType,d=r.chartType,u=r.hide;return Ot(Ot({},Ce(s,!1)),{},{dataKey:n,unit:l,formatter:c,name:i||n,color:Jh(s),value:Dt(a,n),type:o,payload:a,chartType:d,hide:u})};function Gi(t){"@babel/helpers - typeof";return Gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Gi(t)}function lg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function ja(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?lg(Object(a),!0).forEach(function(r){Nb(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Nb(t,s,a){return s=GF(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function GF(t){var s=ZF(t,"string");return Gi(s)=="symbol"?s:s+""}function ZF(t,s){if(Gi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Gi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function YF(t,s){return eB(t)||QF(t,s)||JF(t,s)||XF()}function XF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JF(t,s){if(t){if(typeof t=="string")return cg(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cg(t,s)}}function cg(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function QF(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function eB(t){if(Array.isArray(t))return t}var Mc=Math.PI/180,tB=function(s){return s*180/Math.PI},yt=function(s,a,r,n){return{x:s+Math.cos(-Mc*n)*r,y:a+Math.sin(-Mc*n)*r}},wb=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(s-(r.left||0)-(r.right||0)),Math.abs(a-(r.top||0)-(r.bottom||0)))/2},sB=function(s,a,r,n,i){var l=s.width,c=s.height,o=s.startAngle,d=s.endAngle,u=hs(s.cx,l,l/2),m=hs(s.cy,c,c/2),h=wb(l,c,r),x=hs(s.innerRadius,h,0),f=hs(s.outerRadius,h,h*.8),p=Object.keys(a);return p.reduce(function(g,w){var S=a[w],b=S.domain,A=S.reversed,v;if(Fe(S.range))n==="angleAxis"?v=[o,d]:n==="radiusAxis"&&(v=[x,f]),A&&(v=[v[1],v[0]]);else{v=S.range;var j=v,N=YF(j,2);o=N[0],d=N[1]}var O=gb(S,i),C=O.realScaleType,D=O.scale;D.domain(b).range(v),vb(D);var E=jb(D,ja(ja({},S),{},{realScaleType:C})),P=ja(ja(ja({},S),E),{},{range:v,radius:f,realScaleType:C,scale:D,cx:u,cy:m,innerRadius:x,outerRadius:f,startAngle:o,endAngle:d});return ja(ja({},g),{},Nb({},w,P))},{})},aB=function(s,a){var r=s.x,n=s.y,i=a.x,l=a.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(n-l,2))},rB=function(s,a){var r=s.x,n=s.y,i=a.cx,l=a.cy,c=aB({x:r,y:n},{x:i,y:l});if(c<=0)return{radius:c};var o=(r-i)/c,d=Math.acos(o);return n>l&&(d=2*Math.PI-d),{radius:c,angle:tB(d),angleInRadian:d}},nB=function(s){var a=s.startAngle,r=s.endAngle,n=Math.floor(a/360),i=Math.floor(r/360),l=Math.min(n,i);return{startAngle:a-l*360,endAngle:r-l*360}},iB=function(s,a){var r=a.startAngle,n=a.endAngle,i=Math.floor(r/360),l=Math.floor(n/360),c=Math.min(i,l);return s+c*360},og=function(s,a){var r=s.x,n=s.y,i=rB({x:r,y:n},a),l=i.radius,c=i.angle,o=a.innerRadius,d=a.outerRadius;if(l<o||l>d)return!1;if(l===0)return!0;var u=nB(a),m=u.startAngle,h=u.endAngle,x=c,f;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;f=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;f=x>=h&&x<=m}return f?ja(ja({},a),{},{radius:l,angle:iB(x,a)}):null},Sb=function(s){return!y.isValidElement(s)&&!De(s)&&typeof s!="boolean"?s.className:""};function Zi(t){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Zi(t)}var lB=["offset"];function cB(t){return mB(t)||uB(t)||dB(t)||oB()}function oB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dB(t,s){if(t){if(typeof t=="string")return tm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return tm(t,s)}}function uB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mB(t){if(Array.isArray(t))return tm(t)}function tm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function hB(t,s){if(t==null)return{};var a=xB(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function xB(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function dg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Bt(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?dg(Object(a),!0).forEach(function(r){fB(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):dg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function fB(t,s,a){return s=pB(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function pB(t){var s=gB(t,"string");return Zi(s)=="symbol"?s:s+""}function gB(t,s){if(Zi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Zi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Yi(){return Yi=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Yi.apply(this,arguments)}var vB=function(s){var a=s.value,r=s.formatter,n=Fe(s.children)?a:s.children;return De(r)?r(n):n},jB=function(s,a){var r=ms(a-s),n=Math.min(Math.abs(a-s),360);return r*n},yB=function(s,a,r){var n=s.position,i=s.viewBox,l=s.offset,c=s.className,o=i,d=o.cx,u=o.cy,m=o.innerRadius,h=o.outerRadius,x=o.startAngle,f=o.endAngle,p=o.clockWise,g=(m+h)/2,w=jB(x,f),S=w>=0?1:-1,b,A;n==="insideStart"?(b=x+S*l,A=p):n==="insideEnd"?(b=f-S*l,A=!p):n==="end"&&(b=f+S*l,A=p),A=w<=0?A:!A;var v=yt(d,u,g,b),j=yt(d,u,g,b+(A?1:-1)*359),N="M".concat(v.x,",").concat(v.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(A?0:1,`,
    `).concat(j.x,",").concat(j.y),O=Fe(s.id)?Br("recharts-radial-line-"):s.id;return $.createElement("text",Yi({},r,{dominantBaseline:"central",className:We("recharts-radial-bar-label",c)}),$.createElement("defs",null,$.createElement("path",{id:O,d:N})),$.createElement("textPath",{xlinkHref:"#".concat(O)},a))},bB=function(s){var a=s.viewBox,r=s.offset,n=s.position,i=a,l=i.cx,c=i.cy,o=i.innerRadius,d=i.outerRadius,u=i.startAngle,m=i.endAngle,h=(u+m)/2;if(n==="outside"){var x=yt(l,c,d+r,h),f=x.x,p=x.y;return{x:f,y:p,textAnchor:f>=l?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:l,y:c,textAnchor:"middle",verticalAnchor:"end"};var g=(o+d)/2,w=yt(l,c,g,h),S=w.x,b=w.y;return{x:S,y:b,textAnchor:"middle",verticalAnchor:"middle"}},NB=function(s){var a=s.viewBox,r=s.parentViewBox,n=s.offset,i=s.position,l=a,c=l.x,o=l.y,d=l.width,u=l.height,m=u>=0?1:-1,h=m*n,x=m>0?"end":"start",f=m>0?"start":"end",p=d>=0?1:-1,g=p*n,w=p>0?"end":"start",S=p>0?"start":"end";if(i==="top"){var b={x:c+d/2,y:o-m*n,textAnchor:"middle",verticalAnchor:x};return Bt(Bt({},b),r?{height:Math.max(o-r.y,0),width:d}:{})}if(i==="bottom"){var A={x:c+d/2,y:o+u+h,textAnchor:"middle",verticalAnchor:f};return Bt(Bt({},A),r?{height:Math.max(r.y+r.height-(o+u),0),width:d}:{})}if(i==="left"){var v={x:c-g,y:o+u/2,textAnchor:w,verticalAnchor:"middle"};return Bt(Bt({},v),r?{width:Math.max(v.x-r.x,0),height:u}:{})}if(i==="right"){var j={x:c+d+g,y:o+u/2,textAnchor:S,verticalAnchor:"middle"};return Bt(Bt({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:u}:{})}var N=r?{width:d,height:u}:{};return i==="insideLeft"?Bt({x:c+g,y:o+u/2,textAnchor:S,verticalAnchor:"middle"},N):i==="insideRight"?Bt({x:c+d-g,y:o+u/2,textAnchor:w,verticalAnchor:"middle"},N):i==="insideTop"?Bt({x:c+d/2,y:o+h,textAnchor:"middle",verticalAnchor:f},N):i==="insideBottom"?Bt({x:c+d/2,y:o+u-h,textAnchor:"middle",verticalAnchor:x},N):i==="insideTopLeft"?Bt({x:c+g,y:o+h,textAnchor:S,verticalAnchor:f},N):i==="insideTopRight"?Bt({x:c+d-g,y:o+h,textAnchor:w,verticalAnchor:f},N):i==="insideBottomLeft"?Bt({x:c+g,y:o+u-h,textAnchor:S,verticalAnchor:x},N):i==="insideBottomRight"?Bt({x:c+d-g,y:o+u-h,textAnchor:w,verticalAnchor:x},N):Hn(i)&&(xe(i.x)||vr(i.x))&&(xe(i.y)||vr(i.y))?Bt({x:c+hs(i.x,d),y:o+hs(i.y,u),textAnchor:"end",verticalAnchor:"end"},N):Bt({x:c+d/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},N)},wB=function(s){return"cx"in s&&xe(s.cx)};function Kt(t){var s=t.offset,a=s===void 0?5:s,r=hB(t,lB),n=Bt({offset:a},r),i=n.viewBox,l=n.position,c=n.value,o=n.children,d=n.content,u=n.className,m=u===void 0?"":u,h=n.textBreakAll;if(!i||Fe(c)&&Fe(o)&&!y.isValidElement(d)&&!De(d))return null;if(y.isValidElement(d))return y.cloneElement(d,n);var x;if(De(d)){if(x=y.createElement(d,n),y.isValidElement(x))return x}else x=vB(n);var f=wB(i),p=Ce(n,!0);if(f&&(l==="insideStart"||l==="insideEnd"||l==="end"))return yB(n,x,p);var g=f?bB(n):NB(n);return $.createElement(Dr,Yi({className:We("recharts-label",m)},p,g,{breakAll:h}),x)}Kt.displayName="Label";var kb=function(s){var a=s.cx,r=s.cy,n=s.angle,i=s.startAngle,l=s.endAngle,c=s.r,o=s.radius,d=s.innerRadius,u=s.outerRadius,m=s.x,h=s.y,x=s.top,f=s.left,p=s.width,g=s.height,w=s.clockWise,S=s.labelViewBox;if(S)return S;if(xe(p)&&xe(g)){if(xe(m)&&xe(h))return{x:m,y:h,width:p,height:g};if(xe(x)&&xe(f))return{x,y:f,width:p,height:g}}return xe(m)&&xe(h)?{x:m,y:h,width:0,height:0}:xe(a)&&xe(r)?{cx:a,cy:r,startAngle:i||n||0,endAngle:l||n||0,innerRadius:d||0,outerRadius:u||o||c||0,clockWise:w}:s.viewBox?s.viewBox:{}},SB=function(s,a){return s?s===!0?$.createElement(Kt,{key:"label-implicit",viewBox:a}):zt(s)?$.createElement(Kt,{key:"label-implicit",viewBox:a,value:s}):y.isValidElement(s)?s.type===Kt?y.cloneElement(s,{key:"label-implicit",viewBox:a}):$.createElement(Kt,{key:"label-implicit",content:s,viewBox:a}):De(s)?$.createElement(Kt,{key:"label-implicit",content:s,viewBox:a}):Hn(s)?$.createElement(Kt,Yi({viewBox:a},s,{key:"label-implicit"})):null:null},kB=function(s,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!s||!s.children&&r&&!s.label)return null;var n=s.children,i=kb(s),l=As(n,Kt).map(function(o,d){return y.cloneElement(o,{viewBox:a||i,key:"label-".concat(d)})});if(!r)return l;var c=SB(s.label,a||i);return[c].concat(cB(l))};Kt.parseViewBox=kb;Kt.renderCallByParent=kB;function AB(t){var s=t==null?0:t.length;return s?t[s-1]:void 0}var CB=AB;const _B=ht(CB);function Xi(t){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Xi(t)}var PB=["valueAccessor"],TB=["data","dataKey","clockWise","id","textBreakAll"];function OB(t){return MB(t)||DB(t)||IB(t)||EB()}function EB(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IB(t,s){if(t){if(typeof t=="string")return sm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return sm(t,s)}}function DB(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MB(t){if(Array.isArray(t))return sm(t)}function sm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function $c(){return $c=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$c.apply(this,arguments)}function ug(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function mg(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ug(Object(a),!0).forEach(function(r){$B(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ug(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function $B(t,s,a){return s=RB(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function RB(t){var s=LB(t,"string");return Xi(s)=="symbol"?s:s+""}function LB(t,s){if(Xi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Xi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function hg(t,s){if(t==null)return{};var a=FB(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function FB(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}var BB=function(s){return Array.isArray(s.value)?_B(s.value):s.value};function na(t){var s=t.valueAccessor,a=s===void 0?BB:s,r=hg(t,PB),n=r.data,i=r.dataKey,l=r.clockWise,c=r.id,o=r.textBreakAll,d=hg(r,TB);return!n||!n.length?null:$.createElement(Ze,{className:"recharts-label-list"},n.map(function(u,m){var h=Fe(i)?a(u,m):Dt(u&&u.payload,i),x=Fe(c)?{}:{id:"".concat(c,"-").concat(m)};return $.createElement(Kt,$c({},Ce(u,!0),d,x,{parentViewBox:u.parentViewBox,value:h,textBreakAll:o,viewBox:Kt.parseViewBox(Fe(l)?u:mg(mg({},u),{},{clockWise:l})),key:"label-".concat(m),index:m}))}))}na.displayName="LabelList";function UB(t,s){return t?t===!0?$.createElement(na,{key:"labelList-implicit",data:s}):$.isValidElement(t)||De(t)?$.createElement(na,{key:"labelList-implicit",data:s,content:t}):Hn(t)?$.createElement(na,$c({data:s},t,{key:"labelList-implicit"})):null:null}function zB(t,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var r=t.children,n=As(r,na).map(function(l,c){return y.cloneElement(l,{data:s,key:"labelList-".concat(c)})});if(!a)return n;var i=UB(t.label,s);return[i].concat(OB(n))}na.renderCallByParent=zB;function Ji(t){"@babel/helpers - typeof";return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ji(t)}function am(){return am=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},am.apply(this,arguments)}function xg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function fg(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?xg(Object(a),!0).forEach(function(r){WB(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function WB(t,s,a){return s=qB(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function qB(t){var s=KB(t,"string");return Ji(s)=="symbol"?s:s+""}function KB(t,s){if(Ji(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Ji(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var HB=function(s,a){var r=ms(a-s),n=Math.min(Math.abs(a-s),359.999);return r*n},Ll=function(s){var a=s.cx,r=s.cy,n=s.radius,i=s.angle,l=s.sign,c=s.isExternal,o=s.cornerRadius,d=s.cornerIsExternal,u=o*(c?1:-1)+n,m=Math.asin(o/u)/Mc,h=d?i:i+l*m,x=yt(a,r,u,h),f=yt(a,r,n,h),p=d?i-l*m:i,g=yt(a,r,u*Math.cos(m*Mc),p);return{center:x,circleTangency:f,lineTangency:g,theta:m}},Ab=function(s){var a=s.cx,r=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.startAngle,c=s.endAngle,o=HB(l,c),d=l+o,u=yt(a,r,i,l),m=yt(a,r,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(l>d),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(n>0){var x=yt(a,r,n,l),f=yt(a,r,n,d);h+="L ".concat(f.x,",").concat(f.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(l<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(a,",").concat(r," Z");return h},VB=function(s){var a=s.cx,r=s.cy,n=s.innerRadius,i=s.outerRadius,l=s.cornerRadius,c=s.forceCornerRadius,o=s.cornerIsExternal,d=s.startAngle,u=s.endAngle,m=ms(u-d),h=Ll({cx:a,cy:r,radius:i,angle:d,sign:m,cornerRadius:l,cornerIsExternal:o}),x=h.circleTangency,f=h.lineTangency,p=h.theta,g=Ll({cx:a,cy:r,radius:i,angle:u,sign:-m,cornerRadius:l,cornerIsExternal:o}),w=g.circleTangency,S=g.lineTangency,b=g.theta,A=o?Math.abs(d-u):Math.abs(d-u)-p-b;if(A<0)return c?"M ".concat(f.x,",").concat(f.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):Ab({cx:a,cy:r,innerRadius:n,outerRadius:i,startAngle:d,endAngle:u});var v="M ".concat(f.x,",").concat(f.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(m<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(S.x,",").concat(S.y,`
  `);if(n>0){var j=Ll({cx:a,cy:r,radius:n,angle:d,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:o}),N=j.circleTangency,O=j.lineTangency,C=j.theta,D=Ll({cx:a,cy:r,radius:n,angle:u,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:o}),E=D.circleTangency,P=D.lineTangency,R=D.theta,U=o?Math.abs(d-u):Math.abs(d-u)-C-R;if(U<0&&l===0)return"".concat(v,"L").concat(a,",").concat(r,"Z");v+="L".concat(P.x,",").concat(P.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(U>180),",").concat(+(m>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,"Z")}else v+="L".concat(a,",").concat(r,"Z");return v},GB={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Cb=function(s){var a=fg(fg({},GB),s),r=a.cx,n=a.cy,i=a.innerRadius,l=a.outerRadius,c=a.cornerRadius,o=a.forceCornerRadius,d=a.cornerIsExternal,u=a.startAngle,m=a.endAngle,h=a.className;if(l<i||u===m)return null;var x=We("recharts-sector",h),f=l-i,p=hs(c,f,0,!0),g;return p>0&&Math.abs(u-m)<360?g=VB({cx:r,cy:n,innerRadius:i,outerRadius:l,cornerRadius:Math.min(p,f/2),forceCornerRadius:o,cornerIsExternal:d,startAngle:u,endAngle:m}):g=Ab({cx:r,cy:n,innerRadius:i,outerRadius:l,startAngle:u,endAngle:m}),$.createElement("path",am({},Ce(a,!0),{className:x,d:g,role:"img"}))};function Qi(t){"@babel/helpers - typeof";return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Qi(t)}function rm(){return rm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},rm.apply(this,arguments)}function pg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function gg(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?pg(Object(a),!0).forEach(function(r){ZB(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):pg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ZB(t,s,a){return s=YB(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function YB(t){var s=XB(t,"string");return Qi(s)=="symbol"?s:s+""}function XB(t,s){if(Qi(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Qi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var vg={curveBasisClosed:J_,curveBasisOpen:Q_,curveBasis:X_,curveBumpX:R_,curveBumpY:L_,curveLinearClosed:eP,curveLinear:Lo,curveMonotoneX:tP,curveMonotoneY:sP,curveNatural:aP,curveStep:rP,curveStepAfter:iP,curveStepBefore:nP},Fl=function(s){return s.x===+s.x&&s.y===+s.y},xi=function(s){return s.x},fi=function(s){return s.y},JB=function(s,a){if(De(s))return s;var r="curve".concat($o(s));return(r==="curveMonotone"||r==="curveBump")&&a?vg["".concat(r).concat(a==="vertical"?"Y":"X")]:vg[r]||Lo},QB=function(s){var a=s.type,r=a===void 0?"linear":a,n=s.points,i=n===void 0?[]:n,l=s.baseLine,c=s.layout,o=s.connectNulls,d=o===void 0?!1:o,u=JB(r,c),m=d?i.filter(function(p){return Fl(p)}):i,h;if(Array.isArray(l)){var x=d?l.filter(function(p){return Fl(p)}):l,f=m.map(function(p,g){return gg(gg({},p),{},{base:x[g]})});return c==="vertical"?h=Pl().y(fi).x1(xi).x0(function(p){return p.base.x}):h=Pl().x(xi).y1(fi).y0(function(p){return p.base.y}),h.defined(Fl).curve(u),h(f)}return c==="vertical"&&xe(l)?h=Pl().y(fi).x1(xi).x0(l):xe(l)?h=Pl().x(xi).y1(fi).y0(l):h=b0().x(xi).y(fi),h.defined(Fl).curve(u),h(m)},Cr=function(s){var a=s.className,r=s.points,n=s.path,i=s.pathRef;if((!r||!r.length)&&!n)return null;var l=r&&r.length?QB(s):n;return y.createElement("path",rm({},Ce(s,!1),ic(s),{className:We("recharts-curve",a),d:l,ref:i}))},_b={exports:{}},e8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",t8=e8,s8=t8;function Pb(){}function Tb(){}Tb.resetWarningCache=Pb;var a8=function(){function t(r,n,i,l,c,o){if(o!==s8){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function s(){return t}var a={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:Tb,resetWarningCache:Pb};return a.PropTypes=a,a};_b.exports=a8();var r8=_b.exports;const lt=ht(r8);var n8=Object.getOwnPropertyNames,i8=Object.getOwnPropertySymbols,l8=Object.prototype.hasOwnProperty;function jg(t,s){return function(r,n,i){return t(r,n,i)&&s(r,n,i)}}function Bl(t){return function(a,r,n){if(!a||!r||typeof a!="object"||typeof r!="object")return t(a,r,n);var i=n.cache,l=i.get(a),c=i.get(r);if(l&&c)return l===r&&c===a;i.set(a,r),i.set(r,a);var o=t(a,r,n);return i.delete(a),i.delete(r),o}}function yg(t){return n8(t).concat(i8(t))}var c8=Object.hasOwn||function(t,s){return l8.call(t,s)};function Wr(t,s){return t===s||!t&&!s&&t!==t&&s!==s}var o8="__v",d8="__o",u8="_owner",bg=Object.getOwnPropertyDescriptor,Ng=Object.keys;function m8(t,s,a){var r=t.length;if(s.length!==r)return!1;for(;r-- >0;)if(!a.equals(t[r],s[r],r,r,t,s,a))return!1;return!0}function h8(t,s){return Wr(t.getTime(),s.getTime())}function x8(t,s){return t.name===s.name&&t.message===s.message&&t.cause===s.cause&&t.stack===s.stack}function f8(t,s){return t===s}function wg(t,s,a){var r=t.size;if(r!==s.size)return!1;if(!r)return!0;for(var n=new Array(r),i=t.entries(),l,c,o=0;(l=i.next())&&!l.done;){for(var d=s.entries(),u=!1,m=0;(c=d.next())&&!c.done;){if(n[m]){m++;continue}var h=l.value,x=c.value;if(a.equals(h[0],x[0],o,m,t,s,a)&&a.equals(h[1],x[1],h[0],x[0],t,s,a)){u=n[m]=!0;break}m++}if(!u)return!1;o++}return!0}var p8=Wr;function g8(t,s,a){var r=Ng(t),n=r.length;if(Ng(s).length!==n)return!1;for(;n-- >0;)if(!Ob(t,s,a,r[n]))return!1;return!0}function pi(t,s,a){var r=yg(t),n=r.length;if(yg(s).length!==n)return!1;for(var i,l,c;n-- >0;)if(i=r[n],!Ob(t,s,a,i)||(l=bg(t,i),c=bg(s,i),(l||c)&&(!l||!c||l.configurable!==c.configurable||l.enumerable!==c.enumerable||l.writable!==c.writable)))return!1;return!0}function v8(t,s){return Wr(t.valueOf(),s.valueOf())}function j8(t,s){return t.source===s.source&&t.flags===s.flags}function Sg(t,s,a){var r=t.size;if(r!==s.size)return!1;if(!r)return!0;for(var n=new Array(r),i=t.values(),l,c;(l=i.next())&&!l.done;){for(var o=s.values(),d=!1,u=0;(c=o.next())&&!c.done;){if(!n[u]&&a.equals(l.value,c.value,l.value,c.value,t,s,a)){d=n[u]=!0;break}u++}if(!d)return!1}return!0}function y8(t,s){var a=t.length;if(s.length!==a)return!1;for(;a-- >0;)if(t[a]!==s[a])return!1;return!0}function b8(t,s){return t.hostname===s.hostname&&t.pathname===s.pathname&&t.protocol===s.protocol&&t.port===s.port&&t.hash===s.hash&&t.username===s.username&&t.password===s.password}function Ob(t,s,a,r){return(r===u8||r===d8||r===o8)&&(t.$$typeof||s.$$typeof)?!0:c8(s,r)&&a.equals(t[r],s[r],r,r,t,s,a)}var N8="[object Arguments]",w8="[object Boolean]",S8="[object Date]",k8="[object Error]",A8="[object Map]",C8="[object Number]",_8="[object Object]",P8="[object RegExp]",T8="[object Set]",O8="[object String]",E8="[object URL]",I8=Array.isArray,kg=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ag=Object.assign,D8=Object.prototype.toString.call.bind(Object.prototype.toString);function M8(t){var s=t.areArraysEqual,a=t.areDatesEqual,r=t.areErrorsEqual,n=t.areFunctionsEqual,i=t.areMapsEqual,l=t.areNumbersEqual,c=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,m=t.areTypedArraysEqual,h=t.areUrlsEqual;return function(f,p,g){if(f===p)return!0;if(f==null||p==null)return!1;var w=typeof f;if(w!==typeof p)return!1;if(w!=="object")return w==="number"?l(f,p,g):w==="function"?n(f,p,g):!1;var S=f.constructor;if(S!==p.constructor)return!1;if(S===Object)return c(f,p,g);if(I8(f))return s(f,p,g);if(kg!=null&&kg(f))return m(f,p,g);if(S===Date)return a(f,p,g);if(S===RegExp)return d(f,p,g);if(S===Map)return i(f,p,g);if(S===Set)return u(f,p,g);var b=D8(f);return b===S8?a(f,p,g):b===P8?d(f,p,g):b===A8?i(f,p,g):b===T8?u(f,p,g):b===_8?typeof f.then!="function"&&typeof p.then!="function"&&c(f,p,g):b===E8?h(f,p,g):b===k8?r(f,p,g):b===N8?c(f,p,g):b===w8||b===C8||b===O8?o(f,p,g):!1}}function $8(t){var s=t.circular,a=t.createCustomConfig,r=t.strict,n={areArraysEqual:r?pi:m8,areDatesEqual:h8,areErrorsEqual:x8,areFunctionsEqual:f8,areMapsEqual:r?jg(wg,pi):wg,areNumbersEqual:p8,areObjectsEqual:r?pi:g8,arePrimitiveWrappersEqual:v8,areRegExpsEqual:j8,areSetsEqual:r?jg(Sg,pi):Sg,areTypedArraysEqual:r?pi:y8,areUrlsEqual:b8};if(a&&(n=Ag({},n,a(n))),s){var i=Bl(n.areArraysEqual),l=Bl(n.areMapsEqual),c=Bl(n.areObjectsEqual),o=Bl(n.areSetsEqual);n=Ag({},n,{areArraysEqual:i,areMapsEqual:l,areObjectsEqual:c,areSetsEqual:o})}return n}function R8(t){return function(s,a,r,n,i,l,c){return t(s,a,c)}}function L8(t){var s=t.circular,a=t.comparator,r=t.createState,n=t.equals,i=t.strict;if(r)return function(o,d){var u=r(),m=u.cache,h=m===void 0?s?new WeakMap:void 0:m,x=u.meta;return a(o,d,{cache:h,equals:n,meta:x,strict:i})};if(s)return function(o,d){return a(o,d,{cache:new WeakMap,equals:n,meta:void 0,strict:i})};var l={cache:void 0,equals:n,meta:void 0,strict:i};return function(o,d){return a(o,d,l)}}var F8=nr();nr({strict:!0});nr({circular:!0});nr({circular:!0,strict:!0});nr({createInternalComparator:function(){return Wr}});nr({strict:!0,createInternalComparator:function(){return Wr}});nr({circular:!0,createInternalComparator:function(){return Wr}});nr({circular:!0,createInternalComparator:function(){return Wr},strict:!0});function nr(t){t===void 0&&(t={});var s=t.circular,a=s===void 0?!1:s,r=t.createInternalComparator,n=t.createState,i=t.strict,l=i===void 0?!1:i,c=$8(t),o=M8(c),d=r?r(o):R8(o);return L8({circular:a,comparator:o,createState:n,equals:d,strict:l})}function B8(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Cg(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=-1,r=function n(i){a<0&&(a=i),i-a>s?(t(i),a=-1):B8(n)};requestAnimationFrame(r)}function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},nm(t)}function U8(t){return K8(t)||q8(t)||W8(t)||z8()}function z8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W8(t,s){if(t){if(typeof t=="string")return _g(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _g(t,s)}}function _g(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function q8(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function K8(t){if(Array.isArray(t))return t}function H8(){var t={},s=function(){return null},a=!1,r=function n(i){if(!a){if(Array.isArray(i)){if(!i.length)return;var l=i,c=U8(l),o=c[0],d=c.slice(1);if(typeof o=="number"){Cg(n.bind(null,d),o);return}n(o),Cg(n.bind(null,d));return}nm(i)==="object"&&(t=i,s(t)),typeof i=="function"&&i()}};return{stop:function(){a=!0},start:function(i){a=!1,r(i)},subscribe:function(i){return s=i,function(){s=function(){return null}}}}}function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},el(t)}function Pg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Tg(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Pg(Object(a),!0).forEach(function(r){Eb(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Pg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Eb(t,s,a){return s=V8(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function V8(t){var s=G8(t,"string");return el(s)==="symbol"?s:String(s)}function G8(t,s){if(el(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(el(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Z8=function(s,a){return[Object.keys(s),Object.keys(a)].reduce(function(r,n){return r.filter(function(i){return n.includes(i)})})},Y8=function(s){return s},X8=function(s){return s.replace(/([A-Z])/g,function(a){return"-".concat(a.toLowerCase())})},Si=function(s,a){return Object.keys(a).reduce(function(r,n){return Tg(Tg({},r),{},Eb({},n,s(n,a[n])))},{})},Og=function(s,a,r){return s.map(function(n){return"".concat(X8(n)," ").concat(a,"ms ").concat(r)}).join(",")};function J8(t,s){return tU(t)||eU(t,s)||Ib(t,s)||Q8()}function Q8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eU(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function tU(t){if(Array.isArray(t))return t}function sU(t){return nU(t)||rU(t)||Ib(t)||aU()}function aU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ib(t,s){if(t){if(typeof t=="string")return im(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return im(t,s)}}function rU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nU(t){if(Array.isArray(t))return im(t)}function im(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}var Rc=1e-4,Db=function(s,a){return[0,3*s,3*a-6*s,3*s-3*a+1]},Mb=function(s,a){return s.map(function(r,n){return r*Math.pow(a,n)}).reduce(function(r,n){return r+n})},Eg=function(s,a){return function(r){var n=Db(s,a);return Mb(n,r)}},iU=function(s,a){return function(r){var n=Db(s,a),i=[].concat(sU(n.map(function(l,c){return l*c}).slice(1)),[0]);return Mb(i,r)}},Ig=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var n=a[0],i=a[1],l=a[2],c=a[3];if(a.length===1)switch(a[0]){case"linear":n=0,i=0,l=1,c=1;break;case"ease":n=.25,i=.1,l=.25,c=1;break;case"ease-in":n=.42,i=0,l=1,c=1;break;case"ease-out":n=.42,i=0,l=.58,c=1;break;case"ease-in-out":n=0,i=0,l=.58,c=1;break;default:{var o=a[0].split("(");if(o[0]==="cubic-bezier"&&o[1].split(")")[0].split(",").length===4){var d=o[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=J8(d,4);n=u[0],i=u[1],l=u[2],c=u[3]}}}var m=Eg(n,l),h=Eg(i,c),x=iU(n,l),f=function(w){return w>1?1:w<0?0:w},p=function(w){for(var S=w>1?1:w,b=S,A=0;A<8;++A){var v=m(b)-S,j=x(b);if(Math.abs(v-S)<Rc||j<Rc)return h(b);b=f(b-v/j)}return h(b)};return p.isStepper=!1,p},lU=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=s.stiff,r=a===void 0?100:a,n=s.damping,i=n===void 0?8:n,l=s.dt,c=l===void 0?17:l,o=function(u,m,h){var x=-(u-m)*r,f=h*i,p=h+(x-f)*c/1e3,g=h*c/1e3+u;return Math.abs(g-m)<Rc&&Math.abs(p)<Rc?[m,0]:[g,p]};return o.isStepper=!0,o.dt=c,o},cU=function(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];var n=a[0];if(typeof n=="string")switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Ig(n);case"spring":return lU();default:if(n.split("(")[0]==="cubic-bezier")return Ig(n)}return typeof n=="function"?n:null};function tl(t){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tl(t)}function Dg(t){return uU(t)||dU(t)||$b(t)||oU()}function oU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uU(t){if(Array.isArray(t))return cm(t)}function Mg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Yt(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Mg(Object(a),!0).forEach(function(r){lm(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function lm(t,s,a){return s=mU(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function mU(t){var s=hU(t,"string");return tl(s)==="symbol"?s:String(s)}function hU(t,s){if(tl(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(tl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function xU(t,s){return gU(t)||pU(t,s)||$b(t,s)||fU()}function fU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $b(t,s){if(t){if(typeof t=="string")return cm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return cm(t,s)}}function cm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function pU(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function gU(t){if(Array.isArray(t))return t}var Lc=function(s,a,r){return s+(a-s)*r},om=function(s){var a=s.from,r=s.to;return a!==r},vU=function t(s,a,r){var n=Si(function(i,l){if(om(l)){var c=s(l.from,l.to,l.velocity),o=xU(c,2),d=o[0],u=o[1];return Yt(Yt({},l),{},{from:d,velocity:u})}return l},a);return r<1?Si(function(i,l){return om(l)?Yt(Yt({},l),{},{velocity:Lc(l.velocity,n[i].velocity,r),from:Lc(l.from,n[i].from,r)}):l},a):t(s,n,r-1)};const jU=function(t,s,a,r,n){var i=Z8(t,s),l=i.reduce(function(g,w){return Yt(Yt({},g),{},lm({},w,[t[w],s[w]]))},{}),c=i.reduce(function(g,w){return Yt(Yt({},g),{},lm({},w,{from:t[w],velocity:0,to:s[w]}))},{}),o=-1,d,u,m=function(){return null},h=function(){return Si(function(w,S){return S.from},c)},x=function(){return!Object.values(c).filter(om).length},f=function(w){d||(d=w);var S=w-d,b=S/a.dt;c=vU(a,c,b),n(Yt(Yt(Yt({},t),s),h())),d=w,x()||(o=requestAnimationFrame(m))},p=function(w){u||(u=w);var S=(w-u)/r,b=Si(function(v,j){return Lc.apply(void 0,Dg(j).concat([a(S)]))},l);if(n(Yt(Yt(Yt({},t),s),b)),S<1)o=requestAnimationFrame(m);else{var A=Si(function(v,j){return Lc.apply(void 0,Dg(j).concat([a(1)]))},l);n(Yt(Yt(Yt({},t),s),A))}};return m=a.isStepper?f:p,function(){return requestAnimationFrame(m),function(){cancelAnimationFrame(o)}}};function kn(t){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},kn(t)}var yU=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function bU(t,s){if(t==null)return{};var a=NU(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function NU(t,s){if(t==null)return{};var a={},r=Object.keys(t),n,i;for(i=0;i<r.length;i++)n=r[i],!(s.indexOf(n)>=0)&&(a[n]=t[n]);return a}function Ud(t){return AU(t)||kU(t)||SU(t)||wU()}function wU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SU(t,s){if(t){if(typeof t=="string")return dm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return dm(t,s)}}function kU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function AU(t){if(Array.isArray(t))return dm(t)}function dm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function $g(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Bs(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?$g(Object(a),!0).forEach(function(r){vi(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$g(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function vi(t,s,a){return s=Rb(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function CU(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Rg(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Rb(r.key),r)}}function _U(t,s,a){return s&&Rg(t.prototype,s),a&&Rg(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Rb(t){var s=PU(t,"string");return kn(s)==="symbol"?s:String(s)}function PU(t,s){if(kn(t)!=="object"||t===null)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(kn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function TU(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&um(t,s)}function um(t,s){return um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},um(t,s)}function OU(t){var s=EU();return function(){var r=Fc(t),n;if(s){var i=Fc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mm(this,n)}}function mm(t,s){if(s&&(kn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hm(t)}function hm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EU(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fc(t){return Fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Fc(t)}var Qo=function(t){TU(a,t);var s=OU(a);function a(r,n){var i;CU(this,a),i=s.call(this,r,n);var l=i.props,c=l.isActive,o=l.attributeName,d=l.from,u=l.to,m=l.steps,h=l.children,x=l.duration;if(i.handleStyleChange=i.handleStyleChange.bind(hm(i)),i.changeStyle=i.changeStyle.bind(hm(i)),!c||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),mm(i);if(m&&m.length)i.state={style:m[0].style};else if(d){if(typeof h=="function")return i.state={style:d},mm(i);i.state={style:o?vi({},o,d):d}}else i.state={style:{}};return i}return _U(a,[{key:"componentDidMount",value:function(){var n=this.props,i=n.isActive,l=n.canBegin;this.mounted=!0,!(!i||!l)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(n){var i=this.props,l=i.isActive,c=i.canBegin,o=i.attributeName,d=i.shouldReAnimate,u=i.to,m=i.from,h=this.state.style;if(c){if(!l){var x={style:o?vi({},o,u):u};this.state&&h&&(o&&h[o]!==u||!o&&h!==u)&&this.setState(x);return}if(!(F8(n.to,u)&&n.canBegin&&n.isActive)){var f=!n.canBegin||!n.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=f||d?m:n.to;if(this.state&&h){var g={style:o?vi({},o,p):p};(o&&h[o]!==p||!o&&h!==p)&&this.setState(g)}this.runAnimation(Bs(Bs({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var n=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),n&&n()}},{key:"handleStyleChange",value:function(n){this.changeStyle(n)}},{key:"changeStyle",value:function(n){this.mounted&&this.setState({style:n})}},{key:"runJSAnimation",value:function(n){var i=this,l=n.from,c=n.to,o=n.duration,d=n.easing,u=n.begin,m=n.onAnimationEnd,h=n.onAnimationStart,x=jU(l,c,cU(d),o,this.changeStyle),f=function(){i.stopJSAnimation=x()};this.manager.start([h,u,f,o,m])}},{key:"runStepAnimation",value:function(n){var i=this,l=n.steps,c=n.begin,o=n.onAnimationStart,d=l[0],u=d.style,m=d.duration,h=m===void 0?0:m,x=function(p,g,w){if(w===0)return p;var S=g.duration,b=g.easing,A=b===void 0?"ease":b,v=g.style,j=g.properties,N=g.onAnimationEnd,O=w>0?l[w-1]:g,C=j||Object.keys(v);if(typeof A=="function"||A==="spring")return[].concat(Ud(p),[i.runJSAnimation.bind(i,{from:O.style,to:v,duration:S,easing:A}),S]);var D=Og(C,S,A),E=Bs(Bs(Bs({},O.style),v),{},{transition:D});return[].concat(Ud(p),[E,S,N]).filter(Y8)};return this.manager.start([o].concat(Ud(l.reduce(x,[u,Math.max(h,c)])),[n.onAnimationEnd]))}},{key:"runAnimation",value:function(n){this.manager||(this.manager=H8());var i=n.begin,l=n.duration,c=n.attributeName,o=n.to,d=n.easing,u=n.onAnimationStart,m=n.onAnimationEnd,h=n.steps,x=n.children,f=this.manager;if(this.unSubscribe=f.subscribe(this.handleStyleChange),typeof d=="function"||typeof x=="function"||d==="spring"){this.runJSAnimation(n);return}if(h.length>1){this.runStepAnimation(n);return}var p=c?vi({},c,o):o,g=Og(Object.keys(p),l,d);f.start([u,i,Bs(Bs({},p),{},{transition:g}),l,m])}},{key:"render",value:function(){var n=this.props,i=n.children;n.begin;var l=n.duration;n.attributeName,n.easing;var c=n.isActive;n.steps,n.from,n.to,n.canBegin,n.onAnimationEnd,n.shouldReAnimate,n.onAnimationReStart;var o=bU(n,yU),d=y.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!c||d===0||l<=0)return i;var m=function(x){var f=x.props,p=f.style,g=p===void 0?{}:p,w=f.className,S=y.cloneElement(x,Bs(Bs({},o),{},{style:Bs(Bs({},g),u),className:w}));return S};return d===1?m(y.Children.only(i)):$.createElement("div",null,y.Children.map(i,function(h){return m(h)}))}}]),a}(y.PureComponent);Qo.displayName="Animate";Qo.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Qo.propTypes={from:lt.oneOfType([lt.object,lt.string]),to:lt.oneOfType([lt.object,lt.string]),attributeName:lt.string,duration:lt.number,begin:lt.number,easing:lt.oneOfType([lt.string,lt.func]),steps:lt.arrayOf(lt.shape({duration:lt.number.isRequired,style:lt.object.isRequired,easing:lt.oneOfType([lt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),lt.func]),properties:lt.arrayOf("string"),onAnimationEnd:lt.func})),children:lt.oneOfType([lt.node,lt.func]),isActive:lt.bool,canBegin:lt.bool,onAnimationEnd:lt.func,shouldReAnimate:lt.bool,onAnimationStart:lt.func,onAnimationReStart:lt.func};const Qa=Qo;function sl(t){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sl(t)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Bc.apply(this,arguments)}function IU(t,s){return RU(t)||$U(t,s)||MU(t,s)||DU()}function DU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MU(t,s){if(t){if(typeof t=="string")return Lg(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lg(t,s)}}function Lg(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function $U(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function RU(t){if(Array.isArray(t))return t}function Fg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Bg(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Fg(Object(a),!0).forEach(function(r){LU(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function LU(t,s,a){return s=FU(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function FU(t){var s=BU(t,"string");return sl(s)=="symbol"?s:s+""}function BU(t,s){if(sl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Ug=function(s,a,r,n,i){var l=Math.min(Math.abs(r)/2,Math.abs(n)/2),c=n>=0?1:-1,o=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,u;if(l>0&&i instanceof Array){for(var m=[0,0,0,0],h=0,x=4;h<x;h++)m[h]=i[h]>l?l:i[h];u="M".concat(s,",").concat(a+c*m[0]),m[0]>0&&(u+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(d,",").concat(s+o*m[0],",").concat(a)),u+="L ".concat(s+r-o*m[1],",").concat(a),m[1]>0&&(u+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(d,`,
        `).concat(s+r,",").concat(a+c*m[1])),u+="L ".concat(s+r,",").concat(a+n-c*m[2]),m[2]>0&&(u+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(d,`,
        `).concat(s+r-o*m[2],",").concat(a+n)),u+="L ".concat(s+o*m[3],",").concat(a+n),m[3]>0&&(u+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(d,`,
        `).concat(s,",").concat(a+n-c*m[3])),u+="Z"}else if(l>0&&i===+i&&i>0){var f=Math.min(l,i);u="M ".concat(s,",").concat(a+c*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s+o*f,",").concat(a,`
            L `).concat(s+r-o*f,",").concat(a,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s+r,",").concat(a+c*f,`
            L `).concat(s+r,",").concat(a+n-c*f,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s+r-o*f,",").concat(a+n,`
            L `).concat(s+o*f,",").concat(a+n,`
            A `).concat(f,",").concat(f,",0,0,").concat(d,",").concat(s,",").concat(a+n-c*f," Z")}else u="M ".concat(s,",").concat(a," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},UU=function(s,a){if(!s||!a)return!1;var r=s.x,n=s.y,i=a.x,l=a.y,c=a.width,o=a.height;if(Math.abs(c)>0&&Math.abs(o)>0){var d=Math.min(i,i+c),u=Math.max(i,i+c),m=Math.min(l,l+o),h=Math.max(l,l+o);return r>=d&&r<=u&&n>=m&&n<=h}return!1},zU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Qh=function(s){var a=Bg(Bg({},zU),s),r=y.useRef(),n=y.useState(-1),i=IU(n,2),l=i[0],c=i[1];y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&c(A)}catch{}},[]);var o=a.x,d=a.y,u=a.width,m=a.height,h=a.radius,x=a.className,f=a.animationEasing,p=a.animationDuration,g=a.animationBegin,w=a.isAnimationActive,S=a.isUpdateAnimationActive;if(o!==+o||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var b=We("recharts-rectangle",x);return S?$.createElement(Qa,{canBegin:l>0,from:{width:u,height:m,x:o,y:d},to:{width:u,height:m,x:o,y:d},duration:p,animationEasing:f,isActive:S},function(A){var v=A.width,j=A.height,N=A.x,O=A.y;return $.createElement(Qa,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:w,easing:f},$.createElement("path",Bc({},Ce(a,!0),{className:b,d:Ug(N,O,v,j,h),ref:r})))}):$.createElement("path",Bc({},Ce(a,!0),{className:b,d:Ug(o,d,u,m,h)}))},WU=["points","className","baseLinePoints","connectNulls"];function Jr(){return Jr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Jr.apply(this,arguments)}function qU(t,s){if(t==null)return{};var a=KU(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function KU(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function zg(t){return ZU(t)||GU(t)||VU(t)||HU()}function HU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VU(t,s){if(t){if(typeof t=="string")return xm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xm(t,s)}}function GU(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZU(t){if(Array.isArray(t))return xm(t)}function xm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}var Wg=function(s){return s&&s.x===+s.x&&s.y===+s.y},YU=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return s.forEach(function(r){Wg(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),Wg(s[0])&&a[a.length-1].push(s[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},ki=function(s,a){var r=YU(s);a&&(r=[r.reduce(function(i,l){return[].concat(zg(i),zg(l))},[])]);var n=r.map(function(i){return i.reduce(function(l,c,o){return"".concat(l).concat(o===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(n,"Z"):n},XU=function(s,a,r){var n=ki(s,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(ki(a.reverse(),r).slice(1))},JU=function(s){var a=s.points,r=s.className,n=s.baseLinePoints,i=s.connectNulls,l=qU(s,WU);if(!a||!a.length)return null;var c=We("recharts-polygon",r);if(n&&n.length){var o=l.stroke&&l.stroke!=="none",d=XU(a,n,i);return $.createElement("g",{className:c},$.createElement("path",Jr({},Ce(l,!0),{fill:d.slice(-1)==="Z"?l.fill:"none",stroke:"none",d})),o?$.createElement("path",Jr({},Ce(l,!0),{fill:"none",d:ki(a,i)})):null,o?$.createElement("path",Jr({},Ce(l,!0),{fill:"none",d:ki(n,i)})):null)}var u=ki(a,i);return $.createElement("path",Jr({},Ce(l,!0),{fill:u.slice(-1)==="Z"?l.fill:"none",className:c,d:u}))};function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fm.apply(this,arguments)}var Al=function(s){var a=s.cx,r=s.cy,n=s.r,i=s.className,l=We("recharts-dot",i);return a===+a&&r===+r&&n===+n?y.createElement("circle",fm({},Ce(s,!1),ic(s),{className:l,cx:a,cy:r,r:n})):null};function al(t){"@babel/helpers - typeof";return al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},al(t)}var QU=["x","y","top","left","width","height","className"];function pm(){return pm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},pm.apply(this,arguments)}function qg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function ez(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?qg(Object(a),!0).forEach(function(r){tz(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function tz(t,s,a){return s=sz(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function sz(t){var s=az(t,"string");return al(s)=="symbol"?s:s+""}function az(t,s){if(al(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(al(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function rz(t,s){if(t==null)return{};var a=nz(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nz(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}var iz=function(s,a,r,n,i,l){return"M".concat(s,",").concat(i,"v").concat(n,"M").concat(l,",").concat(a,"h").concat(r)},lz=function(s){var a=s.x,r=a===void 0?0:a,n=s.y,i=n===void 0?0:n,l=s.top,c=l===void 0?0:l,o=s.left,d=o===void 0?0:o,u=s.width,m=u===void 0?0:u,h=s.height,x=h===void 0?0:h,f=s.className,p=rz(s,QU),g=ez({x:r,y:i,top:c,left:d,width:m,height:x},p);return!xe(r)||!xe(i)||!xe(m)||!xe(x)||!xe(c)||!xe(d)?null:$.createElement("path",pm({},Ce(g,!0),{className:We("recharts-cross",f),d:iz(r,i,m,x,c,d)}))},cz=Zo,oz=Zy,dz=fa;function uz(t,s){return t&&t.length?cz(t,dz(s),oz):void 0}var mz=uz;const hz=ht(mz);var xz=Zo,fz=fa,pz=Yy;function gz(t,s){return t&&t.length?xz(t,fz(s),pz):void 0}var vz=gz;const jz=ht(vz);var yz=["cx","cy","angle","ticks","axisLine"],bz=["ticks","tick","angle","tickFormatter","stroke"];function An(t){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},An(t)}function Ai(){return Ai=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ai.apply(this,arguments)}function Kg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function cr(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Kg(Object(a),!0).forEach(function(r){ed(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Kg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Hg(t,s){if(t==null)return{};var a=Nz(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Nz(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function wz(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Vg(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fb(r.key),r)}}function Sz(t,s,a){return s&&Vg(t.prototype,s),a&&Vg(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function kz(t,s,a){return s=Uc(s),Az(t,Lb()?Reflect.construct(s,a||[],Uc(t).constructor):s.apply(t,a))}function Az(t,s){if(s&&(An(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cz(t)}function Cz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lb=function(){return!!t})()}function Uc(t){return Uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Uc(t)}function _z(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&gm(t,s)}function gm(t,s){return gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},gm(t,s)}function ed(t,s,a){return s=Fb(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Fb(t){var s=Pz(t,"string");return An(s)=="symbol"?s:s+""}function Pz(t,s){if(An(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(An(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var td=function(t){function s(){return wz(this,s),kz(this,s,arguments)}return _z(s,t),Sz(s,[{key:"getTickValueCoord",value:function(r){var n=r.coordinate,i=this.props,l=i.angle,c=i.cx,o=i.cy;return yt(c,o,n,l)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,n;switch(r){case"left":n="end";break;case"right":n="start";break;default:n="middle";break}return n}},{key:"getViewBox",value:function(){var r=this.props,n=r.cx,i=r.cy,l=r.angle,c=r.ticks,o=hz(c,function(u){return u.coordinate||0}),d=jz(c,function(u){return u.coordinate||0});return{cx:n,cy:i,startAngle:l,endAngle:l,innerRadius:d.coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.cx,i=r.cy,l=r.angle,c=r.ticks,o=r.axisLine,d=Hg(r,yz),u=c.reduce(function(f,p){return[Math.min(f[0],p.coordinate),Math.max(f[1],p.coordinate)]},[1/0,-1/0]),m=yt(n,i,u[0],l),h=yt(n,i,u[1],l),x=cr(cr(cr({},Ce(d,!1)),{},{fill:"none"},Ce(o,!1)),{},{x1:m.x,y1:m.y,x2:h.x,y2:h.y});return $.createElement("line",Ai({className:"recharts-polar-radius-axis-line"},x))}},{key:"renderTicks",value:function(){var r=this,n=this.props,i=n.ticks,l=n.tick,c=n.angle,o=n.tickFormatter,d=n.stroke,u=Hg(n,bz),m=this.getTickTextAnchor(),h=Ce(u,!1),x=Ce(l,!1),f=i.map(function(p,g){var w=r.getTickValueCoord(p),S=cr(cr(cr(cr({textAnchor:m,transform:"rotate(".concat(90-c,", ").concat(w.x,", ").concat(w.y,")")},h),{},{stroke:"none",fill:d},x),{},{index:g},w),{},{payload:p});return $.createElement(Ze,Ai({className:We("recharts-polar-radius-axis-tick",Sb(l)),key:"tick-".concat(p.coordinate)},Ir(r.props,p,g)),s.renderTickItem(l,S,o?o(p.value,g):p.value))});return $.createElement(Ze,{className:"recharts-polar-radius-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,n=r.ticks,i=r.axisLine,l=r.tick;return!n||!n.length?null:$.createElement(Ze,{className:We("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),l&&this.renderTicks(),Kt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,n,i){var l;return $.isValidElement(r)?l=$.cloneElement(r,n):De(r)?l=r(n):l=$.createElement(Dr,Ai({},n,{className:"recharts-polar-radius-axis-tick-value"}),i),l}}])}(y.PureComponent);ed(td,"displayName","PolarRadiusAxis");ed(td,"axisType","radiusAxis");ed(td,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Cn(t){"@babel/helpers - typeof";return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Cn(t)}function fr(){return fr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fr.apply(this,arguments)}function Gg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function or(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Gg(Object(a),!0).forEach(function(r){sd(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Gg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Tz(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Zg(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ub(r.key),r)}}function Oz(t,s,a){return s&&Zg(t.prototype,s),a&&Zg(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ez(t,s,a){return s=zc(s),Iz(t,Bb()?Reflect.construct(s,a||[],zc(t).constructor):s.apply(t,a))}function Iz(t,s){if(s&&(Cn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dz(t)}function Dz(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bb=function(){return!!t})()}function zc(t){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},zc(t)}function Mz(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&vm(t,s)}function vm(t,s){return vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},vm(t,s)}function sd(t,s,a){return s=Ub(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Ub(t){var s=$z(t,"string");return Cn(s)=="symbol"?s:s+""}function $z(t,s){if(Cn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Cn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Rz=Math.PI/180,Yg=1e-5,ad=function(t){function s(){return Tz(this,s),Ez(this,s,arguments)}return Mz(s,t),Oz(s,[{key:"getTickLineCoord",value:function(r){var n=this.props,i=n.cx,l=n.cy,c=n.radius,o=n.orientation,d=n.tickSize,u=d||8,m=yt(i,l,c,r.coordinate),h=yt(i,l,c+(o==="inner"?-1:1)*u,r.coordinate);return{x1:m.x,y1:m.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var n=this.props.orientation,i=Math.cos(-r.coordinate*Rz),l;return i>Yg?l=n==="outer"?"start":"end":i<-Yg?l=n==="outer"?"end":"start":l="middle",l}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.cx,i=r.cy,l=r.radius,c=r.axisLine,o=r.axisLineType,d=or(or({},Ce(this.props,!1)),{},{fill:"none"},Ce(c,!1));if(o==="circle")return $.createElement(Al,fr({className:"recharts-polar-angle-axis-line"},d,{cx:n,cy:i,r:l}));var u=this.props.ticks,m=u.map(function(h){return yt(n,i,l,h.coordinate)});return $.createElement(JU,fr({className:"recharts-polar-angle-axis-line"},d,{points:m}))}},{key:"renderTicks",value:function(){var r=this,n=this.props,i=n.ticks,l=n.tick,c=n.tickLine,o=n.tickFormatter,d=n.stroke,u=Ce(this.props,!1),m=Ce(l,!1),h=or(or({},u),{},{fill:"none"},Ce(c,!1)),x=i.map(function(f,p){var g=r.getTickLineCoord(f),w=r.getTickTextAnchor(f),S=or(or(or({textAnchor:w},u),{},{stroke:"none",fill:d},m),{},{index:p,payload:f,x:g.x2,y:g.y2});return $.createElement(Ze,fr({className:We("recharts-polar-angle-axis-tick",Sb(l)),key:"tick-".concat(f.coordinate)},Ir(r.props,f,p)),c&&$.createElement("line",fr({className:"recharts-polar-angle-axis-tick-line"},h,g)),l&&s.renderTickItem(l,S,o?o(f.value,p):f.value))});return $.createElement(Ze,{className:"recharts-polar-angle-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,n=r.ticks,i=r.radius,l=r.axisLine;return i<=0||!n||!n.length?null:$.createElement(Ze,{className:We("recharts-polar-angle-axis",this.props.className)},l&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,n,i){var l;return $.isValidElement(r)?l=$.cloneElement(r,n):De(r)?l=r(n):l=$.createElement(Dr,fr({},n,{className:"recharts-polar-angle-axis-tick-value"}),i),l}}])}(y.PureComponent);sd(ad,"displayName","PolarAngleAxis");sd(ad,"axisType","angleAxis");sd(ad,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Lz=K0,Fz=Lz(Object.getPrototypeOf,Object),Bz=Fz,Uz=La,zz=Bz,Wz=Fa,qz="[object Object]",Kz=Function.prototype,Hz=Object.prototype,zb=Kz.toString,Vz=Hz.hasOwnProperty,Gz=zb.call(Object);function Zz(t){if(!Wz(t)||Uz(t)!=qz)return!1;var s=zz(t);if(s===null)return!0;var a=Vz.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&zb.call(a)==Gz}var Yz=Zz;const Xz=ht(Yz);var Jz=La,Qz=Fa,e9="[object Boolean]";function t9(t){return t===!0||t===!1||Qz(t)&&Jz(t)==e9}var s9=t9;const a9=ht(s9);function rl(t){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rl(t)}function Wc(){return Wc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Wc.apply(this,arguments)}function r9(t,s){return c9(t)||l9(t,s)||i9(t,s)||n9()}function n9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i9(t,s){if(t){if(typeof t=="string")return Xg(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xg(t,s)}}function Xg(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function l9(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function c9(t){if(Array.isArray(t))return t}function Jg(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Qg(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Jg(Object(a),!0).forEach(function(r){o9(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Jg(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function o9(t,s,a){return s=d9(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function d9(t){var s=u9(t,"string");return rl(s)=="symbol"?s:s+""}function u9(t,s){if(rl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var ev=function(s,a,r,n,i){var l=r-n,c;return c="M ".concat(s,",").concat(a),c+="L ".concat(s+r,",").concat(a),c+="L ".concat(s+r-l/2,",").concat(a+i),c+="L ".concat(s+r-l/2-n,",").concat(a+i),c+="L ".concat(s,",").concat(a," Z"),c},m9={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},h9=function(s){var a=Qg(Qg({},m9),s),r=y.useRef(),n=y.useState(-1),i=r9(n,2),l=i[0],c=i[1];y.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&c(b)}catch{}},[]);var o=a.x,d=a.y,u=a.upperWidth,m=a.lowerWidth,h=a.height,x=a.className,f=a.animationEasing,p=a.animationDuration,g=a.animationBegin,w=a.isUpdateAnimationActive;if(o!==+o||d!==+d||u!==+u||m!==+m||h!==+h||u===0&&m===0||h===0)return null;var S=We("recharts-trapezoid",x);return w?$.createElement(Qa,{canBegin:l>0,from:{upperWidth:0,lowerWidth:0,height:h,x:o,y:d},to:{upperWidth:u,lowerWidth:m,height:h,x:o,y:d},duration:p,animationEasing:f,isActive:w},function(b){var A=b.upperWidth,v=b.lowerWidth,j=b.height,N=b.x,O=b.y;return $.createElement(Qa,{canBegin:l>0,from:"0px ".concat(l===-1?1:l,"px"),to:"".concat(l,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:f},$.createElement("path",Wc({},Ce(a,!0),{className:S,d:ev(N,O,A,v,j),ref:r})))}):$.createElement("g",null,$.createElement("path",Wc({},Ce(a,!0),{className:S,d:ev(o,d,u,m,h)})))},x9=["option","shapeType","propTransformer","activeClassName","isActive"];function nl(t){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},nl(t)}function f9(t,s){if(t==null)return{};var a=p9(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function p9(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function tv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function qc(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?tv(Object(a),!0).forEach(function(r){g9(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function g9(t,s,a){return s=v9(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function v9(t){var s=j9(t,"string");return nl(s)=="symbol"?s:s+""}function j9(t,s){if(nl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(nl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function y9(t,s){return qc(qc({},s),t)}function b9(t,s){return t==="symbols"}function sv(t){var s=t.shapeType,a=t.elementProps;switch(s){case"rectangle":return $.createElement(Qh,a);case"trapezoid":return $.createElement(h9,a);case"sector":return $.createElement(Cb,a);case"symbols":if(b9(s))return $.createElement(vh,a);break;default:return null}}function N9(t){return y.isValidElement(t)?t.props:t}function Wb(t){var s=t.option,a=t.shapeType,r=t.propTransformer,n=r===void 0?y9:r,i=t.activeClassName,l=i===void 0?"recharts-active-shape":i,c=t.isActive,o=f9(t,x9),d;if(y.isValidElement(s))d=y.cloneElement(s,qc(qc({},o),N9(s)));else if(De(s))d=s(o);else if(Xz(s)&&!a9(s)){var u=n(s,o);d=$.createElement(sv,{shapeType:a,elementProps:u})}else{var m=o;d=$.createElement(sv,{shapeType:a,elementProps:m})}return c?$.createElement(Ze,{className:l},d):d}function rd(t,s){return s!=null&&"trapezoids"in t.props}function nd(t,s){return s!=null&&"sectors"in t.props}function il(t,s){return s!=null&&"points"in t.props}function w9(t,s){var a,r,n=t.x===(s==null||(a=s.labelViewBox)===null||a===void 0?void 0:a.x)||t.x===s.x,i=t.y===(s==null||(r=s.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===s.y;return n&&i}function S9(t,s){var a=t.endAngle===s.endAngle,r=t.startAngle===s.startAngle;return a&&r}function k9(t,s){var a=t.x===s.x,r=t.y===s.y,n=t.z===s.z;return a&&r&&n}function A9(t,s){var a;return rd(t,s)?a=w9:nd(t,s)?a=S9:il(t,s)&&(a=k9),a}function C9(t,s){var a;return rd(t,s)?a="trapezoids":nd(t,s)?a="sectors":il(t,s)&&(a="points"),a}function _9(t,s){if(rd(t,s)){var a;return(a=s.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}if(nd(t,s)){var r;return(r=s.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return il(t,s)?s.payload:{}}function P9(t){var s=t.activeTooltipItem,a=t.graphicalItem,r=t.itemData,n=C9(a,s),i=_9(a,s),l=r.filter(function(o,d){var u=Mr(i,o),m=a.props[n].filter(function(f){var p=A9(a,s);return p(f,s)}),h=a.props[n].indexOf(m[m.length-1]),x=d===h;return u&&x}),c=r.indexOf(l[l.length-1]);return c}var Jl;function _n(t){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_n(t)}function Qr(){return Qr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Qr.apply(this,arguments)}function av(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function pt(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?av(Object(a),!0).forEach(function(r){Es(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):av(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function T9(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function rv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kb(r.key),r)}}function O9(t,s,a){return s&&rv(t.prototype,s),a&&rv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function E9(t,s,a){return s=Kc(s),I9(t,qb()?Reflect.construct(s,a||[],Kc(t).constructor):s.apply(t,a))}function I9(t,s){if(s&&(_n(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D9(t)}function D9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qb=function(){return!!t})()}function Kc(t){return Kc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Kc(t)}function M9(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&jm(t,s)}function jm(t,s){return jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},jm(t,s)}function Es(t,s,a){return s=Kb(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Kb(t){var s=$9(t,"string");return _n(s)=="symbol"?s:s+""}function $9(t,s){if(_n(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(_n(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var pa=function(t){function s(a){var r;return T9(this,s),r=E9(this,s,[a]),Es(r,"pieRef",null),Es(r,"sectorRefs",[]),Es(r,"id",Br("recharts-pie-")),Es(r,"handleAnimationEnd",function(){var n=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),De(n)&&n()}),Es(r,"handleAnimationStart",function(){var n=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),De(n)&&n()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return M9(s,t),O9(s,[{key:"isActiveIndex",value:function(r){var n=this.props.activeIndex;return Array.isArray(n)?n.indexOf(r)!==-1:r===n}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.label,c=i.labelLine,o=i.dataKey,d=i.valueKey,u=Ce(this.props,!1),m=Ce(l,!1),h=Ce(c,!1),x=l&&l.offsetRadius||20,f=r.map(function(p,g){var w=(p.startAngle+p.endAngle)/2,S=yt(p.cx,p.cy,p.outerRadius+x,w),b=pt(pt(pt(pt({},u),p),{},{stroke:"none"},m),{},{index:g,textAnchor:s.getTextAnchor(S.x,p.cx)},S),A=pt(pt(pt(pt({},u),p),{},{fill:"none",stroke:p.fill},h),{},{index:g,points:[yt(p.cx,p.cy,p.outerRadius,w),S]}),v=o;return Fe(o)&&Fe(d)?v="value":Fe(o)&&(v=d),$.createElement(Ze,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},c&&s.renderLabelLineItem(c,A,"line"),s.renderLabelItem(l,b,Dt(p,v)))});return $.createElement(Ze,{className:"recharts-pie-labels"},f)}},{key:"renderSectorsStatically",value:function(r){var n=this,i=this.props,l=i.activeShape,c=i.blendStroke,o=i.inactiveShape;return r.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var m=n.isActiveIndex(u),h=o&&n.hasActiveIndex()?o:null,x=m?l:h,f=pt(pt({},d),{},{stroke:c?d.fill:d.stroke,tabIndex:-1});return $.createElement(Ze,Qr({ref:function(g){g&&!n.sectorRefs.includes(g)&&n.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Ir(n.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),$.createElement(Wb,Qr({option:x,isActive:m,shapeType:"sector"},f)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,n=this.props,i=n.sectors,l=n.isAnimationActive,c=n.animationBegin,o=n.animationDuration,d=n.animationEasing,u=n.animationId,m=this.state,h=m.prevSectors,x=m.prevIsAnimationActive;return $.createElement(Qa,{begin:c,duration:o,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(x),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(f){var p=f.t,g=[],w=i&&i[0],S=w.startAngle;return i.forEach(function(b,A){var v=h&&h[A],j=A>0?ks(b,"paddingAngle",0):0;if(v){var N=Ut(v.endAngle-v.startAngle,b.endAngle-b.startAngle),O=pt(pt({},b),{},{startAngle:S+j,endAngle:S+N(p)+j});g.push(O),S=O.endAngle}else{var C=b.endAngle,D=b.startAngle,E=Ut(0,C-D),P=E(p),R=pt(pt({},b),{},{startAngle:S+j,endAngle:S+P+j});g.push(R),S=R.endAngle}}),$.createElement(Ze,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var n=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var l=++n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[l].focus(),n.setState({sectorToFocus:l});break}case"ArrowRight":{var c=--n.state.sectorToFocus<0?n.sectorRefs.length-1:n.state.sectorToFocus%n.sectorRefs.length;n.sectorRefs[c].focus(),n.setState({sectorToFocus:c});break}case"Escape":{n.sectorRefs[n.state.sectorToFocus].blur(),n.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,n=r.sectors,i=r.isAnimationActive,l=this.state.prevSectors;return i&&n&&n.length&&(!l||!Mr(l,n))?this.renderSectorsWithAnimation():this.renderSectorsStatically(n)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,n=this.props,i=n.hide,l=n.sectors,c=n.className,o=n.label,d=n.cx,u=n.cy,m=n.innerRadius,h=n.outerRadius,x=n.isAnimationActive,f=this.state.isAnimationFinished;if(i||!l||!l.length||!xe(d)||!xe(u)||!xe(m)||!xe(h))return null;var p=We("recharts-pie",c);return $.createElement(Ze,{tabIndex:this.props.rootTabIndex,className:p,ref:function(w){r.pieRef=w}},this.renderSectors(),o&&this.renderLabels(l),Kt.renderCallByParent(this.props,null,!1),(!x||f)&&na.renderCallByParent(this.props,l,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return n.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:n.curSectors,isAnimationFinished:!0}:r.sectors!==n.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,n){return r>n?"start":r<n?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,n,i){if($.isValidElement(r))return $.cloneElement(r,n);if(De(r))return r(n);var l=We("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return $.createElement(Cr,Qr({},n,{key:i,type:"linear",className:l}))}},{key:"renderLabelItem",value:function(r,n,i){if($.isValidElement(r))return $.cloneElement(r,n);var l=i;if(De(r)&&(l=r(n),$.isValidElement(l)))return l;var c=We("recharts-pie-label-text",typeof r!="boolean"&&!De(r)?r.className:"");return $.createElement(Dr,Qr({},n,{alignmentBaseline:"middle",className:c}),l)}}])}(y.PureComponent);Jl=pa;Es(pa,"displayName","Pie");Es(pa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Gs.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Es(pa,"parseDeltaAngle",function(t,s){var a=ms(s-t),r=Math.min(Math.abs(s-t),360);return a*r});Es(pa,"getRealPieData",function(t){var s=t.data,a=t.children,r=Ce(t,!1),n=As(a,yl);return s&&s.length?s.map(function(i,l){return pt(pt(pt({payload:i},r),i),n&&n[l]&&n[l].props)}):n&&n.length?n.map(function(i){return pt(pt({},r),i.props)}):[]});Es(pa,"parseCoordinateOfPie",function(t,s){var a=s.top,r=s.left,n=s.width,i=s.height,l=wb(n,i),c=r+hs(t.cx,n,n/2),o=a+hs(t.cy,i,i/2),d=hs(t.innerRadius,l,0),u=hs(t.outerRadius,l,l*.8),m=t.maxRadius||Math.sqrt(n*n+i*i)/2;return{cx:c,cy:o,innerRadius:d,outerRadius:u,maxRadius:m}});Es(pa,"getComposedData",function(t){var s=t.item,a=t.offset,r=s.type.defaultProps!==void 0?pt(pt({},s.type.defaultProps),s.props):s.props,n=Jl.getRealPieData(r);if(!n||!n.length)return null;var i=r.cornerRadius,l=r.startAngle,c=r.endAngle,o=r.paddingAngle,d=r.dataKey,u=r.nameKey,m=r.valueKey,h=r.tooltipType,x=Math.abs(r.minAngle),f=Jl.parseCoordinateOfPie(r,a),p=Jl.parseDeltaAngle(l,c),g=Math.abs(p),w=d;Fe(d)&&Fe(m)?(Vs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):Fe(d)&&(Vs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=m);var S=n.filter(function(O){return Dt(O,w,0)!==0}).length,b=(g>=360?S:S-1)*o,A=g-S*x-b,v=n.reduce(function(O,C){var D=Dt(C,w,0);return O+(xe(D)?D:0)},0),j;if(v>0){var N;j=n.map(function(O,C){var D=Dt(O,w,0),E=Dt(O,u,C),P=(xe(D)?D:0)/v,R;C?R=N.endAngle+ms(p)*o*(D!==0?1:0):R=l;var U=R+ms(p)*((D!==0?x:0)+P*A),I=(R+U)/2,L=(f.innerRadius+f.outerRadius)/2,Z=[{name:E,value:D,payload:O,dataKey:w,type:h}],q=yt(f.cx,f.cy,L,I);return N=pt(pt(pt({percent:P,cornerRadius:i,name:E,tooltipPayload:Z,midAngle:I,middleRadius:L,tooltipPosition:q},O),f),{},{value:Dt(O,w),startAngle:R,endAngle:U,payload:O,paddingAngle:ms(p)*o}),N})}return pt(pt({},f),{},{sectors:j,data:n})});var R9=Math.ceil,L9=Math.max;function F9(t,s,a,r){for(var n=-1,i=L9(R9((s-t)/(a||1)),0),l=Array(i);i--;)l[r?i:++n]=t,t+=a;return l}var B9=F9,U9=dy,nv=1/0,z9=17976931348623157e292;function W9(t){if(!t)return t===0?t:0;if(t=U9(t),t===nv||t===-nv){var s=t<0?-1:1;return s*z9}return t===t?t:0}var Hb=W9,q9=B9,K9=zo,zd=Hb;function H9(t){return function(s,a,r){return r&&typeof r!="number"&&K9(s,a,r)&&(a=r=void 0),s=zd(s),a===void 0?(a=s,s=0):a=zd(a),r=r===void 0?s<a?1:-1:zd(r),q9(s,a,r,t)}}var V9=H9,G9=V9,Z9=G9(),Y9=Z9;const Hc=ht(Y9);function ll(t){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ll(t)}function iv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function lv(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?iv(Object(a),!0).forEach(function(r){Vb(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):iv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Vb(t,s,a){return s=X9(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function X9(t){var s=J9(t,"string");return ll(s)=="symbol"?s:s+""}function J9(t,s){if(ll(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Q9=["Webkit","Moz","O","ms"],e7=function(s,a){if(!s)return null;var r=s.replace(/(\w)/,function(i){return i.toUpperCase()}),n=Q9.reduce(function(i,l){return lv(lv({},i),{},Vb({},l+r,a))},{});return n[s]=a,n};function Pn(t){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Pn(t)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Vc.apply(this,arguments)}function cv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Wd(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?cv(Object(a),!0).forEach(function(r){ys(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):cv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function t7(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ov(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zb(r.key),r)}}function s7(t,s,a){return s&&ov(t.prototype,s),a&&ov(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function a7(t,s,a){return s=Gc(s),r7(t,Gb()?Reflect.construct(s,a||[],Gc(t).constructor):s.apply(t,a))}function r7(t,s){if(s&&(Pn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n7(t)}function n7(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gb=function(){return!!t})()}function Gc(t){return Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Gc(t)}function i7(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&ym(t,s)}function ym(t,s){return ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ym(t,s)}function ys(t,s,a){return s=Zb(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Zb(t){var s=l7(t,"string");return Pn(s)=="symbol"?s:s+""}function l7(t,s){if(Pn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Pn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var c7=function(s){var a=s.data,r=s.startIndex,n=s.endIndex,i=s.x,l=s.width,c=s.travellerWidth;if(!a||!a.length)return{};var o=a.length,d=Ni().domain(Hc(0,o)).range([i,i+l-c]),u=d.domain().map(function(m){return d(m)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(r),endX:d(n),scale:d,scaleValues:u}},dv=function(s){return s.changedTouches&&!!s.changedTouches.length},Tn=function(t){function s(a){var r;return t7(this,s),r=a7(this,s,[a]),ys(r,"handleDrag",function(n){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(n):r.state.isSlideMoving&&r.handleSlideDrag(n)}),ys(r,"handleTouchMove",function(n){n.changedTouches!=null&&n.changedTouches.length>0&&r.handleDrag(n.changedTouches[0])}),ys(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var n=r.props,i=n.endIndex,l=n.onDragEnd,c=n.startIndex;l==null||l({endIndex:i,startIndex:c})}),r.detachDragEndListener()}),ys(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ys(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ys(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ys(r,"handleSlideDragStart",function(n){var i=dv(n)?n.changedTouches[0]:n;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return i7(s,t),s7(s,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var n=r.startX,i=r.endX,l=this.state.scaleValues,c=this.props,o=c.gap,d=c.data,u=d.length-1,m=Math.min(n,i),h=Math.max(n,i),x=s.getIndexInRange(l,m),f=s.getIndexInRange(l,h);return{startIndex:x-x%o,endIndex:f===u?u:f-f%o}}},{key:"getTextOfTick",value:function(r){var n=this.props,i=n.data,l=n.tickFormatter,c=n.dataKey,o=Dt(i[r],c,r);return De(l)?l(o,r):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var n=this.state,i=n.slideMoveStartX,l=n.startX,c=n.endX,o=this.props,d=o.x,u=o.width,m=o.travellerWidth,h=o.startIndex,x=o.endIndex,f=o.onChange,p=r.pageX-i;p>0?p=Math.min(p,d+u-m-c,d+u-m-l):p<0&&(p=Math.max(p,d-l,d-c));var g=this.getIndex({startX:l+p,endX:c+p});(g.startIndex!==h||g.endIndex!==x)&&f&&f(g),this.setState({startX:l+p,endX:c+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,n){var i=dv(n)?n.changedTouches[0]:n;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var n=this.state,i=n.brushMoveStartX,l=n.movingTravellerId,c=n.endX,o=n.startX,d=this.state[l],u=this.props,m=u.x,h=u.width,x=u.travellerWidth,f=u.onChange,p=u.gap,g=u.data,w={startX:this.state.startX,endX:this.state.endX},S=r.pageX-i;S>0?S=Math.min(S,m+h-x-d):S<0&&(S=Math.max(S,m-d)),w[l]=d+S;var b=this.getIndex(w),A=b.startIndex,v=b.endIndex,j=function(){var O=g.length-1;return l==="startX"&&(c>o?A%p===0:v%p===0)||c<o&&v===O||l==="endX"&&(c>o?v%p===0:A%p===0)||c>o&&v===O};this.setState(ys(ys({},l,d+S),"brushMoveStartX",r.pageX),function(){f&&j()&&f(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,n){var i=this,l=this.state,c=l.scaleValues,o=l.startX,d=l.endX,u=this.state[n],m=c.indexOf(u);if(m!==-1){var h=m+r;if(!(h===-1||h>=c.length)){var x=c[h];n==="startX"&&x>=d||n==="endX"&&x<=o||this.setState(ys({},n,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,c=r.height,o=r.fill,d=r.stroke;return $.createElement("rect",{stroke:d,fill:o,x:n,y:i,width:l,height:c})}},{key:"renderPanorama",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,c=r.height,o=r.data,d=r.children,u=r.padding,m=y.Children.only(d);return m?$.cloneElement(m,{x:n,y:i,width:l,height:c,margin:u,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(r,n){var i,l,c=this,o=this.props,d=o.y,u=o.travellerWidth,m=o.height,h=o.traveller,x=o.ariaLabel,f=o.data,p=o.startIndex,g=o.endIndex,w=Math.max(r,this.props.x),S=Wd(Wd({},Ce(this.props,!1)),{},{x:w,y:d,width:u,height:m}),b=x||"Min value: ".concat((i=f[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((l=f[g])===null||l===void 0?void 0:l.name);return $.createElement(Ze,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(v){["ArrowLeft","ArrowRight"].includes(v.key)&&(v.preventDefault(),v.stopPropagation(),c.handleTravellerMoveKeyboard(v.key==="ArrowRight"?1:-1,n))},onFocus:function(){c.setState({isTravellerFocused:!0})},onBlur:function(){c.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},s.renderTraveller(h,S))}},{key:"renderSlide",value:function(r,n){var i=this.props,l=i.y,c=i.height,o=i.stroke,d=i.travellerWidth,u=Math.min(r,n)+d,m=Math.max(Math.abs(n-r)-d,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:u,y:l,width:m,height:c})}},{key:"renderText",value:function(){var r=this.props,n=r.startIndex,i=r.endIndex,l=r.y,c=r.height,o=r.travellerWidth,d=r.stroke,u=this.state,m=u.startX,h=u.endX,x=5,f={pointerEvents:"none",fill:d};return $.createElement(Ze,{className:"recharts-brush-texts"},$.createElement(Dr,Vc({textAnchor:"end",verticalAnchor:"middle",x:Math.min(m,h)-x,y:l+c/2},f),this.getTextOfTick(n)),$.createElement(Dr,Vc({textAnchor:"start",verticalAnchor:"middle",x:Math.max(m,h)+o+x,y:l+c/2},f),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,n=r.data,i=r.className,l=r.children,c=r.x,o=r.y,d=r.width,u=r.height,m=r.alwaysShowText,h=this.state,x=h.startX,f=h.endX,p=h.isTextActive,g=h.isSlideMoving,w=h.isTravellerMoving,S=h.isTravellerFocused;if(!n||!n.length||!xe(c)||!xe(o)||!xe(d)||!xe(u)||d<=0||u<=0)return null;var b=We("recharts-brush",i),A=$.Children.count(l)===1,v=e7("userSelect","none");return $.createElement(Ze,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:v},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(x,f),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(f,"endX"),(p||g||w||S||m)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var n=r.x,i=r.y,l=r.width,c=r.height,o=r.stroke,d=Math.floor(i+c/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:n,y:i,width:l,height:c,fill:o,stroke:"none"}),$.createElement("line",{x1:n+1,y1:d,x2:n+l-1,y2:d,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:n+1,y1:d+2,x2:n+l-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,n){var i;return $.isValidElement(r)?i=$.cloneElement(r,n):De(r)?i=r(n):i=s.renderDefaultTraveller(n),i}},{key:"getDerivedStateFromProps",value:function(r,n){var i=r.data,l=r.width,c=r.x,o=r.travellerWidth,d=r.updateId,u=r.startIndex,m=r.endIndex;if(i!==n.prevData||d!==n.prevUpdateId)return Wd({prevData:i,prevTravellerWidth:o,prevUpdateId:d,prevX:c,prevWidth:l},i&&i.length?c7({data:i,width:l,x:c,travellerWidth:o,startIndex:u,endIndex:m}):{scale:null,scaleValues:null});if(n.scale&&(l!==n.prevWidth||c!==n.prevX||o!==n.prevTravellerWidth)){n.scale.range([c,c+l-o]);var h=n.scale.domain().map(function(x){return n.scale(x)});return{prevData:i,prevTravellerWidth:o,prevUpdateId:d,prevX:c,prevWidth:l,startX:n.scale(r.startIndex),endX:n.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,n){for(var i=r.length,l=0,c=i-1;c-l>1;){var o=Math.floor((l+c)/2);r[o]>n?c=o:l=o}return n>=r[c]?c:l}}])}(y.PureComponent);ys(Tn,"displayName","Brush");ys(Tn,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var o7=kh;function d7(t,s){var a;return o7(t,function(r,n,i){return a=s(r,n,i),!a}),!!a}var u7=d7,m7=R0,h7=fa,x7=u7,f7=vs,p7=zo;function g7(t,s,a){var r=f7(t)?m7:x7;return a&&p7(t,s,a)&&(s=void 0),r(t,h7(s))}var v7=g7;const j7=ht(v7);var ia=function(s,a){var r=s.alwaysShow,n=s.ifOverflow;return r&&(n="extendDomain"),n===a},uv=ny;function y7(t,s,a){s=="__proto__"&&uv?uv(t,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[s]=a}var b7=y7,N7=b7,w7=ay,S7=fa;function k7(t,s){var a={};return s=S7(s),w7(t,function(r,n,i){N7(a,n,s(r,n,i))}),a}var A7=k7;const C7=ht(A7);function _7(t,s){for(var a=-1,r=t==null?0:t.length;++a<r;)if(!s(t[a],a,t))return!1;return!0}var P7=_7,T7=kh;function O7(t,s){var a=!0;return T7(t,function(r,n,i){return a=!!s(r,n,i),a}),a}var E7=O7,I7=P7,D7=E7,M7=fa,$7=vs,R7=zo;function L7(t,s,a){var r=$7(t)?I7:D7;return a&&R7(t,s,a)&&(s=void 0),r(t,M7(s))}var F7=L7;const Yb=ht(F7);var B7=["x","y"];function cl(t){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},cl(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},bm.apply(this,arguments)}function mv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function gi(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?mv(Object(a),!0).forEach(function(r){U7(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function U7(t,s,a){return s=z7(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function z7(t){var s=W7(t,"string");return cl(s)=="symbol"?s:s+""}function W7(t,s){if(cl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function q7(t,s){if(t==null)return{};var a=K7(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function K7(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function H7(t,s){var a=t.x,r=t.y,n=q7(t,B7),i="".concat(a),l=parseInt(i,10),c="".concat(r),o=parseInt(c,10),d="".concat(s.height||n.height),u=parseInt(d,10),m="".concat(s.width||n.width),h=parseInt(m,10);return gi(gi(gi(gi(gi({},s),n),l?{x:l}:{}),o?{y:o}:{}),{},{height:u,width:h,name:s.name,radius:s.radius})}function hv(t){return $.createElement(Wb,bm({shapeType:"rectangle",propTransformer:H7,activeClassName:"recharts-active-bar"},t))}var V7=function(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,n){if(typeof s=="number")return s;var i=xe(r)||w4(r);return i?s(r,n):(i||Rr(!1),a)}},G7=["value","background"],Xb;function On(t){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},On(t)}function Z7(t,s){if(t==null)return{};var a=Y7(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Y7(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Zc(){return Zc=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Zc.apply(this,arguments)}function xv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function $t(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?xv(Object(a),!0).forEach(function(r){Za(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function X7(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function fv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qb(r.key),r)}}function J7(t,s,a){return s&&fv(t.prototype,s),a&&fv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q7(t,s,a){return s=Yc(s),eW(t,Jb()?Reflect.construct(s,a||[],Yc(t).constructor):s.apply(t,a))}function eW(t,s){if(s&&(On(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tW(t)}function tW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jb=function(){return!!t})()}function Yc(t){return Yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Yc(t)}function sW(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Nm(t,s)}function Nm(t,s){return Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Nm(t,s)}function Za(t,s,a){return s=Qb(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Qb(t){var s=aW(t,"string");return On(s)=="symbol"?s:s+""}function aW(t,s){if(On(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(On(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var sa=function(t){function s(){var a;X7(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=Q7(this,s,[].concat(n)),Za(a,"state",{isAnimationFinished:!1}),Za(a,"id",Br("recharts-bar-")),Za(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),l&&l()}),Za(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),l&&l()}),a}return sW(s,t),J7(s,[{key:"renderRectanglesStatically",value:function(r){var n=this,i=this.props,l=i.shape,c=i.dataKey,o=i.activeIndex,d=i.activeBar,u=Ce(this.props,!1);return r&&r.map(function(m,h){var x=h===o,f=x?d:l,p=$t($t($t({},u),m),{},{isActive:x,option:f,index:h,dataKey:c,onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd});return $.createElement(Ze,Zc({className:"recharts-bar-rectangle"},Ir(n.props,m,h),{key:"rectangle-".concat(m==null?void 0:m.x,"-").concat(m==null?void 0:m.y,"-").concat(m==null?void 0:m.value,"-").concat(h)}),$.createElement(hv,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,n=this.props,i=n.data,l=n.layout,c=n.isAnimationActive,o=n.animationBegin,d=n.animationDuration,u=n.animationEasing,m=n.animationId,h=this.state.prevData;return $.createElement(Qa,{begin:o,duration:d,isActive:c,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var f=x.t,p=i.map(function(g,w){var S=h&&h[w];if(S){var b=Ut(S.x,g.x),A=Ut(S.y,g.y),v=Ut(S.width,g.width),j=Ut(S.height,g.height);return $t($t({},g),{},{x:b(f),y:A(f),width:v(f),height:j(f)})}if(l==="horizontal"){var N=Ut(0,g.height),O=N(f);return $t($t({},g),{},{y:g.y+g.height-O,height:O})}var C=Ut(0,g.width),D=C(f);return $t($t({},g),{},{width:D})});return $.createElement(Ze,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,n=r.data,i=r.isAnimationActive,l=this.state.prevData;return i&&n&&n.length&&(!l||!Mr(l,n))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(n)}},{key:"renderBackground",value:function(){var r=this,n=this.props,i=n.data,l=n.dataKey,c=n.activeIndex,o=Ce(this.props.background,!1);return i.map(function(d,u){d.value;var m=d.background,h=Z7(d,G7);if(!m)return null;var x=$t($t($t($t($t({},h),{},{fill:"#eee"},m),o),Ir(r.props,d,u)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:l,index:u,className:"recharts-bar-background-rectangle"});return $.createElement(hv,Zc({key:"background-bar-".concat(u),option:r.props.background,isActive:u===c},x))})}},{key:"renderErrorBar",value:function(r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.data,c=i.xAxis,o=i.yAxis,d=i.layout,u=i.children,m=As(u,kl);if(!m)return null;var h=d==="vertical"?l[0].height/2:l[0].width/2,x=function(g,w){var S=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:S,errorVal:Dt(g,w)}},f={clipPath:r?"url(#clipPath-".concat(n,")"):null};return $.createElement(Ze,f,m.map(function(p){return $.cloneElement(p,{key:"error-bar-".concat(n,"-").concat(p.props.dataKey),data:l,xAxis:c,yAxis:o,layout:d,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var r=this.props,n=r.hide,i=r.data,l=r.className,c=r.xAxis,o=r.yAxis,d=r.left,u=r.top,m=r.width,h=r.height,x=r.isAnimationActive,f=r.background,p=r.id;if(n||!i||!i.length)return null;var g=this.state.isAnimationFinished,w=We("recharts-bar",l),S=c&&c.allowDataOverflow,b=o&&o.allowDataOverflow,A=S||b,v=Fe(p)?this.id:p;return $.createElement(Ze,{className:w},S||b?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(v)},$.createElement("rect",{x:S?d:d-m/2,y:b?u:u-h/2,width:S?m:m*2,height:b?h:h*2}))):null,$.createElement(Ze,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(v,")"):null},f?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,v),(!x||g)&&na.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:n.curData}:r.data!==n.curData?{curData:r.data}:null}}])}(y.PureComponent);Xb=sa;Za(sa,"displayName","Bar");Za(sa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Gs.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Za(sa,"getComposedData",function(t){var s=t.props,a=t.item,r=t.barPosition,n=t.bandSize,i=t.xAxis,l=t.yAxis,c=t.xAxisTicks,o=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=LF(r,a);if(!x)return null;var f=s.layout,p=a.type.defaultProps,g=p!==void 0?$t($t({},p),a.props):a.props,w=g.dataKey,S=g.children,b=g.minPointSize,A=f==="horizontal"?l:i,v=d?A.scale.domain():null,j=KF({numericAxis:A}),N=As(S,yl),O=m.map(function(C,D){var E,P,R,U,I,L;d?E=FF(d[u+D],v):(E=Dt(C,w),Array.isArray(E)||(E=[j,E]));var Z=V7(b,Xb.defaultProps.minPointSize)(E[1],D);if(f==="horizontal"){var q,z=[l.scale(E[0]),l.scale(E[1])],ne=z[0],Y=z[1];P=ag({axis:i,ticks:c,bandSize:n,offset:x.offset,entry:C,index:D}),R=(q=Y??ne)!==null&&q!==void 0?q:void 0,U=x.size;var se=ne-Y;if(I=Number.isNaN(se)?0:se,L={x:P,y:l.y,width:U,height:l.height},Math.abs(Z)>0&&Math.abs(I)<Math.abs(Z)){var ve=ms(I||Z)*(Math.abs(Z)-Math.abs(I));R-=ve,I+=ve}}else{var Be=[i.scale(E[0]),i.scale(E[1])],ae=Be[0],Ee=Be[1];if(P=ae,R=ag({axis:l,ticks:o,bandSize:n,offset:x.offset,entry:C,index:D}),U=Ee-ae,I=x.size,L={x:i.x,y:R,width:i.width,height:I},Math.abs(Z)>0&&Math.abs(U)<Math.abs(Z)){var me=ms(U||Z)*(Math.abs(Z)-Math.abs(U));U+=me}}return $t($t($t({},C),{},{x:P,y:R,width:U,height:I,value:d?E:E[1],payload:C,background:L},N&&N[D]&&N[D].props),{},{tooltipPayload:[bb(a,C)],tooltipPosition:{x:P+U/2,y:R+I/2}})});return $t({data:O,layout:f},h)});function ol(t){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ol(t)}function rW(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function pv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eN(r.key),r)}}function nW(t,s,a){return s&&pv(t.prototype,s),a&&pv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Us(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?gv(Object(a),!0).forEach(function(r){id(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function id(t,s,a){return s=eN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function eN(t){var s=iW(t,"string");return ol(s)=="symbol"?s:s+""}function iW(t,s){if(ol(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(ol(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var ex=function(s,a,r,n,i){var l=s.width,c=s.height,o=s.layout,d=s.children,u=Object.keys(a),m={left:r.left,leftMirror:r.left,right:l-r.right,rightMirror:l-r.right,top:r.top,topMirror:r.top,bottom:c-r.bottom,bottomMirror:c-r.bottom},h=!!bs(d,sa);return u.reduce(function(x,f){var p=a[f],g=p.orientation,w=p.domain,S=p.padding,b=S===void 0?{}:S,A=p.mirror,v=p.reversed,j="".concat(g).concat(A?"Mirror":""),N,O,C,D,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var P=w[1]-w[0],R=1/0,U=p.categoricalDomain.sort(A4);if(U.forEach(function(Be,ae){ae>0&&(R=Math.min((Be||0)-(U[ae-1]||0),R))}),Number.isFinite(R)){var I=R/P,L=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(N=I*L/2),p.padding==="no-gap"){var Z=hs(s.barCategoryGap,I*L),q=I*L/2;N=q-Z-(q-Z)/L*Z}}}n==="xAxis"?O=[r.left+(b.left||0)+(N||0),r.left+r.width-(b.right||0)-(N||0)]:n==="yAxis"?O=o==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(N||0),r.top+r.height-(b.bottom||0)-(N||0)]:O=p.range,v&&(O=[O[1],O[0]]);var z=gb(p,i,h),ne=z.scale,Y=z.realScaleType;ne.domain(w).range(O),vb(ne);var se=jb(ne,Us(Us({},p),{},{realScaleType:Y}));n==="xAxis"?(E=g==="top"&&!A||g==="bottom"&&A,C=r.left,D=m[j]-E*p.height):n==="yAxis"&&(E=g==="left"&&!A||g==="right"&&A,C=m[j]-E*p.width,D=r.top);var ve=Us(Us(Us({},p),se),{},{realScaleType:Y,x:C,y:D,scale:ne,width:n==="xAxis"?r.width:p.width,height:n==="yAxis"?r.height:p.height});return ve.bandSize=Dc(ve,se),!p.hide&&n==="xAxis"?m[j]+=(E?-1:1)*ve.height:p.hide||(m[j]+=(E?-1:1)*ve.width),Us(Us({},x),{},id({},f,ve))},{})},tN=function(s,a){var r=s.x,n=s.y,i=a.x,l=a.y;return{x:Math.min(r,i),y:Math.min(n,l),width:Math.abs(i-r),height:Math.abs(l-n)}},lW=function(s){var a=s.x1,r=s.y1,n=s.x2,i=s.y2;return tN({x:a,y:r},{x:n,y:i})},sN=function(){function t(s){rW(this,t),this.scale=s}return nW(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.bandAware,i=r.position;if(a!==void 0){if(i)switch(i){case"start":return this.scale(a);case"middle":{var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+l}case"end":{var c=this.bandwidth?this.bandwidth():0;return this.scale(a)+c}default:return this.scale(a)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(a)+o}return this.scale(a)}}},{key:"isInRange",value:function(a){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?a>=n&&a<=i:a>=i&&a<=n}}],[{key:"create",value:function(a){return new t(a)}}])}();id(sN,"EPS",1e-4);var tx=function(s){var a=Object.keys(s).reduce(function(r,n){return Us(Us({},r),{},id({},n,sN.create(s[n])))},{});return Us(Us({},a),{},{apply:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=i.bandAware,c=i.position;return C7(n,function(o,d){return a[d].apply(o,{bandAware:l,position:c})})},isInRange:function(n){return Yb(n,function(i,l){return a[l].isInRange(i)})}})};function cW(t){return(t%180+180)%180}var oW=function(s){var a=s.width,r=s.height,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=cW(n),l=i*Math.PI/180,c=Math.atan(r/a),o=l>c&&l<Math.PI-c?r/Math.sin(l):a/Math.cos(l);return Math.abs(o)},dW=fa,uW=jl,mW=Bo;function hW(t){return function(s,a,r){var n=Object(s);if(!uW(s)){var i=dW(a);s=mW(s),a=function(c){return i(n[c],c,n)}}var l=t(s,a,r);return l>-1?n[i?s[l]:l]:void 0}}var xW=hW,fW=Hb;function pW(t){var s=fW(t),a=s%1;return s===s?a?s-a:s:0}var gW=pW,vW=X0,jW=fa,yW=gW,bW=Math.max;function NW(t,s,a){var r=t==null?0:t.length;if(!r)return-1;var n=a==null?0:yW(a);return n<0&&(n=bW(r+n,0)),vW(t,jW(s),n)}var wW=NW,SW=xW,kW=wW,AW=SW(kW),CW=AW;const _W=ht(CW);var PW=CC(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),sx=y.createContext(void 0),ax=y.createContext(void 0),aN=y.createContext(void 0),rN=y.createContext({}),nN=y.createContext(void 0),iN=y.createContext(0),lN=y.createContext(0),vv=function(s){var a=s.state,r=a.xAxisMap,n=a.yAxisMap,i=a.offset,l=s.clipPathId,c=s.children,o=s.width,d=s.height,u=PW(i);return $.createElement(sx.Provider,{value:r},$.createElement(ax.Provider,{value:n},$.createElement(rN.Provider,{value:i},$.createElement(aN.Provider,{value:u},$.createElement(nN.Provider,{value:l},$.createElement(iN.Provider,{value:d},$.createElement(lN.Provider,{value:o},c)))))))},TW=function(){return y.useContext(nN)},cN=function(s){var a=y.useContext(sx);a==null&&Rr(!1);var r=a[s];return r==null&&Rr(!1),r},OW=function(){var s=y.useContext(sx);return Ha(s)},EW=function(){var s=y.useContext(ax),a=_W(s,function(r){return Yb(r.domain,Number.isFinite)});return a||Ha(s)},oN=function(s){var a=y.useContext(ax);a==null&&Rr(!1);var r=a[s];return r==null&&Rr(!1),r},IW=function(){var s=y.useContext(aN);return s},DW=function(){return y.useContext(rN)},rx=function(){return y.useContext(lN)},nx=function(){return y.useContext(iN)};function En(t){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},En(t)}function MW(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function jv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uN(r.key),r)}}function $W(t,s,a){return s&&jv(t.prototype,s),a&&jv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function RW(t,s,a){return s=Xc(s),LW(t,dN()?Reflect.construct(s,a||[],Xc(t).constructor):s.apply(t,a))}function LW(t,s){if(s&&(En(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FW(t)}function FW(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dN=function(){return!!t})()}function Xc(t){return Xc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Xc(t)}function BW(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&wm(t,s)}function wm(t,s){return wm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},wm(t,s)}function yv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function bv(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?yv(Object(a),!0).forEach(function(r){ix(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):yv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ix(t,s,a){return s=uN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function uN(t){var s=UW(t,"string");return En(s)=="symbol"?s:s+""}function UW(t,s){if(En(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(En(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function zW(t,s){return HW(t)||KW(t,s)||qW(t,s)||WW()}function WW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qW(t,s){if(t){if(typeof t=="string")return Nv(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Nv(t,s)}}function Nv(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function KW(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function HW(t){if(Array.isArray(t))return t}function Sm(){return Sm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Sm.apply(this,arguments)}var VW=function(s,a){var r;return $.isValidElement(s)?r=$.cloneElement(s,a):De(s)?r=s(a):r=$.createElement("line",Sm({},a,{className:"recharts-reference-line-line"})),r},GW=function(s,a,r,n,i,l,c,o,d){var u=i.x,m=i.y,h=i.width,x=i.height;if(r){var f=d.y,p=s.y.apply(f,{position:l});if(ia(d,"discard")&&!s.y.isInRange(p))return null;var g=[{x:u+h,y:p},{x:u,y:p}];return o==="left"?g.reverse():g}if(a){var w=d.x,S=s.x.apply(w,{position:l});if(ia(d,"discard")&&!s.x.isInRange(S))return null;var b=[{x:S,y:m+x},{x:S,y:m}];return c==="top"?b.reverse():b}if(n){var A=d.segment,v=A.map(function(j){return s.apply(j,{position:l})});return ia(d,"discard")&&j7(v,function(j){return!s.isInRange(j)})?null:v}return null};function ZW(t){var s=t.x,a=t.y,r=t.segment,n=t.xAxisId,i=t.yAxisId,l=t.shape,c=t.className,o=t.alwaysShow,d=TW(),u=cN(n),m=oN(i),h=IW();if(!d||!h)return null;Vs(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=tx({x:u.scale,y:m.scale}),f=zt(s),p=zt(a),g=r&&r.length===2,w=GW(x,f,p,g,h,t.position,u.orientation,m.orientation,t);if(!w)return null;var S=zW(w,2),b=S[0],A=b.x,v=b.y,j=S[1],N=j.x,O=j.y,C=ia(t,"hidden")?"url(#".concat(d,")"):void 0,D=bv(bv({clipPath:C},Ce(t,!0)),{},{x1:A,y1:v,x2:N,y2:O});return $.createElement(Ze,{className:We("recharts-reference-line",c)},VW(l,D),Kt.renderCallByParent(t,lW({x1:A,y1:v,x2:N,y2:O})))}var lx=function(t){function s(){return MW(this,s),RW(this,s,arguments)}return BW(s,t),$W(s,[{key:"render",value:function(){return $.createElement(ZW,this.props)}}])}($.Component);ix(lx,"displayName","ReferenceLine");ix(lx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function km(){return km=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},km.apply(this,arguments)}function In(t){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},In(t)}function wv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Sv(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?wv(Object(a),!0).forEach(function(r){ld(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):wv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function YW(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function kv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hN(r.key),r)}}function XW(t,s,a){return s&&kv(t.prototype,s),a&&kv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function JW(t,s,a){return s=Jc(s),QW(t,mN()?Reflect.construct(s,a||[],Jc(t).constructor):s.apply(t,a))}function QW(t,s){if(s&&(In(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eq(t)}function eq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mN=function(){return!!t})()}function Jc(t){return Jc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Jc(t)}function tq(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Am(t,s)}function Am(t,s){return Am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Am(t,s)}function ld(t,s,a){return s=hN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function hN(t){var s=sq(t,"string");return In(s)=="symbol"?s:s+""}function sq(t,s){if(In(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(In(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var aq=function(s){var a=s.x,r=s.y,n=s.xAxis,i=s.yAxis,l=tx({x:n.scale,y:i.scale}),c=l.apply({x:a,y:r},{bandAware:!0});return ia(s,"discard")&&!l.isInRange(c)?null:c},cd=function(t){function s(){return YW(this,s),JW(this,s,arguments)}return tq(s,t),XW(s,[{key:"render",value:function(){var r=this.props,n=r.x,i=r.y,l=r.r,c=r.alwaysShow,o=r.clipPathId,d=zt(n),u=zt(i);if(Vs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var m=aq(this.props);if(!m)return null;var h=m.x,x=m.y,f=this.props,p=f.shape,g=f.className,w=ia(this.props,"hidden")?"url(#".concat(o,")"):void 0,S=Sv(Sv({clipPath:w},Ce(this.props,!0)),{},{cx:h,cy:x});return $.createElement(Ze,{className:We("recharts-reference-dot",g)},s.renderDot(p,S),Kt.renderCallByParent(this.props,{x:h-l,y:x-l,width:2*l,height:2*l}))}}])}($.Component);ld(cd,"displayName","ReferenceDot");ld(cd,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});ld(cd,"renderDot",function(t,s){var a;return $.isValidElement(t)?a=$.cloneElement(t,s):De(t)?a=t(s):a=$.createElement(Al,km({},s,{cx:s.cx,cy:s.cy,className:"recharts-reference-dot-dot"})),a});function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Cm.apply(this,arguments)}function Dn(t){"@babel/helpers - typeof";return Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Dn(t)}function Av(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Cv(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Av(Object(a),!0).forEach(function(r){od(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Av(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function rq(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function _v(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fN(r.key),r)}}function nq(t,s,a){return s&&_v(t.prototype,s),a&&_v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function iq(t,s,a){return s=Qc(s),lq(t,xN()?Reflect.construct(s,a||[],Qc(t).constructor):s.apply(t,a))}function lq(t,s){if(s&&(Dn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cq(t)}function cq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xN=function(){return!!t})()}function Qc(t){return Qc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},Qc(t)}function oq(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&_m(t,s)}function _m(t,s){return _m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_m(t,s)}function od(t,s,a){return s=fN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function fN(t){var s=dq(t,"string");return Dn(s)=="symbol"?s:s+""}function dq(t,s){if(Dn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Dn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var uq=function(s,a,r,n,i){var l=i.x1,c=i.x2,o=i.y1,d=i.y2,u=i.xAxis,m=i.yAxis;if(!u||!m)return null;var h=tx({x:u.scale,y:m.scale}),x={x:s?h.x.apply(l,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(o,{position:"start"}):h.y.rangeMin},f={x:a?h.x.apply(c,{position:"end"}):h.x.rangeMax,y:n?h.y.apply(d,{position:"end"}):h.y.rangeMax};return ia(i,"discard")&&(!h.isInRange(x)||!h.isInRange(f))?null:tN(x,f)},dd=function(t){function s(){return rq(this,s),iq(this,s,arguments)}return oq(s,t),nq(s,[{key:"render",value:function(){var r=this.props,n=r.x1,i=r.x2,l=r.y1,c=r.y2,o=r.className,d=r.alwaysShow,u=r.clipPathId;Vs(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=zt(n),h=zt(i),x=zt(l),f=zt(c),p=this.props.shape;if(!m&&!h&&!x&&!f&&!p)return null;var g=uq(m,h,x,f,this.props);if(!g&&!p)return null;var w=ia(this.props,"hidden")?"url(#".concat(u,")"):void 0;return $.createElement(Ze,{className:We("recharts-reference-area",o)},s.renderRect(p,Cv(Cv({clipPath:w},Ce(this.props,!0)),g)),Kt.renderCallByParent(this.props,g))}}])}($.Component);od(dd,"displayName","ReferenceArea");od(dd,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});od(dd,"renderRect",function(t,s){var a;return $.isValidElement(t)?a=$.cloneElement(t,s):De(t)?a=t(s):a=$.createElement(Qh,Cm({},s,{className:"recharts-reference-area-rect"})),a});function pN(t,s,a){if(s<1)return[];if(s===1&&a===void 0)return t;for(var r=[],n=0;n<t.length;n+=s)if(a===void 0||a(t[n])===!0)r.push(t[n]);else return;return r}function mq(t,s,a){var r={width:t.width+s.width,height:t.height+s.height};return oW(r,a)}function hq(t,s,a){var r=a==="width",n=t.x,i=t.y,l=t.width,c=t.height;return s===1?{start:r?n:i,end:r?n+l:i+c}:{start:r?n+l:i+c,end:r?n:i}}function eo(t,s,a,r,n){if(t*s<t*r||t*s>t*n)return!1;var i=a();return t*(s-t*i/2-r)>=0&&t*(s+t*i/2-n)<=0}function xq(t,s){return pN(t,s+1)}function fq(t,s,a,r,n){for(var i=(r||[]).slice(),l=s.start,c=s.end,o=0,d=1,u=l,m=function(){var f=r==null?void 0:r[o];if(f===void 0)return{v:pN(r,d)};var p=o,g,w=function(){return g===void 0&&(g=a(f,p)),g},S=f.coordinate,b=o===0||eo(t,S,w,u,c);b||(o=0,u=l,d+=1),b&&(u=S+t*(w()/2+n),o+=d)},h;d<=i.length;)if(h=m(),h)return h.v;return[]}function dl(t){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},dl(t)}function Pv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function es(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Pv(Object(a),!0).forEach(function(r){pq(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Pv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function pq(t,s,a){return s=gq(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function gq(t){var s=vq(t,"string");return dl(s)=="symbol"?s:s+""}function vq(t,s){if(dl(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function jq(t,s,a,r,n){for(var i=(r||[]).slice(),l=i.length,c=s.start,o=s.end,d=function(h){var x=i[h],f,p=function(){return f===void 0&&(f=a(x,h)),f};if(h===l-1){var g=t*(x.coordinate+t*p()/2-o);i[h]=x=es(es({},x),{},{tickCoord:g>0?x.coordinate-g*t:x.coordinate})}else i[h]=x=es(es({},x),{},{tickCoord:x.coordinate});var w=eo(t,x.tickCoord,p,c,o);w&&(o=x.tickCoord-t*(p()/2+n),i[h]=es(es({},x),{},{isShow:!0}))},u=l-1;u>=0;u--)d(u);return i}function yq(t,s,a,r,n,i){var l=(r||[]).slice(),c=l.length,o=s.start,d=s.end;if(i){var u=r[c-1],m=a(u,c-1),h=t*(u.coordinate+t*m/2-d);l[c-1]=u=es(es({},u),{},{tickCoord:h>0?u.coordinate-h*t:u.coordinate});var x=eo(t,u.tickCoord,function(){return m},o,d);x&&(d=u.tickCoord-t*(m/2+n),l[c-1]=es(es({},u),{},{isShow:!0}))}for(var f=i?c-1:c,p=function(S){var b=l[S],A,v=function(){return A===void 0&&(A=a(b,S)),A};if(S===0){var j=t*(b.coordinate-t*v()/2-o);l[S]=b=es(es({},b),{},{tickCoord:j<0?b.coordinate-j*t:b.coordinate})}else l[S]=b=es(es({},b),{},{tickCoord:b.coordinate});var N=eo(t,b.tickCoord,v,o,d);N&&(o=b.tickCoord+t*(v()/2+n),l[S]=es(es({},b),{},{isShow:!0}))},g=0;g<f;g++)p(g);return l}function cx(t,s,a){var r=t.tick,n=t.ticks,i=t.viewBox,l=t.minTickGap,c=t.orientation,o=t.interval,d=t.tickFormatter,u=t.unit,m=t.angle;if(!n||!n.length||!r)return[];if(xe(o)||Gs.isSsr)return xq(n,typeof o=="number"&&xe(o)?o:0);var h=[],x=c==="top"||c==="bottom"?"width":"height",f=u&&x==="width"?bi(u,{fontSize:s,letterSpacing:a}):{width:0,height:0},p=function(b,A){var v=De(d)?d(b.value,A):b.value;return x==="width"?mq(bi(v,{fontSize:s,letterSpacing:a}),f,m):bi(v,{fontSize:s,letterSpacing:a})[x]},g=n.length>=2?ms(n[1].coordinate-n[0].coordinate):1,w=hq(i,g,x);return o==="equidistantPreserveStart"?fq(g,w,p,n,l):(o==="preserveStart"||o==="preserveStartEnd"?h=yq(g,w,p,n,l,o==="preserveStartEnd"):h=jq(g,w,p,n,l),h.filter(function(S){return S.isShow}))}var bq=["viewBox"],Nq=["viewBox"],wq=["ticks"];function Mn(t){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Mn(t)}function en(){return en=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},en.apply(this,arguments)}function Tv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Ft(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Tv(Object(a),!0).forEach(function(r){ox(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Tv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function qd(t,s){if(t==null)return{};var a=Sq(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Sq(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function kq(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Ov(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vN(r.key),r)}}function Aq(t,s,a){return s&&Ov(t.prototype,s),a&&Ov(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cq(t,s,a){return s=to(s),_q(t,gN()?Reflect.construct(s,a||[],to(t).constructor):s.apply(t,a))}function _q(t,s){if(s&&(Mn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pq(t)}function Pq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gN=function(){return!!t})()}function to(t){return to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},to(t)}function Tq(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Pm(t,s)}function Pm(t,s){return Pm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Pm(t,s)}function ox(t,s,a){return s=vN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function vN(t){var s=Oq(t,"string");return Mn(s)=="symbol"?s:s+""}function Oq(t,s){if(Mn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Mn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var ai=function(t){function s(a){var r;return kq(this,s),r=Cq(this,s,[a]),r.state={fontSize:"",letterSpacing:""},r}return Tq(s,t),Aq(s,[{key:"shouldComponentUpdate",value:function(r,n){var i=r.viewBox,l=qd(r,bq),c=this.props,o=c.viewBox,d=qd(c,Nq);return!sn(i,o)||!sn(l,d)||!sn(n,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var n=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];n&&this.setState({fontSize:window.getComputedStyle(n).fontSize,letterSpacing:window.getComputedStyle(n).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var n=this.props,i=n.x,l=n.y,c=n.width,o=n.height,d=n.orientation,u=n.tickSize,m=n.mirror,h=n.tickMargin,x,f,p,g,w,S,b=m?-1:1,A=r.tickSize||u,v=xe(r.tickCoord)?r.tickCoord:r.coordinate;switch(d){case"top":x=f=r.coordinate,g=l+ +!m*o,p=g-b*A,S=p-b*h,w=v;break;case"left":p=g=r.coordinate,f=i+ +!m*c,x=f-b*A,w=x-b*h,S=v;break;case"right":p=g=r.coordinate,f=i+ +m*c,x=f+b*A,w=x+b*h,S=v;break;default:x=f=r.coordinate,g=l+ +m*o,p=g+b*A,S=p+b*h,w=v;break}return{line:{x1:x,y1:p,x2:f,y2:g},tick:{x:w,y:S}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,n=r.orientation,i=r.mirror,l;switch(n){case"left":l=i?"start":"end";break;case"right":l=i?"end":"start";break;default:l="middle";break}return l}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,n=r.orientation,i=r.mirror,l="end";switch(n){case"left":case"right":l="middle";break;case"top":l=i?"start":"end";break;default:l=i?"end":"start";break}return l}},{key:"renderAxisLine",value:function(){var r=this.props,n=r.x,i=r.y,l=r.width,c=r.height,o=r.orientation,d=r.mirror,u=r.axisLine,m=Ft(Ft(Ft({},Ce(this.props,!1)),Ce(u,!1)),{},{fill:"none"});if(o==="top"||o==="bottom"){var h=+(o==="top"&&!d||o==="bottom"&&d);m=Ft(Ft({},m),{},{x1:n,y1:i+h*c,x2:n+l,y2:i+h*c})}else{var x=+(o==="left"&&!d||o==="right"&&d);m=Ft(Ft({},m),{},{x1:n+x*l,y1:i,x2:n+x*l,y2:i+c})}return $.createElement("line",en({},m,{className:We("recharts-cartesian-axis-line",ks(u,"className"))}))}},{key:"renderTicks",value:function(r,n,i){var l=this,c=this.props,o=c.tickLine,d=c.stroke,u=c.tick,m=c.tickFormatter,h=c.unit,x=cx(Ft(Ft({},this.props),{},{ticks:r}),n,i),f=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=Ce(this.props,!1),w=Ce(u,!1),S=Ft(Ft({},g),{},{fill:"none"},Ce(o,!1)),b=x.map(function(A,v){var j=l.getTickLineCoord(A),N=j.line,O=j.tick,C=Ft(Ft(Ft(Ft({textAnchor:f,verticalAnchor:p},g),{},{stroke:"none",fill:d},w),O),{},{index:v,payload:A,visibleTicksCount:x.length,tickFormatter:m});return $.createElement(Ze,en({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Ir(l.props,A,v)),o&&$.createElement("line",en({},S,N,{className:We("recharts-cartesian-axis-tick-line",ks(o,"className"))})),u&&s.renderTickItem(u,C,"".concat(De(m)?m(A.value,v):A.value).concat(h||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,n=this.props,i=n.axisLine,l=n.width,c=n.height,o=n.ticksGenerator,d=n.className,u=n.hide;if(u)return null;var m=this.props,h=m.ticks,x=qd(m,wq),f=h;return De(o)&&(f=h&&h.length>0?o(this.props):o(x)),l<=0||c<=0||!f||!f.length?null:$.createElement(Ze,{className:We("recharts-cartesian-axis",d),ref:function(g){r.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(f,this.state.fontSize,this.state.letterSpacing),Kt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,n,i){var l,c=We(n.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(r)?l=$.cloneElement(r,Ft(Ft({},n),{},{className:c})):De(r)?l=r(Ft(Ft({},n),{},{className:c})):l=$.createElement(Dr,en({},n,{className:"recharts-cartesian-axis-tick-value"}),i),l}}])}(y.Component);ox(ai,"displayName","CartesianAxis");ox(ai,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Eq=["x1","y1","x2","y2","key"],Iq=["offset"];function Lr(t){"@babel/helpers - typeof";return Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Lr(t)}function Ev(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function ts(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Ev(Object(a),!0).forEach(function(r){Dq(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ev(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Dq(t,s,a){return s=Mq(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function Mq(t){var s=$q(t,"string");return Lr(s)=="symbol"?s:s+""}function $q(t,s){if(Lr(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Lr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function br(){return br=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},br.apply(this,arguments)}function Iv(t,s){if(t==null)return{};var a=Rq(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Rq(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}var Lq=function(s){var a=s.fill;if(!a||a==="none")return null;var r=s.fillOpacity,n=s.x,i=s.y,l=s.width,c=s.height,o=s.ry;return $.createElement("rect",{x:n,y:i,ry:o,width:l,height:c,stroke:"none",fill:a,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function jN(t,s){var a;if($.isValidElement(t))a=$.cloneElement(t,s);else if(De(t))a=t(s);else{var r=s.x1,n=s.y1,i=s.x2,l=s.y2,c=s.key,o=Iv(s,Eq),d=Ce(o,!1);d.offset;var u=Iv(d,Iq);a=$.createElement("line",br({},u,{x1:r,y1:n,x2:i,y2:l,fill:"none",key:c}))}return a}function Fq(t){var s=t.x,a=t.width,r=t.horizontal,n=r===void 0?!0:r,i=t.horizontalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(c,o){var d=ts(ts({},t),{},{x1:s,y1:c,x2:s+a,y2:c,key:"line-".concat(o),index:o});return jN(n,d)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function Bq(t){var s=t.y,a=t.height,r=t.vertical,n=r===void 0?!0:r,i=t.verticalPoints;if(!n||!i||!i.length)return null;var l=i.map(function(c,o){var d=ts(ts({},t),{},{x1:c,y1:s,x2:c,y2:s+a,key:"line-".concat(o),index:o});return jN(n,d)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function Uq(t){var s=t.horizontalFill,a=t.fillOpacity,r=t.x,n=t.y,i=t.width,l=t.height,c=t.horizontalPoints,o=t.horizontal,d=o===void 0?!0:o;if(!d||!s||!s.length)return null;var u=c.map(function(h){return Math.round(h+n-n)}).sort(function(h,x){return h-x});n!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var f=!u[x+1],p=f?n+l-h:u[x+1]-h;if(p<=0)return null;var g=x%s.length;return $.createElement("rect",{key:"react-".concat(x),y:h,x:r,height:p,width:i,stroke:"none",fill:s[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function zq(t){var s=t.vertical,a=s===void 0?!0:s,r=t.verticalFill,n=t.fillOpacity,i=t.x,l=t.y,c=t.width,o=t.height,d=t.verticalPoints;if(!a||!r||!r.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==u[0]&&u.unshift(0);var m=u.map(function(h,x){var f=!u[x+1],p=f?i+c-h:u[x+1]-h;if(p<=0)return null;var g=x%r.length;return $.createElement("rect",{key:"react-".concat(x),x:h,y:l,width:p,height:o,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Wq=function(s,a){var r=s.xAxis,n=s.width,i=s.height,l=s.offset;return pb(cx(ts(ts(ts({},ai.defaultProps),r),{},{ticks:Sa(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.left,l.left+l.width,a)},qq=function(s,a){var r=s.yAxis,n=s.width,i=s.height,l=s.offset;return pb(cx(ts(ts(ts({},ai.defaultProps),r),{},{ticks:Sa(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),l.top,l.top+l.height,a)},Vr={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Nr(t){var s,a,r,n,i,l,c=rx(),o=nx(),d=DW(),u=ts(ts({},t),{},{stroke:(s=t.stroke)!==null&&s!==void 0?s:Vr.stroke,fill:(a=t.fill)!==null&&a!==void 0?a:Vr.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Vr.horizontal,horizontalFill:(n=t.horizontalFill)!==null&&n!==void 0?n:Vr.horizontalFill,vertical:(i=t.vertical)!==null&&i!==void 0?i:Vr.vertical,verticalFill:(l=t.verticalFill)!==null&&l!==void 0?l:Vr.verticalFill,x:xe(t.x)?t.x:d.left,y:xe(t.y)?t.y:d.top,width:xe(t.width)?t.width:d.width,height:xe(t.height)?t.height:d.height}),m=u.x,h=u.y,x=u.width,f=u.height,p=u.syncWithTicks,g=u.horizontalValues,w=u.verticalValues,S=OW(),b=EW();if(!xe(x)||x<=0||!xe(f)||f<=0||!xe(m)||m!==+m||!xe(h)||h!==+h)return null;var A=u.verticalCoordinatesGenerator||Wq,v=u.horizontalCoordinatesGenerator||qq,j=u.horizontalPoints,N=u.verticalPoints;if((!j||!j.length)&&De(v)){var O=g&&g.length,C=v({yAxis:b?ts(ts({},b),{},{ticks:O?g:b.ticks}):void 0,width:c,height:o,offset:d},O?!0:p);Vs(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lr(C),"]")),Array.isArray(C)&&(j=C)}if((!N||!N.length)&&De(A)){var D=w&&w.length,E=A({xAxis:S?ts(ts({},S),{},{ticks:D?w:S.ticks}):void 0,width:c,height:o,offset:d},D?!0:p);Vs(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lr(E),"]")),Array.isArray(E)&&(N=E)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(Lq,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),$.createElement(Fq,br({},u,{offset:d,horizontalPoints:j,xAxis:S,yAxis:b})),$.createElement(Bq,br({},u,{offset:d,verticalPoints:N,xAxis:S,yAxis:b})),$.createElement(Uq,br({},u,{horizontalPoints:j})),$.createElement(zq,br({},u,{verticalPoints:N})))}Nr.displayName="CartesianGrid";var Kq=["type","layout","connectNulls","ref"],Hq=["key"];function $n(t){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},$n(t)}function Dv(t,s){if(t==null)return{};var a=Vq(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function Vq(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Ci(){return Ci=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Ci.apply(this,arguments)}function Mv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function js(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Mv(Object(a),!0).forEach(function(r){zs(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Mv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Gr(t){return Xq(t)||Yq(t)||Zq(t)||Gq()}function Gq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zq(t,s){if(t){if(typeof t=="string")return Tm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Tm(t,s)}}function Yq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Xq(t){if(Array.isArray(t))return Tm(t)}function Tm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function Jq(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function $v(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bN(r.key),r)}}function Qq(t,s,a){return s&&$v(t.prototype,s),a&&$v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function eK(t,s,a){return s=so(s),tK(t,yN()?Reflect.construct(s,a||[],so(t).constructor):s.apply(t,a))}function tK(t,s){if(s&&($n(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sK(t)}function sK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yN=function(){return!!t})()}function so(t){return so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},so(t)}function aK(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Om(t,s)}function Om(t,s){return Om=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Om(t,s)}function zs(t,s,a){return s=bN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function bN(t){var s=rK(t,"string");return $n(s)=="symbol"?s:s+""}function rK(t,s){if($n(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if($n(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var er=function(t){function s(){var a;Jq(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=eK(this,s,[].concat(n)),zs(a,"state",{isAnimationFinished:!0,totalLength:0}),zs(a,"generateSimpleStrokeDasharray",function(l,c){return"".concat(c,"px ").concat(l-c,"px")}),zs(a,"getStrokeDasharray",function(l,c,o){var d=o.reduce(function(w,S){return w+S});if(!d)return a.generateSimpleStrokeDasharray(c,l);for(var u=Math.floor(l/d),m=l%d,h=c-l,x=[],f=0,p=0;f<o.length;p+=o[f],++f)if(p+o[f]>m){x=[].concat(Gr(o.slice(0,f)),[m-p]);break}var g=x.length%2===0?[0,h]:[h];return[].concat(Gr(s.repeat(o,u)),Gr(x),g).map(function(w){return"".concat(w,"px")}).join(", ")}),zs(a,"id",Br("recharts-line-")),zs(a,"pathRef",function(l){a.mainCurve=l}),zs(a,"handleAnimationEnd",function(){a.setState({isAnimationFinished:!0}),a.props.onAnimationEnd&&a.props.onAnimationEnd()}),zs(a,"handleAnimationStart",function(){a.setState({isAnimationFinished:!1}),a.props.onAnimationStart&&a.props.onAnimationStart()}),a}return aK(s,t),Qq(s,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,n){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,l=i.points,c=i.xAxis,o=i.yAxis,d=i.layout,u=i.children,m=As(u,kl);if(!m)return null;var h=function(p,g){return{x:p.x,y:p.y,value:p.value,errorVal:Dt(p.payload,g)}},x={clipPath:r?"url(#clipPath-".concat(n,")"):null};return $.createElement(Ze,x,m.map(function(f){return $.cloneElement(f,{key:"bar-".concat(f.props.dataKey),data:l,xAxis:c,yAxis:o,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,n,i){var l=this.props.isAnimationActive;if(l&&!this.state.isAnimationFinished)return null;var c=this.props,o=c.dot,d=c.points,u=c.dataKey,m=Ce(this.props,!1),h=Ce(o,!0),x=d.map(function(p,g){var w=js(js(js({key:"dot-".concat(g),r:3},m),h),{},{index:g,cx:p.x,cy:p.y,value:p.value,dataKey:u,payload:p.payload,points:d});return s.renderDotItem(o,w)}),f={clipPath:r?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return $.createElement(Ze,Ci({className:"recharts-line-dots",key:"dots"},f),x)}},{key:"renderCurveStatically",value:function(r,n,i,l){var c=this.props,o=c.type,d=c.layout,u=c.connectNulls;c.ref;var m=Dv(c,Kq),h=js(js(js({},Ce(m,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:n?"url(#clipPath-".concat(i,")"):null,points:r},l),{},{type:o,layout:d,connectNulls:u});return $.createElement(Cr,Ci({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,n){var i=this,l=this.props,c=l.points,o=l.strokeDasharray,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,x=l.animationId,f=l.animateNewValues,p=l.width,g=l.height,w=this.state,S=w.prevPoints,b=w.totalLength;return $.createElement(Qa,{begin:u,duration:m,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var v=A.t;if(S){var j=S.length/c.length,N=c.map(function(P,R){var U=Math.floor(R*j);if(S[U]){var I=S[U],L=Ut(I.x,P.x),Z=Ut(I.y,P.y);return js(js({},P),{},{x:L(v),y:Z(v)})}if(f){var q=Ut(p*2,P.x),z=Ut(g/2,P.y);return js(js({},P),{},{x:q(v),y:z(v)})}return js(js({},P),{},{x:P.x,y:P.y})});return i.renderCurveStatically(N,r,n)}var O=Ut(0,b),C=O(v),D;if(o){var E="".concat(o).split(/[,\s]+/gim).map(function(P){return parseFloat(P)});D=i.getStrokeDasharray(C,b,E)}else D=i.generateSimpleStrokeDasharray(b,C);return i.renderCurveStatically(c,r,n,{strokeDasharray:D})})}},{key:"renderCurve",value:function(r,n){var i=this.props,l=i.points,c=i.isAnimationActive,o=this.state,d=o.prevPoints,u=o.totalLength;return c&&l&&l.length&&(!d&&u>0||!Mr(d,l))?this.renderCurveWithAnimation(r,n):this.renderCurveStatically(l,r,n)}},{key:"render",value:function(){var r,n=this.props,i=n.hide,l=n.dot,c=n.points,o=n.className,d=n.xAxis,u=n.yAxis,m=n.top,h=n.left,x=n.width,f=n.height,p=n.isAnimationActive,g=n.id;if(i||!c||!c.length)return null;var w=this.state.isAnimationFinished,S=c.length===1,b=We("recharts-line",o),A=d&&d.allowDataOverflow,v=u&&u.allowDataOverflow,j=A||v,N=Fe(g)?this.id:g,O=(r=Ce(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=O.r,D=C===void 0?3:C,E=O.strokeWidth,P=E===void 0?2:E,R=c0(l)?l:{},U=R.clipDot,I=U===void 0?!0:U,L=D*2+P;return $.createElement(Ze,{className:b},A||v?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(N)},$.createElement("rect",{x:A?h:h-x/2,y:v?m:m-f/2,width:A?x:x*2,height:v?f:f*2})),!I&&$.createElement("clipPath",{id:"clipPath-dots-".concat(N)},$.createElement("rect",{x:h-L/2,y:m-L/2,width:x+L,height:f+L}))):null,!S&&this.renderCurve(j,N),this.renderErrorBar(j,N),(S||l)&&this.renderDots(j,I,N),(!p||w)&&na.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:n.curPoints}:r.points!==n.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,n){for(var i=r.length%2!==0?[].concat(Gr(r),[0]):r,l=[],c=0;c<n;++c)l=[].concat(Gr(l),Gr(i));return l}},{key:"renderDotItem",value:function(r,n){var i;if($.isValidElement(r))i=$.cloneElement(r,n);else if(De(r))i=r(n);else{var l=n.key,c=Dv(n,Hq),o=We("recharts-line-dot",typeof r!="boolean"?r.className:"");i=$.createElement(Al,Ci({key:l},c,{className:o}))}return i}}])}(y.PureComponent);zs(er,"displayName","Line");zs(er,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Gs.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});zs(er,"getComposedData",function(t){var s=t.props,a=t.xAxis,r=t.yAxis,n=t.xAxisTicks,i=t.yAxisTicks,l=t.dataKey,c=t.bandSize,o=t.displayedData,d=t.offset,u=s.layout,m=o.map(function(h,x){var f=Dt(h,l);return u==="horizontal"?{x:Ic({axis:a,ticks:n,bandSize:c,entry:h,index:x}),y:Fe(f)?null:r.scale(f),value:f,payload:h}:{x:Fe(f)?null:a.scale(f),y:Ic({axis:r,ticks:i,bandSize:c,entry:h,index:x}),value:f,payload:h}});return js({points:m,layout:u},d)});var nK=["layout","type","stroke","connectNulls","isRange","ref"],iK=["key"],NN;function Rn(t){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Rn(t)}function wN(t,s){if(t==null)return{};var a=lK(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function lK(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function wr(){return wr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},wr.apply(this,arguments)}function Rv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Ua(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Rv(Object(a),!0).forEach(function(r){aa(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Rv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function cK(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Lv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kN(r.key),r)}}function oK(t,s,a){return s&&Lv(t.prototype,s),a&&Lv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function dK(t,s,a){return s=ao(s),uK(t,SN()?Reflect.construct(s,a||[],ao(t).constructor):s.apply(t,a))}function uK(t,s){if(s&&(Rn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mK(t)}function mK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SN=function(){return!!t})()}function ao(t){return ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ao(t)}function hK(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Em(t,s)}function Em(t,s){return Em=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Em(t,s)}function aa(t,s,a){return s=kN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function kN(t){var s=xK(t,"string");return Rn(s)=="symbol"?s:s+""}function xK(t,s){if(Rn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Rn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var Ra=function(t){function s(){var a;cK(this,s);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return a=dK(this,s,[].concat(n)),aa(a,"state",{isAnimationFinished:!0}),aa(a,"id",Br("recharts-area-")),aa(a,"handleAnimationEnd",function(){var l=a.props.onAnimationEnd;a.setState({isAnimationFinished:!0}),De(l)&&l()}),aa(a,"handleAnimationStart",function(){var l=a.props.onAnimationStart;a.setState({isAnimationFinished:!1}),De(l)&&l()}),a}return hK(s,t),oK(s,[{key:"renderDots",value:function(r,n,i){var l=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(l&&!c)return null;var o=this.props,d=o.dot,u=o.points,m=o.dataKey,h=Ce(this.props,!1),x=Ce(d,!0),f=u.map(function(g,w){var S=Ua(Ua(Ua({key:"dot-".concat(w),r:3},h),x),{},{index:w,cx:g.x,cy:g.y,dataKey:m,value:g.value,payload:g.payload,points:u});return s.renderDotItem(d,S)}),p={clipPath:r?"url(#clipPath-".concat(n?"":"dots-").concat(i,")"):null};return $.createElement(Ze,wr({className:"recharts-area-dots"},p),f)}},{key:"renderHorizontalRect",value:function(r){var n=this.props,i=n.baseLine,l=n.points,c=n.strokeWidth,o=l[0].x,d=l[l.length-1].x,u=r*Math.abs(o-d),m=Ga(l.map(function(h){return h.y||0}));return xe(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Ga(i.map(function(h){return h.y||0})),m)),xe(m)?$.createElement("rect",{x:o<d?o:o-u,y:0,width:u,height:Math.floor(m+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var n=this.props,i=n.baseLine,l=n.points,c=n.strokeWidth,o=l[0].y,d=l[l.length-1].y,u=r*Math.abs(o-d),m=Ga(l.map(function(h){return h.x||0}));return xe(i)&&typeof i=="number"?m=Math.max(i,m):i&&Array.isArray(i)&&i.length&&(m=Math.max(Ga(i.map(function(h){return h.x||0})),m)),xe(m)?$.createElement("rect",{x:0,y:o<d?o:o-u,width:m+(c?parseInt("".concat(c),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(r){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,n,i,l){var c=this.props,o=c.layout,d=c.type,u=c.stroke,m=c.connectNulls,h=c.isRange;c.ref;var x=wN(c,nK);return $.createElement(Ze,{clipPath:i?"url(#clipPath-".concat(l,")"):null},$.createElement(Cr,wr({},Ce(x,!0),{points:r,connectNulls:m,type:d,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),u!=="none"&&$.createElement(Cr,wr({},Ce(this.props,!1),{className:"recharts-area-curve",layout:o,type:d,connectNulls:m,fill:"none",points:r})),u!=="none"&&h&&$.createElement(Cr,wr({},Ce(this.props,!1),{className:"recharts-area-curve",layout:o,type:d,connectNulls:m,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(r,n){var i=this,l=this.props,c=l.points,o=l.baseLine,d=l.isAnimationActive,u=l.animationBegin,m=l.animationDuration,h=l.animationEasing,x=l.animationId,f=this.state,p=f.prevPoints,g=f.prevBaseLine;return $.createElement(Qa,{begin:u,duration:m,isActive:d,easing:h,from:{t:0},to:{t:1},key:"area-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var S=w.t;if(p){var b=p.length/c.length,A=c.map(function(O,C){var D=Math.floor(C*b);if(p[D]){var E=p[D],P=Ut(E.x,O.x),R=Ut(E.y,O.y);return Ua(Ua({},O),{},{x:P(S),y:R(S)})}return O}),v;if(xe(o)&&typeof o=="number"){var j=Ut(g,o);v=j(S)}else if(Fe(o)||Yn(o)){var N=Ut(g,0);v=N(S)}else v=o.map(function(O,C){var D=Math.floor(C*b);if(g[D]){var E=g[D],P=Ut(E.x,O.x),R=Ut(E.y,O.y);return Ua(Ua({},O),{},{x:P(S),y:R(S)})}return O});return i.renderAreaStatically(A,v,r,n)}return $.createElement(Ze,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(n)},i.renderClipRect(S))),$.createElement(Ze,{clipPath:"url(#animationClipPath-".concat(n,")")},i.renderAreaStatically(c,o,r,n)))})}},{key:"renderArea",value:function(r,n){var i=this.props,l=i.points,c=i.baseLine,o=i.isAnimationActive,d=this.state,u=d.prevPoints,m=d.prevBaseLine,h=d.totalLength;return o&&l&&l.length&&(!u&&h>0||!Mr(u,l)||!Mr(m,c))?this.renderAreaWithAnimation(r,n):this.renderAreaStatically(l,c,r,n)}},{key:"render",value:function(){var r,n=this.props,i=n.hide,l=n.dot,c=n.points,o=n.className,d=n.top,u=n.left,m=n.xAxis,h=n.yAxis,x=n.width,f=n.height,p=n.isAnimationActive,g=n.id;if(i||!c||!c.length)return null;var w=this.state.isAnimationFinished,S=c.length===1,b=We("recharts-area",o),A=m&&m.allowDataOverflow,v=h&&h.allowDataOverflow,j=A||v,N=Fe(g)?this.id:g,O=(r=Ce(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=O.r,D=C===void 0?3:C,E=O.strokeWidth,P=E===void 0?2:E,R=c0(l)?l:{},U=R.clipDot,I=U===void 0?!0:U,L=D*2+P;return $.createElement(Ze,{className:b},A||v?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(N)},$.createElement("rect",{x:A?u:u-x/2,y:v?d:d-f/2,width:A?x:x*2,height:v?f:f*2})),!I&&$.createElement("clipPath",{id:"clipPath-dots-".concat(N)},$.createElement("rect",{x:u-L/2,y:d-L/2,width:x+L,height:f+L}))):null,S?null:this.renderArea(j,N),(l||S)&&this.renderDots(j,I,N),(!p||w)&&na.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:r.points!==n.curPoints||r.baseLine!==n.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(y.PureComponent);NN=Ra;aa(Ra,"displayName","Area");aa(Ra,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Gs.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});aa(Ra,"getBaseValue",function(t,s,a,r){var n=t.layout,i=t.baseValue,l=s.props.baseValue,c=l??i;if(xe(c)&&typeof c=="number")return c;var o=n==="horizontal"?r:a,d=o.scale.domain();if(o.type==="number"){var u=Math.max(d[0],d[1]),m=Math.min(d[0],d[1]);return c==="dataMin"?m:c==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return c==="dataMin"?d[0]:c==="dataMax"?d[1]:d[0]});aa(Ra,"getComposedData",function(t){var s=t.props,a=t.item,r=t.xAxis,n=t.yAxis,i=t.xAxisTicks,l=t.yAxisTicks,c=t.bandSize,o=t.dataKey,d=t.stackedData,u=t.dataStartIndex,m=t.displayedData,h=t.offset,x=s.layout,f=d&&d.length,p=NN.getBaseValue(s,a,r,n),g=x==="horizontal",w=!1,S=m.map(function(A,v){var j;f?j=d[u+v]:(j=Dt(A,o),Array.isArray(j)?w=!0:j=[p,j]);var N=j[1]==null||f&&Dt(A,o)==null;return g?{x:Ic({axis:r,ticks:i,bandSize:c,entry:A,index:v}),y:N?null:n.scale(j[1]),value:j,payload:A}:{x:N?null:r.scale(j[1]),y:Ic({axis:n,ticks:l,bandSize:c,entry:A,index:v}),value:j,payload:A}}),b;return f||w?b=S.map(function(A){var v=Array.isArray(A.value)?A.value[0]:null;return g?{x:A.x,y:v!=null&&A.y!=null?n.scale(v):null}:{x:v!=null?r.scale(v):null,y:A.y}}):b=g?n.scale(p):r.scale(p),Ua({points:S,baseLine:b,layout:x,isRange:w},h)});aa(Ra,"renderDotItem",function(t,s){var a;if($.isValidElement(t))a=$.cloneElement(t,s);else if(De(t))a=t(s);else{var r=We("recharts-area-dot",typeof t!="boolean"?t.className:""),n=s.key,i=wN(s,iK);a=$.createElement(Al,wr({},i,{key:n,className:r}))}return a});function Ln(t){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ln(t)}function fK(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Fv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_N(r.key),r)}}function pK(t,s,a){return s&&Fv(t.prototype,s),a&&Fv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function gK(t,s,a){return s=ro(s),vK(t,AN()?Reflect.construct(s,a||[],ro(t).constructor):s.apply(t,a))}function vK(t,s){if(s&&(Ln(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jK(t)}function jK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AN=function(){return!!t})()}function ro(t){return ro=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ro(t)}function yK(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Im(t,s)}function Im(t,s){return Im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Im(t,s)}function CN(t,s,a){return s=_N(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function _N(t){var s=bK(t,"string");return Ln(s)=="symbol"?s:s+""}function bK(t,s){if(Ln(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Ln(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Dm.apply(this,arguments)}function NK(t){var s=t.xAxisId,a=rx(),r=nx(),n=cN(s);return n==null?null:y.createElement(ai,Dm({},n,{className:We("recharts-".concat(n.axisType," ").concat(n.axisType),n.className),viewBox:{x:0,y:0,width:a,height:r},ticksGenerator:function(l){return Sa(l,!0)}}))}var Ks=function(t){function s(){return fK(this,s),gK(this,s,arguments)}return yK(s,t),pK(s,[{key:"render",value:function(){return y.createElement(NK,this.props)}}])}(y.Component);CN(Ks,"displayName","XAxis");CN(Ks,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Fn(t){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Fn(t)}function wK(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Bv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ON(r.key),r)}}function SK(t,s,a){return s&&Bv(t.prototype,s),a&&Bv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function kK(t,s,a){return s=no(s),AK(t,PN()?Reflect.construct(s,a||[],no(t).constructor):s.apply(t,a))}function AK(t,s){if(s&&(Fn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CK(t)}function CK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PN=function(){return!!t})()}function no(t){return no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},no(t)}function _K(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Mm(t,s)}function Mm(t,s){return Mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Mm(t,s)}function TN(t,s,a){return s=ON(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function ON(t){var s=PK(t,"string");return Fn(s)=="symbol"?s:s+""}function PK(t,s){if(Fn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Fn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function $m(){return $m=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},$m.apply(this,arguments)}var TK=function(s){var a=s.yAxisId,r=rx(),n=nx(),i=oN(a);return i==null?null:y.createElement(ai,$m({},i,{className:We("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(c){return Sa(c,!0)}}))},Ds=function(t){function s(){return wK(this,s),kK(this,s,arguments)}return _K(s,t),SK(s,[{key:"render",value:function(){return y.createElement(TK,this.props)}}])}(y.Component);TN(Ds,"displayName","YAxis");TN(Ds,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Uv(t){return DK(t)||IK(t)||EK(t)||OK()}function OK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EK(t,s){if(t){if(typeof t=="string")return Rm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Rm(t,s)}}function IK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DK(t){if(Array.isArray(t))return Rm(t)}function Rm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}var Lm=function(s,a,r,n,i){var l=As(s,lx),c=As(s,cd),o=[].concat(Uv(l),Uv(c)),d=As(s,dd),u="".concat(n,"Id"),m=n[0],h=a;if(o.length&&(h=o.reduce(function(p,g){if(g.props[u]===r&&ia(g.props,"extendDomain")&&xe(g.props[m])){var w=g.props[m];return[Math.min(p[0],w),Math.max(p[1],w)]}return p},h)),d.length){var x="".concat(m,"1"),f="".concat(m,"2");h=d.reduce(function(p,g){if(g.props[u]===r&&ia(g.props,"extendDomain")&&xe(g.props[x])&&xe(g.props[f])){var w=g.props[x],S=g.props[f];return[Math.min(p[0],w,S),Math.max(p[1],w,S)]}return p},h)}return i&&i.length&&(h=i.reduce(function(p,g){return xe(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},h)),h},EN={exports:{}};(function(t){var s=Object.prototype.hasOwnProperty,a="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(a=!1));function n(o,d,u){this.fn=o,this.context=d,this.once=u||!1}function i(o,d,u,m,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var x=new n(u,m||o,h),f=a?a+d:d;return o._events[f]?o._events[f].fn?o._events[f]=[o._events[f],x]:o._events[f].push(x):(o._events[f]=x,o._eventsCount++),o}function l(o,d){--o._eventsCount===0?o._events=new r:delete o._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],u,m;if(this._eventsCount===0)return d;for(m in u=this._events)s.call(u,m)&&d.push(a?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},c.prototype.listeners=function(d){var u=a?a+d:d,m=this._events[u];if(!m)return[];if(m.fn)return[m.fn];for(var h=0,x=m.length,f=new Array(x);h<x;h++)f[h]=m[h].fn;return f},c.prototype.listenerCount=function(d){var u=a?a+d:d,m=this._events[u];return m?m.fn?1:m.length:0},c.prototype.emit=function(d,u,m,h,x,f){var p=a?a+d:d;if(!this._events[p])return!1;var g=this._events[p],w=arguments.length,S,b;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),w){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,m),!0;case 4:return g.fn.call(g.context,u,m,h),!0;case 5:return g.fn.call(g.context,u,m,h,x),!0;case 6:return g.fn.call(g.context,u,m,h,x,f),!0}for(b=1,S=new Array(w-1);b<w;b++)S[b-1]=arguments[b];g.fn.apply(g.context,S)}else{var A=g.length,v;for(b=0;b<A;b++)switch(g[b].once&&this.removeListener(d,g[b].fn,void 0,!0),w){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,u);break;case 3:g[b].fn.call(g[b].context,u,m);break;case 4:g[b].fn.call(g[b].context,u,m,h);break;default:if(!S)for(v=1,S=new Array(w-1);v<w;v++)S[v-1]=arguments[v];g[b].fn.apply(g[b].context,S)}}return!0},c.prototype.on=function(d,u,m){return i(this,d,u,m,!1)},c.prototype.once=function(d,u,m){return i(this,d,u,m,!0)},c.prototype.removeListener=function(d,u,m,h){var x=a?a+d:d;if(!this._events[x])return this;if(!u)return l(this,x),this;var f=this._events[x];if(f.fn)f.fn===u&&(!h||f.once)&&(!m||f.context===m)&&l(this,x);else{for(var p=0,g=[],w=f.length;p<w;p++)(f[p].fn!==u||h&&!f[p].once||m&&f[p].context!==m)&&g.push(f[p]);g.length?this._events[x]=g.length===1?g[0]:g:l(this,x)}return this},c.prototype.removeAllListeners=function(d){var u;return d?(u=a?a+d:d,this._events[u]&&l(this,u)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=a,c.EventEmitter=c,t.exports=c})(EN);var MK=EN.exports;const $K=ht(MK);var Kd=new $K,Hd="recharts.syncMouseEvents";function ul(t){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ul(t)}function RK(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function zv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,IN(r.key),r)}}function LK(t,s,a){return s&&zv(t.prototype,s),a&&zv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vd(t,s,a){return s=IN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function IN(t){var s=FK(t,"string");return ul(s)=="symbol"?s:s+""}function FK(t,s){if(ul(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var BK=function(){function t(){RK(this,t),Vd(this,"activeIndex",0),Vd(this,"coordinateList",[]),Vd(this,"layout","horizontal")}return LK(t,[{key:"setDetails",value:function(a){var r,n=a.coordinateList,i=n===void 0?null:n,l=a.container,c=l===void 0?null:l,o=a.layout,d=o===void 0?null:o,u=a.offset,m=u===void 0?null:u,h=a.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=c??this.container,this.layout=d??this.layout,this.offset=m??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(a){if(this.coordinateList.length!==0)switch(a.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(a){this.activeIndex=a}},{key:"spoofMouse",value:function(){var a,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var n=this.container.getBoundingClientRect(),i=n.x,l=n.y,c=n.height,o=this.coordinateList[this.activeIndex].coordinate,d=((a=window)===null||a===void 0?void 0:a.scrollX)||0,u=((r=window)===null||r===void 0?void 0:r.scrollY)||0,m=i+o+d,h=l+this.offset.top+c/2+u;this.mouseHandlerCallback({pageX:m,pageY:h})}}}])}();function UK(t,s,a){if(a==="number"&&s===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],n=t==null?void 0:t[1];if(r&&n&&xe(r)&&xe(n))return!0}return!1}function zK(t,s,a,r){var n=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?s.x-n:a.left+.5,y:t==="horizontal"?a.top+.5:s.y-n,width:t==="horizontal"?r:a.width-1,height:t==="horizontal"?a.height-1:r}}function DN(t){var s=t.cx,a=t.cy,r=t.radius,n=t.startAngle,i=t.endAngle,l=yt(s,a,r,n),c=yt(s,a,r,i);return{points:[l,c],cx:s,cy:a,radius:r,startAngle:n,endAngle:i}}function WK(t,s,a){var r,n,i,l;if(t==="horizontal")r=s.x,i=r,n=a.top,l=a.top+a.height;else if(t==="vertical")n=s.y,l=n,r=a.left,i=a.left+a.width;else if(s.cx!=null&&s.cy!=null)if(t==="centric"){var c=s.cx,o=s.cy,d=s.innerRadius,u=s.outerRadius,m=s.angle,h=yt(c,o,d,m),x=yt(c,o,u,m);r=h.x,n=h.y,i=x.x,l=x.y}else return DN(s);return[{x:r,y:n},{x:i,y:l}]}function ml(t){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ml(t)}function Wv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function Ul(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Wv(Object(a),!0).forEach(function(r){qK(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Wv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function qK(t,s,a){return s=KK(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function KK(t){var s=HK(t,"string");return ml(s)=="symbol"?s:s+""}function HK(t,s){if(ml(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function VK(t){var s,a,r=t.element,n=t.tooltipEventType,i=t.isActive,l=t.activeCoordinate,c=t.activePayload,o=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,m=t.layout,h=t.chartName,x=(s=r.props.cursor)!==null&&s!==void 0?s:(a=r.type.defaultProps)===null||a===void 0?void 0:a.cursor;if(!r||!x||!i||!l||h!=="ScatterChart"&&n!=="axis")return null;var f,p=Cr;if(h==="ScatterChart")f=l,p=lz;else if(h==="BarChart")f=zK(m,l,o,u),p=Qh;else if(m==="radial"){var g=DN(l),w=g.cx,S=g.cy,b=g.radius,A=g.startAngle,v=g.endAngle;f={cx:w,cy:S,startAngle:A,endAngle:v,innerRadius:b,outerRadius:b},p=Cb}else f={points:WK(m,l,o)},p=Cr;var j=Ul(Ul(Ul(Ul({stroke:"#ccc",pointerEvents:"none"},o),f),Ce(x,!1)),{},{payload:c,payloadIndex:d,className:We("recharts-tooltip-cursor",x.className)});return y.isValidElement(x)?y.cloneElement(x,j):y.createElement(p,j)}var GK=["item"],ZK=["children","className","width","height","style","compact","title","desc"];function Bn(t){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Bn(t)}function tn(){return tn=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},tn.apply(this,arguments)}function qv(t,s){return JK(t)||XK(t,s)||$N(t,s)||YK()}function YK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XK(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var r,n,i,l,c=[],o=!0,d=!1;try{if(i=(a=a.call(t)).next,s===0){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=i.call(a)).done)&&(c.push(r.value),c.length!==s);o=!0);}catch(u){d=!0,n=u}finally{try{if(!o&&a.return!=null&&(l=a.return(),Object(l)!==l))return}finally{if(d)throw n}}return c}}function JK(t){if(Array.isArray(t))return t}function Kv(t,s){if(t==null)return{};var a=QK(t,s),r,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],!(s.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function QK(t,s){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(s.indexOf(r)>=0)continue;a[r]=t[r]}return a}function eH(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Hv(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RN(r.key),r)}}function tH(t,s,a){return s&&Hv(t.prototype,s),a&&Hv(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function sH(t,s,a){return s=io(s),aH(t,MN()?Reflect.construct(s,a||[],io(t).constructor):s.apply(t,a))}function aH(t,s){if(s&&(Bn(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rH(t)}function rH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MN=function(){return!!t})()}function io(t){return io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},io(t)}function nH(t,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(s&&s.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),s&&Fm(t,s)}function Fm(t,s){return Fm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Fm(t,s)}function Un(t){return cH(t)||lH(t)||$N(t)||iH()}function iH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $N(t,s){if(t){if(typeof t=="string")return Bm(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Bm(t,s)}}function lH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cH(t){if(Array.isArray(t))return Bm(t)}function Bm(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,r=new Array(s);a<s;a++)r[a]=t[a];return r}function Vv(t,s){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);s&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),a.push.apply(a,r)}return a}function re(t){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?Vv(Object(a),!0).forEach(function(r){Ie(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Vv(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Ie(t,s,a){return s=RN(s),s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}function RN(t){var s=oH(t,"string");return Bn(s)=="symbol"?s:s+""}function oH(t,s){if(Bn(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s||"default");if(Bn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}var dH={xAxis:["bottom","top"],yAxis:["left","right"]},uH={width:"100%",height:"100%"},LN={x:0,y:0};function zl(t){return t}var mH=function(s,a){return a==="horizontal"?s.x:a==="vertical"?s.y:a==="centric"?s.angle:s.radius},hH=function(s,a,r,n){var i=a.find(function(u){return u&&u.index===r});if(i){if(s==="horizontal")return{x:i.coordinate,y:n.y};if(s==="vertical")return{x:n.x,y:i.coordinate};if(s==="centric"){var l=i.coordinate,c=n.radius;return re(re(re({},n),yt(n.cx,n.cy,c,l)),{},{angle:l,radius:c})}var o=i.coordinate,d=n.angle;return re(re(re({},n),yt(n.cx,n.cy,o,d)),{},{angle:d,radius:o})}return LN},ud=function(s,a){var r=a.graphicalItems,n=a.dataStartIndex,i=a.dataEndIndex,l=(r??[]).reduce(function(c,o){var d=o.props.data;return d&&d.length?[].concat(Un(c),Un(d)):c},[]);return l.length>0?l:s&&s.length&&xe(n)&&xe(i)?s.slice(n,i+1):[]};function FN(t){return t==="number"?[0,"auto"]:void 0}var Um=function(s,a,r,n){var i=s.graphicalItems,l=s.tooltipAxis,c=ud(a,s);return r<0||!i||!i.length||r>=c.length?null:i.reduce(function(o,d){var u,m=(u=d.props.data)!==null&&u!==void 0?u:a;m&&s.dataStartIndex+s.dataEndIndex!==0&&s.dataEndIndex-s.dataStartIndex>=r&&(m=m.slice(s.dataStartIndex,s.dataEndIndex+1));var h;if(l.dataKey&&!l.allowDuplicatedCategory){var x=m===void 0?c:m;h=nc(x,l.dataKey,n)}else h=m&&m[r]||c[r];return h?[].concat(Un(o),[bb(d,h)]):o},[])},Gv=function(s,a,r,n){var i=n||{x:s.chartX,y:s.chartY},l=mH(i,r),c=s.orderedTooltipTicks,o=s.tooltipAxis,d=s.tooltipTicks,u=EF(l,c,d,o);if(u>=0&&d){var m=d[u]&&d[u].value,h=Um(s,a,u,m),x=hH(r,c,u,i);return{activeTooltipIndex:u,activeLabel:m,activePayload:h,activeCoordinate:x}}return null},xH=function(s,a){var r=a.axes,n=a.graphicalItems,i=a.axisType,l=a.axisIdKey,c=a.stackGroups,o=a.dataStartIndex,d=a.dataEndIndex,u=s.layout,m=s.children,h=s.stackOffset,x=fb(u,i);return r.reduce(function(f,p){var g,w=p.type.defaultProps!==void 0?re(re({},p.type.defaultProps),p.props):p.props,S=w.type,b=w.dataKey,A=w.allowDataOverflow,v=w.allowDuplicatedCategory,j=w.scale,N=w.ticks,O=w.includeHidden,C=w[l];if(f[C])return f;var D=ud(s.data,{graphicalItems:n.filter(function(se){var ve,Be=l in se.props?se.props[l]:(ve=se.type.defaultProps)===null||ve===void 0?void 0:ve[l];return Be===C}),dataStartIndex:o,dataEndIndex:d}),E=D.length,P,R,U;UK(w.domain,A,S)&&(P=em(w.domain,null,A),x&&(S==="number"||j!=="auto")&&(U=wi(D,b,"category")));var I=FN(S);if(!P||P.length===0){var L,Z=(L=w.domain)!==null&&L!==void 0?L:I;if(b){if(P=wi(D,b,S),S==="category"&&x){var q=k4(P);v&&q?(R=P,P=Hc(0,E)):v||(P=ig(Z,P,p).reduce(function(se,ve){return se.indexOf(ve)>=0?se:[].concat(Un(se),[ve])},[]))}else if(S==="category")v?P=P.filter(function(se){return se!==""&&!Fe(se)}):P=ig(Z,P,p).reduce(function(se,ve){return se.indexOf(ve)>=0||ve===""||Fe(ve)?se:[].concat(Un(se),[ve])},[]);else if(S==="number"){var z=RF(D,n.filter(function(se){var ve,Be,ae=l in se.props?se.props[l]:(ve=se.type.defaultProps)===null||ve===void 0?void 0:ve[l],Ee="hide"in se.props?se.props.hide:(Be=se.type.defaultProps)===null||Be===void 0?void 0:Be.hide;return ae===C&&(O||!Ee)}),b,i,u);z&&(P=z)}x&&(S==="number"||j!=="auto")&&(U=wi(D,b,"category"))}else x?P=Hc(0,E):c&&c[C]&&c[C].hasStack&&S==="number"?P=h==="expand"?[0,1]:yb(c[C].stackGroups,o,d):P=xb(D,n.filter(function(se){var ve=l in se.props?se.props[l]:se.type.defaultProps[l],Be="hide"in se.props?se.props.hide:se.type.defaultProps.hide;return ve===C&&(O||!Be)}),S,u,!0);if(S==="number")P=Lm(m,P,C,i,N),Z&&(P=em(Z,P,A));else if(S==="category"&&Z){var ne=Z,Y=P.every(function(se){return ne.indexOf(se)>=0});Y&&(P=ne)}}return re(re({},f),{},Ie({},C,re(re({},w),{},{axisType:i,domain:P,categoricalDomain:U,duplicateDomain:R,originalDomain:(g=w.domain)!==null&&g!==void 0?g:I,isCategorical:x,layout:u})))},{})},fH=function(s,a){var r=a.graphicalItems,n=a.Axis,i=a.axisType,l=a.axisIdKey,c=a.stackGroups,o=a.dataStartIndex,d=a.dataEndIndex,u=s.layout,m=s.children,h=ud(s.data,{graphicalItems:r,dataStartIndex:o,dataEndIndex:d}),x=h.length,f=fb(u,i),p=-1;return r.reduce(function(g,w){var S=w.type.defaultProps!==void 0?re(re({},w.type.defaultProps),w.props):w.props,b=S[l],A=FN("number");if(!g[b]){p++;var v;return f?v=Hc(0,x):c&&c[b]&&c[b].hasStack?(v=yb(c[b].stackGroups,o,d),v=Lm(m,v,b,i)):(v=em(A,xb(h,r.filter(function(j){var N,O,C=l in j.props?j.props[l]:(N=j.type.defaultProps)===null||N===void 0?void 0:N[l],D="hide"in j.props?j.props.hide:(O=j.type.defaultProps)===null||O===void 0?void 0:O.hide;return C===b&&!D}),"number",u),n.defaultProps.allowDataOverflow),v=Lm(m,v,b,i)),re(re({},g),{},Ie({},b,re(re({axisType:i},n.defaultProps),{},{hide:!0,orientation:ks(dH,"".concat(i,".").concat(p%2),null),domain:v,originalDomain:A,isCategorical:f,layout:u})))}return g},{})},pH=function(s,a){var r=a.axisType,n=r===void 0?"xAxis":r,i=a.AxisComp,l=a.graphicalItems,c=a.stackGroups,o=a.dataStartIndex,d=a.dataEndIndex,u=s.children,m="".concat(n,"Id"),h=As(u,i),x={};return h&&h.length?x=xH(s,{axes:h,graphicalItems:l,axisType:n,axisIdKey:m,stackGroups:c,dataStartIndex:o,dataEndIndex:d}):l&&l.length&&(x=fH(s,{Axis:i,graphicalItems:l,axisType:n,axisIdKey:m,stackGroups:c,dataStartIndex:o,dataEndIndex:d})),x},gH=function(s){var a=Ha(s),r=Sa(a,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Ah(r,function(n){return n.coordinate}),tooltipAxis:a,tooltipAxisBandSize:Dc(a,r)}},Zv=function(s){var a=s.children,r=s.defaultShowTooltip,n=bs(a,Tn),i=0,l=0;return s.data&&s.data.length!==0&&(l=s.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(i=n.props.startIndex),n.props.endIndex>=0&&(l=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:l,activeTooltipIndex:-1,isTooltipActive:!!r}},vH=function(s){return!s||!s.length?!1:s.some(function(a){var r=Aa(a&&a.type);return r&&r.indexOf("Bar")>=0})},Yv=function(s){return s==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:s==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:s==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},jH=function(s,a){var r=s.props,n=s.graphicalItems,i=s.xAxisMap,l=i===void 0?{}:i,c=s.yAxisMap,o=c===void 0?{}:c,d=r.width,u=r.height,m=r.children,h=r.margin||{},x=bs(m,Tn),f=bs(m,Ya),p=Object.keys(o).reduce(function(v,j){var N=o[j],O=N.orientation;return!N.mirror&&!N.hide?re(re({},v),{},Ie({},O,v[O]+N.width)):v},{left:h.left||0,right:h.right||0}),g=Object.keys(l).reduce(function(v,j){var N=l[j],O=N.orientation;return!N.mirror&&!N.hide?re(re({},v),{},Ie({},O,ks(v,"".concat(O))+N.height)):v},{top:h.top||0,bottom:h.bottom||0}),w=re(re({},g),p),S=w.bottom;x&&(w.bottom+=x.props.height||Tn.defaultProps.height),f&&a&&(w=MF(w,n,r,a));var b=d-w.left-w.right,A=u-w.top-w.bottom;return re(re({brushBottom:S},w),{},{width:Math.max(b,0),height:Math.max(A,0)})},yH=function(s,a){if(a==="xAxis")return s[a].width;if(a==="yAxis")return s[a].height},md=function(s){var a=s.chartName,r=s.GraphicalChild,n=s.defaultTooltipEventType,i=n===void 0?"axis":n,l=s.validateTooltipEventTypes,c=l===void 0?["axis"]:l,o=s.axisComponents,d=s.legendContent,u=s.formatAxisMap,m=s.defaultProps,h=function(w,S){var b=S.graphicalItems,A=S.stackGroups,v=S.offset,j=S.updateId,N=S.dataStartIndex,O=S.dataEndIndex,C=w.barSize,D=w.layout,E=w.barGap,P=w.barCategoryGap,R=w.maxBarSize,U=Yv(D),I=U.numericAxisName,L=U.cateAxisName,Z=vH(b),q=[];return b.forEach(function(z,ne){var Y=ud(w.data,{graphicalItems:[z],dataStartIndex:N,dataEndIndex:O}),se=z.type.defaultProps!==void 0?re(re({},z.type.defaultProps),z.props):z.props,ve=se.dataKey,Be=se.maxBarSize,ae=se["".concat(I,"Id")],Ee=se["".concat(L,"Id")],me={},ye=o.reduce(function(je,be){var $e=S["".concat(be.axisType,"Map")],Xe=se["".concat(be.axisType,"Id")];$e&&$e[Xe]||be.axisType==="zAxis"||Rr(!1);var ir=$e[Xe];return re(re({},je),{},Ie(Ie({},be.axisType,ir),"".concat(be.axisType,"Ticks"),Sa(ir)))},me),he=ye[L],Oe=ye["".concat(L,"Ticks")],ke=A&&A[ae]&&A[ae].hasStack&&HF(z,A[ae].stackGroups),M=Aa(z.type).indexOf("Bar")>=0,ue=Dc(he,Oe),fe=[],qe=Z&&IF({barSize:C,stackGroups:A,totalSize:yH(ye,L)});if(M){var Ge,it,Ue=Fe(Be)?R:Be,ee=(Ge=(it=Dc(he,Oe,!0))!==null&&it!==void 0?it:Ue)!==null&&Ge!==void 0?Ge:0;fe=DF({barGap:E,barCategoryGap:P,bandSize:ee!==ue?ee:ue,sizeList:qe[Ee],maxBarSize:Ue}),ee!==ue&&(fe=fe.map(function(je){return re(re({},je),{},{position:re(re({},je.position),{},{offset:je.position.offset-ee/2})})}))}var G=z&&z.type&&z.type.getComposedData;G&&q.push({props:re(re({},G(re(re({},ye),{},{displayedData:Y,props:w,dataKey:ve,item:z,bandSize:ue,barPosition:fe,offset:v,stackedData:ke,layout:D,dataStartIndex:N,dataEndIndex:O}))),{},Ie(Ie(Ie({key:z.key||"item-".concat(ne)},I,ye[I]),L,ye[L]),"animationId",j)),childIndex:R4(z,w.children),item:z})}),q},x=function(w,S){var b=w.props,A=w.dataStartIndex,v=w.dataEndIndex,j=w.updateId;if(!Zx({props:b}))return null;var N=b.children,O=b.layout,C=b.stackOffset,D=b.data,E=b.reverseStackOrder,P=Yv(O),R=P.numericAxisName,U=P.cateAxisName,I=As(N,r),L=qF(D,I,"".concat(R,"Id"),"".concat(U,"Id"),C,E),Z=o.reduce(function(se,ve){var Be="".concat(ve.axisType,"Map");return re(re({},se),{},Ie({},Be,pH(b,re(re({},ve),{},{graphicalItems:I,stackGroups:ve.axisType===R&&L,dataStartIndex:A,dataEndIndex:v}))))},{}),q=jH(re(re({},Z),{},{props:b,graphicalItems:I}),S==null?void 0:S.legendBBox);Object.keys(Z).forEach(function(se){Z[se]=u(b,Z[se],q,se.replace("Map",""),a)});var z=Z["".concat(U,"Map")],ne=gH(z),Y=h(b,re(re({},Z),{},{dataStartIndex:A,dataEndIndex:v,updateId:j,graphicalItems:I,stackGroups:L,offset:q}));return re(re({formattedGraphicalItems:Y,graphicalItems:I,offset:q,stackGroups:L},ne),Z)},f=function(g){function w(S){var b,A,v;return eH(this,w),v=sH(this,w,[S]),Ie(v,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ie(v,"accessibilityManager",new BK),Ie(v,"handleLegendBBoxUpdate",function(j){if(j){var N=v.state,O=N.dataStartIndex,C=N.dataEndIndex,D=N.updateId;v.setState(re({legendBBox:j},x({props:v.props,dataStartIndex:O,dataEndIndex:C,updateId:D},re(re({},v.state),{},{legendBBox:j}))))}}),Ie(v,"handleReceiveSyncEvent",function(j,N,O){if(v.props.syncId===j){if(O===v.eventEmitterSymbol&&typeof v.props.syncMethod!="function")return;v.applySyncEvent(N)}}),Ie(v,"handleBrushChange",function(j){var N=j.startIndex,O=j.endIndex;if(N!==v.state.dataStartIndex||O!==v.state.dataEndIndex){var C=v.state.updateId;v.setState(function(){return re({dataStartIndex:N,dataEndIndex:O},x({props:v.props,dataStartIndex:N,dataEndIndex:O,updateId:C},v.state))}),v.triggerSyncEvent({dataStartIndex:N,dataEndIndex:O})}}),Ie(v,"handleMouseEnter",function(j){var N=v.getMouseInfo(j);if(N){var O=re(re({},N),{},{isTooltipActive:!0});v.setState(O),v.triggerSyncEvent(O);var C=v.props.onMouseEnter;De(C)&&C(O,j)}}),Ie(v,"triggeredAfterMouseMove",function(j){var N=v.getMouseInfo(j),O=N?re(re({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};v.setState(O),v.triggerSyncEvent(O);var C=v.props.onMouseMove;De(C)&&C(O,j)}),Ie(v,"handleItemMouseEnter",function(j){v.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Ie(v,"handleItemMouseLeave",function(){v.setState(function(){return{isTooltipActive:!1}})}),Ie(v,"handleMouseMove",function(j){j.persist(),v.throttleTriggeredAfterMouseMove(j)}),Ie(v,"handleMouseLeave",function(j){v.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};v.setState(N),v.triggerSyncEvent(N);var O=v.props.onMouseLeave;De(O)&&O(N,j)}),Ie(v,"handleOuterEvent",function(j){var N=$4(j),O=ks(v.props,"".concat(N));if(N&&De(O)){var C,D;/.*touch.*/i.test(N)?D=v.getMouseInfo(j.changedTouches[0]):D=v.getMouseInfo(j),O((C=D)!==null&&C!==void 0?C:{},j)}}),Ie(v,"handleClick",function(j){var N=v.getMouseInfo(j);if(N){var O=re(re({},N),{},{isTooltipActive:!0});v.setState(O),v.triggerSyncEvent(O);var C=v.props.onClick;De(C)&&C(O,j)}}),Ie(v,"handleMouseDown",function(j){var N=v.props.onMouseDown;if(De(N)){var O=v.getMouseInfo(j);N(O,j)}}),Ie(v,"handleMouseUp",function(j){var N=v.props.onMouseUp;if(De(N)){var O=v.getMouseInfo(j);N(O,j)}}),Ie(v,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&v.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Ie(v,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&v.handleMouseDown(j.changedTouches[0])}),Ie(v,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&v.handleMouseUp(j.changedTouches[0])}),Ie(v,"handleDoubleClick",function(j){var N=v.props.onDoubleClick;if(De(N)){var O=v.getMouseInfo(j);N(O,j)}}),Ie(v,"handleContextMenu",function(j){var N=v.props.onContextMenu;if(De(N)){var O=v.getMouseInfo(j);N(O,j)}}),Ie(v,"triggerSyncEvent",function(j){v.props.syncId!==void 0&&Kd.emit(Hd,v.props.syncId,j,v.eventEmitterSymbol)}),Ie(v,"applySyncEvent",function(j){var N=v.props,O=N.layout,C=N.syncMethod,D=v.state.updateId,E=j.dataStartIndex,P=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)v.setState(re({dataStartIndex:E,dataEndIndex:P},x({props:v.props,dataStartIndex:E,dataEndIndex:P,updateId:D},v.state)));else if(j.activeTooltipIndex!==void 0){var R=j.chartX,U=j.chartY,I=j.activeTooltipIndex,L=v.state,Z=L.offset,q=L.tooltipTicks;if(!Z)return;if(typeof C=="function")I=C(q,j);else if(C==="value"){I=-1;for(var z=0;z<q.length;z++)if(q[z].value===j.activeLabel){I=z;break}}var ne=re(re({},Z),{},{x:Z.left,y:Z.top}),Y=Math.min(R,ne.x+ne.width),se=Math.min(U,ne.y+ne.height),ve=q[I]&&q[I].value,Be=Um(v.state,v.props.data,I),ae=q[I]?{x:O==="horizontal"?q[I].coordinate:Y,y:O==="horizontal"?se:q[I].coordinate}:LN;v.setState(re(re({},j),{},{activeLabel:ve,activeCoordinate:ae,activePayload:Be,activeTooltipIndex:I}))}else v.setState(j)}),Ie(v,"renderCursor",function(j){var N,O=v.state,C=O.isTooltipActive,D=O.activeCoordinate,E=O.activePayload,P=O.offset,R=O.activeTooltipIndex,U=O.tooltipAxisBandSize,I=v.getTooltipEventType(),L=(N=j.props.active)!==null&&N!==void 0?N:C,Z=v.props.layout,q=j.key||"_recharts-cursor";return $.createElement(VK,{key:q,activeCoordinate:D,activePayload:E,activeTooltipIndex:R,chartName:a,element:j,isActive:L,layout:Z,offset:P,tooltipAxisBandSize:U,tooltipEventType:I})}),Ie(v,"renderPolarAxis",function(j,N,O){var C=ks(j,"type.axisType"),D=ks(v.state,"".concat(C,"Map")),E=j.type.defaultProps,P=E!==void 0?re(re({},E),j.props):j.props,R=D&&D[P["".concat(C,"Id")]];return y.cloneElement(j,re(re({},R),{},{className:We(C,R.className),key:j.key||"".concat(N,"-").concat(O),ticks:Sa(R,!0)}))}),Ie(v,"renderPolarGrid",function(j){var N=j.props,O=N.radialLines,C=N.polarAngles,D=N.polarRadius,E=v.state,P=E.radiusAxisMap,R=E.angleAxisMap,U=Ha(P),I=Ha(R),L=I.cx,Z=I.cy,q=I.innerRadius,z=I.outerRadius;return y.cloneElement(j,{polarAngles:Array.isArray(C)?C:Sa(I,!0).map(function(ne){return ne.coordinate}),polarRadius:Array.isArray(D)?D:Sa(U,!0).map(function(ne){return ne.coordinate}),cx:L,cy:Z,innerRadius:q,outerRadius:z,key:j.key||"polar-grid",radialLines:O})}),Ie(v,"renderLegend",function(){var j=v.state.formattedGraphicalItems,N=v.props,O=N.children,C=N.width,D=N.height,E=v.props.margin||{},P=C-(E.left||0)-(E.right||0),R=mb({children:O,formattedGraphicalItems:j,legendWidth:P,legendContent:d});if(!R)return null;var U=R.item,I=Kv(R,GK);return y.cloneElement(U,re(re({},I),{},{chartWidth:C,chartHeight:D,margin:E,onBBoxUpdate:v.handleLegendBBoxUpdate}))}),Ie(v,"renderTooltip",function(){var j,N=v.props,O=N.children,C=N.accessibilityLayer,D=bs(O,Xt);if(!D)return null;var E=v.state,P=E.isTooltipActive,R=E.activeCoordinate,U=E.activePayload,I=E.activeLabel,L=E.offset,Z=(j=D.props.active)!==null&&j!==void 0?j:P;return y.cloneElement(D,{viewBox:re(re({},L),{},{x:L.left,y:L.top}),active:Z,label:I,payload:Z?U:[],coordinate:R,accessibilityLayer:C})}),Ie(v,"renderBrush",function(j){var N=v.props,O=N.margin,C=N.data,D=v.state,E=D.offset,P=D.dataStartIndex,R=D.dataEndIndex,U=D.updateId;return y.cloneElement(j,{key:j.key||"_recharts-brush",onChange:Rl(v.handleBrushChange,j.props.onChange),data:C,x:xe(j.props.x)?j.props.x:E.left,y:xe(j.props.y)?j.props.y:E.top+E.height+E.brushBottom-(O.bottom||0),width:xe(j.props.width)?j.props.width:E.width,startIndex:P,endIndex:R,updateId:"brush-".concat(U)})}),Ie(v,"renderReferenceElement",function(j,N,O){if(!j)return null;var C=v,D=C.clipPathId,E=v.state,P=E.xAxisMap,R=E.yAxisMap,U=E.offset,I=j.type.defaultProps||{},L=j.props,Z=L.xAxisId,q=Z===void 0?I.xAxisId:Z,z=L.yAxisId,ne=z===void 0?I.yAxisId:z;return y.cloneElement(j,{key:j.key||"".concat(N,"-").concat(O),xAxis:P[q],yAxis:R[ne],viewBox:{x:U.left,y:U.top,width:U.width,height:U.height},clipPathId:D})}),Ie(v,"renderActivePoints",function(j){var N=j.item,O=j.activePoint,C=j.basePoint,D=j.childIndex,E=j.isRange,P=[],R=N.props.key,U=N.item.type.defaultProps!==void 0?re(re({},N.item.type.defaultProps),N.item.props):N.item.props,I=U.activeDot,L=U.dataKey,Z=re(re({index:D,dataKey:L,cx:O.x,cy:O.y,r:4,fill:Jh(N.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},Ce(I,!1)),ic(I));return P.push(w.renderActiveDot(I,Z,"".concat(R,"-activePoint-").concat(D))),C?P.push(w.renderActiveDot(I,re(re({},Z),{},{cx:C.x,cy:C.y}),"".concat(R,"-basePoint-").concat(D))):E&&P.push(null),P}),Ie(v,"renderGraphicChild",function(j,N,O){var C=v.filterFormatItem(j,N,O);if(!C)return null;var D=v.getTooltipEventType(),E=v.state,P=E.isTooltipActive,R=E.tooltipAxis,U=E.activeTooltipIndex,I=E.activeLabel,L=v.props.children,Z=bs(L,Xt),q=C.props,z=q.points,ne=q.isRange,Y=q.baseLine,se=C.item.type.defaultProps!==void 0?re(re({},C.item.type.defaultProps),C.item.props):C.item.props,ve=se.activeDot,Be=se.hide,ae=se.activeBar,Ee=se.activeShape,me=!!(!Be&&P&&Z&&(ve||ae||Ee)),ye={};D!=="axis"&&Z&&Z.props.trigger==="click"?ye={onClick:Rl(v.handleItemMouseEnter,j.props.onClick)}:D!=="axis"&&(ye={onMouseLeave:Rl(v.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:Rl(v.handleItemMouseEnter,j.props.onMouseEnter)});var he=y.cloneElement(j,re(re({},C.props),ye));function Oe(be){return typeof R.dataKey=="function"?R.dataKey(be.payload):null}if(me)if(U>=0){var ke,M;if(R.dataKey&&!R.allowDuplicatedCategory){var ue=typeof R.dataKey=="function"?Oe:"payload.".concat(R.dataKey.toString());ke=nc(z,ue,I),M=ne&&Y&&nc(Y,ue,I)}else ke=z==null?void 0:z[U],M=ne&&Y&&Y[U];if(Ee||ae){var fe=j.props.activeIndex!==void 0?j.props.activeIndex:U;return[y.cloneElement(j,re(re(re({},C.props),ye),{},{activeIndex:fe})),null,null]}if(!Fe(ke))return[he].concat(Un(v.renderActivePoints({item:C,activePoint:ke,basePoint:M,childIndex:U,isRange:ne})))}else{var qe,Ge=(qe=v.getItemByXY(v.state.activeCoordinate))!==null&&qe!==void 0?qe:{graphicalItem:he},it=Ge.graphicalItem,Ue=it.item,ee=Ue===void 0?j:Ue,G=it.childIndex,je=re(re(re({},C.props),ye),{},{activeIndex:G});return[y.cloneElement(ee,je),null,null]}return ne?[he,null,null]:[he,null]}),Ie(v,"renderCustomized",function(j,N,O){return y.cloneElement(j,re(re({key:"recharts-customized-".concat(O)},v.props),v.state))}),Ie(v,"renderMap",{CartesianGrid:{handler:zl,once:!0},ReferenceArea:{handler:v.renderReferenceElement},ReferenceLine:{handler:zl},ReferenceDot:{handler:v.renderReferenceElement},XAxis:{handler:zl},YAxis:{handler:zl},Brush:{handler:v.renderBrush,once:!0},Bar:{handler:v.renderGraphicChild},Line:{handler:v.renderGraphicChild},Area:{handler:v.renderGraphicChild},Radar:{handler:v.renderGraphicChild},RadialBar:{handler:v.renderGraphicChild},Scatter:{handler:v.renderGraphicChild},Pie:{handler:v.renderGraphicChild},Funnel:{handler:v.renderGraphicChild},Tooltip:{handler:v.renderCursor,once:!0},PolarGrid:{handler:v.renderPolarGrid,once:!0},PolarAngleAxis:{handler:v.renderPolarAxis},PolarRadiusAxis:{handler:v.renderPolarAxis},Customized:{handler:v.renderCustomized}}),v.clipPathId="".concat((b=S.id)!==null&&b!==void 0?b:Br("recharts"),"-clip"),v.throttleTriggeredAfterMouseMove=uy(v.triggeredAfterMouseMove,(A=S.throttleDelay)!==null&&A!==void 0?A:1e3/60),v.state={},v}return nH(w,g),tH(w,[{key:"componentDidMount",value:function(){var b,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,A=b.children,v=b.data,j=b.height,N=b.layout,O=bs(A,Xt);if(O){var C=O.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,E=Um(this.state,v,C,D),P=this.state.tooltipTicks[C].coordinate,R=(this.state.offset.top+j)/2,U=N==="horizontal",I=U?{x:P,y:R}:{y:P,x:R},L=this.state.formattedGraphicalItems.find(function(q){var z=q.item;return z.type.name==="Scatter"});L&&(I=re(re({},I),L.props.points[C].tooltipPosition),E=L.props.points[C].tooltipPayload);var Z={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:D,activePayload:E,activeCoordinate:I};this.setState(Z),this.renderCursor(O),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var v,j;this.accessibilityManager.setDetails({offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(b){fu([bs(b.children,Xt)],[bs(this.props.children,Xt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=bs(this.props.children,Xt);if(b&&typeof b.props.shared=="boolean"){var A=b.props.shared?"axis":"item";return c.indexOf(A)>=0?A:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var A=this.container,v=A.getBoundingClientRect(),j=iM(v),N={chartX:Math.round(b.pageX-j.left),chartY:Math.round(b.pageY-j.top)},O=v.width/A.offsetWidth||1,C=this.inRange(N.chartX,N.chartY,O);if(!C)return null;var D=this.state,E=D.xAxisMap,P=D.yAxisMap,R=this.getTooltipEventType(),U=Gv(this.state,this.props.data,this.props.layout,C);if(R!=="axis"&&E&&P){var I=Ha(E).scale,L=Ha(P).scale,Z=I&&I.invert?I.invert(N.chartX):null,q=L&&L.invert?L.invert(N.chartY):null;return re(re({},N),{},{xValue:Z,yValue:q},U)}return U?re(re({},N),U):null}},{key:"inRange",value:function(b,A){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,N=b/v,O=A/v;if(j==="horizontal"||j==="vertical"){var C=this.state.offset,D=N>=C.left&&N<=C.left+C.width&&O>=C.top&&O<=C.top+C.height;return D?{x:N,y:O}:null}var E=this.state,P=E.angleAxisMap,R=E.radiusAxisMap;if(P&&R){var U=Ha(P);return og({x:N,y:O},U)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,A=this.getTooltipEventType(),v=bs(b,Xt),j={};v&&A==="axis"&&(v.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=ic(this.props,this.handleOuterEvent);return re(re({},N),j)}},{key:"addListener",value:function(){Kd.on(Hd,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Kd.removeListener(Hd,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,A,v){for(var j=this.state.formattedGraphicalItems,N=0,O=j.length;N<O;N++){var C=j[N];if(C.item===b||C.props.key===b.key||A===Aa(C.item.type)&&v===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,A=this.state.offset,v=A.left,j=A.top,N=A.height,O=A.width;return $.createElement("defs",null,$.createElement("clipPath",{id:b},$.createElement("rect",{x:v,y:j,height:N,width:O})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(A,v){var j=qv(v,2),N=j[0],O=j[1];return re(re({},A),{},Ie({},N,O.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(A,v){var j=qv(v,2),N=j[0],O=j[1];return re(re({},A),{},Ie({},N,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[b])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(b){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[b])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(b){var A=this.state,v=A.formattedGraphicalItems,j=A.activeItem;if(v&&v.length)for(var N=0,O=v.length;N<O;N++){var C=v[N],D=C.props,E=C.item,P=E.type.defaultProps!==void 0?re(re({},E.type.defaultProps),E.props):E.props,R=Aa(E.type);if(R==="Bar"){var U=(D.data||[]).find(function(q){return UU(b,q)});if(U)return{graphicalItem:C,payload:U}}else if(R==="RadialBar"){var I=(D.data||[]).find(function(q){return og(b,q)});if(I)return{graphicalItem:C,payload:I}}else if(rd(C,j)||nd(C,j)||il(C,j)){var L=P9({graphicalItem:C,activeTooltipItem:j,itemData:P.data}),Z=P.activeIndex===void 0?L:P.activeIndex;return{graphicalItem:re(re({},C),{},{childIndex:Z}),payload:il(C,j)?P.data[L]:C.props.data[L]}}}return null}},{key:"render",value:function(){var b=this;if(!Zx(this))return null;var A=this.props,v=A.children,j=A.className,N=A.width,O=A.height,C=A.style,D=A.compact,E=A.title,P=A.desc,R=Kv(A,ZK),U=Ce(R,!1);if(D)return $.createElement(vv,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(gu,tn({},U,{width:N,height:O,title:E,desc:P}),this.renderClipPath(),Xx(v,this.renderMap)));if(this.props.accessibilityLayer){var I,L;U.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,U.role=(L=this.props.role)!==null&&L!==void 0?L:"application",U.onKeyDown=function(q){b.accessibilityManager.keyboardEvent(q)},U.onFocus=function(){b.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return $.createElement(vv,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",tn({className:We("recharts-wrapper",j),style:re({position:"relative",cursor:"default",width:N,height:O},C)},Z,{ref:function(z){b.container=z}}),$.createElement(gu,tn({},U,{width:N,height:O,title:E,desc:P,style:uH}),this.renderClipPath(),Xx(v,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(y.Component);Ie(f,"displayName",a),Ie(f,"defaultProps",re({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},m)),Ie(f,"getDerivedStateFromProps",function(g,w){var S=g.dataKey,b=g.data,A=g.children,v=g.width,j=g.height,N=g.layout,O=g.stackOffset,C=g.margin,D=w.dataStartIndex,E=w.dataEndIndex;if(w.updateId===void 0){var P=Zv(g);return re(re(re({},P),{},{updateId:0},x(re(re({props:g},P),{},{updateId:0}),w)),{},{prevDataKey:S,prevData:b,prevWidth:v,prevHeight:j,prevLayout:N,prevStackOffset:O,prevMargin:C,prevChildren:A})}if(S!==w.prevDataKey||b!==w.prevData||v!==w.prevWidth||j!==w.prevHeight||N!==w.prevLayout||O!==w.prevStackOffset||!sn(C,w.prevMargin)){var R=Zv(g),U={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},I=re(re({},Gv(w,b,N)),{},{updateId:w.updateId+1}),L=re(re(re({},R),U),I);return re(re(re({},L),x(re({props:g},L),w)),{},{prevDataKey:S,prevData:b,prevWidth:v,prevHeight:j,prevLayout:N,prevStackOffset:O,prevMargin:C,prevChildren:A})}if(!fu(A,w.prevChildren)){var Z,q,z,ne,Y=bs(A,Tn),se=Y&&(Z=(q=Y.props)===null||q===void 0?void 0:q.startIndex)!==null&&Z!==void 0?Z:D,ve=Y&&(z=(ne=Y.props)===null||ne===void 0?void 0:ne.endIndex)!==null&&z!==void 0?z:E,Be=se!==D||ve!==E,ae=!Fe(b),Ee=ae&&!Be?w.updateId:w.updateId+1;return re(re({updateId:Ee},x(re(re({props:g},w),{},{updateId:Ee,dataStartIndex:se,dataEndIndex:ve}),w)),{},{prevChildren:A,dataStartIndex:se,dataEndIndex:ve})}return null}),Ie(f,"renderActiveDot",function(g,w,S){var b;return y.isValidElement(g)?b=y.cloneElement(g,w):De(g)?b=g(w):b=$.createElement(Al,w),$.createElement(Ze,{className:"recharts-active-dot",key:S},b)});var p=y.forwardRef(function(w,S){return $.createElement(f,tn({},w,{ref:S}))});return p.displayName=f.displayName,p},BN=md({chartName:"LineChart",GraphicalChild:er,axisComponents:[{axisType:"xAxis",AxisComp:Ks},{axisType:"yAxis",AxisComp:Ds}],formatAxisMap:ex}),Gd=md({chartName:"BarChart",GraphicalChild:sa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ks},{axisType:"yAxis",AxisComp:Ds}],formatAxisMap:ex}),UN=md({chartName:"PieChart",GraphicalChild:pa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:ad},{axisType:"radiusAxis",AxisComp:td}],formatAxisMap:sB,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),bH=md({chartName:"AreaChart",GraphicalChild:Ra,axisComponents:[{axisType:"xAxis",AxisComp:Ks},{axisType:"yAxis",AxisComp:Ds}],formatAxisMap:ex});const NH=()=>{const{user:t,logout:s}=Xs();console.log("📊 Dashboard component rendering...");const a=()=>{s()};if(!t)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600",children:"Please log in to access the dashboard."})]})});const r=[{name:"Bot Handled",value:68,fill:"hsl(var(--chart-1))"},{name:"Agent Handled",value:32,fill:"hsl(var(--chart-4))"}],n=[{hour:"00:00",bot:45,agent:12},{hour:"04:00",bot:32,agent:8},{hour:"08:00",bot:89,agent:34},{hour:"12:00",bot:120,agent:56},{hour:"16:00",bot:98,agent:45},{hour:"20:00",bot:67,agent:23}],i=[{name:"Customer Support",count:289,percentage:24,trending:"stable"},{name:"Technical Support",count:198,percentage:16,trending:"down"},{name:"Product Inquiry",count:156,percentage:13,trending:"up"},{name:"Billing Question",count:134,percentage:11,trending:"stable"},{name:"Account Access",count:98,percentage:8,trending:"down"}];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Dashboard Overview"}),e.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"User","!"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(t==null?void 0:t.full_name)||(t==null?void 0:t.username)||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:(t==null?void 0:t.email)||"No email"})]}),e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Today"]}),e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsx(k,{variant:"destructive",size:"sm",onClick:a,children:"Logout"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total Sessions Today"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"1,247"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(rs,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs text-green-500",children:"+15% from yesterday"})]})]}),e.jsx(Le,{className:"w-10 h-10 text-blue-500 opacity-20"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Avg Satisfaction"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"4.7"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.jsx(os,{className:"w-3 h-3 text-yellow-500"})]})]}),e.jsx(rw,{className:"w-10 h-10 text-green-500 opacity-20"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Handover Count"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"89"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(nt,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-xs text-yellow-500",children:"32% of sessions"})]})]}),e.jsx(Pe,{className:"w-10 h-10 text-purple-500 opacity-20"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Active Agents"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:"12/15"}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(da,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-xs text-green-500",children:"80% online"})]})]}),e.jsx(nw,{className:"w-10 h-10 text-indigo-500 opacity-20"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(F,{className:"lg:col-span-2",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Bot vs Agent Sessions"}),e.jsx(Q,{children:"Session distribution over time"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[300px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(bH,{data:n,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorBot",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-1))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-1))",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorAgent",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-4))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-4))",stopOpacity:0})]})]}),e.jsx(Nr,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Ks,{dataKey:"hour",className:"text-xs"}),e.jsx(Ds,{className:"text-xs"}),e.jsx(Xt,{content:e.jsx(Ka,{})}),e.jsx(Ra,{type:"monotone",dataKey:"bot",stackId:"1",stroke:"hsl(var(--chart-1))",fill:"url(#colorBot)"}),e.jsx(Ra,{type:"monotone",dataKey:"agent",stackId:"1",stroke:"hsl(var(--chart-4))",fill:"url(#colorAgent)"}),e.jsx(Ya,{})]})})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Session Distribution"}),e.jsx(Q,{children:"Bot vs Agent handling"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[250px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(UN,{children:[e.jsx(pa,{data:r,cx:"50%",cy:"50%",labelLine:!1,label:({name:l,percent:c})=>`${l} ${(c*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:r.map((l,c)=>e.jsx(yl,{fill:l.fill},`cell-${c}`))}),e.jsx(Xt,{content:e.jsx(Ka,{})})]})})})})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Top Intents"}),e.jsx(Q,{children:"Most frequently asked questions"})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Intent"}),e.jsx(J,{children:"Count"}),e.jsx(J,{children:"Percentage"}),e.jsx(J,{children:"Trend"})]})}),e.jsx(mt,{children:i.map(l=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:l.name}),e.jsx(X,{children:l.count}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:`${l.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[l.percentage,"%"]})]})}),e.jsxs(X,{children:[l.trending==="up"&&e.jsx(rs,{className:"w-4 h-4 text-green-500"}),l.trending==="down"&&e.jsx(rs,{className:"w-4 h-4 text-red-500 rotate-180"}),l.trending==="stable"&&e.jsx("div",{className:"w-4 h-4 text-gray-500",children:"—"})]})]},l.name))})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common tasks and shortcuts"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex flex-col items-start gap-2",children:[e.jsx(Le,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Handle Chats"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Respond to customer inquiries"})]})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex flex-col items-start gap-2",children:[e.jsx(rs,{className:"w-6 h-6 text-green-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"View Analytics"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Check performance metrics"})]})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex flex-col items-start gap-2",children:[e.jsx(Pe,{className:"w-6 h-6 text-purple-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Manage Users"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Add, edit, or remove users"})]})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex flex-col items-start gap-2",children:[e.jsx(os,{className:"w-6 h-6 text-yellow-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Knowledge Base"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Manage articles and documentation"})]})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex flex-col items-start gap-2",children:[e.jsx(da,{className:"w-6 h-6 text-indigo-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Role Management"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Manage roles and permissions"})]})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex flex-col items-start gap-2",children:[e.jsx(nt,{className:"w-6 h-6 text-gray-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Settings"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Configure system settings"})]})]})]})})]})]})})},wH=({onClose:t,onSuccess:s})=>{const[a,r]=y.useState("initializing"),[n,i]=y.useState(""),[l,c]=y.useState(""),[o,d]=y.useState(""),[u,m]=y.useState(120),[h,x]=y.useState(!1);y.useEffect(()=>{if(a==="initializing"){x(!0);const b=setTimeout(()=>{const A=`session_${Date.now()}`;d(A),i(`https://wa.me/qr/${A}_${Date.now()}`),r("qr-ready"),x(!1),f()},3e3);return()=>clearTimeout(b)}},[a]);const f=()=>{const b=setInterval(()=>{m(v=>v<=1?(clearInterval(b),a!=="connected"&&a!=="completed"&&r("timeout"),0):v-1)},1e3),A=setTimeout(()=>{(a==="qr-ready"||a==="scanning")&&(r("connected"),clearInterval(b))},15e3);return()=>{clearInterval(b),clearTimeout(A)}},p=()=>{r("initializing"),m(120),i(""),d("")},g=()=>{if(!l.trim()){alert("Nama inbox wajib diisi");return}x(!0),setTimeout(()=>{r("completed"),x(!1),setTimeout(()=>{s==null||s({id:o,name:l,platform:"whatsapp",status:"connected",method:"qr_scan"})},2e3)},1500)},w=b=>{const A=Math.floor(b/60),v=b%60;return`${A}:${v.toString().padStart(2,"0")}`},S=()=>({initializing:0,"qr-ready":25,scanning:50,connected:75,naming:90,completed:100})[a]||0;return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Hubungkan WhatsApp"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"WAHA Session - QR Code"})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:t,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"px-6 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Progress:"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[S(),"%"]})]}),e.jsx(us,{value:S(),className:"mb-4"})]}),e.jsx("div",{className:"px-6 mb-4",children:e.jsxs(is,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Qe,{className:"h-4 w-4 text-orange-600"}),e.jsxs(ls,{className:"text-orange-800",children:[e.jsx("strong",{children:"Penting:"})," Metode WAHA Session bersifat tidak resmi dan memiliki risiko pemblokiran oleh WhatsApp. Cocok untuk skala kecil atau masa percobaan."]})]})}),e.jsxs("div",{className:"px-6 pb-6",children:[a==="initializing"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin mx-auto",children:e.jsx(ws,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Memulai Sesi WAHA"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform sedang membuat sesi baru di latar belakang..."})]})]}),a==="qr-ready"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Pindai QR Code"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Gunakan aplikasi WhatsApp Anda untuk memindai QR code di bawah ini"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-dashed border-gray-300 text-center",children:[e.jsx(aj,{className:"w-32 h-32 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"QR Code akan muncul di sini"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Session ID: ",o]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Langkah-langkah:"}),e.jsxs("ol",{className:"text-sm space-y-2 list-decimal list-inside text-muted-foreground",children:[e.jsx("li",{children:"Buka aplikasi WhatsApp di ponsel Anda"}),e.jsxs("li",{children:["Masuk ke ",e.jsx("strong",{children:"Setelan"})," → ",e.jsx("strong",{children:"Perangkat Tertaut"})]}),e.jsxs("li",{children:["Klik ",e.jsx("strong",{children:'"Tautkan Perangkat"'})]}),e.jsx("li",{children:"Arahkan kamera untuk memindai QR code di atas"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[e.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{children:"QR Code kedaluwarsa dalam: "}),e.jsx(W,{variant:"outline",children:w(u)})]}),e.jsxs(k,{variant:"outline",onClick:p,className:"w-full",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Generate QR Baru"]})]}),a==="scanning"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-pulse",children:e.jsx(co,{className:"w-12 h-12 mx-auto text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Mendeteksi Koneksi..."}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"QR Code telah dipindai. Tunggu konfirmasi koneksi..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm",children:[e.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{children:["Timeout dalam: ",w(u)]})]})]}),a==="connected"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Me,{className:"w-12 h-12 mx-auto text-green-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Koneksi Berhasil!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"WhatsApp telah terhubung dengan platform. Berikan nama untuk inbox ini."})]}),e.jsx(k,{onClick:()=>r("naming"),className:"w-full",children:"Lanjutkan"})]}),a==="naming"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"w-8 h-8 mx-auto text-primary mb-2"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Beri Nama Inbox"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Berikan nama yang mudah dikenali untuk koneksi WhatsApp ini"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"inboxName",children:"Nama Inbox"}),e.jsx(K,{id:"inboxName",placeholder:"Contoh: CS Tim Marketing, Nomor Admin 1",value:l,onChange:b=>c(b.target.value)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Nama ini akan muncul di daftar inbox Anda"})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-sm",children:"Ringkasan Koneksi:"}),e.jsxs("div",{className:"bg-muted p-3 rounded-lg space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Platform:"}),e.jsx("span",{className:"font-medium",children:"WhatsApp"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Metode:"}),e.jsx("span",{className:"font-medium",children:"QR Scan (WAHA)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Session ID:"}),e.jsx("span",{className:"font-mono text-xs",children:o})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status:"}),e.jsxs(W,{variant:"outline",className:"text-green-600",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Terhubung"]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",onClick:()=>r("connected"),className:"flex-1",children:"Kembali"}),e.jsx(k,{onClick:g,disabled:!l.trim()||h,className:"flex-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(ws,{className:"w-4 h-4 mr-2 animate-spin"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Simpan Inbox"]})})]})]}),a==="completed"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Me,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-green-700",children:"Inbox Berhasil Dibuat!"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:['"',l,'" telah terhubung dan siap digunakan.']})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-sm mb-2 text-blue-800",children:"Langkah Selanjutnya:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Atur AI Agent untuk otomatisasi respon"}),e.jsx("li",{children:"• Konfigurasi metode distribusi pesan"}),e.jsx("li",{children:"• Tetapkan divisi dan human agent"}),e.jsx("li",{children:"• Mulai menangani percakapan pelanggan"})]})]}),e.jsxs(k,{onClick:t,className:"w-full",children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Mulai Menggunakan Inbox"]})]}),a==="timeout"&&e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Je,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2 text-red-700",children:"Koneksi Timeout"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"QR Code telah kedaluwarsa. Silakan coba lagi untuk membuat koneksi baru."})]}),e.jsxs(k,{onClick:p,className:"w-full",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Coba Lagi"]})]})]})]})})},SH=({platformId:t,onBack:s,onEdit:a,onDelete:r,onConfigure:n,onManageAgents:i,onAISettings:l})=>{const o={"inbox-001":{id:"inbox-001",name:"CS Tim Marketing",platform:"whatsapp",status:"connected",method:"qr_scan",connectedAt:"2024-03-15 10:30:00",lastActivity:"2024-03-20 14:25:12",totalMessages:342,activeChats:8,assignedAgents:3,phoneNumber:"+62 812-3456-7890",description:"WhatsApp inbox untuk tim marketing menangani inquiry produk dan penjualan",configuration:{autoReply:!0,workingHours:"09:00 - 17:00",timezone:"Asia/Jakarta",language:"id",welcomeMessage:"Halo! Terima kasih telah menghubungi CS Marketing kami. Bagaimana kami bisa membantu Anda hari ini?"},agents:[{id:1,name:"Sarah Johnson",email:"sarah@company.com",status:"online",assignedChats:3},{id:2,name:"Mike Chen",email:"mike@company.com",status:"away",assignedChats:2},{id:3,name:"Lisa Wong",email:"lisa@company.com",status:"offline",assignedChats:0}],aiSettings:{enabled:!0,autoSuggest:!0,sentimentAnalysis:!0,languageDetection:!0,smartRouting:!1},metrics:{todayMessages:45,weeklyMessages:342,monthlyMessages:1456,avgResponseTime:"2.5 min",satisfactionScore:4.2,resolutionRate:89}}}[t];if(!o)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(nt,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Platform Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The platform you're looking for doesn't exist."}),e.jsxs(k,{onClick:s,children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back to Platforms"]})]});const d=h=>{const f={whatsapp:Le,webchat:Ss,facebook:Le}[h]||Le;return e.jsx(f,{className:"w-5 h-5"})},u=h=>{const x={connected:{variant:"green",color:"text-green-600",icon:Me},error:{variant:"red",color:"text-red-600",icon:Cs},disconnected:{variant:"default",color:"text-gray-600",icon:nt}},f=x[h]||x.disconnected,p=f.icon;return e.jsxs(W,{variant:f.variant,className:"capitalize",children:[e.jsx(p,{className:"w-3 h-3 mr-1"}),h]})},m=h=>{const x={online:"bg-green-100 text-green-700",away:"bg-yellow-100 text-yellow-700",offline:"bg-gray-100 text-gray-700"};return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x[h]}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full mr-1 ${h==="online"?"bg-green-500":h==="away"?"bg-yellow-500":"bg-gray-400"}`}),h]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{variant:"ghost",size:"sm",onClick:s,children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${o.platform==="whatsapp"?"bg-green-100":o.platform==="webchat"?"bg-blue-100":"bg-gray-100"}`,children:d(o.platform)}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:o.name}),e.jsxs("p",{className:"text-muted-foreground capitalize",children:[o.platform," • ",o.method.replace("_"," ")]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u(o.status),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>a(o.id),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>n(o.id),children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Configure"]}),e.jsxs(k,{variant:"destructive",size:"sm",onClick:()=>r(o.id),children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Today Messages"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.metrics.todayMessages}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from yesterday"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Active Chats"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.activeChats}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently ongoing"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Avg Response"}),e.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.metrics.avgResponseTime}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"-30s from last week"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Satisfaction"}),e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[o.metrics.satisfactionScore,"/5"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.metrics.resolutionRate,"% resolution rate"]})]})]})]}),e.jsxs(kt,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(wt,{children:[e.jsx(pe,{value:"overview",children:"Overview"}),e.jsxs(pe,{value:"agents",children:["Agents (",o.agents.length,")"]}),e.jsx(pe,{value:"configuration",children:"Configuration"}),e.jsx(pe,{value:"ai-settings",children:"AI Settings"})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Platform Information"}),e.jsx(Q,{children:"Basic details about this platform connection"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Phone Number:"}),e.jsx("span",{className:"text-sm",children:o.phoneNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Connected:"}),e.jsx("span",{className:"text-sm",children:new Date(o.connectedAt).toLocaleString("id-ID")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Last Activity:"}),e.jsx("span",{className:"text-sm",children:new Date(o.lastActivity).toLocaleString("id-ID")})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description})})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Activity Summary"}),e.jsx(Q,{children:"Recent activity and performance metrics"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.metrics.weeklyMessages}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"This Week"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.metrics.monthlyMessages}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"This Month"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Resolution Rate"}),e.jsxs("span",{className:"font-medium",children:[o.metrics.resolutionRate,"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${o.metrics.resolutionRate}%`}})})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Manage this platform connection"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col gap-2",onClick:()=>n(o.id),children:[e.jsx(Te,{className:"w-6 h-6"}),e.jsx("span",{children:"Configure Platform"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col gap-2",onClick:()=>i(o.id),children:[e.jsx(Pe,{className:"w-6 h-6"}),e.jsx("span",{children:"Manage Agents"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col gap-2",onClick:()=>l(o.id),children:[e.jsx($s,{className:"w-6 h-6"}),e.jsx("span",{children:"AI Settings"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col gap-2",onClick:()=>a(o.id),children:[e.jsx(Ye,{className:"w-6 h-6"}),e.jsx("span",{children:"Edit Details"})]})]})})]})]}),e.jsxs(ge,{value:"agents",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Assigned Agents"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage agents who can handle conversations from this platform"})]}),e.jsxs(k,{onClick:()=>i(o.id),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Manage Agents"]})]}),e.jsx("div",{className:"grid gap-4",children:o.agents.map(h=>e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:h.name.split(" ").map(x=>x[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:h.email})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[h.assignedChats," active chats"]}),m(h.status)]})})]})})},h.id))})]}),e.jsxs(ge,{value:"configuration",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Platform Configuration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current settings for this platform connection"})]}),e.jsxs(k,{onClick:()=>n(o.id),children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Edit Configuration"]})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(F,{children:[e.jsx(H,{children:e.jsx(V,{children:"Basic Settings"})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Working Hours"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.configuration.workingHours})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Timezone"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.configuration.timezone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Language"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.configuration.language})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Auto Reply"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:o.configuration.autoReply?"Enabled":"Disabled"})]})]})})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsx(V,{children:"Welcome Message"})}),e.jsx(B,{children:e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:e.jsx("p",{className:"text-sm",children:o.configuration.welcomeMessage})})})]})]})]}),e.jsxs(ge,{value:"ai-settings",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"AI Features"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure AI-powered features for this platform"})]}),e.jsxs(k,{onClick:()=>l(o.id),children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"Configure AI"]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"AI Assistant"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable AI-powered conversation assistance"})]}),e.jsx(W,{variant:o.aiSettings.enabled?"green":"default",children:o.aiSettings.enabled?"Enabled":"Disabled"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Auto Suggestions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Suggest responses to agents"})]}),e.jsx(W,{variant:o.aiSettings.autoSuggest?"green":"default",children:o.aiSettings.autoSuggest?"Enabled":"Disabled"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Sentiment Analysis"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyze customer sentiment in real-time"})]}),e.jsx(W,{variant:o.aiSettings.sentimentAnalysis?"green":"default",children:o.aiSettings.sentimentAnalysis?"Enabled":"Disabled"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Language Detection"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically detect customer language"})]}),e.jsx(W,{variant:o.aiSettings.languageDetection?"green":"default",children:o.aiSettings.languageDetection?"Enabled":"Disabled"})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Smart Routing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Route conversations to best available agent"})]}),e.jsx(W,{variant:o.aiSettings.smartRouting?"green":"default",children:o.aiSettings.smartRouting?"Enabled":"Disabled"})]})})})]})]})]})]})},kH=({platformId:t,onBack:s,onSave:a})=>{const[r,n]=y.useState({name:"CS Tim Marketing",description:"WhatsApp inbox untuk tim marketing menangani inquiry produk dan penjualan",workingHours:{enabled:!0,start:"09:00",end:"17:00",timezone:"Asia/Jakarta",workingDays:["monday","tuesday","wednesday","thursday","friday"]},autoReply:{enabled:!0,welcomeMessage:"Halo! Terima kasih telah menghubungi CS Marketing kami. Bagaimana kami bisa membantu Anda hari ini?",awayMessage:"Terima kasih atas pesan Anda. Saat ini kami sedang di luar jam kerja. Kami akan merespons pesan Anda pada jam kerja berikutnya.",busyMessage:"Semua agent kami sedang sibuk melayani pelanggan lain. Mohon tunggu sebentar, kami akan segera merespons."},language:"id",maxConcurrentChats:5,chatTimeout:30,notifications:{newMessage:!0,agentAssignment:!0,escalation:!0,emailNotifications:!0},security:{requireAuth:!1,allowedDomains:[],blockSpam:!0,rateLimiting:!0}}),[i,l]=y.useState(!1),[c,o]=y.useState(!1),d=(f,p,g)=>{n(w=>({...w,[f]:{...w[f],[p]:g}})),o(!0)},u=(f,p)=>{n(g=>({...g,[f]:p})),o(!0)},m=f=>{const p=r.workingHours.workingDays,g=p.includes(f)?p.filter(w=>w!==f):[...p,f];d("workingHours","workingDays",g)},h=async()=>{l(!0);try{await new Promise(f=>setTimeout(f,1e3)),a&&a(r),o(!1)}catch(f){console.error("Failed to save configuration:",f)}finally{l(!1)}},x=[{key:"monday",label:"Senin"},{key:"tuesday",label:"Selasa"},{key:"wednesday",label:"Rabu"},{key:"thursday",label:"Kamis"},{key:"friday",label:"Jumat"},{key:"saturday",label:"Sabtu"},{key:"sunday",label:"Minggu"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{variant:"ghost",size:"sm",onClick:s,children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Platform Configuration"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure settings for your platform connection"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsxs("span",{className:"text-sm text-orange-600 flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),"Unsaved changes"]}),e.jsxs(k,{onClick:h,disabled:!c||i,children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),i?"Saving...":"Save Changes"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Basic Settings"]}),e.jsx(Q,{children:"Configure basic platform information and settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Platform Name"}),e.jsx(K,{id:"name",value:r.name,onChange:f=>u("name",f.target.value),placeholder:"Enter platform name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"language",children:"Language"}),e.jsxs(ie,{value:r.language,onValueChange:f=>u("language",f),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"id",children:"Bahasa Indonesia"}),e.jsx(T,{value:"en",children:"English"}),e.jsx(T,{value:"ms",children:"Bahasa Malaysia"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(Re,{id:"description",value:r.description,onChange:f=>u("description",f.target.value),placeholder:"Describe the purpose of this platform",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"maxChats",children:"Max Concurrent Chats per Agent"}),e.jsx(K,{id:"maxChats",type:"number",value:r.maxConcurrentChats,onChange:f=>u("maxConcurrentChats",parseInt(f.target.value)),min:"1",max:"20"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"timeout",children:"Chat Timeout (minutes)"}),e.jsx(K,{id:"timeout",type:"number",value:r.chatTimeout,onChange:f=>u("chatTimeout",parseInt(f.target.value)),min:"5",max:"120"})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5"}),"Working Hours"]}),e.jsx(Q,{children:"Set operating hours and availability"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"working-hours",checked:r.workingHours.enabled,onCheckedChange:f=>d("workingHours","enabled",f)}),e.jsx(_,{htmlFor:"working-hours",children:"Enable working hours"})]}),r.workingHours.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"start-time",children:"Start Time"}),e.jsx(K,{id:"start-time",type:"time",value:r.workingHours.start,onChange:f=>d("workingHours","start",f.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"end-time",children:"End Time"}),e.jsx(K,{id:"end-time",type:"time",value:r.workingHours.end,onChange:f=>d("workingHours","end",f.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(ie,{value:r.workingHours.timezone,onValueChange:f=>d("workingHours","timezone",f),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"Asia/Jakarta",children:"Asia/Jakarta (WIB)"}),e.jsx(T,{value:"Asia/Makassar",children:"Asia/Makassar (WITA)"}),e.jsx(T,{value:"Asia/Jayapura",children:"Asia/Jayapura (WIT)"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Working Days"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(f=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:f.key,checked:r.workingHours.workingDays.includes(f.key),onCheckedChange:()=>m(f.key)}),e.jsx(_,{htmlFor:f.key,className:"text-sm",children:f.label})]},f.key))})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Auto Reply Messages"]}),e.jsx(Q,{children:"Configure automatic messages for different scenarios"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"auto-reply",checked:r.autoReply.enabled,onCheckedChange:f=>d("autoReply","enabled",f)}),e.jsx(_,{htmlFor:"auto-reply",children:"Enable auto reply"})]}),r.autoReply.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"welcome-message",children:"Welcome Message"}),e.jsx(Re,{id:"welcome-message",value:r.autoReply.welcomeMessage,onChange:f=>d("autoReply","welcomeMessage",f.target.value),placeholder:"Message sent when customer starts a conversation",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"away-message",children:"Away Message"}),e.jsx(Re,{id:"away-message",value:r.autoReply.awayMessage,onChange:f=>d("autoReply","awayMessage",f.target.value),placeholder:"Message sent outside working hours",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"busy-message",children:"Busy Message"}),e.jsx(Re,{id:"busy-message",value:r.autoReply.busyMessage,onChange:f=>d("autoReply","busyMessage",f.target.value),placeholder:"Message sent when all agents are busy",rows:3})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Security Settings"]}),e.jsx(Q,{children:"Configure security and access control settings"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Block Spam Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically filter spam and suspicious messages"})]}),e.jsx(de,{checked:r.security.blockSpam,onCheckedChange:f=>d("security","blockSpam",f)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Rate Limiting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Limit message frequency from same contact"})]}),e.jsx(de,{checked:r.security.rateLimiting,onCheckedChange:f=>d("security","rateLimiting",f)})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Notifications"}),e.jsx(Q,{children:"Configure notification preferences"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{htmlFor:"new-message",className:"text-sm",children:"New Messages"}),e.jsx(de,{id:"new-message",checked:r.notifications.newMessage,onCheckedChange:f=>d("notifications","newMessage",f)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{htmlFor:"assignment",className:"text-sm",children:"Agent Assignment"}),e.jsx(de,{id:"assignment",checked:r.notifications.agentAssignment,onCheckedChange:f=>d("notifications","agentAssignment",f)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{htmlFor:"escalation",className:"text-sm",children:"Escalations"}),e.jsx(de,{id:"escalation",checked:r.notifications.escalation,onCheckedChange:f=>d("notifications","escalation",f)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{htmlFor:"email",className:"text-sm",children:"Email Notifications"}),e.jsx(de,{id:"email",checked:r.notifications.emailNotifications,onCheckedChange:f=>d("notifications","emailNotifications",f)})]})]})})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsx(V,{children:"Configuration Status"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Basic settings configured"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Working hours set"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Auto-reply enabled"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Security settings active"})]})]})})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsx(V,{children:"Configuration Tips"})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsx("p",{children:"• Set working hours to manage customer expectations"}),e.jsx("p",{children:"• Use auto-reply to provide immediate responses"}),e.jsx("p",{children:"• Enable security features to protect from spam"}),e.jsx("p",{children:"• Configure notifications to stay updated"})]})})]})]})]}),c&&e.jsxs(is,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Qe,{className:"h-4 w-4 text-orange-600"}),e.jsx(ls,{className:"text-orange-700",children:"You have unsaved changes. Don't forget to save your configuration."})]})]})},AH=({platformId:t,onBack:s})=>{const[a,r]=y.useState([{id:1,name:"Sarah Johnson",email:"sarah@company.com",role:"senior_agent",status:"online",assignedChats:3,maxChats:5,totalResolved:156,avgResponseTime:"1.2 min",satisfactionScore:4.8,permissions:["chat","transfer","close"],assignedAt:"2024-03-15 10:30:00",lastActivity:"2024-03-20 14:25:12"},{id:2,name:"Mike Chen",email:"mike@company.com",role:"agent",status:"away",assignedChats:2,maxChats:4,totalResolved:89,avgResponseTime:"2.1 min",satisfactionScore:4.5,permissions:["chat","transfer"],assignedAt:"2024-03-12 09:15:00",lastActivity:"2024-03-20 13:50:45"},{id:3,name:"Lisa Wong",email:"lisa@company.com",role:"agent",status:"offline",assignedChats:0,maxChats:3,totalResolved:67,avgResponseTime:"3.5 min",satisfactionScore:4.2,permissions:["chat"],assignedAt:"2024-03-10 14:20:00",lastActivity:"2024-03-19 17:30:22"}]),[n,i]=y.useState([{id:4,name:"David Kim",email:"david@company.com",role:"senior_agent",department:"Support",totalResolved:234,avgResponseTime:"1.8 min",satisfactionScore:4.6},{id:5,name:"Emma Wilson",email:"emma@company.com",role:"agent",department:"Sales",totalResolved:123,avgResponseTime:"2.3 min",satisfactionScore:4.4},{id:6,name:"Alex Rodriguez",email:"alex@company.com",role:"agent",department:"Support",totalResolved:89,avgResponseTime:"2.8 min",satisfactionScore:4.1}]),[l,c]=y.useState(""),[o,d]=y.useState(!1),[u,m]=y.useState(!1),[h,x]=y.useState(null),[f,p]=y.useState([]),g=N=>{const O={online:{variant:"green",color:"text-green-600",icon:Me},away:{variant:"yellow",color:"text-yellow-600",icon:nt},offline:{variant:"default",color:"text-gray-600",icon:Cs}},C=O[N]||O.offline,D=C.icon;return e.jsxs(W,{variant:C.variant,className:"capitalize",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),N]})},w=N=>{const O={senior_agent:{color:"bg-blue-100 text-blue-700",label:"Senior Agent"},agent:{color:"bg-green-100 text-green-700",label:"Agent"},supervisor:{color:"bg-purple-100 text-purple-700",label:"Supervisor"}},C=O[N]||O.agent;return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${C.color}`,children:C.label})},S=(N,O=["chat"])=>{const C=n.find(D=>D.id===N);if(C){const D={...C,status:"offline",assignedChats:0,maxChats:C.role==="senior_agent"?5:3,permissions:O,assignedAt:new Date().toISOString(),lastActivity:new Date().toISOString()};r(E=>[...E,D]),i(E=>E.filter(P=>P.id!==N)),d(!1),p([])}},b=N=>{const O=a.find(C=>C.id===N);if(O){const{assignedChats:C,maxChats:D,permissions:E,assignedAt:P,lastActivity:R,status:U,...I}=O;i(L=>[...L,I]),r(L=>L.filter(Z=>Z.id!==N)),m(!1),x(null)}},A=()=>{f.forEach(N=>{S(N,["chat"])})},v=n.filter(N=>N.name.toLowerCase().includes(l.toLowerCase())||N.email.toLowerCase().includes(l.toLowerCase())),j=a.filter(N=>N.name.toLowerCase().includes(l.toLowerCase())||N.email.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{variant:"ghost",size:"sm",onClick:s,children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Agent Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage agents assigned to this platform"})]})]}),e.jsxs(At,{open:o,onOpenChange:d,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Add Agents"]})}),e.jsxs(Ct,{className:"max-w-4xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Add Agents to Platform"}),e.jsx(Tt,{children:"Select agents to assign to this platform. They will be able to handle conversations from this channel."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Search agents...",value:l,onChange:N=>c(N.target.value)})]}),e.jsx("div",{className:"border rounded-lg max-h-96 overflow-y-auto",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{className:"w-12",children:e.jsx(hn,{checked:f.length===v.length,onCheckedChange:N=>{p(N?v.map(O=>O.id):[])}})}),e.jsx(J,{children:"Agent"}),e.jsx(J,{children:"Role"}),e.jsx(J,{children:"Department"}),e.jsx(J,{children:"Performance"})]})}),e.jsx(mt,{children:v.map(N=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsx(hn,{checked:f.includes(N.id),onCheckedChange:O=>{p(O?C=>[...C,N.id]:C=>C.filter(D=>D!==N.id))}})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-primary",children:N.name.split(" ").map(O=>O[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.email})]})]})}),e.jsx(X,{children:w(N.role)}),e.jsx(X,{children:e.jsx("span",{className:"text-sm",children:N.department})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Resolved: ",e.jsx("span",{className:"font-medium",children:N.totalResolved})]}),e.jsxs("div",{children:["Rating: ",e.jsxs("span",{className:"font-medium",children:[N.satisfactionScore,"/5"]})]})]})})]},N.id))})]})})]}),e.jsxs(xn,{children:[e.jsx(k,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(k,{onClick:A,disabled:f.length===0,children:["Add ",f.length," Agent",f.length!==1?"s":""]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Agents"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[a.filter(N=>N.status==="online").length," online"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Active Chats"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.reduce((N,O)=>N+O.assignedChats,0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently handling"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Avg Response"}),e.jsx(et,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"2.1 min"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average response time"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Satisfaction"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"4.5/5"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average rating"})]})]})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:"Assigned Agents"}),e.jsx(Q,{children:"Agents currently assigned to handle conversations from this platform"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Search agents...",value:l,onChange:N=>c(N.target.value),className:"pl-9 w-64"})]})})]})}),e.jsx(B,{children:j.length>0?e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Agent"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Workload"}),e.jsx(J,{children:"Performance"}),e.jsx(J,{children:"Permissions"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:j.map(N=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-primary",children:N.name.split(" ").map(O=>O[0]).join("")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:N.email}),w(N.role)]})]})}),e.jsx(X,{children:g(N.status)}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[N.assignedChats,"/",N.maxChats]}),e.jsx("div",{className:"flex-1 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${N.assignedChats/N.maxChats*100}%`}})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active chats"})]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Resolved: ",e.jsx("span",{className:"font-medium",children:N.totalResolved})]}),e.jsxs("div",{children:["Avg time: ",e.jsx("span",{className:"font-medium",children:N.avgResponseTime})]}),e.jsxs("div",{children:["Rating: ",e.jsxs("span",{className:"font-medium",children:[N.satisfactionScore,"/5"]})]})]})}),e.jsx(X,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:N.permissions.map(O=>e.jsx(W,{variant:"outline",className:"text-xs",children:O},O))})}),e.jsx(X,{children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{align:"end",children:[e.jsx(qn,{children:"Actions"}),e.jsxs(st,{children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(st,{children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Edit Permissions"]}),e.jsxs(st,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Change Role"]}),e.jsx(Ia,{}),e.jsxs(st,{onClick:()=>{x(N),m(!0)},className:"text-red-600",children:[e.jsx(iw,{className:"w-4 h-4 mr-2"}),"Remove from Platform"]})]})]})})]},N.id))})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pe,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Agents Assigned"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:l?"No agents match your search criteria.":"No agents are currently assigned to this platform."}),!l&&e.jsxs(k,{onClick:()=>d(!0),children:[e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Add Agents"]})]})})]}),e.jsx(At,{open:u,onOpenChange:m,children:e.jsxs(Ct,{children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Remove Agent from Platform"}),e.jsxs(Tt,{children:["Are you sure you want to remove ",e.jsx("strong",{children:h==null?void 0:h.name})," from this platform? They will no longer be able to handle conversations from this channel."]})]}),(h==null?void 0:h.assignedChats)>0&&e.jsxs(is,{children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsxs(ls,{children:["This agent currently has ",h.assignedChats," active chat",h.assignedChats!==1?"s":"",". These conversations will need to be reassigned to other agents."]})]}),e.jsxs(xn,{children:[e.jsx(k,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(k,{variant:"destructive",onClick:()=>b(h==null?void 0:h.id),children:"Remove Agent"})]})]})})]})},CH=({platformId:t,onBack:s,onSave:a})=>{const[r,n]=y.useState({aiAssistant:{enabled:!0,model:"gpt-4",temperature:.7,maxTokens:150,systemPrompt:"You are a helpful customer service assistant. Be polite, professional, and concise in your responses."},autoSuggestions:{enabled:!0,suggestionCount:3,confidence:.8,showConfidence:!0,categories:["greeting","product_info","support","closing"]},sentimentAnalysis:{enabled:!0,realTimeAnalysis:!0,alertThreshold:.3,escalationEnabled:!0,sentimentHistory:!0},languageDetection:{enabled:!0,autoTranslate:!1,supportedLanguages:["id","en","ms"],confidenceThreshold:.9},smartRouting:{enabled:!1,routingCriteria:["sentiment","language","complexity","agent_expertise"],fallbackAgent:"any_available",maxWaitTime:300},chatSummary:{enabled:!0,autoGenerate:!0,includeKeyPoints:!0,includeSentiment:!0,includeResolution:!0},knowledgeBase:{enabled:!0,autoSearch:!0,suggestionMode:"contextual",confidenceThreshold:.7},analytics:{enabled:!0,trackPerformance:!0,generateInsights:!0,weeklyReports:!0}}),[i,l]=y.useState(!1),[c,o]=y.useState(!1),d=(h,x,f)=>{n(p=>({...p,[h]:{...p[h],[x]:f}})),o(!0)},u=async()=>{l(!0);try{await new Promise(h=>setTimeout(h,1e3)),a&&a(r),o(!1)}catch(h){console.error("Failed to save AI settings:",h)}finally{l(!1)}},m=h=>e.jsx(W,{variant:h?"green":"default",className:"ml-2",children:h?"Enabled":"Disabled"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{variant:"ghost",size:"sm",onClick:s,children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx($s,{className:"w-7 h-7 text-blue-600"}),"AI Settings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Configure AI-powered features for this platform"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[c&&e.jsxs("span",{className:"text-sm text-orange-600 flex items-center gap-1",children:[e.jsx(Qe,{className:"w-4 h-4"}),"Unsaved changes"]}),e.jsxs(k,{onClick:u,disabled:!c||i,children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),i?"Saving...":"Save Settings"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"AI Assistant"}),e.jsx($s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.aiAssistant.enabled?"Active":"Inactive"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Conversation assistance"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Auto Suggestions"}),e.jsx(dx,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.autoSuggestions.enabled?r.autoSuggestions.suggestionCount:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suggestions per chat"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Sentiment Analysis"}),e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.sentimentAnalysis.enabled?"Real-time":"Off"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Emotion detection"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Smart Routing"}),e.jsx(ba,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r.smartRouting.enabled?"Enabled":"Manual"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Intelligent assignment"})]})]})]}),e.jsxs(kt,{defaultValue:"assistant",className:"space-y-4",children:[e.jsxs(wt,{className:"grid w-full grid-cols-4",children:[e.jsx(pe,{value:"assistant",children:"AI Assistant"}),e.jsx(pe,{value:"analysis",children:"Analysis & Routing"}),e.jsx(pe,{value:"automation",children:"Automation"}),e.jsx(pe,{value:"insights",children:"Insights & Reports"})]}),e.jsxs(ge,{value:"assistant",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"AI Conversation Assistant",m(r.aiAssistant.enabled)]}),e.jsx(Q,{children:"Configure the AI assistant that helps agents with conversation responses"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"ai-assistant",checked:r.aiAssistant.enabled,onCheckedChange:h=>d("aiAssistant","enabled",h)}),e.jsx(_,{htmlFor:"ai-assistant",children:"Enable AI Assistant"})]}),r.aiAssistant.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"ai-model",children:"AI Model"}),e.jsxs(ie,{value:r.aiAssistant.model,onValueChange:h=>d("aiAssistant","model",h),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"gpt-4",children:"GPT-4 (Recommended)"}),e.jsx(T,{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),e.jsx(T,{value:"claude-3",children:"Claude 3"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"max-tokens",children:"Max Response Length"}),e.jsx(K,{id:"max-tokens",type:"number",value:r.aiAssistant.maxTokens,onChange:h=>d("aiAssistant","maxTokens",parseInt(h.target.value)),min:"50",max:"500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"temperature",children:["Response Creativity: ",r.aiAssistant.temperature]}),e.jsx(Xl,{id:"temperature",min:0,max:1,step:.1,value:[r.aiAssistant.temperature],onValueChange:h=>d("aiAssistant","temperature",h[0]),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Conservative"}),e.jsx("span",{children:"Creative"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"system-prompt",children:"System Prompt"}),e.jsx(Re,{id:"system-prompt",value:r.aiAssistant.systemPrompt,onChange:h=>d("aiAssistant","systemPrompt",h.target.value),placeholder:"Define how the AI should behave and respond",rows:4})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(dx,{className:"w-5 h-5"}),"Auto Suggestions",m(r.autoSuggestions.enabled)]}),e.jsx(Q,{children:"Provide intelligent response suggestions to agents"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"auto-suggestions",checked:r.autoSuggestions.enabled,onCheckedChange:h=>d("autoSuggestions","enabled",h)}),e.jsx(_,{htmlFor:"auto-suggestions",children:"Enable Auto Suggestions"})]}),r.autoSuggestions.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"suggestion-count",children:"Number of Suggestions"}),e.jsxs(ie,{value:r.autoSuggestions.suggestionCount.toString(),onValueChange:h=>d("autoSuggestions","suggestionCount",parseInt(h)),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"1",children:"1 suggestion"}),e.jsx(T,{value:"2",children:"2 suggestions"}),e.jsx(T,{value:"3",children:"3 suggestions"}),e.jsx(T,{value:"5",children:"5 suggestions"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"confidence",children:["Min Confidence: ",r.autoSuggestions.confidence]}),e.jsx(Xl,{id:"confidence",min:.5,max:1,step:.1,value:[r.autoSuggestions.confidence],onValueChange:h=>d("autoSuggestions","confidence",h[0]),className:"w-full"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"show-confidence",checked:r.autoSuggestions.showConfidence,onCheckedChange:h=>d("autoSuggestions","showConfidence",h)}),e.jsx(_,{htmlFor:"show-confidence",children:"Show confidence scores to agents"})]})]})]})]})]}),e.jsxs(ge,{value:"analysis",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"Sentiment Analysis",m(r.sentimentAnalysis.enabled)]}),e.jsx(Q,{children:"Analyze customer emotions and escalate negative sentiment automatically"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"sentiment-analysis",checked:r.sentimentAnalysis.enabled,onCheckedChange:h=>d("sentimentAnalysis","enabled",h)}),e.jsx(_,{htmlFor:"sentiment-analysis",children:"Enable Sentiment Analysis"})]}),r.sentimentAnalysis.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"realtime-analysis",checked:r.sentimentAnalysis.realTimeAnalysis,onCheckedChange:h=>d("sentimentAnalysis","realTimeAnalysis",h)}),e.jsx(_,{htmlFor:"realtime-analysis",children:"Real-time sentiment tracking"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"escalation-enabled",checked:r.sentimentAnalysis.escalationEnabled,onCheckedChange:h=>d("sentimentAnalysis","escalationEnabled",h)}),e.jsx(_,{htmlFor:"escalation-enabled",children:"Auto-escalate negative sentiment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"alert-threshold",children:["Negative Sentiment Threshold: ",r.sentimentAnalysis.alertThreshold]}),e.jsx(Xl,{id:"alert-threshold",min:.1,max:.9,step:.1,value:[r.sentimentAnalysis.alertThreshold],onValueChange:h=>d("sentimentAnalysis","alertThreshold",h[0]),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Very Sensitive"}),e.jsx("span",{children:"Less Sensitive"})]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(lw,{className:"w-5 h-5"}),"Language Detection",m(r.languageDetection.enabled)]}),e.jsx(Q,{children:"Automatically detect customer language and route accordingly"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"language-detection",checked:r.languageDetection.enabled,onCheckedChange:h=>d("languageDetection","enabled",h)}),e.jsx(_,{htmlFor:"language-detection",children:"Enable Language Detection"})]}),r.languageDetection.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"auto-translate",checked:r.languageDetection.autoTranslate,onCheckedChange:h=>d("languageDetection","autoTranslate",h)}),e.jsx(_,{htmlFor:"auto-translate",children:"Enable auto-translation for agents"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Supported Languages"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{code:"id",name:"Bahasa Indonesia"},{code:"en",name:"English"},{code:"ms",name:"Bahasa Malaysia"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"}].map(h=>e.jsx(W,{variant:r.languageDetection.supportedLanguages.includes(h.code)?"default":"outline",className:"cursor-pointer",onClick:()=>{const x=r.languageDetection.supportedLanguages,f=x.includes(h.code)?x.filter(p=>p!==h.code):[...x,h.code];d("languageDetection","supportedLanguages",f)},children:h.name},h.code))})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"w-5 h-5"}),"Smart Routing",m(r.smartRouting.enabled)]}),e.jsx(Q,{children:"Intelligently route conversations to the best available agent"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"smart-routing",checked:r.smartRouting.enabled,onCheckedChange:h=>d("smartRouting","enabled",h)}),e.jsx(_,{htmlFor:"smart-routing",children:"Enable Smart Routing"})]}),r.smartRouting.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Routing Criteria"}),e.jsx("div",{className:"space-y-2",children:[{key:"sentiment",label:"Customer Sentiment"},{key:"language",label:"Language Match"},{key:"complexity",label:"Query Complexity"},{key:"agent_expertise",label:"Agent Expertise"}].map(h=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:h.key,checked:r.smartRouting.routingCriteria.includes(h.key),onCheckedChange:x=>{const f=r.smartRouting.routingCriteria,p=x?[...f,h.key]:f.filter(g=>g!==h.key);d("smartRouting","routingCriteria",p)}}),e.jsx(_,{htmlFor:h.key,children:h.label})]},h.key))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"max-wait",children:"Max Wait Time (seconds)"}),e.jsx(K,{id:"max-wait",type:"number",value:r.smartRouting.maxWaitTime,onChange:h=>d("smartRouting","maxWaitTime",parseInt(h.target.value)),min:"60",max:"600"})]})]})]})]})]}),e.jsxs(ge,{value:"automation",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Chat Summary",m(r.chatSummary.enabled)]}),e.jsx(Q,{children:"Automatically generate conversation summaries for better handoffs"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"chat-summary",checked:r.chatSummary.enabled,onCheckedChange:h=>d("chatSummary","enabled",h)}),e.jsx(_,{htmlFor:"chat-summary",children:"Enable Chat Summary"})]}),r.chatSummary.enabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"auto-generate",checked:r.chatSummary.autoGenerate,onCheckedChange:h=>d("chatSummary","autoGenerate",h)}),e.jsx(_,{htmlFor:"auto-generate",children:"Auto-generate on chat close"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Include in Summary"}),e.jsx("div",{className:"space-y-2",children:[{key:"includeKeyPoints",label:"Key Discussion Points"},{key:"includeSentiment",label:"Customer Sentiment"},{key:"includeResolution",label:"Resolution Status"}].map(h=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:h.key,checked:r.chatSummary[h.key],onCheckedChange:x=>d("chatSummary",h.key,x)}),e.jsx(_,{htmlFor:h.key,children:h.label})]},h.key))})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Wl,{className:"w-5 h-5"}),"Knowledge Base Integration",m(r.knowledgeBase.enabled)]}),e.jsx(Q,{children:"Connect with your knowledge base to provide accurate information"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"knowledge-base",checked:r.knowledgeBase.enabled,onCheckedChange:h=>d("knowledgeBase","enabled",h)}),e.jsx(_,{htmlFor:"knowledge-base",children:"Enable Knowledge Base Integration"})]}),r.knowledgeBase.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"auto-search",checked:r.knowledgeBase.autoSearch,onCheckedChange:h=>d("knowledgeBase","autoSearch",h)}),e.jsx(_,{htmlFor:"auto-search",children:"Auto-search relevant articles"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"suggestion-mode",children:"Suggestion Mode"}),e.jsxs(ie,{value:r.knowledgeBase.suggestionMode,onValueChange:h=>d("knowledgeBase","suggestionMode",h),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"contextual",children:"Contextual (based on conversation)"}),e.jsx(T,{value:"keyword",children:"Keyword-based"}),e.jsx(T,{value:"manual",children:"Manual search only"})]})]})]})]})]})]})]}),e.jsxs(ge,{value:"insights",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"w-5 h-5"}),"AI Analytics",m(r.analytics.enabled)]}),e.jsx(Q,{children:"Generate insights and performance reports using AI analysis"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"analytics",checked:r.analytics.enabled,onCheckedChange:h=>d("analytics","enabled",h)}),e.jsx(_,{htmlFor:"analytics",children:"Enable AI Analytics"})]}),r.analytics.enabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"track-performance",checked:r.analytics.trackPerformance,onCheckedChange:h=>d("analytics","trackPerformance",h)}),e.jsx(_,{htmlFor:"track-performance",children:"Track AI feature performance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"generate-insights",checked:r.analytics.generateInsights,onCheckedChange:h=>d("analytics","generateInsights",h)}),e.jsx(_,{htmlFor:"generate-insights",children:"Generate automated insights"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"weekly-reports",checked:r.analytics.weeklyReports,onCheckedChange:h=>d("analytics","weeklyReports",h)}),e.jsx(_,{htmlFor:"weekly-reports",children:"Send weekly AI performance reports"})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"AI Performance Overview"}),e.jsx(Q,{children:"Current AI feature usage and effectiveness"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Suggestion Acceptance Rate"}),e.jsx("span",{className:"text-sm font-bold text-green-600",children:"78%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"78%"}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Sentiment Accuracy"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:"92%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"92%"}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Response Time Improvement"}),e.jsx("span",{className:"text-sm font-bold text-purple-600",children:"-35%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"65%"}})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:"Customer Satisfaction"}),e.jsx("span",{className:"text-sm font-bold text-orange-600",children:"4.6/5"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"92%"}})})]})]})})]})]})]}),c&&e.jsxs(is,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Qe,{className:"h-4 w-4 text-orange-600"}),e.jsx(ls,{className:"text-orange-700",children:"You have unsaved changes. Don't forget to save your AI configuration."})]})]})},zN=()=>{var D;Xs();const[t,s]=y.useState(!1),[a,r]=y.useState("connected-platforms"),[n,i]=y.useState("main"),[l,c]=y.useState(null),[o,d]=y.useState(!1),[u,m]=y.useState(!1),[h,x]=y.useState(null),[f,p]=y.useState([{id:"inbox-001",name:"CS Tim Marketing",platform:"whatsapp",status:"connected",method:"qr_scan",connectedAt:"2024-03-15 10:30:00",lastActivity:"2024-03-20 14:25:12",totalMessages:342,activeChats:8,assignedAgents:3,phoneNumber:"+62 812-3456-7890"},{id:"inbox-002",name:"Support Technical",platform:"webchat",status:"connected",method:"api_integration",connectedAt:"2024-03-10 09:15:00",lastActivity:"2024-03-20 13:50:45",totalMessages:156,activeChats:3,assignedAgents:2,websiteUrl:"https://company.com"},{id:"inbox-003",name:"Facebook Page",platform:"facebook",status:"error",method:"oauth",connectedAt:"2024-03-12 14:20:00",lastActivity:"2024-03-18 16:30:22",totalMessages:89,activeChats:0,assignedAgents:1,pageId:"@company.official"}]),g=[{id:"whatsapp-qr",name:"WhatsApp QR Scan",description:"Hubungkan nomor WhatsApp melalui QR Code (WAHA Session)",icon:Le,color:"text-green-600",bgColor:"bg-green-100",popular:!0,riskLevel:"medium"},{id:"whatsapp-api",name:"WhatsApp Business API",description:"Koneksi resmi WhatsApp untuk bisnis (Coming Soon)",icon:Ae,color:"text-green-700",bgColor:"bg-green-50",popular:!1,riskLevel:"low",comingSoon:!0},{id:"webchat",name:"Website Chat Widget",description:"Embed chat widget di website Anda",icon:Ss,color:"text-blue-600",bgColor:"bg-blue-100",popular:!0,riskLevel:"low"},{id:"facebook",name:"Facebook Messenger",description:"Hubungkan halaman Facebook bisnis Anda",icon:Le,color:"text-blue-700",bgColor:"bg-blue-50",popular:!1,riskLevel:"low"},{id:"instagram",name:"Instagram Direct",description:"Kelola pesan Instagram bisnis (Coming Soon)",icon:Jd,color:"text-pink-600",bgColor:"bg-pink-100",popular:!1,riskLevel:"low",comingSoon:!0},{id:"email",name:"Email Integration",description:"Kelola email support melalui platform",icon:fs,color:"text-gray-600",bgColor:"bg-gray-100",popular:!1,riskLevel:"low"}],w=E=>{const R={whatsapp:Le,webchat:Ss,facebook:Le,instagram:Jd,email:fs,phone:Pa}[E]||Le;return e.jsx(R,{className:"w-4 h-4"})},S=E=>{const P={connected:{variant:"green",color:"text-green-600",icon:Me},error:{variant:"red",color:"text-red-600",icon:Cs},disconnected:{variant:"default",color:"text-gray-600",icon:nt}},R=P[E]||P.disconnected,U=R.icon;return e.jsxs(W,{variant:R.variant,className:"capitalize",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),E]})},b=E=>{const P={low:{color:"text-green-600",bg:"bg-green-100",label:"Rendah"},medium:{color:"text-yellow-600",bg:"bg-yellow-100",label:"Sedang"},high:{color:"text-red-600",bg:"bg-red-100",label:"Tinggi"}},R=P[E]||P.low;return e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${R.bg} ${R.color}`,children:["Risk: ",R.label]})},A=E=>{E==="whatsapp-qr"?s(!0):alert(`Koneksi ${E} akan segera tersedia`)},v=E=>{p(P=>[...P,{...E,connectedAt:new Date().toISOString(),lastActivity:new Date().toISOString(),totalMessages:0,activeChats:0,assignedAgents:0,phoneNumber:"+62 XXX-XXXX-XXXX"}]),s(!1)},j=(E,P)=>{const R=f.find(U=>U.id===P);switch(E){case"view":c(P),i("details");break;case"configure":c(P),i("configure");break;case"agents":c(P),i("agents");break;case"ai":c(P),i("ai-settings");break;case"edit":x(R),m(!0);break;case"delete":c(P),d(!0);break;default:console.log(`${E} inbox:`,P)}},N=()=>{p(E=>E.filter(P=>P.id!==l)),d(!1),c(null)},O=E=>{p(P=>P.map(R=>R.id===h.id?{...R,...E}:R)),m(!1),x(null)},C=()=>{i("main"),c(null)};return n==="details"?e.jsx(SH,{platformId:l,onBack:C,onEdit:E=>j("edit",E),onDelete:E=>j("delete",E),onConfigure:E=>j("configure",E),onManageAgents:E=>j("agents",E),onAISettings:E=>j("ai",E)}):n==="configure"?e.jsx(kH,{platformId:l,onBack:C,onSave:E=>{console.log("Saving configuration:",E),C()}}):n==="agents"?e.jsx(AH,{platformId:l,onBack:C}):n==="ai-settings"?e.jsx(CH,{platformId:l,onBack:C,onSave:E=>{console.log("Saving AI settings:",E),C()}}):e.jsxs("div",{className:"space-y-4 lg:space-y-6 max-w-full overflow-hidden",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-foreground",children:"Inbox Management"}),e.jsx("p",{className:"text-sm lg:text-base text-muted-foreground",children:"Kelola koneksi platform dan inbox untuk menangani percakapan pelanggan"})]}),e.jsxs(kt,{value:a,onValueChange:r,children:[e.jsxs(wt,{className:"grid w-full grid-cols-2",children:[e.jsx(pe,{value:"connected-platforms",children:"Connected Platforms"}),e.jsx(pe,{value:"add-platform",children:"Add New Platform"})]}),e.jsxs(ge,{value:"connected-platforms",className:"space-y-4 lg:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 lg:gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Platforms"}),e.jsx(vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[f.filter(E=>E.status==="connected").length," aktif"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Messages"}),e.jsx(Le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.reduce((E,P)=>E+P.totalMessages,0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minggu ini"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Active Chats"}),e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.reduce((E,P)=>E+P.activeChats,0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sedang berlangsung"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Assigned Agents"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.reduce((E,P)=>E+P.assignedAgents,0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total agent"})]})]})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(V,{children:"Connected Platforms"}),e.jsx(Q,{children:"Kelola semua platform yang terhubung dengan akun Anda"})]})})}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Platform"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Activity"}),e.jsx(J,{children:"Stats"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:f.map(E=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${E.platform==="whatsapp"?"bg-green-100":E.platform==="webchat"?"bg-blue-100":E.platform==="facebook"?"bg-blue-50":"bg-gray-100"}`,children:w(E.platform)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:E.name}),e.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[E.platform," • ",E.method.replace("_"," ")]})]})]})}),e.jsx(X,{children:S(E.status)}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(et,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:new Date(E.lastActivity).toLocaleString("id-ID")})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Connected: ",new Date(E.connectedAt).toLocaleDateString("id-ID")]})]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:["Messages: ",e.jsx("span",{className:"font-medium",children:E.totalMessages})]}),e.jsxs("div",{children:["Active: ",e.jsx("span",{className:"font-medium",children:E.activeChats})]}),e.jsxs("div",{children:["Agents: ",e.jsx("span",{className:"font-medium",children:E.assignedAgents})]})]})}),e.jsx(X,{children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{align:"end",children:[e.jsx(qn,{children:"Actions"}),e.jsxs(st,{onClick:()=>j("view",E.id),children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(st,{onClick:()=>j("configure",E.id),children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Configure"]}),e.jsxs(st,{onClick:()=>j("agents",E.id),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Manage Agents"]}),e.jsxs(st,{onClick:()=>j("ai",E.id),children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"AI Settings"]}),e.jsx(Ia,{}),e.jsxs(st,{onClick:()=>j("edit",E.id),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(st,{onClick:()=>j("delete",E.id),className:"text-red-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},E.id))})]})})]})]}),e.jsx(ge,{value:"add-platform",className:"space-y-4 lg:space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Add New Platform"}),e.jsx(Q,{children:"Pilih platform yang ingin Anda hubungkan untuk menangani percakapan pelanggan"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 lg:gap-6",children:g.map(E=>{const P=E.icon;return e.jsxs(F,{className:`relative cursor-pointer transition-all hover:shadow-md ${E.comingSoon?"opacity-60":"hover:border-primary"}`,onClick:()=>!E.comingSoon&&A(E.id),children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-3 rounded-lg ${E.bgColor}`,children:e.jsx(P,{className:`w-6 h-6 ${E.color}`})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-base",children:E.name}),E.popular&&e.jsx(W,{variant:"secondary",className:"mt-1",children:"Popular"})]})]}),E.comingSoon&&e.jsx(W,{variant:"outline",children:"Coming Soon"})]})}),e.jsxs(B,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:E.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[b(E.riskLevel),e.jsx(k,{size:"sm",disabled:E.comingSoon,variant:E.comingSoon?"ghost":"default",children:E.comingSoon?"Coming Soon":"Connect"})]})]})]},E.id)})}),e.jsxs(is,{className:"mt-6",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsxs(ls,{children:[e.jsx("strong",{children:"Informasi Risiko:"}),e.jsxs("ul",{className:"mt-2 text-sm space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Rendah:"})," API resmi, stabil untuk produksi"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Sedang:"})," Tidak resmi, cocok untuk testing/skala kecil"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Tinggi:"})," Eksperimental, dapat berubah sewaktu-waktu"]})]})]})]})]})]})})]}),t&&e.jsx(wH,{onClose:()=>s(!1),onSuccess:v}),e.jsx(At,{open:o,onOpenChange:d,children:e.jsxs(Ct,{children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Delete Platform Connection"}),e.jsx(Tt,{children:"Are you sure you want to delete this platform connection? This action cannot be undone. All conversations and data associated with this platform will be permanently removed."})]}),e.jsxs(is,{className:"border-red-200 bg-red-50",children:[e.jsx(Qe,{className:"h-4 w-4 text-red-600"}),e.jsxs(ls,{className:"text-red-700",children:[e.jsx("strong",{children:"Warning:"})," This will permanently delete:",e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"All conversation history"}),e.jsx("li",{children:"Agent assignments"}),e.jsx("li",{children:"Platform configuration"}),e.jsx("li",{children:"AI settings and analytics data"})]})]})]}),e.jsxs(xn,{children:[e.jsx(k,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(k,{variant:"destructive",onClick:N,children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Platform"]})]})]})}),e.jsx(At,{open:u,onOpenChange:m,children:e.jsxs(Ct,{className:"max-w-lg p-6",children:[e.jsxs(_t,{className:"pb-8",children:[e.jsx(Pt,{className:"text-xl font-semibold",children:"Edit Platform Details"}),e.jsx(Tt,{className:"text-sm text-muted-foreground mt-3",children:"Update the basic information for this platform connection."})]}),h&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4 p-5 bg-muted/50 rounded-lg border border-border/50",children:[e.jsxs("div",{className:`p-3 rounded-lg ${h.platform==="whatsapp"?"bg-green-100":h.platform==="webchat"?"bg-blue-100":h.platform==="facebook"?"bg-blue-50":"bg-gray-100"}`,children:[h.platform==="whatsapp"&&e.jsx(Le,{className:"w-5 h-5 text-green-600"}),h.platform==="webchat"&&e.jsx(Ss,{className:"w-5 h-5 text-blue-600"}),h.platform==="facebook"&&e.jsx(Le,{className:"w-5 h-5 text-blue-600"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm capitalize",children:h.platform}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Platform Type"})]})]}),e.jsxs("div",{className:"space-y-7",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{htmlFor:"platform-name",className:"text-sm font-medium",children:["Platform Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(K,{id:"platform-name",value:h.name,onChange:E=>x(P=>({...P,name:E.target.value})),placeholder:"Enter platform name",className:"h-11 px-4"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This name will be displayed in the platform list"})]}),h.platform==="whatsapp"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"platform-phone",className:"text-sm font-medium",children:"Phone Number"}),e.jsx(K,{id:"platform-phone",value:h.phoneNumber||"",onChange:E=>x(P=>({...P,phoneNumber:E.target.value})),placeholder:"e.g., +62 812-3456-7890",className:"h-11 px-4"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"WhatsApp number connected to this platform"})]}),h.platform==="webchat"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"platform-url",className:"text-sm font-medium",children:"Website URL"}),e.jsx(K,{id:"platform-url",value:h.websiteUrl||"",onChange:E=>x(P=>({...P,websiteUrl:E.target.value})),placeholder:"https://example.com",className:"h-11 px-4"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Website where the chat widget is installed"})]}),h.platform==="facebook"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"platform-page",className:"text-sm font-medium",children:"Facebook Page ID"}),e.jsx(K,{id:"platform-page",value:h.pageId||"",onChange:E=>x(P=>({...P,pageId:E.target.value})),placeholder:"@company.official",className:"h-11 px-4"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Facebook page handle or ID connected to this platform"})]}),e.jsx("div",{className:"pt-6 border-t border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Connection Status"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Current platform status"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h.status==="connected"&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Connected"})]}),h.status==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-600",children:"Error"})]})]})]})})]})]}),e.jsx(xn,{className:"pt-8 border-t border-border/50",children:e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[e.jsx(k,{variant:"outline",onClick:()=>m(!1),className:"flex-1 sm:flex-none h-11 px-6",children:"Cancel"}),e.jsxs(k,{onClick:()=>O(h),className:"flex-1 sm:flex-none h-11 px-6",disabled:!((D=h==null?void 0:h.name)!=null&&D.trim()),children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})})]})})]})},_H=[{id:1,title:"Base knowledge utama",content:"Selamat datang di platform kami! Panduan ini akan membantu Anda memahami cara menggunakan fitur-fitur utama. Pertama, pastikan Anda telah login ke akun Anda. Kemudian, navigasi ke dashboard utama untuk melihat ringkasan aktivitas. Menu sidebar kiri berisi semua fitur yang tersedia seperti Inbox untuk mengelola percakapan, Analytics untuk melihat performa, dan Knowledge Base untuk mengelola informasi. Untuk memulai, cobalah mengeksplorasi setiap menu dan familiarkan diri dengan antarmuka pengguna.",status:"active",created_at:"2024-03-20T14:30:00Z",updated_at:"2024-03-20T14:30:00Z",tags:["panduan","tutorial","dasar"],language:"id",metadata:{type:"article",wordCount:89}},{id:2,title:"Base knowledge 2",content:"Kami memahami bahwa terkadang produk atau layanan yang diterima mungkin tidak sesuai harapan. Oleh karena itu, kami menyediakan kebijakan pengembalian dana yang jelas dan mudah dipahami. Pengembalian dana dapat diajukan dalam waktu 30 hari sejak pembelian dengan syarat produk masih dalam kondisi asli. Untuk mengajukan pengembalian, silakan hubungi tim customer service kami melalui chat atau email dengan menyertakan nomor pesanan dan alasan pengembalian. Tim kami akan memproses permintaan Anda dalam waktu 3-5 hari kerja.",status:"inactive",created_at:"2024-03-19T10:15:00Z",updated_at:"2024-03-19T10:15:00Z",tags:["refund","kebijakan","customer service"],language:"id",metadata:{type:"article",wordCount:76}},{id:3,title:"Base knowledge 99 ",content:"Pengaturan profil akun yang lengkap dan akurat sangat penting untuk pengalaman yang optimal. Untuk mengakses pengaturan profil, klik pada avatar Anda di pojok kanan atas, kemudian pilih 'Pengaturan Akun'. Di halaman ini, Anda dapat memperbarui informasi personal seperti nama, email, nomor telepon, dan alamat. Pastikan juga untuk mengatur preferensi notifikasi sesuai kebutuhan Anda. Jangan lupa untuk menyimpan perubahan yang telah dibuat dengan mengklik tombol 'Simpan' di bagian bawah halaman.",status:"inactive",created_at:"2024-03-18T16:45:00Z",updated_at:"2024-03-18T16:45:00Z",tags:["profil","pengaturan","akun"],language:"id",metadata:{type:"article",wordCount:82}}],ji=[{id:1,name:"Sarah Wilson",email:"sarah@company.com",status:"online",activeChats:3,satisfaction:4.8,avgHandlingTime:"4m 32s",totalHandled:152,specialization:"Technical Support",botPersonalityId:1,maxConcurrentChats:5},{id:2,name:"John Davis",email:"john@company.com",status:"busy",activeChats:5,satisfaction:4.6,avgHandlingTime:"5m 12s",totalHandled:98,specialization:"Billing",botPersonalityId:2,maxConcurrentChats:6},{id:3,name:"Mike Chen",email:"mike@company.com",status:"offline",activeChats:0,satisfaction:4.9,avgHandlingTime:"3m 45s",totalHandled:203,specialization:"General Support",botPersonalityId:3,maxConcurrentChats:4},{id:4,name:"Emily Rodriguez",email:"emily@company.com",status:"online",activeChats:2,satisfaction:4.7,avgHandlingTime:"4m 10s",totalHandled:176,specialization:"Product Expert",botPersonalityId:1,maxConcurrentChats:3}],PH=[{id:1,name:"Website Chat",channel:"webchat",channel_type:"web",settings:{widget_color:"#2563eb",greeting_message:"Halo! Ada yang bisa kami bantu?",offline_message:"Maaf, kami sedang offline. Silakan tinggalkan pesan."},is_active:!0},{id:2,name:"WhatsApp Business",channel:"whatsapp",channel_type:"whatsapp",settings:{phone_number:"+6281234567890",webhook_url:"https://api.whatsapp.com/webhook",verify_token:"whatsapp_verify_token"},is_active:!0},{id:3,name:"Telegram Bot",channel:"telegram",channel_type:"telegram",settings:{bot_token:"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11",webhook_url:"https://api.telegram.org/webhook"},is_active:!0},{id:4,name:"Facebook Messenger",channel:"facebook",channel_type:"facebook",settings:{page_id:"123456789",app_secret:"facebook_app_secret",verify_token:"facebook_verify_token"},is_active:!1}],TH=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"+6281234567890",created_at:"2024-03-15T08:30:00Z",last_seen:"2024-03-20T14:25:00Z",metadata:{location:"Jakarta",source:"website",customer_since:"2023-01-15"}},{id:2,name:"Emma Smith",email:"emma.smith@email.com",phone:"+6281234567891",created_at:"2024-02-10T10:15:00Z",last_seen:"2024-03-20T14:20:00Z",metadata:{location:"Bandung",source:"whatsapp",customer_since:"2024-02-10"}},{id:3,name:"Michael Brown",email:"michael.brown@email.com",phone:"+6281234567892",created_at:"2024-01-20T16:45:00Z",last_seen:"2024-03-20T14:15:00Z",metadata:{location:"Surabaya",source:"facebook",customer_since:"2024-01-20"}},{id:4,name:"Lisa Johnson",email:"lisa.johnson@email.com",phone:"+6281234567893",created_at:"2024-03-01T09:20:00Z",last_seen:"2024-03-20T13:30:00Z",metadata:{location:"Medan",source:"website",customer_since:"2024-03-01"}},{id:5,name:"Robert Taylor",email:"robert.taylor@email.com",phone:"+6281234567894",created_at:"2024-02-28T11:10:00Z",last_seen:"2024-03-20T14:10:00Z",metadata:{location:"Yogyakarta",source:"telegram",customer_since:"2024-02-28"}}],OH=[{id:1,customer_id:1,channel_config_id:1,agent_id:1,status:"active",started_at:"2024-03-20T14:23:00Z",ended_at:null,is_active:!0,tags:["urgent","order_issue"],handover_reason:"Customer requested human agent",metadata:{session_source:"bot_escalation",initial_intent:"order_help"}},{id:2,customer_id:2,channel_config_id:2,agent_id:null,status:"bot_handled",started_at:"2024-03-20T14:18:00Z",ended_at:null,is_active:!0,tags:["info_request"],handover_reason:null,metadata:{session_source:"direct_message",initial_intent:"business_hours"}},{id:3,customer_id:3,channel_config_id:4,agent_id:2,status:"completed",started_at:"2024-03-20T14:05:00Z",ended_at:"2024-03-20T14:13:00Z",is_active:!1,tags:["satisfied","product_help"],handover_reason:null,metadata:{session_source:"direct_contact",initial_intent:"product_inquiry"}},{id:4,customer_id:4,channel_config_id:1,agent_id:1,status:"completed",started_at:"2024-03-20T13:30:00Z",ended_at:"2024-03-20T13:45:00Z",is_active:!1,tags:["resolved"],handover_reason:null,metadata:{session_source:"website_widget",initial_intent:"general_inquiry"}},{id:5,customer_id:5,channel_config_id:3,agent_id:3,status:"active",started_at:"2024-03-20T14:10:00Z",ended_at:null,is_active:!0,tags:["refund","urgent"],handover_reason:"Complex refund request",metadata:{session_source:"bot_escalation",initial_intent:"refund_request"}}],EH=[{id:1,session_id:1,sender_type:"customer",sender_id:1,message_type:"text",content:"Hi, I need help with my recent order",media_url:null,quick_replies:null,created_at:"2024-03-20T14:23:15Z"},{id:2,session_id:1,sender_type:"bot",sender_id:null,message_type:"text",content:"Hello! I'd be happy to help you with your order. Could you please provide your order number?",media_url:null,quick_replies:["Check Order Status","Track Package","Cancel Order"],created_at:"2024-03-20T14:23:20Z"},{id:3,session_id:1,sender_type:"customer",sender_id:1,message_type:"text",content:"It's order #12345",media_url:null,quick_replies:null,created_at:"2024-03-20T14:24:00Z"},{id:4,session_id:1,sender_type:"bot",sender_id:null,message_type:"text",content:"Thank you! I can see your order #12345 was placed on March 15th. Let me transfer you to an agent who can assist you better.",media_url:null,quick_replies:null,created_at:"2024-03-20T14:24:10Z"},{id:5,session_id:1,sender_type:"agent",sender_id:1,message_type:"text",content:"Hi John! This is Sarah from customer support. I can see you have an issue with order #12345. How can I help you today?",media_url:null,quick_replies:null,created_at:"2024-03-20T14:25:00Z"},{id:6,session_id:1,sender_type:"customer",sender_id:1,message_type:"text",content:"The product arrived damaged. I need a replacement.",media_url:null,quick_replies:null,created_at:"2024-03-20T14:26:00Z"},{id:7,session_id:1,sender_type:"customer",sender_id:1,message_type:"image",content:"Here's the photo of the damaged product",media_url:"https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=300&h=200&fit=crop",quick_replies:null,created_at:"2024-03-20T14:26:30Z"},{id:8,session_id:1,sender_type:"agent",sender_id:1,message_type:"text",content:"I'm sorry to hear that! I can see the damage in the photo. I'll immediately process a replacement for you. You should receive it within 2-3 business days.",media_url:null,quick_replies:null,created_at:"2024-03-20T14:27:00Z"},{id:9,session_id:2,sender_type:"customer",sender_id:2,message_type:"text",content:"What are your business hours?",media_url:null,quick_replies:null,created_at:"2024-03-20T14:18:15Z"},{id:10,session_id:2,sender_type:"bot",sender_id:null,message_type:"text",content:"Our business hours are Monday-Friday 9AM-6PM WIB, and Saturday 9AM-3PM WIB. We're closed on Sundays and public holidays.",media_url:null,quick_replies:["Contact Support","Visit Store","More Info"],created_at:"2024-03-20T14:18:20Z"},{id:11,session_id:3,sender_type:"customer",sender_id:3,message_type:"text",content:"Hi, I'm looking for information about your latest products",media_url:null,quick_replies:null,created_at:"2024-03-20T14:05:15Z"},{id:12,session_id:3,sender_type:"agent",sender_id:2,message_type:"text",content:"Hello! I'd be happy to help you with product information. What specific products are you interested in?",media_url:null,quick_replies:null,created_at:"2024-03-20T14:06:00Z"},{id:13,session_id:3,sender_type:"agent",sender_id:2,message_type:"document",content:"Here's our latest product catalog",media_url:"https://example.com/catalog.pdf",quick_replies:null,created_at:"2024-03-20T14:07:00Z"},{id:14,session_id:3,sender_type:"customer",sender_id:3,message_type:"text",content:"Thank you for your help! This is exactly what I needed.",media_url:null,quick_replies:null,created_at:"2024-03-20T14:12:00Z"}],Xv=[{channel:"WhatsApp",sessions:450,satisfaction:4.8,avgDuration:"5m 23s",fill:"hsl(var(--chart-1))"},{channel:"WebChat",sessions:380,satisfaction:4.6,avgDuration:"4m 15s",fill:"hsl(var(--chart-2))"},{channel:"Facebook",sessions:290,satisfaction:4.5,avgDuration:"6m 45s",fill:"hsl(var(--chart-3))"},{channel:"Telegram",sessions:180,satisfaction:4.7,avgDuration:"3m 50s",fill:"hsl(var(--chart-4))"},{channel:"Email",sessions:120,satisfaction:4.4,avgDuration:"15m 30s",fill:"hsl(var(--chart-5))"}],IH=[{hour:"00:00",bot:45,agent:12},{hour:"04:00",bot:32,agent:8},{hour:"08:00",bot:89,agent:34},{hour:"12:00",bot:120,agent:56},{hour:"16:00",bot:98,agent:45},{hour:"20:00",bot:67,agent:23}],Jv=[{name:"Customer Service",count:289,percentage:24,trending:"stable"},{name:"Technical Support",count:198,percentage:16,trending:"down"}],Qv=[{id:1,name:"Order Status Check",webhook:"https://n8n.company.com/webhook/order-status",status:"active",triggers:["order_status","track_order"],executions:234},{id:2,name:"Refund Processing",webhook:"https://n8n.company.com/webhook/refund",status:"active",triggers:["refund_request","return"],executions:89},{id:3,name:"Customer Escalation",webhook:"https://n8n.company.com/webhook/escalate",status:"inactive",triggers:["escalate","complaint"],executions:45},{id:4,name:"Appointment Booking",webhook:"https://n8n.company.com/webhook/appointment",status:"active",triggers:["book_appointment","schedule"],executions:167}],DH=[{id:1,name:"Google Sheets",description:"Hubungkan ke Google Sheets untuk membaca dan menulis data pelanggan secara otomatis",icon:"Sheet",category:"productivity",status:"active",configRequired:!0,config:{googleAccountConnected:!0,sheetId:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",sheetName:"Customers",permissions:["read","write"]},features:["Sinkronisasi data pelanggan","Export chat history","Real-time updates"],setupSteps:["Hubungkan akun Google","Pilih Google Sheet","Konfigurasi permissions"]},{id:2,name:"WhatsApp Business API",description:"Integrasi resmi dengan WhatsApp Business API untuk fitur lanjutan dan analytics",icon:"MessageSquare",category:"communication",status:"active",configRequired:!0,config:{businessAccountId:"123456789",phoneNumberId:"987654321",accessToken:"EAABwzLixnjYBOZB...",webhookVerifyToken:"your_verify_token"},features:["Verified business badge","Template messages","Rich media support","Advanced analytics"],setupSteps:["Verifikasi Business Account","Konfigurasi webhook","Setup templates"]},{id:3,name:"Cek Ongkos Kirim",description:"Integrasi dengan API pengiriman untuk cek ongkos kirim otomatis (JNE, TIKI, POS)",icon:"Truck",category:"shipping",status:"inactive",configRequired:!0,config:{jneApiKey:"",tikiApiKey:"",posApiKey:"",defaultOriginCity:"Jakarta"},features:["Multi-carrier support","Real-time pricing","Weight calculation","Distance estimation"],setupSteps:["Daftar API key carrier","Set origin location","Test connection"]},{id:4,name:"Kirim Notifikasi Pribadi",description:"Kirim notifikasi push atau email ke admin ketika ada percakapan prioritas tinggi",icon:"Bell",category:"notification",status:"active",configRequired:!0,config:{pushNotificationApiKey:"fcm_server_key_...",emailProvider:"smtp",smtpConfig:{host:"smtp.gmail.com",port:587,username:"admin@company.com",password:"app_password"},notificationRules:[{trigger:"high_priority_conversation",enabled:!0,pushNotification:!0,emailNotification:!0},{trigger:"escalation_to_human",enabled:!0,pushNotification:!0,emailNotification:!1}]},features:["Push notifications","Email alerts","Custom rules","Priority filtering"],setupSteps:["Konfigurasi FCM","Setup SMTP","Set notification rules"]},{id:5,name:"Allow List (Whitelist Numbers)",description:"Batasi akses chatbot hanya untuk nomor telepon yang terdaftar dalam whitelist",icon:"Shield",category:"security",status:"inactive",configRequired:!0,config:{enabled:!1,allowedNumbers:["+6281234567890","+6281234567891","+6281234567892"],blockMessage:"Maaf, nomor Anda tidak terdaftar untuk menggunakan layanan ini.",adminNumbers:["+6281234567890"]},features:["Number verification","Admin bypass","Custom block message","Bulk import"],setupSteps:["Enable whitelist mode","Add allowed numbers","Set block message"]},{id:6,name:"Zapier Integration",description:"Hubungkan dengan 5000+ aplikasi melalui Zapier untuk automasi workflow",icon:"Zap",category:"automation",status:"inactive",configRequired:!0,config:{zapierApiKey:"",webhookUrl:"https://hooks.zapier.com/hooks/catch/...",activeZaps:[]},features:["5000+ app connections","Custom triggers","Multi-step workflows","Real-time sync"],setupSteps:["Connect Zapier account","Create webhook trigger","Build workflows"]},{id:7,name:"CRM Integration",description:"Sinkronisasi otomatis dengan sistem CRM untuk tracking customer journey",icon:"Users",category:"crm",status:"inactive",configRequired:!0,config:{crmProvider:"salesforce",apiEndpoint:"",apiKey:"",syncFields:["name","email","phone","notes"],autoCreateContacts:!0},features:["Contact sync","Lead tracking","Activity logging","Custom field mapping"],setupSteps:["Select CRM provider","Configure API access","Map data fields"]},{id:8,name:"Payment Gateway",description:"Terima pembayaran langsung dalam chat menggunakan payment gateway",icon:"CreditCard",category:"payment",status:"inactive",configRequired:!0,config:{provider:"midtrans",merchantId:"",clientKey:"",serverKey:"",environment:"sandbox",supportedMethods:["credit_card","bank_transfer","e_wallet"]},features:["In-chat payments","Multiple methods","Transaction tracking","Refund processing"],setupSteps:["Choose payment provider","Configure merchant account","Test transactions"]},{id:9,name:"Auto Reminder",description:"Buat reminder untuk melakukan tugas tertentu pada waktu tertentu",icon:"Calendar",category:"automation",status:"inactive",configRequired:!0,config:{timezone:"Asia/Jakarta",defaultReminderTime:"09:00",maxRemindersPerUser:10,reminderTypes:["appointment","follow_up","task","custom"],notificationChannels:["chat","email","sms"]},features:["Scheduled reminders","Multiple reminder types","Timezone support","Recurring reminders"],setupSteps:["Set default timezone","Configure notification channels","Test reminder delivery"]},{id:10,name:"Nearest Location",description:"Mencari lokasi terdekat dari customer",icon:"MapPin",category:"location",status:"inactive",configRequired:!0,config:{mapProvider:"google_maps",apiKey:"",searchRadius:5e3,maxResults:10,locationTypes:["store","atm","service_center","distributor"],enableDirections:!0},features:["Real-time location search","Distance calculation","Turn-by-turn directions","Store locator"],setupSteps:["Choose map provider","Configure API access","Add business locations"]},{id:11,name:"Netzme",description:"Pembayaran transaksi melalui dompet digital Netzme",icon:"Wallet",category:"payment",status:"inactive",configRequired:!0,config:{merchantId:"",apiKey:"",secretKey:"",environment:"sandbox",supportedCurrencies:["IDR"],webhookUrl:""},features:["Digital wallet payments","QR code generation","Transaction verification","Instant settlement"],setupSteps:["Register merchant account","Configure API credentials","Setup webhook notifications"]},{id:12,name:"Email Marketing",description:"Integrasi dengan platform email marketing untuk campaign otomatis",icon:"Mail",category:"marketing",status:"inactive",configRequired:!0,config:{provider:"mailchimp",apiKey:"",defaultListId:"",autoSubscribe:!0,segmentationRules:[],campaignTriggers:["new_customer","abandoned_cart","purchase"]},features:["Auto-subscribe customers","Triggered campaigns","Segmentation","Analytics tracking"],setupSteps:["Connect email provider","Configure subscriber lists","Setup campaign triggers"]},{id:13,name:"Social Media Analytics",description:"Pantau mention brand dan sentiment analysis dari media sosial",icon:"TrendingUp",category:"analytics",status:"inactive",configRequired:!0,config:{platforms:["twitter","instagram","facebook","tiktok"],keywords:[],brandNames:[],sentimentAnalysis:!0,reportFrequency:"daily",alertThreshold:-.3},features:["Multi-platform monitoring","Sentiment analysis","Brand mention alerts","Competitor tracking"],setupSteps:["Connect social accounts","Setup monitoring keywords","Configure alert thresholds"]},{id:14,name:"Live Chat Handover",description:"Transfer chat ke agent manusia dengan konteks lengkap",icon:"UserCheck",category:"communication",status:"active",configRequired:!0,config:{handoverTriggers:["escalation_keyword","sentiment_negative","human_request"],availableAgents:[],workingHours:{start:"09:00",end:"17:00",timezone:"Asia/Jakarta",workingDays:[1,2,3,4,5]},queueManagement:!0,contextTransfer:!0},features:["Smart routing","Context preservation","Queue management","Working hours support"],setupSteps:["Configure handover triggers","Setup agent routing","Test handover flow"]},{id:15,name:"Survey & Feedback",description:"Kumpulkan feedback pelanggan melalui survey interaktif",icon:"ClipboardCheck",category:"feedback",status:"inactive",configRequired:!0,config:{surveyTypes:["satisfaction","nps","product_feedback","custom"],triggerEvents:["conversation_end","purchase_complete","manual"],questionFormats:["multiple_choice","rating","text","yes_no"],responseAnalysis:!0,exportFormats:["csv","pdf","excel"]},features:["Interactive surveys","NPS tracking","Response analytics","Export capabilities"],setupSteps:["Create survey templates","Configure trigger events","Setup analytics dashboard"]},{id:16,name:"Inventory Checker",description:"Cek stok produk real-time dan notifikasi ketersediaan",icon:"Package",category:"inventory",status:"inactive",configRequired:!0,config:{inventorySystem:"custom",apiEndpoint:"",apiKey:"",autoUpdate:!0,lowStockThreshold:10,notifyOnLowStock:!0,updateInterval:300},features:["Real-time stock check","Low stock alerts","Multi-location inventory","Auto-sync with POS"],setupSteps:["Connect inventory system","Configure stock thresholds","Test stock queries"]},{id:17,name:"Voice to Text",description:"Konversi pesan suara menjadi teks menggunakan AI",icon:"Mic",category:"ai",status:"inactive",configRequired:!0,config:{provider:"google_cloud",apiKey:"",supportedLanguages:["id-ID","en-US","ms-MY"],autoTranslate:!1,confidenceThreshold:.8,maxDuration:60},features:["Multi-language support","High accuracy","Real-time processing","Confidence scoring"],setupSteps:["Choose speech provider","Configure language settings","Test voice recognition"]},{id:18,name:"QR Code Generator",description:"Generate QR code untuk berbagai keperluan (payment, link, contact)",icon:"QrCode",category:"utility",status:"inactive",configRequired:!1,config:{defaultSize:256,errorCorrection:"M",logoSupport:!0,formats:["png","jpeg","svg"],qrTypes:["url","text","payment","contact","wifi"]},features:["Multiple QR types","Custom branding","High resolution","Batch generation"],setupSteps:["Configure default settings","Upload brand logo","Test QR generation"]}],pr=[{id:"basic",name:"Starter",tier:"basic",priceMonthly:299e3,priceYearly:299e4,currency:"IDR",maxAgents:3,maxMessagesPerMonth:500,features:["Live Chat Widget","Basic Analytics Dashboard","Email Support","3 Chat Agents","500 Messages/Bulan","Template Dasar","Integrasi WhatsApp","Auto-Reply Basic","Chat History (30 hari)","Mobile App Support"],highlights:["Terpopuler"],description:"Cocok untuk UMKM dan bisnis kecil yang baru memulai dengan chatbot. Fitur lengkap untuk customer service yang efektif.",isActive:!0,activeSubscriptions:156,totalRevenue:46644e3,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-03-20T14:30:00Z"},{id:"pro",name:"Business",tier:"professional",priceMonthly:799e3,priceYearly:799e4,currency:"IDR",maxAgents:10,maxMessagesPerMonth:2e3,features:["Semua Fitur Starter","Analytics Lanjutan","API Access","Priority Support","Integrasi Custom","10 Chat Agents","2,000 Messages/Bulan","Template Premium","Custom Branding","Multi-language (ID/EN)","Advanced Reporting","Webhook Integrations","Auto-Reply Advanced","Chat History (90 hari)","Team Management","Performance Analytics"],highlights:["Nilai Terbaik"],description:"Ideal untuk bisnis yang sedang berkembang. Fitur lengkap dengan analitik mendalam dan integrasi yang fleksibel.",isActive:!0,activeSubscriptions:89,totalRevenue:71111e3,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-03-20T14:30:00Z"},{id:"enterprise",name:"Enterprise",tier:"enterprise",priceMonthly:1999e3,priceYearly:1999e4,currency:"IDR",maxAgents:50,maxMessagesPerMonth:1e4,features:["Semua Fitur Business","White Label Solution","Custom Workflows","Dedicated Support","SLA Guarantee","50 Chat Agents","10,000 Messages/Bulan","Custom Development","Advanced Security","Multi-tenant Support","Custom AI Training","24/7 Phone Support","On-premise Option","Custom Integrations","Advanced Analytics Dashboard","Chat History (1 tahun)","Unlimited Templates","Advanced AI Features","Custom Branding Full","Multi-language Unlimited"],highlights:["Paling Powerful"],description:"Solusi lengkap untuk perusahaan besar dengan kebutuhan khusus. Dukungan dedicated dan fitur enterprise untuk skalabilitas maksimal.",isActive:!0,activeSubscriptions:23,totalRevenue:45977e3,createdAt:"2024-01-15T10:00:00Z",updatedAt:"2024-03-20T14:30:00Z"}],Yr={lastUpdated:"2024-03-20T14:30:00Z",version:"1.0.0",totalPlans:3,totalActiveSubscriptions:268,totalMonthlyRevenue:163732e3,currency:"IDR"},ej=t=>{const s=new Date(t),a=new Date,r=a-s,n=Math.floor(r/6e4),i=Math.floor(r/36e5),l=Math.floor(r/864e5);return n<1?"Baru saja":n<60?`${n} menit lalu`:i<24?`${i} jam lalu`:l<7?`${l} hari lalu`:s.toLocaleDateString("id-ID",{day:"numeric",month:"short",year:s.getFullYear()!==a.getFullYear()?"numeric":void 0})},MH=t=>new Date(t).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),$H=()=>{var q,z,ne,Y,se,ve,Be,ae,Ee,me,ye,he,Oe,ke;const[t,s]=y.useState("sessions"),[a,r]=y.useState(null),[n,i]=y.useState("all"),[l,c]=y.useState("all"),[o,d]=y.useState("all"),[u,m]=y.useState(""),[h,x]=y.useState(""),[f,p]=y.useState("");y.useState("text");const[g,w]=y.useState("info"),[S,b]=y.useState(""),[A,v]=y.useState(""),[j,N]=y.useState(""),O=y.useMemo(()=>OH.map(M=>{const ue=TH.find(Ue=>Ue.id===M.customer_id),fe=PH.find(Ue=>Ue.id===M.channel_config_id),qe=ji.find(Ue=>Ue.id===M.agent_id),Ge=EH.filter(Ue=>Ue.session_id===M.id),it=Ge[Ge.length-1];return{...M,customer:ue,channelConfig:fe,agent:qe,messages:Ge,lastMessage:it,unreadCount:Ge.filter(Ue=>Ue.sender_type==="customer"&&Ue.created_at>(M.last_read_at||"2024-03-20T14:00:00Z")).length}}),[]),C=y.useMemo(()=>O.filter(M=>{var ue,fe,qe,Ge,it;if(n!=="all"&&((ue=M.channelConfig)==null?void 0:ue.channel_type)!==n||l!=="all"&&(l==="unassigned"&&M.agent_id!==null||l!=="unassigned"&&M.agent_id!==parseInt(l))||o!=="all"&&M.status!==o||u&&!M.tags.some(Ue=>Ue.toLowerCase().includes(u.toLowerCase())))return!1;if(h){const Ue=h.toLowerCase(),ee=((qe=(fe=M.customer)==null?void 0:fe.name)==null?void 0:qe.toLowerCase())||"",G=((it=(Ge=M.lastMessage)==null?void 0:Ge.content)==null?void 0:it.toLowerCase())||"";if(!ee.includes(Ue)&&!G.includes(Ue))return!1}return!0}),[O,n,l,o,u,h]),D=M=>{switch(M){case"whatsapp":return e.jsx(Qd,{className:"w-4 h-4 text-green-500"});case"web":return e.jsx(Ss,{className:"w-4 h-4 text-blue-500"});case"facebook":return e.jsx(Pe,{className:"w-4 h-4 text-blue-600"});case"telegram":return e.jsx(_i,{className:"w-4 h-4 text-sky-500"});default:return e.jsx(Qd,{className:"w-4 h-4"})}},E=M=>{switch(M){case"active":return"destructive";case"bot_handled":return"default";case"agent_handled":return"secondary";case"completed":return"outline";default:return"default"}},P=M=>{const ue=M.target.files[0];ue&&a&&console.log("Uploading file:",ue.name,"to session:",a.id)},R=()=>{!f.trim()||!a||(console.log("Sending message:",f,"to session:",a.id),p(""))},U=M=>{a&&(console.log("Changing session status to:",M,"for session:",a.id),v(M))},I=M=>{a&&(console.log("Assigning agent:",M,"to session:",a.id),N(M))},L=()=>{!S.trim()||!a||(console.log("Adding tag:",S,"to session:",a.id),b(""))},Z=({message:M,session:ue})=>{var Ue,ee;const fe=M.sender_type==="customer",qe=M.sender_type==="bot",Ge=M.sender_type==="agent",it=fe?(Ue=ue.customer)==null?void 0:Ue.name:qe?"Bot":((ee=ji.find(G=>G.id===M.sender_id))==null?void 0:ee.name)||"Agent";return e.jsx("div",{className:`flex mb-4 ${fe?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[70%] ${fe?"order-2":"order-1"}`,children:[!fe&&e.jsx("p",{className:"text-xs text-muted-foreground mb-1 px-1",children:it}),e.jsxs("div",{className:`rounded-lg px-4 py-2 ${fe?"bg-primary text-primary-foreground":Ge?"bg-secondary text-secondary-foreground":"bg-muted text-muted-foreground"}`,children:[M.message_type==="text"&&e.jsx("p",{className:"text-sm",children:M.content}),M.message_type==="image"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-2",children:M.content}),e.jsx("img",{src:M.media_url,alt:"Image message",className:"max-w-full rounded-md cursor-pointer hover:opacity-80",onClick:()=>window.open(M.media_url,"_blank")})]}),M.message_type==="document"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:M.content}),e.jsxs("a",{href:M.media_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs underline flex items-center gap-1 mt-1",children:[e.jsx(ds,{className:"w-3 h-3"}),"Download"]})]})]})]}),M.quick_replies&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:M.quick_replies.map((G,je)=>e.jsx(k,{variant:"outline",size:"sm",className:"text-xs h-7",onClick:()=>p(G),children:G},je))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 text-center",children:MH(M.created_at)})]})})};return t==="manage-inbox"?e.jsx(zN,{}):e.jsxs("div",{className:"h-[calc(100vh-6rem)] flex gap-4",children:[e.jsxs(F,{className:"w-80 flex flex-col",children:[e.jsxs(H,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(V,{className:"text-lg",children:"Session Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:"secondary",children:[C.filter(M=>M.status==="active").length," Aktif"]}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>s("manage-inbox"),children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Cari sesi...",className:"pl-9",value:h,onChange:M=>x(M.target.value)})]}),e.jsxs(ie,{value:n,onValueChange:i,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter berdasarkan kanal"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"Semua Kanal"}),e.jsx(T,{value:"whatsapp",children:"WhatsApp"}),e.jsx(T,{value:"web",children:"Website"}),e.jsx(T,{value:"telegram",children:"Telegram"}),e.jsx(T,{value:"facebook",children:"Facebook"})]})]}),e.jsxs(ie,{value:o,onValueChange:d,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter berdasarkan status"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"Semua Status"}),e.jsx(T,{value:"active",children:"Aktif"}),e.jsx(T,{value:"bot_handled",children:"Ditangani Bot"}),e.jsx(T,{value:"agent_handled",children:"Ditangani Agent"}),e.jsx(T,{value:"completed",children:"Selesai"})]})]}),e.jsxs(ie,{value:l,onValueChange:c,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter berdasarkan agent"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"Semua Agent"}),e.jsx(T,{value:"unassigned",children:"Belum Ditugaskan"}),ji.map(M=>e.jsx(T,{value:M.id.toString(),children:M.name},M.id))]})]}),e.jsx(K,{placeholder:"Filter berdasarkan tag...",value:u,onChange:M=>m(M.target.value)})]})]}),e.jsx(B,{className:"flex-1 overflow-y-auto p-2",children:e.jsx("div",{className:"space-y-2",children:C.map(M=>{var ue,fe,qe,Ge,it,Ue,ee;return e.jsxs("div",{onClick:()=>r(M),className:`p-3 rounded-lg cursor-pointer transition-all ${(a==null?void 0:a.id)===M.id?"bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-primary/20":"hover:bg-accent"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ti,{className:"w-8 h-8",children:e.jsx(Oi,{children:((fe=(ue=M.customer)==null?void 0:ue.name)==null?void 0:fe.split(" ").map(G=>G[0]).join(""))||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:((qe=M.customer)==null?void 0:qe.name)||"Unknown User"}),e.jsxs("div",{className:"flex items-center gap-1",children:[D((Ge=M.channelConfig)==null?void 0:Ge.channel_type),e.jsx("span",{className:"text-xs text-muted-foreground",children:((it=M.channelConfig)==null?void 0:it.channel_type)||"Unknown"})]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(W,{variant:E(M.status),className:"text-xs",children:M.status==="active"?"Aktif":M.status==="bot_handled"?"Bot":M.status==="agent_handled"?"Agent":"Selesai"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:ej(((Ue=M.lastMessage)==null?void 0:Ue.created_at)||M.started_at)}),M.unreadCount>0&&e.jsx(W,{variant:"destructive",className:"text-xs",children:M.unreadCount})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-2",children:((ee=M.lastMessage)==null?void 0:ee.content)||"Tidak ada pesan"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1",children:M.agent&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:M.agent.name})]})}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[M.tags.slice(0,2).map(G=>e.jsx(W,{variant:"outline",className:"text-xs",children:G},G)),M.tags.length>2&&e.jsxs(W,{variant:"outline",className:"text-xs",children:["+",M.tags.length-2]})]})]})]},M.id)})})})]}),e.jsx(F,{className:"flex-1 flex flex-col",children:a?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ti,{className:"w-10 h-10",children:e.jsx(Oi,{children:((z=(q=a.customer)==null?void 0:q.name)==null?void 0:z.split(" ").map(M=>M[0]).join(""))||"U"})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-lg",children:((ne=a.customer)==null?void 0:ne.name)||"Unknown User"}),e.jsxs("div",{className:"flex items-center gap-2",children:[D((Y=a.channelConfig)==null?void 0:Y.channel_type),e.jsx("span",{className:"text-sm text-muted-foreground",children:((se=a.channelConfig)==null?void 0:se.name)||"Unknown Channel"}),e.jsx(W,{variant:E(a.status),className:"text-xs",children:a.status==="active"?"Aktif":a.status==="bot_handled"?"Ditangani Bot":a.status==="agent_handled"?"Ditangani Agent":"Selesai"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.handover_reason&&e.jsxs(W,{variant:"outline",className:"text-xs",children:[e.jsx(nt,{className:"w-3 h-3 mr-1"}),"Eskalasi"]}),e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(Te,{className:"w-4 h-4"})})]})]})}),e.jsx(B,{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"space-y-4",children:a.messages.map(M=>e.jsx(Z,{message:M,session:a},M.id))})}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Re,{value:f,onChange:M=>p(M.target.value),placeholder:"Ketik pesan Anda...",onKeyPress:M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),R())},className:"min-h-[60px] resize-none"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(rj,{className:"w-4 h-4"}),e.jsx("input",{id:"file-upload",type:"file",className:"hidden",onChange:P,accept:"image/*,.pdf,.doc,.docx"})]})}),e.jsx(k,{onClick:R,size:"sm",children:e.jsx(_i,{className:"w-4 h-4"})})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pilih Sesi untuk Memulai"}),e.jsx("p",{className:"text-muted-foreground",children:"Pilih sesi dari daftar di sebelah kiri untuk melihat percakapan dan mengelola sesi."})]})})}),e.jsx(F,{className:"w-80 flex flex-col",children:a?e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx(V,{className:"text-lg",children:"Manajemen Sesi"})}),e.jsx(B,{className:"flex-1 overflow-y-auto",children:e.jsxs(kt,{value:g,onValueChange:w,children:[e.jsxs(wt,{className:"grid w-full grid-cols-2",children:[e.jsx(pe,{value:"info",children:"Info Pelanggan"}),e.jsx(pe,{value:"manage",children:"Kelola Sesi"})]}),e.jsxs(ge,{value:"info",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Detail Pelanggan"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:((ve=a.customer)==null?void 0:ve.name)||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:((Be=a.customer)==null?void 0:Be.email)||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:((ae=a.customer)==null?void 0:ae.phone)||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:((me=(Ee=a.customer)==null?void 0:Ee.metadata)==null?void 0:me.location)||"-"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Pelanggan sejak ",((he=(ye=a.customer)==null?void 0:ye.metadata)==null?void 0:he.customer_since)||"-"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Riwayat Interaksi"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ini adalah sesi #",a.id," untuk pelanggan ini."]})]})]}),e.jsxs(ge,{value:"manage",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Detail Sesi"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Dimulai:"}),e.jsx("span",{children:ej(a.started_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Kanal:"}),e.jsx("span",{children:(Oe=a.channelConfig)==null?void 0:Oe.name})]}),a.handover_reason&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Alasan Eskalasi:"}),e.jsx("span",{className:"text-right",children:a.handover_reason})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Tetapkan Agent"}),e.jsxs(ie,{value:j||((ke=a.agent_id)==null?void 0:ke.toString())||"",onValueChange:I,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Pilih agent..."})}),e.jsxs(oe,{children:[e.jsx(T,{value:"",children:"Belum ditugaskan"}),ji.filter(M=>M.status==="online").map(M=>e.jsx(T,{value:M.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),M.name]})},M.id))]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:a.tags.map(M=>e.jsxs(W,{variant:"secondary",className:"text-xs",children:[M,e.jsx(Je,{className:"w-3 h-3 ml-1 cursor-pointer"})]},M))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Tambah tag...",value:S,onChange:M=>b(M.target.value),onKeyPress:M=>M.key==="Enter"&&L(),className:"text-sm"}),e.jsx(k,{size:"sm",onClick:L,children:e.jsx(at,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Status Sesi"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(k,{variant:"outline",className:"w-full justify-start",onClick:()=>U("active"),children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Aktifkan Sesi"]}),e.jsxs(k,{variant:"outline",className:"w-full justify-start",onClick:()=>U("completed"),children:[e.jsx(da,{className:"w-4 h-4 mr-2"}),"Tutup Sesi"]})]})]})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ns,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tidak Ada Sesi Dipilih"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Pilih sesi untuk melihat detail pelanggan dan opsi manajemen."})]})})})]})},RH=()=>{const[t,s]=y.useState("session-manager");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Inbox"}),e.jsx("p",{className:"text-gray-600",children:"Kelola session chat dan konfigurasi inbox"})]})}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-2",children:[e.jsxs(pe,{value:"session-manager",className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Session Manager"]}),e.jsxs(pe,{value:"inbox-management",className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Inbox Management"]})]}),e.jsx(ge,{value:"session-manager",className:"mt-6",children:e.jsx($H,{})}),e.jsx(ge,{value:"inbox-management",className:"mt-6",children:e.jsx(zN,{})})]})]})},LH=()=>{const t=[{name:"Bot Handled",value:68,fill:"hsl(var(--chart-1))"},{name:"Agent Handled",value:32,fill:"hsl(var(--chart-4))"}],s=[{name:"Sarah Wilson",satisfaction:4.8,handlingTime:4.5,chats:152},{name:"John Davis",satisfaction:4.6,handlingTime:5.2,chats:98},{name:"Mike Chen",satisfaction:4.9,handlingTime:3.8,chats:203},{name:"Emily Rodriguez",satisfaction:4.7,handlingTime:4.2,chats:176}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Deep insights into your chatbot performance"})]}),e.jsxs(kt,{defaultValue:"overview",className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-4",children:[e.jsx(pe,{value:"overview",children:"Overview"}),e.jsx(pe,{value:"channels",children:"Channels"}),e.jsx(pe,{value:"agents",children:"Agents"}),e.jsx(pe,{value:"intents",children:"Intents"})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Session Trends"}),e.jsx(Q,{children:"Bot vs Agent sessions over time"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[300px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(BN,{data:IH,children:[e.jsx(Nr,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Ks,{dataKey:"hour",className:"text-xs"}),e.jsx(Ds,{className:"text-xs"}),e.jsx(Xt,{content:e.jsx(Ka,{})}),e.jsx(er,{type:"monotone",dataKey:"bot",stroke:"hsl(var(--chart-1))",strokeWidth:2}),e.jsx(er,{type:"monotone",dataKey:"agent",stroke:"hsl(var(--chart-4))",strokeWidth:2}),e.jsx(Ya,{})]})})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Session Distribution"}),e.jsx(Q,{children:"Bot vs Agent handling ratio"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[300px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(UN,{children:[e.jsx(pa,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:r})=>`${a} ${(r*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((a,r)=>e.jsx(yl,{fill:a.fill},`cell-${r}`))}),e.jsx(Xt,{content:e.jsx(Ka,{})})]})})})})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Top Intents Analysis"}),e.jsx(Q,{children:"Most frequently asked questions and their trends"})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Intent"}),e.jsx(J,{children:"Count"}),e.jsx(J,{children:"Percentage"}),e.jsx(J,{children:"Trend"}),e.jsx(J,{children:"Success Rate"})]})}),e.jsx(mt,{children:Jv.map(a=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:a.name}),e.jsx(X,{children:a.count}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full",style:{width:`${a.percentage}%`}})}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.percentage,"%"]})]})}),e.jsx(X,{children:e.jsx(W,{variant:a.trending==="up"?"default":a.trending==="down"?"destructive":"secondary",children:a.trending==="up"?"↗️ Up":a.trending==="down"?"↘️ Down":"→ Stable"})}),e.jsx(X,{children:e.jsxs("span",{className:"text-sm font-medium",children:[Math.floor(Math.random()*20+80),"%"]})})]},a.name))})]})})]})]}),e.jsxs(ge,{value:"channels",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Channel Performance"}),e.jsx(Q,{children:"Performance metrics across different channels"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[400px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(Gd,{data:Xv,children:[e.jsx(Nr,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Ks,{dataKey:"channel",className:"text-xs"}),e.jsx(Ds,{className:"text-xs"}),e.jsx(Xt,{content:e.jsx(Ka,{})}),e.jsx(sa,{dataKey:"sessions",fill:"hsl(var(--chart-1))"}),e.jsx(sa,{dataKey:"satisfaction",fill:"hsl(var(--chart-2))"})]})})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Xv.map(a=>e.jsxs(F,{children:[e.jsx(H,{className:"pb-2",children:e.jsx(V,{className:"text-lg",children:a.channel})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-medium",children:a.sessions})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Satisfaction"}),e.jsxs("span",{className:"font-medium",children:[a.satisfaction,"/5"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg Duration"}),e.jsx("span",{className:"font-medium",children:a.avgDuration})]})]})})]},a.channel))})]}),e.jsxs(ge,{value:"agents",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Agent Performance"}),e.jsx(Q,{children:"Individual agent performance metrics"})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Agent"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Active Chats"}),e.jsx(J,{children:"Satisfaction"}),e.jsx(J,{children:"Avg Handling Time"}),e.jsx(J,{children:"Total Handled"})]})}),e.jsx(mt,{children:ji.map(a=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:a.name}),e.jsx(X,{children:e.jsx(W,{variant:a.status==="online"?"default":a.status==="busy"?"secondary":"outline",children:a.status})}),e.jsx(X,{children:a.activeChats}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:a.satisfaction}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"/5"})]})}),e.jsx(X,{children:a.avgHandlingTime}),e.jsx(X,{children:a.totalHandled})]},a.id))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Agent Satisfaction"}),e.jsx(Q,{children:"Satisfaction scores by agent"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[300px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(Gd,{data:s,layout:"horizontal",children:[e.jsx(Nr,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Ks,{type:"number",domain:[0,5],className:"text-xs"}),e.jsx(Ds,{dataKey:"name",type:"category",className:"text-xs"}),e.jsx(Xt,{content:e.jsx(Ka,{})}),e.jsx(sa,{dataKey:"satisfaction",fill:"hsl(var(--chart-3))"})]})})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Handling Time vs Satisfaction"}),e.jsx(Q,{children:"Correlation between handling time and satisfaction"})]}),e.jsx(B,{children:e.jsx(qa,{className:"h-[300px]",config:{},children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(Gd,{data:s,children:[e.jsx(Nr,{strokeDasharray:"3 3",className:"stroke-muted"}),e.jsx(Ks,{dataKey:"name",className:"text-xs"}),e.jsx(Ds,{className:"text-xs"}),e.jsx(Xt,{content:e.jsx(Ka,{})}),e.jsx(sa,{dataKey:"handlingTime",fill:"hsl(var(--chart-4))"})]})})})})]})]})]}),e.jsx(ge,{value:"intents",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Intent Analysis"}),e.jsx(Q,{children:"Detailed analysis of user intents and patterns"})]}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Jv.map(a=>e.jsx(F,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.count," requests (",a.percentage,"%)"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Success Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.floor(Math.random()*20+80),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Avg Response Time"}),e.jsxs("span",{className:"font-medium",children:[Math.floor(Math.random()*5+1),"s"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Escalation Rate"}),e.jsxs("span",{className:"font-medium",children:[Math.floor(Math.random()*30+10),"%"]})]})]})]})},a.name))})})]})})]})]})},FH=()=>e.jsx(LH,{}),BH=t=>{try{let s=new Date(t);return isNaN(s.getTime())&&typeof t=="string"&&t.match(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/)&&(s=new Date(t.replace(" ","T")+"Z")),isNaN(s.getTime())?new Date:s}catch{return new Date}},UH=()=>{var ee;const[t,s]=y.useState(""),[a,r]=y.useState(_H.filter(G=>G.status!=="deleted")),[n,i]=y.useState(!1),[l,c]=y.useState(null),[o,d]=y.useState("qa"),[u,m]=y.useState({title:"",description:"",content:"",category:"general",priority:"medium",tags:[],language:"id",isPublic:!0,requiresApproval:!1,qaItems:[{question:"",variations:"",answer:"",confidence:"high",keywords:[]}]}),[h,x]=y.useState(0),[f,p]=y.useState(""),[g,w]=y.useState(!1),[S,b]=y.useState({}),[A,v]=y.useState(!1),[j,N]=y.useState([{id:1,type:"user",message:"Hallo, ada yang bisa dibantu?",timestamp:new Date},{id:2,type:"bot",message:"Halo! Selamat datang di platform kami. Saya asisten AI yang akan membantu menjawab pertanyaan Anda. Ada yang bisa saya bantu hari ini? 😊",timestamp:new Date}]),O=7e3,C=y.useRef(null),[D,E]=y.useState(!1),[P,R]=y.useState(!1),U=()=>{C.current&&(E(!0),C.current.scrollTo({top:C.current.scrollHeight,behavior:"smooth"}),setTimeout(()=>E(!1),500))},I=()=>{C.current&&(C.current.scrollTop=C.current.scrollHeight)},L=()=>{if(C.current){const{scrollTop:G,scrollHeight:je,clientHeight:be}=C.current,$e=G+be>=je-10;R(!$e)}};y.useEffect(()=>{I();const G=setTimeout(()=>{U()},100);return()=>clearTimeout(G)},[j]),y.useEffect(()=>{const G=C.current;if(G)return G.addEventListener("scroll",L),L(),()=>{G.removeEventListener("scroll",L)}},[]);const Z=[{value:"general",label:"Umum",icon:ns},{value:"product",label:"Produk",icon:ij},{value:"service",label:"Layanan",icon:Te},{value:"technical",label:"Teknis",icon:Et},{value:"policy",label:"Kebijakan",icon:Ae},{value:"faq",label:"FAQ",icon:ow}],q=[{value:"low",label:"Rendah",color:"text-gray-500"},{value:"medium",label:"Sedang",color:"text-blue-600"},{value:"high",label:"Tinggi",color:"text-orange-600"},{value:"critical",label:"Kritis",color:"text-red-600"}],z=[{value:"id",label:"Bahasa Indonesia"},{value:"en",label:"English"},{value:"ja",label:"日本語"},{value:"ko",label:"한국어"},{value:"zh",label:"中文"}];a.filter(G=>G.status==="active").length;const ne=a.find(G=>G.status==="active"),Y=a.filter(G=>G.title.toLowerCase().includes(t.toLowerCase())||G.content.toLowerCase().includes(t.toLowerCase())),se=G=>{const je=a.find($e=>$e.id===G),be=a.find($e=>$e.status==="active");if(je.status==="active")r($e=>$e.map(Xe=>Xe.id===G?{...Xe,status:"inactive"}:Xe));else{if(be&&be.id!==G&&!window.confirm(`Mengaktifkan "${je.title}" akan menonaktifkan "${be.title}". Lanjutkan?`))return;r($e=>$e.map(Xe=>Xe.id===G?{...Xe,status:"active"}:{...Xe,status:"inactive"}))}},ve=G=>{window.confirm("Apakah Anda yakin ingin menghapus knowledge ini?")&&r(je=>je.map(be=>be.id===G?{...be,status:"deleted"}:be).filter(be=>be.status!=="deleted"))},Be=()=>{m(G=>({...G,qaItems:[...G.qaItems,{question:"",variations:"",answer:""}]}))},ae=G=>{u.qaItems.length>1&&m(je=>({...je,qaItems:je.qaItems.filter((be,$e)=>$e!==G)}))},Ee=(G,je,be)=>{m($e=>({...$e,qaItems:$e.qaItems.map((Xe,ir)=>ir===G?{...Xe,[je]:be}:Xe)}))},me=(G,je)=>{m(be=>({...be,[G]:je})),G==="content"&&x(je.length)},ye=()=>{const G={};return u.title.trim()?u.title.length<10&&(G.title="Judul minimal 10 karakter"):G.title="Judul knowledge wajib diisi",u.description.trim()||(G.description="Deskripsi knowledge wajib diisi"),o==="qa"?(u.qaItems.some(be=>be.question.trim()&&be.answer.trim())||(G.qa="Minimal satu Q&A harus diisi dengan lengkap"),u.qaItems.forEach((be,$e)=>{be.question.trim()&&!be.answer.trim()&&(G[`qa-${$e}-answer`]="Jawaban wajib diisi jika pertanyaan diisi"),!be.question.trim()&&be.answer.trim()&&(G[`qa-${$e}-question`]="Pertanyaan wajib diisi jika jawaban diisi")})):u.content.trim()?u.content.length<100&&(G.content="Konten minimal 100 karakter"):G.content="Konten knowledge wajib diisi",u.tags.length===0&&(G.tags="Minimal satu tag harus dipilih"),G},he=async G=>{G.preventDefault();const je=ye();if(Object.keys(je).length>0){b(je);return}v(!0);try{await new Promise($e=>setTimeout($e,1e3));const be={id:l?l.id:Date.now().toString(),title:u.title.trim(),description:u.description.trim(),content:o==="qa"?"":u.content.trim(),category:u.category,priority:u.priority,tags:u.tags,language:u.language,isPublic:u.isPublic,requiresApproval:u.requiresApproval,metadata:o==="qa"?{type:"qa",qaItems:u.qaItems.filter($e=>$e.question.trim()&&$e.answer.trim()).map($e=>({...$e,keywords:$e.keywords.length>0?$e.keywords:$e.question.toLowerCase().split(" ").filter(Xe=>Xe.length>3)}))}:{type:"article",wordCount:u.content.trim().split(/\s+/).length,readingTime:Math.ceil(u.content.trim().split(/\s+/).length/200)},status:"inactive",created_at:l?l.created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:l?l.created_by:"Current User",version:l?(l.version||1)+1:1};r(l?$e=>$e.map(Xe=>Xe.id===l.id?be:Xe):$e=>[...$e,be]),Oe(),i(!1),c(null),b({}),console.log("Knowledge saved successfully!")}catch(be){console.error("Error saving knowledge:",be),b({submit:"Terjadi kesalahan saat menyimpan. Silakan coba lagi."})}finally{v(!1)}},Oe=()=>{m({title:"",description:"",content:"",category:"general",priority:"medium",tags:[],language:"id",isPublic:!0,requiresApproval:!1,qaItems:[{question:"",variations:"",answer:"",confidence:"high",keywords:[]}]}),x(0),d("qa"),p(""),w(!1),b({}),N([{id:1,type:"user",message:"Hallo, ada yang bisa dibantu?",timestamp:new Date},{id:2,type:"bot",message:"Halo! Selamat datang di platform kami. Saya asisten AI yang akan membantu menjawab pertanyaan Anda. Ada yang bisa saya bantu hari ini? 😊",timestamp:new Date}])},ke=G=>{G.trim()&&!u.tags.includes(G.trim())&&m(je=>({...je,tags:[...je.tags,G.trim()]}))},M=G=>{m(je=>({...je,tags:je.tags.filter(be=>be!==G)}))},ue=["gadai","emas","cicilan","pembayaran","persetujuan","dokumen","syarat","proses","bunga","jasa","admin","biaya","jaminan","pelunasan","perpanjangan","penarikan"],fe=()=>{l?qe(l):Oe()},qe=G=>{var je,be;c(G),m({title:G.title||"",description:G.description||"",content:G.content||"",category:G.category||"general",priority:G.priority||"medium",tags:G.tags||[],language:G.language||"id",isPublic:G.isPublic!==void 0?G.isPublic:!0,requiresApproval:G.requiresApproval||!1,qaItems:((je=G.metadata)==null?void 0:je.type)==="qa"?G.metadata.qaItems.map($e=>({...$e,confidence:$e.confidence||"high",keywords:$e.keywords||[]})):[{question:"",variations:"",answer:"",confidence:"high",keywords:[]}]}),d(((be=G.metadata)==null?void 0:be.type)==="qa"?"qa":"article"),x(G.content?G.content.length:0),b({}),i(!0)},Ge=()=>{if(f.trim()){const G=it(f,u.content),je={id:Date.now(),type:"user",message:f,timestamp:new Date},be={id:Date.now()+1,type:"bot",message:G,timestamp:new Date};N($e=>[...$e,je,be]),console.log("Test message:",f),console.log("AI Response:",G),p("")}},it=(G,je)=>{if(!G.trim())return"Silakan ketik pesan untuk mendapatkan respons dari AI.";const be=G.toLowerCase();if(be.includes("hallo")||be.includes("hai")||be.includes("hello")){const Xe=["Halo! Selamat datang di platform kami. Saya asisten AI yang siap membantu Anda. Ada yang bisa saya bantu hari ini? 😊","Hai! Senang bertemu dengan Anda. Saya di sini untuk membantu menjawab pertanyaan seputar layanan kami. Apa yang ingin Anda ketahui?","Hello! Terima kasih telah menghubungi kami. Saya asisten AI yang akan membantu Anda. Ada pertanyaan spesifik yang ingin Anda ajukan?","Halo! Selamat datang kembali. Saya siap membantu Anda dengan informasi yang Anda butuhkan. Apa yang ingin Anda tanyakan?"];return Xe[Math.floor(Math.random()*Xe.length)]}if(be.includes("gadai")||be.includes("emas")){const Xe=["Untuk layanan gadai emas, kami menyediakan berbagai pilihan dengan proses yang mudah dan cepat. Berdasarkan knowledge base kami, Anda dapat mengajukan gadai emas dengan dokumen yang diperlukan.","Layanan gadai emas kami sangat fleksibel dengan berbagai tenor dan bunga yang kompetitif. Saya dapat membantu menjelaskan detail proses dan persyaratannya.","Gadai emas adalah salah satu layanan unggulan kami. Berdasarkan informasi terbaru, proses approval membutuhkan waktu 1-3 hari kerja dengan jaminan keamanan yang terjamin."];return Xe[Math.floor(Math.random()*Xe.length)]}if(be.includes("cicilan")||be.includes("bayar")||be.includes("pembayaran")){const Xe=["Untuk pembayaran cicilan, kami menyediakan berbagai metode pembayaran yang fleksibel. Anda dapat memilih tenor 3, 6, 12, atau 24 bulan sesuai kemampuan finansial.","Pembayaran cicilan dapat dilakukan melalui transfer bank, e-wallet, atau pembayaran langsung di kantor kami. Setiap metode memiliki keunggulan masing-masing.","Berdasarkan knowledge base kami, cicilan dapat diatur sesuai dengan penghasilan bulanan Anda. Kami juga menyediakan opsi pembayaran di muka untuk mengurangi beban bunga."];return Xe[Math.floor(Math.random()*Xe.length)]}if(be.includes("proses")||be.includes("cara")||be.includes("langkah")){const Xe=["Proses pengajuan sangat sederhana. Pertama, siapkan dokumen yang diperlukan. Kedua, ajukan melalui aplikasi atau datang ke kantor kami. Ketiga, tunggu approval yang biasanya 1-3 hari kerja.","Langkah-langkahnya mudah sekali! Mulai dari pengisian formulir, verifikasi dokumen, hingga pencairan dana. Saya dapat menjelaskan detail setiap tahap jika diperlukan.","Cara mengajukan layanan kami sangat straightforward. Berdasarkan knowledge base, proses dari awal hingga selesai membutuhkan waktu maksimal 5 hari kerja."];return Xe[Math.floor(Math.random()*Xe.length)]}if(be.includes("biaya")||be.includes("harga")||be.includes("tarif")){const Xe=["Biaya layanan kami sangat transparan dan kompetitif. Untuk detail lengkap, saya dapat memberikan breakdown biaya administrasi, bunga, dan biaya lainnya.","Tarif yang kami kenakan sudah termasuk semua biaya tersembunyi. Berdasarkan knowledge base, tidak ada biaya tambahan yang akan dikenakan di luar yang sudah disepakati.","Harga layanan kami sangat terjangkau dengan berbagai pilihan paket. Saya dapat membantu menghitung total biaya berdasarkan jumlah pinjaman dan tenor yang Anda pilih."];return Xe[Math.floor(Math.random()*Xe.length)]}const $e=["Terima kasih atas pertanyaannya. Berdasarkan knowledge base kami, saya dapat membantu menjelaskan detail layanan yang Anda butuhkan.","Pertanyaan yang sangat bagus! Saya menemukan informasi relevan dalam knowledge base kami yang dapat membantu menjawab pertanyaan Anda.","Berdasarkan data yang tersedia, saya dapat memberikan informasi lengkap seputar layanan yang Anda tanyakan. Ada detail spesifik yang ingin Anda ketahui?","Saya senang Anda bertanya tentang hal ini. Knowledge base kami memiliki informasi yang komprehensif untuk menjawab pertanyaan Anda.","Pertanyaan yang tepat! Saya dapat membantu Anda dengan informasi yang akurat berdasarkan knowledge base terbaru kami.","Terima kasih telah menghubungi kami. Saya menemukan beberapa informasi relevan yang dapat membantu menjawab pertanyaan Anda.","Berdasarkan knowledge yang tersedia, saya dapat memberikan panduan lengkap untuk pertanyaan Anda. Ada aspek tertentu yang ingin Anda ketahui lebih detail?","Saya di sini untuk membantu! Knowledge base kami memiliki informasi yang dapat menjawab pertanyaan Anda dengan lengkap dan akurat."];return $e[Math.floor(Math.random()*$e.length)]},Ue=()=>{i(!1),c(null),Oe()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Knowledge Base"}),e.jsx("p",{className:"text-gray-600",children:"Kelola pengetahuan dan FAQ untuk bot"})]}),e.jsxs(k,{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Tambah Pengetahuan Baru"]})]}),ne&&e.jsxs(is,{children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsxs(ls,{children:[e.jsx("strong",{children:"Knowledge Aktif:"})," ",ne.title,((ee=ne.metadata)==null?void 0:ee.type)==="qa"&&e.jsxs("span",{className:"ml-2 text-blue-600",children:["(",ne.metadata.qaItems.length," Q&A)"]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(K,{placeholder:"Cari knowledge...",value:t,onChange:G=>s(G.target.value),className:"pl-10"})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Daftar Knowledge"}),e.jsxs(Q,{children:[Y.length," knowledge tersedia"]})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Judul"}),e.jsx(J,{children:"Tipe"}),e.jsx(J,{children:"Tags"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Dibuat"}),e.jsx(J,{className:"w-20",children:"Actions"})]})}),e.jsx(mt,{children:Y.map(G=>{var je,be,$e,Xe,ir;return e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:G.title}),e.jsx("div",{className:"text-sm text-gray-500",children:((je=G.metadata)==null?void 0:je.type)==="qa"?`${G.metadata.qaItems.length} Q&A`:`${((be=G.metadata)==null?void 0:be.wordCount)||0} kata`})]})}),e.jsx(X,{children:e.jsx(W,{variant:(($e=G.metadata)==null?void 0:$e.type)==="qa"?"default":"secondary",children:((Xe=G.metadata)==null?void 0:Xe.type)==="qa"?"Q&A":"Knowledge"})}),e.jsx(X,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:(ir=G.tags)==null?void 0:ir.map((WN,qN)=>e.jsx(W,{variant:"outline",className:"text-xs",children:WN},qN))})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{checked:G.status==="active",onCheckedChange:()=>se(G.id)}),e.jsx(W,{variant:G.status==="active"?"default":"secondary",children:G.status==="active"?"Aktif":"Tidak Aktif"})]})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm text-gray-500",children:BH(G.created_at).toLocaleDateString("id-ID")})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>qe(G),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>ve(G.id),children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},G.id)})})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:G=>{G.target===G.currentTarget&&Ue()},children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-y-auto",onClick:G=>G.stopPropagation(),children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Wl,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:l?"Edit Knowledge":"Tambah Knowledge Baru"}),e.jsx("p",{className:"text-gray-600 mt-1",children:l?"Perbarui informasi knowledge yang sudah ada":"Buat knowledge baru untuk meningkatkan kemampuan bot"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:Ue,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress Form"}),e.jsx("span",{className:"text-sm text-gray-500",children:o==="qa"?"Step 1 of 2":"Step 2 of 2"})]}),e.jsx(us,{value:o==="qa"?50:100,className:"h-2"})]}),e.jsxs("form",{onSubmit:he,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-2",children:[e.jsxs(_,{htmlFor:"title",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ba,{className:"w-4 h-4 text-blue-600"}),"Judul Knowledge *"]}),e.jsx(K,{id:"title",placeholder:"Contoh: Pertanyaan Seputar Gadai Emas, Panduan Lengkap Pembayaran Cicilan",value:u.title,onChange:G=>me("title",G.target.value),className:S.title?"border-red-500":"",required:!0}),S.title&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(nt,{className:"w-4 h-4"}),S.title]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-2",children:[e.jsxs(_,{htmlFor:"description",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4 text-green-600"}),"Deskripsi Singkat *"]}),e.jsx(Re,{id:"description",placeholder:"Jelaskan secara singkat tentang knowledge ini (maksimal 200 karakter)",value:u.description,onChange:G=>me("description",G.target.value),rows:3,maxLength:200,className:S.description?"border-red-500":"",required:!0}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:[u.description.length,"/200 karakter"]}),S.description&&e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx(nt,{className:"w-4 h-4"}),S.description]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"category",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(nj,{className:"w-4 h-4 text-purple-600"}),"Kategori *"]}),e.jsxs(ie,{value:u.category,onValueChange:G=>me("category",G),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsx(oe,{children:Z.map(G=>{const je=G.icon;return e.jsx(T,{value:G.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),G.label]})},G.value)})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"priority",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4 text-orange-600"}),"Prioritas"]}),e.jsxs(ie,{value:u.priority,onValueChange:G=>me("priority",G),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsx(oe,{children:q.map(G=>e.jsx(T,{value:G.value,children:e.jsx("span",{className:G.color,children:G.label})},G.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"language",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ss,{className:"w-4 h-4 text-blue-600"}),"Bahasa"]}),e.jsxs(ie,{value:u.language,onValueChange:G=>me("language",G),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsx(oe,{children:z.map(G=>e.jsx(T,{value:G.value,children:G.label},G.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(_,{htmlFor:"visibility",className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4 text-gray-600"}),"Visibilitas"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"isPublic",checked:u.isPublic,onCheckedChange:G=>me("isPublic",G)}),e.jsx(_,{htmlFor:"isPublic",children:"Knowledge Publik"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"requiresApproval",checked:u.requiresApproval,onCheckedChange:G=>me("requiresApproval",G)}),e.jsx(_,{htmlFor:"requiresApproval",children:"Perlu Persetujuan"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4 text-indigo-600"}),"Tags *"]}),e.jsxs("div",{className:"space-y-3",children:[u.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:u.tags.map((G,je)=>e.jsxs(W,{variant:"secondary",className:"px-3 py-1",children:[G,e.jsx("button",{type:"button",onClick:()=>M(G),className:"ml-2 hover:text-red-600",children:e.jsx(Je,{className:"w-3 h-3"})})]},je))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Ketik tag dan tekan Enter",onKeyPress:G=>{G.key==="Enter"&&(G.preventDefault(),ke(G.target.value),G.target.value="")},className:"flex-1"}),e.jsx(k,{type:"button",variant:"outline",onClick:()=>{const G=document.querySelector('input[placeholder="Ketik tag dan tekan Enter"]');G&&G.value.trim()&&(ke(G.value),G.value="")},children:"Tambah"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tag yang sering digunakan:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ue.slice(0,8).map(G=>e.jsxs("button",{type:"button",onClick:()=>ke(G),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md text-gray-700 transition-colors",children:["+ ",G]},G))})]}),S.tags&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(nt,{className:"w-4 h-4"}),S.tags]})]})]}),e.jsx(as,{}),e.jsxs(kt,{value:o,onValueChange:d,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-2",children:[e.jsxs(pe,{value:"qa",className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Input Q&A"]}),e.jsxs(pe,{value:"article",className:"flex items-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Input Knowledge"]})]}),e.jsxs(ge,{value:"qa",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-4",children:[u.qaItems.map((G,je)=>e.jsxs(F,{className:"border-l-4 border-l-blue-500",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs(V,{className:"text-lg",children:["Q&A #",je+1]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pertanyaan dan jawaban untuk bot"})]})]}),u.qaItems.length>1&&e.jsx(k,{type:"button",variant:"ghost",size:"sm",onClick:()=>ae(je),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Ve,{className:"w-4 h-4"})})]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{htmlFor:`question-${je}`,className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ba,{className:"w-4 h-4 text-blue-600"}),"Pertanyaan Pengguna *"]}),e.jsx(K,{id:`question-${je}`,placeholder:"Contoh: Berapa lama proses persetujuan gadai?",value:G.question,onChange:be=>Ee(je,"question",be.target.value),className:S[`qa-${je}-question`]?"border-red-500":"",required:!0}),S[`qa-${je}-question`]&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(nt,{className:"w-4 h-4"}),S[`qa-${je}-question`]]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{htmlFor:`answer-${je}`,className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Wl,{className:"w-4 h-4 text-green-600"}),"Jawaban Bot *"]}),e.jsx(Re,{id:`answer-${je}`,placeholder:"Tulis jawaban yang singkat, jelas, dan langsung untuk pertanyaan tersebut",value:G.answer,onChange:be=>Ee(je,"answer",be.target.value),rows:4,className:S[`qa-${je}-answer`]?"border-red-500":"",required:!0}),S[`qa-${je}-answer`]&&e.jsxs("p",{className:"text-sm text-red-600 flex items-center gap-1",children:[e.jsx(nt,{className:"w-4 h-4"}),S[`qa-${je}-answer`]]})]})]})]},je)),e.jsxs(k,{type:"button",variant:"outline",onClick:Be,className:"w-full h-12 border-dashed border-2 hover:border-blue-500 hover:bg-blue-50 transition-all",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"+ Tambah Q&A Baru"]})]}),S.qa&&e.jsxs(is,{variant:"destructive",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx(ls,{children:S.qa})]})]}),e.jsx(ge,{value:"article",className:"space-y-6 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsx(_,{htmlFor:"content",className:"text-sm font-medium",children:"Konten Knowledge *"}),e.jsx(Re,{id:"content",placeholder:"Tulis konten knowledge Anda di sini...",value:u.content,onChange:G=>me("content",G.target.value),rows:20,className:"font-mono",required:!0}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:[h," karakter"]}),e.jsxs("span",{children:[O-h," tersisa"]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[e.jsxs(_,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-blue-600"}),"Testing Tips"]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"text-xs text-yellow-800 space-y-1",children:[e.jsx("p",{className:"font-medium",children:"💡 Tips untuk testing yang efektif:"}),e.jsxs("ul",{className:"space-y-1 ml-2",children:[e.jsx("li",{children:"• Gunakan pertanyaan yang spesifik dan jelas"}),e.jsx("li",{children:"• Test berbagai jenis pertanyaan (umum, teknis, spesifik)"}),e.jsx("li",{children:"• Perhatikan konteks dan relevansi jawaban"}),e.jsx("li",{children:"• Test dengan bahasa yang berbeda"})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-600"}),"Test Chatbot Response"]}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 bg-gradient-to-br from-gray-50 to-white shadow-sm",children:[e.jsxs("div",{className:"relative",children:[P&&e.jsx("div",{className:"absolute top-0 right-0 bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-bl-lg z-10",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Scroll ke atas"]})}),e.jsx("div",{ref:C,className:`space-y-3 mb-4 max-h-48 overflow-y-auto scroll-smooth transition-all duration-200 ${D?"ring-2 ring-green-500 ring-opacity-50":""}`,style:{scrollBehavior:"smooth"},children:j.map(G=>e.jsx("div",{className:`flex ${G.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`px-3 py-2 rounded-2xl max-w-[85%] shadow-sm ${G.type==="user"?"bg-blue-500 text-white":"bg-white border border-gray-200 text-gray-800"}`,children:[e.jsx("p",{className:"text-sm font-medium",children:G.message}),e.jsx("div",{className:`text-xs mt-1 ${G.type==="user"?"text-blue-100":"text-gray-500"}`,children:G.timestamp.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})})]})},G.id))}),e.jsxs("div",{className:`absolute bottom-2 right-2 transition-all duration-300 group ${P?"opacity-100 translate-y-0":"opacity-0 translate-y-2 pointer-events-none"}`,children:[e.jsx("button",{type:"button",onClick:U,className:`w-8 h-8 rounded-full shadow-lg flex items-center justify-center transition-all duration-200 hover:scale-110 ${D?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,title:D?"Scrolling...":"Scroll ke pesan terbaru",disabled:D,children:D?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),P&&!D&&e.jsxs("div",{className:"absolute -top-8 right-0 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:["Scroll ke bawah",e.jsx("div",{className:"absolute top-full right-2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"Ketik pesan test untuk bot...",className:"flex-1 h-10 text-sm border-gray-300 focus:border-blue-500 focus:ring-blue-500",value:f,onChange:G=>p(G.target.value),onKeyPress:G=>G.key==="Enter"&&Ge()}),e.jsx(k,{type:"button",size:"sm",onClick:Ge,className:"h-10 px-4 bg-blue-600 hover:bg-blue-700 shadow-sm",disabled:!f.trim(),children:e.jsx(_i,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[f.length,"/500 karakter"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Et,{className:"w-3 h-3 text-yellow-500"}),"AI credits used: ",j.length-2]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(et,{className:"w-3 h-3 text-blue-500"}),"Response time: ~2s"]})]}),e.jsx("button",{type:"button",onClick:()=>N([{id:1,type:"user",message:"Hallo, ada yang bisa dibantu?",timestamp:new Date},{id:2,type:"bot",message:"Halo! Selamat datang di platform kami. Saya asisten AI yang akan membantu menjawab pertanyaan Anda. Ada yang bisa saya bantu hari ini? 😊",timestamp:new Date}]),className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Clear Chat"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(cw,{className:"w-4 h-4 text-purple-600"}),"Quick Test Messages"]}),e.jsx("div",{className:"space-y-2",children:["Bagaimana cara mengajukan gadai emas?","Berapa lama proses approval?","Apa saja syarat dokumen yang diperlukan?","Berapa bunga yang dikenakan?","Bisa bayar cicilan tidak?"].map((G,je)=>e.jsxs(k,{type:"button",variant:"outline",size:"sm",className:"w-full h-9 justify-start text-sm hover:bg-blue-50 hover:border-blue-300 transition-colors",onClick:()=>p(G),children:[e.jsx(Le,{className:"w-3 h-3 mr-2 text-blue-600"}),G]},je))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(_,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Wl,{className:"w-4 h-4 text-green-600"}),"AI Response Preview"]}),e.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-4 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI Response:"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm min-h-[80px]",children:f?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Pertanyaan:"}),' "',f,'"']}),e.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:it(f,u.content)})]}):e.jsxs("div",{className:"text-sm text-gray-500 text-center py-4",children:[e.jsx(Le,{className:"w-6 h-6 mx-auto mb-2 text-gray-400"}),"Ketik pesan test untuk melihat preview response AI..."]})}),f&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("span",{children:["Response length: ",it(f,u.content).length," chars"]}),e.jsx("span",{children:"Confidence: High"})]})]})]})]})]})})]}),e.jsxs("div",{className:"flex gap-4 pt-8 border-t mt-8",children:[e.jsxs(k,{type:"button",variant:"outline",onClick:Ue,className:"flex-1 h-12",disabled:A,children:[e.jsx(Je,{className:"w-4 h-4 mr-2"}),"Batal"]}),e.jsxs("div",{className:"flex gap-3 flex-1",children:[e.jsx(k,{type:"button",variant:"outline",onClick:fe,className:"h-12",disabled:A,children:"Reset"}),e.jsx(k,{type:"submit",className:"flex-1 h-12 bg-blue-600 hover:bg-blue-700 shadow-lg hover:shadow-xl transition-all",disabled:A,children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Menyimpan..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),l?"Update Knowledge":"Simpan Knowledge"]})})]})]}),S.submit&&e.jsxs(is,{variant:"destructive",className:"mt-4",children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx(ls,{children:S.submit})]})]})]})})})]})},zH=()=>e.jsx(UH,{}),WH=()=>{var o;const[t,s]=y.useState(!1),[a,r]=y.useState(null),[n,i]=y.useState(null),l=d=>{switch(d){case"active":return"default";case"inactive":return"secondary";case"draft":return"outline";default:return"secondary"}},c=d=>{switch(d){case"active":return e.jsx(cn,{className:"w-4 h-4 text-green-500"});case"inactive":return e.jsx(Tr,{className:"w-4 h-4 text-gray-500"});case"draft":return e.jsx(Ye,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(et,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Automations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage automated workflows and integrations"})]}),e.jsxs(k,{onClick:()=>s(!0),children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"New Workflow"]})]}),e.jsxs(kt,{defaultValue:"workflows",className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-3",children:[e.jsx(pe,{value:"workflows",children:"Workflows"}),e.jsx(pe,{value:"webhooks",children:"Webhooks"}),e.jsx(pe,{value:"testing",children:"Testing"})]}),e.jsx(ge,{value:"workflows",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Active Workflows"}),e.jsx(Q,{children:"Manage your automated workflows"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-3",children:Qv.map(d=>e.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer transition-all ${(n==null?void 0:n.id)===d.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>i(d),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zd,{className:"w-5 h-5 text-primary"}),e.jsx("h4",{className:"font-medium",children:d.name})]}),e.jsx(W,{variant:l(d.status),children:d.status})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yi,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:d.webhook})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),e.jsxs("span",{children:[d.executions," executions"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:u=>{u.stopPropagation(),r(d)},children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:u=>u.stopPropagation(),children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:u=>u.stopPropagation(),children:e.jsx(dw,{className:"w-4 h-4"})})]})]},d.id))})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Workflow Details"}),e.jsx(Q,{children:n?"Configure and monitor workflow":"Select a workflow to view details"})]}),e.jsx(B,{children:n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:n.name})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c(n.status),e.jsx(W,{variant:l(n.status),children:n.status})]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium",children:"Webhook URL"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(K,{value:n.webhook,readOnly:!0,className:"font-mono text-xs"}),e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(ql,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium",children:"Triggers"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:n.triggers.map(d=>e.jsx(W,{variant:"outline",className:"text-xs",children:d},d))})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium",children:"Executions"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.executions," total executions"]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(k,{variant:"outline",className:"flex-1",children:[e.jsx(ux,{className:"w-4 h-4 mr-2"}),"Test"]}),e.jsxs(k,{variant:"outline",className:"flex-1",children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Monitor"]})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Zd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Select a workflow to view details"})]})})]})]})}),e.jsx(ge,{value:"webhooks",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Webhook Management"}),e.jsx(Q,{children:"Configure and monitor webhook endpoints"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yi,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Order Status Webhook"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"https://n8n.company.com/webhook/order-status"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"default",children:"Active"}),e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yi,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Refund Processing Webhook"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"https://n8n.company.com/webhook/refund"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:"default",children:"Active"}),e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(Te,{className:"w-4 h-4"})})]})]}),e.jsxs(k,{variant:"outline",className:"w-full",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add New Webhook"]})]})})]})}),e.jsx(ge,{value:"testing",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Workflow Testing"}),e.jsx(Q,{children:"Test your workflows with sample data"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"workflow-select",children:"Select Workflow"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Choose workflow to test"})}),e.jsx(oe,{children:Qv.map(d=>e.jsx(T,{value:d.id,children:d.name},d.id))})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"test-data",children:"Test Data (JSON)"}),e.jsx(Re,{id:"test-data",placeholder:'{"order_id": "12345", "customer_email": "test@example.com"}',rows:6})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{children:[e.jsx(ux,{className:"w-4 h-4 mr-2"}),"Run Test"]}),e.jsxs(k,{variant:"outline",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Copy Sample Data"]})]})]})})]})})]}),(t||a)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(F,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(H,{children:[e.jsx(V,{children:t?"Create New Workflow":"Edit Workflow"}),e.jsx(Q,{children:t?"Configure a new automated workflow":"Update workflow configuration"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Workflow Name"}),e.jsx(K,{id:"name",placeholder:"e.g., Order Status Check",defaultValue:a==null?void 0:a.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"webhook",children:"Webhook URL"}),e.jsx(K,{id:"webhook",placeholder:"https://your-webhook-url.com/endpoint",defaultValue:a==null?void 0:a.webhook})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"triggers",children:"Triggers"}),e.jsx(K,{id:"triggers",placeholder:"Enter triggers separated by commas",defaultValue:(o=a==null?void 0:a.triggers)==null?void 0:o.join(", ")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"status",children:"Status"}),e.jsxs(ie,{defaultValue:(a==null?void 0:a.status)||"draft",children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select status"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"draft",children:"Draft"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(k,{variant:"outline",onClick:()=>{s(!1),r(null)},children:"Cancel"}),e.jsx(k,{children:t?"Create Workflow":"Update Workflow"})]})]})]})})]})},qH=()=>e.jsx(WH,{}),tj=({integration:t,onConfigure:s,onToggleStatus:a})=>{const r=c=>{const d={Sheet:uw,MessageSquare:Le,Truck:mw,Bell:dn,Shield:Ae,Zap:Et,Users:Pe,CreditCard:un,Database:on,Mail:fs,Calendar:Mt,Globe:Ss,Smartphone:co,MapPin:Pr,Wallet:hw,TrendingUp:rs,UserCheck:da,ClipboardCheck:xw,Package:ij,Mic:fw,QrCode:aj}[c]||on;return e.jsx(d,{className:"w-8 h-8"})},n=c=>({productivity:"bg-blue-500",communication:"bg-green-500",shipping:"bg-orange-500",notification:"bg-purple-500",security:"bg-red-500",automation:"bg-yellow-500",crm:"bg-pink-500",payment:"bg-emerald-500",location:"bg-indigo-500",marketing:"bg-rose-500",analytics:"bg-cyan-500",feedback:"bg-amber-500",inventory:"bg-violet-500",ai:"bg-teal-500",utility:"bg-slate-500"})[c]||"bg-gray-500",i=t.status==="active",l=t.configRequired?Object.keys(t.config).length>0&&Object.values(t.config).some(c=>c!==""&&c!==null&&c!==void 0):!0;return e.jsxs(F,{className:`relative transition-all hover:shadow-md ${i?"border-primary":"border-border"}`,children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx(W,{variant:i?"default":"secondary",children:i?"Active":"Inactive"})}),e.jsx("div",{className:`absolute top-0 left-0 w-1 h-full ${n(t.category)} rounded-l-lg`}),e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start gap-3 pr-16",children:[e.jsx("div",{className:`p-2 rounded-lg ${i?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:r(t.icon)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(V,{className:"text-lg line-clamp-1",children:t.name}),e.jsx(Q,{className:"line-clamp-2 mt-1",children:t.description})]})]})}),e.jsxs(B,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Key Features:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.features.slice(0,3).map((c,o)=>e.jsx(W,{variant:"outline",className:"text-xs",children:c},o)),t.features.length>3&&e.jsxs(W,{variant:"outline",className:"text-xs",children:["+",t.features.length-3," more"]})]})]}),t.configRequired&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:`flex items-center gap-2 text-sm ${l?"text-green-600":"text-orange-600"}`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${l?"bg-green-500":"bg-orange-500"}`}),l?"Configured":"Configuration Required"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>s(t),className:"flex-1",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsx(k,{size:"sm",onClick:()=>a(t.id),disabled:t.configRequired&&!l,variant:i?"destructive":"default",className:"flex-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Deactivate"]}):e.jsxs(e.Fragment,{children:[e.jsx(cn,{className:"w-4 h-4 mr-2"}),"Activate"]})})]}),t.configRequired&&!l&&e.jsx("div",{className:"mt-3 p-2 bg-orange-50 border border-orange-200 rounded text-xs text-orange-700",children:"Complete configuration before activating this integration."})]})]})},KH=({integration:t,isOpen:s,onClose:a,onSave:r})=>{const[n,i]=y.useState((t==null?void 0:t.config)||{}),[l,c]=y.useState({}),[o,d]=y.useState(0);if(!s||!t)return null;const u=(p,g)=>{i(w=>({...w,[p]:g}))},m=(p,g,w)=>{i(S=>({...S,[p]:{...S[p],[g]:w}}))},h=()=>{r(t.id,n),a()},x=p=>{c(g=>({...g,[p]:!g[p]}))},f=()=>{var p,g,w,S;switch(t.name){case"Google Sheets":return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"w-5 h-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Akun Google Terhubung"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:n.googleAccountConnected?"admin@company.com":"Belum terhubung"})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sheetId",children:"Google Sheet ID"}),e.jsx(K,{id:"sheetId",value:n.sheetId||"",onChange:b=>u("sheetId",b.target.value),placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Copy ID dari URL Google Sheet Anda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sheetName",children:"Nama Sheet"}),e.jsx(K,{id:"sheetName",value:n.sheetName||"",onChange:b=>u("sheetName",b.target.value),placeholder:"Customers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Permissions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["read","write"].map(b=>{var A;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:(A=n.permissions)==null?void 0:A.includes(b),onCheckedChange:v=>{const j=v?[...n.permissions||[],b]:(n.permissions||[]).filter(N=>N!==b);u("permissions",j)}}),e.jsx(_,{className:"capitalize",children:b})]},b)})})]})]});case"WhatsApp Business API":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"businessAccountId",children:"Business Account ID"}),e.jsx(K,{id:"businessAccountId",value:n.businessAccountId||"",onChange:b=>u("businessAccountId",b.target.value),placeholder:"123456789"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"phoneNumberId",children:"Phone Number ID"}),e.jsx(K,{id:"phoneNumberId",value:n.phoneNumberId||"",onChange:b=>u("phoneNumberId",b.target.value),placeholder:"987654321"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"accessToken",children:"Access Token"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"accessToken",type:l.accessToken?"text":"password",value:n.accessToken||"",onChange:b=>u("accessToken",b.target.value),placeholder:"EAABwzLixnjYBOZB..."}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("accessToken"),children:l.accessToken?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"webhookVerifyToken",children:"Webhook Verify Token"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"webhookVerifyToken",type:l.webhookVerifyToken?"text":"password",value:n.webhookVerifyToken||"",onChange:b=>u("webhookVerifyToken",b.target.value),placeholder:"your_verify_token"}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("webhookVerifyToken"),children:l.webhookVerifyToken?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]})]});case"Allow List (Whitelist Numbers)":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Enable Whitelist Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Aktifkan untuk membatasi akses hanya untuk nomor terdaftar"})]}),e.jsx(de,{checked:n.enabled||!1,onCheckedChange:b=>u("enabled",b)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"allowedNumbers",children:"Allowed Numbers"}),e.jsx(Re,{id:"allowedNumbers",value:(n.allowedNumbers||[]).join(`
`),onChange:b=>u("allowedNumbers",b.target.value.split(`
`).filter(A=>A.trim())),placeholder:`+6281234567890
+6281234567891
+6281234567892`,rows:6}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Satu nomor per baris, format: +62xxx"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"blockMessage",children:"Block Message"}),e.jsx(Re,{id:"blockMessage",value:n.blockMessage||"",onChange:b=>u("blockMessage",b.target.value),placeholder:"Maaf, nomor Anda tidak terdaftar untuk menggunakan layanan ini.",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"adminNumbers",children:"Admin Numbers"}),e.jsx(Re,{id:"adminNumbers",value:(n.adminNumbers||[]).join(`
`),onChange:b=>u("adminNumbers",b.target.value.split(`
`).filter(A=>A.trim())),placeholder:"+6281234567890",rows:3}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin dapat bypass whitelist"})]})]});case"Kirim Notifikasi Pribadi":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"pushApiKey",children:"Push Notification API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"pushApiKey",type:l.pushApiKey?"text":"password",value:n.pushNotificationApiKey||"",onChange:b=>u("pushNotificationApiKey",b.target.value),placeholder:"fcm_server_key_..."}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("pushApiKey"),children:l.pushApiKey?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Email Provider"}),e.jsxs(ie,{value:n.emailProvider||"smtp",onValueChange:b=>u("emailProvider",b),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"smtp",children:"SMTP"}),e.jsx(T,{value:"sendgrid",children:"SendGrid"}),e.jsx(T,{value:"mailgun",children:"Mailgun"})]})]})]}),n.emailProvider==="smtp"&&e.jsxs("div",{className:"space-y-4 p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium",children:"SMTP Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"smtpHost",children:"Host"}),e.jsx(K,{id:"smtpHost",value:((p=n.smtpConfig)==null?void 0:p.host)||"",onChange:b=>m("smtpConfig","host",b.target.value),placeholder:"smtp.gmail.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"smtpPort",children:"Port"}),e.jsx(K,{id:"smtpPort",type:"number",value:((g=n.smtpConfig)==null?void 0:g.port)||"",onChange:b=>m("smtpConfig","port",parseInt(b.target.value)),placeholder:"587"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"smtpUsername",children:"Username"}),e.jsx(K,{id:"smtpUsername",value:((w=n.smtpConfig)==null?void 0:w.username)||"",onChange:b=>m("smtpConfig","username",b.target.value),placeholder:"admin@company.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"smtpPassword",children:"Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"smtpPassword",type:l.smtpPassword?"text":"password",value:((S=n.smtpConfig)==null?void 0:S.password)||"",onChange:b=>m("smtpConfig","password",b.target.value),placeholder:"app_password"}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("smtpPassword"),children:l.smtpPassword?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Notification Rules"}),(n.notificationRules||[]).map((b,A)=>e.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h5",{className:"font-medium capitalize",children:b.trigger.replace("_"," ")}),e.jsx(de,{checked:b.enabled,onCheckedChange:v=>{const j=[...n.notificationRules||[]];j[A]={...b,enabled:v},u("notificationRules",j)}})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:b.pushNotification,onCheckedChange:v=>{const j=[...n.notificationRules||[]];j[A]={...b,pushNotification:v},u("notificationRules",j)}}),e.jsx(_,{className:"text-sm",children:"Push"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:b.emailNotification,onCheckedChange:v=>{const j=[...n.notificationRules||[]];j[A]={...b,emailNotification:v},u("notificationRules",j)}}),e.jsx(_,{className:"text-sm",children:"Email"})]})]})]},A))]})]});case"Auto Reminder":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"timezone",children:"Default Timezone"}),e.jsxs(ie,{value:n.timezone||"Asia/Jakarta",onValueChange:b=>u("timezone",b),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"Asia/Jakarta",children:"Asia/Jakarta (WIB)"}),e.jsx(T,{value:"Asia/Makassar",children:"Asia/Makassar (WITA)"}),e.jsx(T,{value:"Asia/Jayapura",children:"Asia/Jayapura (WIT)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"defaultReminderTime",children:"Default Reminder Time"}),e.jsx(K,{id:"defaultReminderTime",type:"time",value:n.defaultReminderTime||"09:00",onChange:b=>u("defaultReminderTime",b.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"maxReminders",children:"Max Reminders per User"}),e.jsx(K,{id:"maxReminders",type:"number",min:"1",max:"50",value:n.maxRemindersPerUser||10,onChange:b=>u("maxRemindersPerUser",parseInt(b.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Notification Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["chat","email","sms"].map(b=>{var A;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:(A=n.notificationChannels)==null?void 0:A.includes(b),onCheckedChange:v=>{const j=v?[...n.notificationChannels||[],b]:(n.notificationChannels||[]).filter(N=>N!==b);u("notificationChannels",j)}}),e.jsx(_,{className:"capitalize",children:b})]},b)})})]})]});case"Nearest Location":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Map Provider"}),e.jsxs(ie,{value:n.mapProvider||"google_maps",onValueChange:b=>u("mapProvider",b),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"google_maps",children:"Google Maps"}),e.jsx(T,{value:"mapbox",children:"Mapbox"}),e.jsx(T,{value:"here",children:"HERE Maps"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"apiKey",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"apiKey",type:l.apiKey?"text":"password",value:n.apiKey||"",onChange:b=>u("apiKey",b.target.value),placeholder:"AIzaSyC..."}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("apiKey"),children:l.apiKey?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"searchRadius",children:"Search Radius (meters)"}),e.jsx(K,{id:"searchRadius",type:"number",min:"100",max:"50000",value:n.searchRadius||5e3,onChange:b=>u("searchRadius",parseInt(b.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"maxResults",children:"Max Results"}),e.jsx(K,{id:"maxResults",type:"number",min:"1",max:"50",value:n.maxResults||10,onChange:b=>u("maxResults",parseInt(b.target.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Location Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["store","atm","service_center","distributor"].map(b=>{var A;return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:(A=n.locationTypes)==null?void 0:A.includes(b),onCheckedChange:v=>{const j=v?[...n.locationTypes||[],b]:(n.locationTypes||[]).filter(N=>N!==b);u("locationTypes",j)}}),e.jsx(_,{className:"capitalize",children:b.replace("_"," ")})]},b)})})]})]});case"Netzme":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"merchantId",children:"Merchant ID"}),e.jsx(K,{id:"merchantId",value:n.merchantId||"",onChange:b=>u("merchantId",b.target.value),placeholder:"NTZ123456"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"netzmeApiKey",children:"API Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"netzmeApiKey",type:l.netzmeApiKey?"text":"password",value:n.apiKey||"",onChange:b=>u("apiKey",b.target.value),placeholder:"ntz_api_..."}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("netzmeApiKey"),children:l.netzmeApiKey?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"secretKey",children:"Secret Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"secretKey",type:l.secretKey?"text":"password",value:n.secretKey||"",onChange:b=>u("secretKey",b.target.value),placeholder:"ntz_secret_..."}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>x("secretKey"),children:l.secretKey?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Environment"}),e.jsxs(ie,{value:n.environment||"sandbox",onValueChange:b=>u("environment",b),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"sandbox",children:"Sandbox (Testing)"}),e.jsx(T,{value:"production",children:"Production"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"webhookUrl",children:"Webhook URL"}),e.jsx(K,{id:"webhookUrl",value:n.webhookUrl||"",onChange:b=>u("webhookUrl",b.target.value),placeholder:"https://your-domain.com/webhook/netzme"})]})]});default:return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Te,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Configuration Form"}),e.jsxs("p",{className:"text-muted-foreground",children:["Form konfigurasi untuk ",t.name," akan tersedia segera."]})]})})}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(F,{className:"w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Configure ",t.name]}),e.jsx(Q,{children:t.description})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:a,children:e.jsx(Je,{className:"w-4 h-4"})})]})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Setup Progress"}),e.jsx("div",{className:"flex items-center gap-2",children:t.setupSteps.map((p,g)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${g<=o?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:g+1}),g<t.setupSteps.length-1&&e.jsx("div",{className:`w-8 h-0.5 ${g<o?"bg-primary":"bg-muted"}`})]},g))}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.setupSteps[o]})]}),e.jsx(as,{}),f(),e.jsx(as,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Features Included"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:t.features.map((p,g)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:p})]},g))})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[o>0&&e.jsx(k,{variant:"outline",onClick:()=>d(o-1),children:"Previous"}),o<t.setupSteps.length-1&&e.jsx(k,{onClick:()=>d(o+1),children:"Next Step"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",onClick:a,children:"Cancel"}),e.jsxs(k,{onClick:h,children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Save Configuration"]})]})]})]})]})})},HH=({channels:t,showApiKey:s,setShowApiKey:a})=>{const[r,n]=y.useState(!1),[i,l]=y.useState(!1),[c,o]=y.useState(!1),[d,u]=y.useState(null),[m,h]=y.useState(null),[x,f]=y.useState({name:"",type:"",description:"",apiToken:"",webhookUrl:"",phoneNumber:"",appId:"",appSecret:"",pageId:"",accessToken:"",enableWebhook:!0,enableNotifications:!0}),p=[{id:"whatsapp",name:"WhatsApp Business",icon:Le,description:"Connect your WhatsApp Business account",fields:["apiToken","phoneNumber","webhookUrl"]},{id:"webchat",name:"Website Chat Widget",icon:Ss,description:"Embed chat widget on your website",fields:["webhookUrl"]},{id:"facebook",name:"Facebook Messenger",icon:Le,description:"Connect your Facebook Page",fields:["pageId","accessToken","appSecret"]},{id:"instagram",name:"Instagram Direct",icon:Jd,description:"Connect Instagram Business account",fields:["pageId","accessToken"]},{id:"email",name:"Email Support",icon:fs,description:"Handle customer emails",fields:["webhookUrl"]},{id:"sms",name:"SMS Gateway",icon:Pa,description:"Send and receive SMS messages",fields:["apiToken","phoneNumber"]}],g=(P,R)=>{f(U=>({...U,[P]:R}))},w=P=>{P.preventDefault(),console.log("Channel data:",x),n(!1),S()},S=()=>{f({name:"",type:"",description:"",apiToken:"",webhookUrl:"",phoneNumber:"",appId:"",appSecret:"",pageId:"",accessToken:"",enableWebhook:!0,enableNotifications:!0})},b=()=>{n(!1),S()},A=P=>{u(P);const R=U=>({WhatsApp:"whatsapp","Web Widget":"webchat",Facebook:"facebook",Instagram:"instagram",Email:"email",SMS:"sms"})[U]||"webchat";f({name:P.name,type:R(P.type),description:P.description||"",apiToken:"••••••••••••••••",webhookUrl:P.webhookUrl||"https://your-domain.com/webhook",phoneNumber:P.phoneNumber||"",appId:P.appId||"",appSecret:"••••••••••••••••",pageId:P.pageId||"",accessToken:"••••••••••••••••",enableWebhook:P.enableWebhook!==!1,enableNotifications:P.enableNotifications!==!1}),l(!0)},v=()=>{l(!1),u(null),S()},j=P=>{P.preventDefault(),console.log("Updating channel:",d.id,x),l(!1),u(null),S()},N=P=>{h(P),o(!0)},O=()=>{console.log("Deleting channel:",m.id),o(!1),h(null)},C=()=>{o(!1),h(null)},D=p.find(P=>P.id===x.type),E=()=>D?D.fields.map(P=>{switch(P){case"apiToken":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:P,children:"API Token *"}),e.jsx(K,{id:P,type:"password",placeholder:"Enter your API token",value:x[P],onChange:R=>g(P,R.target.value),required:!0})]},P);case"phoneNumber":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:P,children:"Phone Number *"}),e.jsx(K,{id:P,placeholder:"+62 812-3456-7890",value:x[P],onChange:R=>g(P,R.target.value),required:!0})]},P);case"webhookUrl":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:P,children:"Webhook URL"}),e.jsx(K,{id:P,placeholder:"https://your-domain.com/webhook",value:x[P],onChange:R=>g(P,R.target.value)})]},P);case"pageId":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:P,children:"Page ID *"}),e.jsx(K,{id:P,placeholder:"Your Facebook/Instagram Page ID",value:x[P],onChange:R=>g(P,R.target.value),required:!0})]},P);case"accessToken":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:P,children:"Access Token *"}),e.jsx(K,{id:P,type:"password",placeholder:"Page access token",value:x[P],onChange:R=>g(P,R.target.value),required:!0})]},P);case"appSecret":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:P,children:"App Secret *"}),e.jsx(K,{id:P,type:"password",placeholder:"Facebook App Secret",value:x[P],onChange:R=>g(P,R.target.value),required:!0})]},P);default:return null}}):null;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Channel Configurations"]}),e.jsx(Q,{children:"Kelola channel_configs yang aktif dan konfigurasi kredensial API"})]}),e.jsxs(k,{onClick:()=>n(!0),children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Channel"]})]})}),e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{className:"min-w-[150px]",children:"Nama Channel"}),e.jsx(J,{className:"min-w-[120px]",children:"Tipe"}),e.jsx(J,{className:"min-w-[100px]",children:"Status"}),e.jsx(J,{className:"min-w-[150px]",children:"Terakhir Digunakan"}),e.jsx(J,{className:"min-w-[100px]",children:"Aksi"})]})}),e.jsx(mt,{children:t.map(P=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:P.name}),e.jsx(X,{children:e.jsx(W,{variant:"outline",children:P.type})}),e.jsx(X,{children:e.jsx(W,{variant:P.status==="Aktif"?"default":"secondary",children:P.status})}),e.jsx(X,{className:"text-muted-foreground",children:P.lastUsed}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>A(P),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>N(P),className:"text-red-600 hover:text-red-700 hover:border-red-300",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},P.id))})]})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"API Credentials & Webhook"]}),e.jsx(Q,{children:"Konfigurasi kredensial API dan webhook untuk integrasi channel"})]}),e.jsxs(B,{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"whatsapp-token",children:"WhatsApp Business Token"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"whatsapp-token",type:s?"text":"password",defaultValue:"EAABwzLixnjYBOZB...",className:"flex-1"}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>a(!s),children:s?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"facebook-app-secret",children:"Facebook App Secret"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{id:"facebook-app-secret",type:"password",defaultValue:"**********************",className:"flex-1"}),e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(ze,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"webhook-url",children:"Webhook URL"}),e.jsx(K,{id:"webhook-url",defaultValue:"https://your-domain.com/api/webhook",placeholder:"https://your-domain.com/webhook"})]}),e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsx(_,{children:"Enable Webhook Verification"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifikasi webhook untuk keamanan tambahan"})]}),e.jsx(de,{defaultChecked:!0,className:"mt-1"})]})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Channel"}),e.jsx(k,{variant:"ghost",size:"sm",onClick:b,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Channel Name *"}),e.jsx(K,{id:"name",placeholder:"e.g., Main WhatsApp, Support Chat",value:x.name,onChange:P=>g("name",P.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"type",children:"Channel Type *"}),e.jsxs(ie,{value:x.type,onValueChange:P=>g("type",P),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select a channel type"})}),e.jsx(oe,{children:p.map(P=>{const R=P.icon;return e.jsx(T,{value:P.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:P.name})]})},P.id)})})]}),D&&e.jsx("p",{className:"text-sm text-gray-600",children:D.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(Re,{id:"description",placeholder:"Brief description of this channel's purpose",value:x.description,onChange:P=>g("description",P.target.value),rows:3})]}),x.type&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Configuration"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:E()})]})}),x.type&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Settings"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Enable Webhook"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically receive messages via webhook"})]}),e.jsx(de,{checked:x.enableWebhook,onCheckedChange:P=>g("enableWebhook",P)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send notifications for new messages"})]}),e.jsx(de,{checked:x.enableNotifications,onCheckedChange:P=>g("enableNotifications",P)})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Setup Information"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"After creating this channel, you'll need to configure the webhook endpoint in your platform's settings. We'll provide you with the specific webhook URL and verification token."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create Channel"]}),e.jsx(k,{type:"button",variant:"outline",onClick:b,className:"flex-1",children:"Cancel"})]})]})]})})}),i&&d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Channel"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Editing: ",e.jsx("span",{className:"font-medium",children:d.name})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:v,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-name",children:"Channel Name *"}),e.jsx(K,{id:"edit-name",placeholder:"e.g., Main WhatsApp, Support Chat",value:x.name,onChange:P=>g("name",P.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-type",children:"Channel Type"}),e.jsx("div",{className:"flex items-center gap-3 p-3 bg-gray-50 border rounded-md",children:D&&e.jsxs(e.Fragment,{children:[e.jsx(D.icon,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:D.name}),e.jsx("p",{className:"text-sm text-gray-600",children:D.description})]})]})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Channel type cannot be changed after creation"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-description",children:"Description"}),e.jsx(Re,{id:"edit-description",placeholder:"Brief description of this channel's purpose",value:x.description,onChange:P=>g("description",P.target.value),rows:3})]}),x.type&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Current Configuration"}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Channel is Active"}),e.jsxs("p",{className:"text-sm text-green-700",children:["Last activity: ",d.lastUsed]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[E(),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Current Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{variant:d.status==="Aktif"?"default":"secondary",children:d.status}),e.jsxs("span",{className:"text-sm text-gray-600",children:["• Created: ",new Date().toLocaleDateString("id-ID")]})]})]})]})]})}),x.type&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Settings"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Enable Webhook"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically receive messages via webhook"})]}),e.jsx(de,{checked:x.enableWebhook,onCheckedChange:P=>g("enableWebhook",P)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Enable Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send notifications for new messages"})]}),e.jsx(de,{checked:x.enableNotifications,onCheckedChange:P=>g("enableNotifications",P)})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Connection Test"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Test the current channel configuration"})]}),e.jsx(k,{type:"button",variant:"outline",size:"sm",children:"Test Connection"})]})]})}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(nt,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-amber-900",children:"Security Notice"}),e.jsx("p",{className:"text-amber-700 mt-1",children:"For security reasons, sensitive data like API tokens and secrets are masked. Only update these fields if you need to change the credentials."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update Channel"]}),e.jsx(k,{type:"button",variant:"outline",onClick:v,className:"flex-1",children:"Cancel"})]})]})]})})}),c&&m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(nt,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Delete Channel"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Le,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.name}),e.jsx("p",{className:"text-sm text-gray-600",children:m.type})]})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsx("p",{className:"text-gray-700",children:"Are you sure you want to delete this channel? This will:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-4",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-1",children:"•"}),e.jsx("span",{children:"Permanently remove the channel configuration"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-1",children:"•"}),e.jsx("span",{children:"Stop all incoming messages from this channel"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-1",children:"•"}),e.jsx("span",{children:"Disable webhook endpoints and integrations"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-500 mt-1",children:"•"}),e.jsx("span",{children:"Remove access for assigned agents"})]})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ns,{className:"w-4 h-4 text-amber-600"}),e.jsxs("span",{className:"text-amber-800",children:[e.jsx("strong",{children:"Current Status:"})," ",m.status," • Last used: ",m.lastUsed]})]})}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs(_,{htmlFor:"delete-confirmation",className:"text-sm font-medium",children:["Type ",e.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:"DELETE"})," to confirm:"]}),e.jsx(K,{id:"delete-confirmation",placeholder:"Type DELETE to confirm",className:"font-mono",onChange:P=>{const R=document.getElementById("confirm-delete-btn");P.target.value==="DELETE"?(R.disabled=!1,R.classList.remove("opacity-50","cursor-not-allowed")):(R.disabled=!0,R.classList.add("opacity-50","cursor-not-allowed"))}})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{id:"confirm-delete-btn",onClick:O,disabled:!0,className:"flex-1 bg-red-600 hover:bg-red-700 opacity-50 cursor-not-allowed",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Channel"]}),e.jsx(k,{variant:"outline",onClick:C,className:"flex-1",children:"Cancel"})]})]})})})]})},VH=({integrationsState:t,selectedCategory:s,setSelectedCategory:a,searchQuery:r,setSearchQuery:n,handleConfigureIntegration:i,handleToggleIntegrationStatus:l})=>{var p,g,w,S;const c=t.filter(b=>{const A=s==="all"||b.category===s,v=r===""||b.name.toLowerCase().includes(r.toLowerCase())||b.description.toLowerCase().includes(r.toLowerCase())||b.features.some(j=>j.toLowerCase().includes(r.toLowerCase()));return A&&v}),o=t.reduce((b,A)=>(b[A.category]||(b[A.category]=[]),b[A.category].push(A),b),{}),d={productivity:"Productivity",communication:"Communication",shipping:"Shipping",notification:"Notification",security:"Security",automation:"Automation",crm:"CRM",payment:"Payment",location:"Location",marketing:"Marketing",analytics:"Analytics",feedback:"Feedback",inventory:"Inventory",ai:"AI",utility:"Utility"},u=t.filter(b=>b.status==="active").length,m=t.filter(b=>b.status==="inactive").length,h=Object.keys(o).length,x=t.filter(b=>b.config&&Object.keys(b.config).length>0).length,f=()=>{a("all"),n("")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Connected Apps"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect your chatbot with third-party applications to extend its functionality."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative w-64",children:[e.jsx(cs,{className:"absolute left-3 top-2.5 w-4 h-4 text-muted-foreground"}),e.jsx(K,{placeholder:"Search integrations...",value:r,onChange:b=>n(b.target.value),className:"pl-9"})]}),e.jsx("div",{className:"w-64",children:e.jsxs(ie,{value:s,onValueChange:a,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter by category"})}),e.jsxs(oe,{children:[e.jsxs(T,{value:"all",children:["All Categories (",t.length,")"]}),Object.entries(o).map(([b,A])=>e.jsxs(T,{value:b,children:[d[b]," (",A.length,")"]},b))]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-2xl font-bold text-green-700",children:u})]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Active"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),e.jsx("span",{className:"text-2xl font-bold text-gray-700",children:m})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Inactive"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nn,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-2xl font-bold text-blue-700",children:h})]}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Categories"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-2xl font-bold text-purple-700",children:x})]}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Configured"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(k,{variant:s==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:["All (",t.length,")"]}),e.jsxs(k,{variant:s==="communication"?"default":"outline",size:"sm",onClick:()=>a("communication"),children:["Communication (",((p=o.communication)==null?void 0:p.length)||0,")"]}),e.jsxs(k,{variant:s==="payment"?"default":"outline",size:"sm",onClick:()=>a("payment"),children:["Payment (",((g=o.payment)==null?void 0:g.length)||0,")"]}),e.jsxs(k,{variant:s==="automation"?"default":"outline",size:"sm",onClick:()=>a("automation"),children:["Automation (",((w=o.automation)==null?void 0:w.length)||0,")"]}),e.jsxs(k,{variant:s==="productivity"?"default":"outline",size:"sm",onClick:()=>a("productivity"),children:["Productivity (",((S=o.productivity)==null?void 0:S.length)||0,")"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-b bg-muted/30 px-4 rounded",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:s==="all"&&r===""?`Showing all ${t.length} integrations`:e.jsxs(e.Fragment,{children:["Showing ",c.length," of ",t.length," integrations",s!=="all"&&e.jsxs("span",{className:"ml-1",children:["in ",d[s]]}),r&&e.jsxs("span",{className:"ml-1",children:['matching "',r,'"']})]})}),(s!=="all"||r!=="")&&e.jsxs(k,{variant:"ghost",size:"sm",onClick:f,className:"h-auto p-1",children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),"Clear filters"]})]}),c.length>0?s!=="all"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold flex items-center gap-2",children:[d[s],e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["(",c.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(b=>e.jsx(tj,{integration:b,onConfigure:i,onToggleStatus:l},b.id))})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(b=>e.jsx(tj,{integration:b,onConfigure:i,onToggleStatus:l},b.id))}):e.jsxs("div",{className:"text-center py-12 bg-muted/30 rounded-lg",children:[e.jsx(nn,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"No integrations found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search terms or category filter."}),e.jsx(k,{variant:"outline",onClick:f,children:"Clear all filters"})]})]})},GH=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState(!1),[n,i]=y.useState("enterprise"),[l,c]=y.useState("monthly"),[o,d]=y.useState(null),u=v=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(v),m=pr.find(v=>v.id==="pro"),h={plan:(m==null?void 0:m.name)||"Business",price:`Rp ${((m==null?void 0:m.priceMonthly)||799e3).toLocaleString("id-ID")}/bulan`,validUntil:"20 April 2024",status:"Aktif"},x={currentMessages:1245,limitMessages:(m==null?void 0:m.maxMessagesPerMonth)||2e3,percentage:Math.round(1245/((m==null?void 0:m.maxMessagesPerMonth)||2e3)*100),activeUsers:8,totalSeats:(m==null?void 0:m.maxAgents)||10,userPercentage:Math.round(8/((m==null?void 0:m.maxAgents)||10)*100)},f=[{id:1,date:"20 Mar 2024",description:`${(m==null?void 0:m.name)||"Business"} Plan - Subscription`,amount:u((m==null?void 0:m.priceMonthly)||799e3),status:"Paid",invoiceNumber:"INV-2024-001"},{id:2,date:"20 Feb 2024",description:`${(m==null?void 0:m.name)||"Business"} Plan - Subscription`,amount:u((m==null?void 0:m.priceMonthly)||799e3),status:"Paid",invoiceNumber:"INV-2024-002"},{id:3,date:"20 Jan 2024",description:`${(m==null?void 0:m.name)||"Business"} Plan - Subscription`,amount:u((m==null?void 0:m.priceMonthly)||799e3),status:"Paid",invoiceNumber:"INV-2024-003"}],p=pr.map(v=>{var C,D;let j=Et;v.tier==="professional"&&(j=os),v.tier==="enterprise"&&(j=lj);const N=Math.round(v.priceMonthly/15e3),O=Math.round(v.priceYearly/15e3);return{id:v.id,name:v.name,tier:v.tier,icon:j,price:{monthly:N,yearly:O,monthlyIDR:v.priceMonthly,yearlyIDR:v.priceYearly},features:v.features.slice(0,6),current:v.id==="pro",popular:((C=v.highlights)==null?void 0:C.includes("Nilai Terbaik"))||((D=v.highlights)==null?void 0:D.includes("Terpopuler")),maxAgents:v.maxAgents,maxMessages:v.maxMessagesPerMonth,description:v.description,highlights:v.highlights}}),g=()=>{s(!0)},w=(v=null)=>{d(v),r(!0)},S=()=>{s(!1)},b=()=>{r(!1)},A=()=>{s(!1),r(!1),d(null)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Billing & Subscription"}),e.jsx("p",{className:"text-gray-600",children:"Kelola langganan, tagihan, dan upgrade paket Anda"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{variant:"outline",onClick:()=>w(),children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Download Invoice"]}),e.jsxs(k,{onClick:g,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Upgrade Plan"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(F,{className:"lg:col-span-2 border-l-4 border-l-blue-500",children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Et,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-xl",children:h.plan}),e.jsx(Q,{className:"text-sm",children:"Paket aktif saat ini"})]})]}),e.jsx(W,{className:"bg-green-100 text-green-800 border-green-200",children:h.status})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[u((m==null?void 0:m.priceMonthly)||799e3),e.jsx("span",{className:"text-lg font-normal text-gray-500",children:"/bulan"})]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["💰 ",u((m==null?void 0:m.priceYearly)||799e4),"/tahun",e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(hemat 2 bulan)"})]})]})}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Berlaku hingga"}),e.jsx("span",{className:"font-medium text-gray-900",children:h.validUntil})]})]})]}),e.jsxs(F,{className:"border-l-4 border-l-orange-500",children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(vt,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-lg",children:"Penggunaan Pesan"}),e.jsx(Q,{children:"Bulan ini"})]})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.currentMessages.toLocaleString()}),e.jsxs("div",{className:"text-sm text-gray-500",children:["dari ",x.limitMessages.toLocaleString()," pesan"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[x.percentage,"%"]})]}),e.jsx(us,{value:x.percentage,className:"h-2"})]})]})]}),e.jsxs(F,{className:"border-l-4 border-l-green-500",children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-lg",children:"Tim Aktif"}),e.jsx(Q,{children:"Agent tersedia"})]})]})}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.activeUsers}),e.jsxs("div",{className:"text-sm text-gray-500",children:["dari ",x.totalSeats," agent"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Kapasitas"}),e.jsxs("span",{className:"font-medium",children:[x.userPercentage,"%"]})]}),e.jsx(us,{value:x.userPercentage,className:"h-2"})]})]})]})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(Gt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-xl",children:"Riwayat Pembayaran"}),e.jsx(Q,{children:"Transaksi dan tagihan terbaru"})]})]}),e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(nn,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),e.jsxs(B,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{className:"border-b-2",children:[e.jsx(J,{className:"font-semibold text-gray-700",children:"Tanggal"}),e.jsx(J,{className:"font-semibold text-gray-700",children:"Deskripsi"}),e.jsx(J,{className:"font-semibold text-gray-700",children:"Jumlah"}),e.jsx(J,{className:"font-semibold text-gray-700",children:"Status"}),e.jsx(J,{className:"font-semibold text-gray-700 text-center",children:"Invoice"})]})}),e.jsx(mt,{children:f.map(v=>e.jsxs(_e,{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(X,{className:"font-medium text-gray-900",children:v.date}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:v.description})]})}),e.jsx(X,{className:"font-semibold text-gray-900",children:v.amount}),e.jsx(X,{children:e.jsxs(W,{className:"bg-green-100 text-green-800 border-green-200 hover:bg-green-100",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),v.status]})}),e.jsx(X,{className:"text-center",children:e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>w(v),className:"hover:bg-blue-50 hover:border-blue-300",children:[e.jsx(ds,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"})]})})]},v.id))})]})}),e.jsx("div",{className:"mt-6 pt-4 border-t bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total transaksi bulan ini"}),e.jsx("span",{className:"font-semibold text-gray-900",children:u((m==null?void 0:m.priceMonthly)||799e3)})]})})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Upgrade Paket Anda"}),e.jsx("p",{className:"text-gray-600",children:"Pilih paket yang sesuai dengan kebutuhan bisnis Anda"})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:A,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Pilih Periode Tagihan"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hemat lebih banyak dengan paket tahunan"})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-xl p-1.5 shadow-inner",children:[e.jsx(k,{variant:l==="monthly"?"default":"ghost",size:"lg",onClick:()=>c("monthly"),className:"rounded-lg px-6 py-3 font-medium transition-all",children:"Bulanan"}),e.jsxs(k,{variant:l==="yearly"?"default":"ghost",size:"lg",onClick:()=>c("yearly"),className:"rounded-lg px-6 py-3 font-medium transition-all",children:["Tahunan",e.jsx(W,{variant:"secondary",className:"ml-2 bg-green-100 text-green-700 border-green-200",children:"Hemat 20%"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-6",children:p.map(v=>{var O;const j=n===v.id,N=v.current;return e.jsxs(F,{className:`relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 cursor-pointer ${v.tier==="enterprise"?"border-2 border-purple-500 shadow-lg":v.tier==="professional"?"border-2 border-blue-500 shadow-md":"border-2 border-green-500"} ${j?"ring-2 ring-blue-400":""}`,onClick:()=>i(v.id),children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${v.tier==="enterprise"?"bg-purple-500":v.tier==="professional"?"bg-blue-500":"bg-green-500"}`}),e.jsx(V,{className:"text-2xl font-bold",children:v.name})]}),e.jsx(Q,{className:"capitalize text-base",children:v.tier==="enterprise"?"Solusi Enterprise":v.tier==="professional"?"Untuk Bisnis":"Untuk UMKM"})]}),N&&e.jsx(W,{variant:"secondary",className:"bg-green-600 text-white",children:"Current Plan"})]})}),e.jsxs(B,{className:"space-y-6",children:[((O=v.highlights)==null?void 0:O.includes("Terpopuler"))&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx(W,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white border-0 animate-pulse",children:"⭐ Terpopuler"})}),v.highlights&&v.highlights.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:v.highlights.map((C,D)=>e.jsx(W,{variant:"secondary",className:"text-xs font-medium bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:C},D))}),e.jsxs("div",{className:"text-center space-y-2 p-4 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"text-4xl font-bold text-gray-900",children:[u(l==="monthly"?v.price.monthlyIDR:v.price.yearlyIDR),e.jsxs("span",{className:"text-lg font-normal text-gray-500",children:["/",l==="monthly"?"bulan":"tahun"]})]}),l==="yearly"&&e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"💰 Hemat 2 bulan"})]}),v.description&&e.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:v.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:v.maxAgents}),e.jsx("div",{className:"text-xs text-gray-600",children:"Agent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:v.maxMessages.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-600",children:"Pesan/Bulan"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-yellow-500"}),e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Fitur Unggulan:"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[v.features.slice(0,6).map((C,D)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:C})]},D)),v.features.length>6&&e.jsxs("li",{className:"text-xs text-blue-600 font-medium",children:["+",v.features.length-6," fitur lainnya..."]})]})]}),e.jsx(k,{className:`w-full py-3 font-semibold ${N?"bg-gray-400 cursor-not-allowed":v.tier==="enterprise"?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700":v.tier==="professional"?"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"}`,disabled:N,children:N?"✓ Paket Aktif":"🚀 Pilih Paket Ini"})]})]},v.id)})}),n!=="pro"&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Plan Change Summary"}),e.jsx("p",{className:"text-blue-700 mt-1",children:n==="starter"?"Downgrading to Starter plan will reduce your message limit and team size.":"Upgrading to Enterprise will give you unlimited access to all features."}),n==="enterprise"&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"What you'll get:"}),e.jsxs("ul",{className:"list-disc list-inside text-blue-700 mt-1",children:[e.jsx("li",{children:"Unlimited messages and team members"}),e.jsx("li",{children:"Advanced AI features and custom branding"}),e.jsx("li",{children:"24/7 priority support with SLA"})]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:[e.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(un,{className:"w-5 h-5 text-blue-600"}),"Metode Pembayaran"]}),e.jsx("div",{className:"bg-white rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"VISA"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"**** **** **** 4242"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Berakhir 12/2025"})]})]}),e.jsx(k,{variant:"outline",size:"sm",className:"hover:bg-blue-50 hover:border-blue-300",children:"Ubah Kartu"})]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"}),"Pembayaran aman dan terenkripsi"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t",children:[e.jsxs(k,{onClick:S,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-3 text-lg font-semibold rounded-xl shadow-lg",disabled:n==="pro",children:[e.jsx(pw,{className:"w-5 h-5 mr-2"}),n==="pro"?"✓ Paket Aktif":"Upgrade Sekarang"]}),e.jsx(k,{variant:"outline",onClick:A,className:"flex-1 py-3 text-lg font-medium rounded-xl border-2 hover:bg-gray-50",children:"Batal"})]})]})})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(ds,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Download Invoice"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Unduh tagihan dalam format PDF"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:A,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),o?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Gt,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.invoiceNumber}),e.jsx("p",{className:"text-sm text-gray-600",children:o.date})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Description:"}),e.jsx("span",{className:"font-medium",children:o.description})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Amount:"}),e.jsx("span",{className:"font-medium",children:o.amount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status:"}),e.jsxs(W,{variant:"default",className:"text-xs",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),o.status]})]})]})]}),e.jsxs(is,{children:[e.jsx(ns,{className:"w-4 h-4"}),e.jsx(ls,{children:"The invoice will be downloaded as a PDF file to your device."})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Download the latest invoice for your current subscription."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mt,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Latest Invoice"}),e.jsxs("p",{className:"text-blue-700",children:[(m==null?void 0:m.name)||"Business"," Plan - March 2024 (",u((m==null?void 0:m.priceMonthly)||799e3),")"]})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t mt-6",children:[e.jsxs(k,{onClick:b,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white py-3 font-semibold rounded-xl shadow-lg",children:[e.jsx(ds,{className:"w-5 h-5 mr-2"}),"Download PDF"]}),e.jsx(k,{variant:"outline",onClick:A,className:"flex-1 py-3 font-medium rounded-xl border-2 hover:bg-gray-50",children:"Batal"})]})]})})})]})},ZH=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState(!1),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[o,d]=y.useState(null),[u,m]=y.useState(null),[h,x]=y.useState(null),[f,p]=y.useState({name:"",description:"",permissions:[],expiresAt:"",isActive:!0}),[g,w]=y.useState(!1),[S,b]=y.useState(!1),[A,v]=y.useState(!1),[j,N]=y.useState(null),[O,C]=y.useState(null),[D,E]=y.useState({name:"",url:"",description:"",events:[],secret:"",isActive:!0,retryCount:3,timeout:30}),P=[{id:"read",name:"Read Access",description:"Membaca data dan informasi"},{id:"write",name:"Write Access",description:"Membuat dan mengubah data"},{id:"delete",name:"Delete Access",description:"Menghapus data"},{id:"admin",name:"Admin Access",description:"Akses penuh ke sistem"}],R=[{id:"message.received",name:"Message Received",description:"Ketika pesan baru diterima"},{id:"conversation.started",name:"Conversation Started",description:"Ketika percakapan dimulai"},{id:"conversation.ended",name:"Conversation Ended",description:"Ketika percakapan berakhir"},{id:"customer.updated",name:"Customer Updated",description:"Ketika data customer diperbarui"},{id:"agent.assigned",name:"Agent Assigned",description:"Ketika agent ditugaskan"},{id:"ticket.created",name:"Ticket Created",description:"Ketika ticket baru dibuat"}],[U,I]=y.useState([{id:1,name:"Production API",prefix:"pk_live_",key:"pk_live_1234567890abcdef",description:"API key untuk production environment",permissions:["read","write"],created:"15 Mar 2024",lastUsed:"2 jam lalu",status:"Aktif",expiresAt:"15 Mar 2025",usageCount:1247},{id:2,name:"Development API",prefix:"pk_test_",key:"pk_test_0987654321fedcba",description:"API key untuk development environment",permissions:["read","write","delete"],created:"10 Mar 2024",lastUsed:"1 hari lalu",status:"Aktif",expiresAt:"10 Mar 2025",usageCount:892},{id:3,name:"Staging API",prefix:"pk_test_",key:"pk_test_staging123456",description:"API key untuk staging environment",permissions:["read"],created:"5 Mar 2024",lastUsed:"3 hari lalu",status:"Nonaktif",expiresAt:"5 Mar 2025",usageCount:156}]),[L,Z]=y.useState([{id:1,name:"Order Notifications",url:"https://api.company.com/webhook/orders",description:"Webhook untuk notifikasi order baru",events:["message.received","conversation.ended"],status:"Aktif",secret:"whsec_1234567890abcdef",retryCount:3,timeout:30,lastDelivery:"2 menit lalu",successRate:98.5,totalDeliveries:1247},{id:2,name:"Customer Updates",url:"https://crm.company.com/webhook",description:"Webhook untuk update data customer",events:["customer.updated"],status:"Nonaktif",secret:"whsec_0987654321fedcba",retryCount:5,timeout:45,lastDelivery:"1 jam lalu",successRate:95.2,totalDeliveries:892}]),q=()=>{p({name:"",description:"",permissions:[],expiresAt:"",isActive:!0}),s(!0)},z=M=>{d(M),p({name:M.name,description:M.description,permissions:M.permissions,expiresAt:M.expiresAt,isActive:M.status==="Aktif"}),r(!0)},ne=M=>{x(M),c(!0)},Y=M=>{m(M),i(!0)},se=M=>{M.preventDefault();const ue={id:Date.now(),name:f.name,description:f.description,prefix:"pk_test_",key:`pk_test_${Math.random().toString(36).substr(2,9)}`,permissions:f.permissions,created:new Date().toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"}),lastUsed:"Never",status:f.isActive?"Aktif":"Nonaktif",expiresAt:f.expiresAt,usageCount:0};I(fe=>[...fe,ue]),s(!1)},ve=M=>{M.preventDefault(),I(ue=>ue.map(fe=>fe.id===o.id?{...fe,name:f.name,description:f.description,permissions:f.permissions,status:f.isActive?"Aktif":"Nonaktif",expiresAt:f.expiresAt}:fe)),r(!1),d(null)},Be=()=>{I(M=>M.filter(ue=>ue.id!==u.id)),i(!1),m(null)},ae=()=>{E({name:"",url:"",description:"",events:[],secret:"",isActive:!0,retryCount:3,timeout:30}),w(!0)},Ee=M=>{N(M),E({name:M.name,url:M.url,description:M.description,events:M.events,secret:M.secret,isActive:M.status==="Aktif",retryCount:M.retryCount,timeout:M.timeout}),b(!0)},me=M=>{C(M),v(!0)},ye=M=>{M.preventDefault();const ue={id:Date.now(),name:D.name,url:D.url,description:D.description,events:D.events,status:D.isActive?"Aktif":"Nonaktif",secret:`whsec_${Math.random().toString(36).substr(2,9)}`,retryCount:D.retryCount,timeout:D.timeout,lastDelivery:"Never",successRate:0,totalDeliveries:0};Z(fe=>[...fe,ue]),w(!1)},he=M=>{M.preventDefault(),Z(ue=>ue.map(fe=>fe.id===j.id?{...fe,name:D.name,url:fe.url,description:D.description,events:D.events,status:D.isActive?"Aktif":"Nonaktif",retryCount:D.retryCount,timeout:D.timeout}:fe)),b(!1),N(null)},Oe=()=>{Z(M=>M.filter(ue=>ue.id!==O.id)),v(!1),C(null)},ke=()=>{s(!1),r(!1),i(!1),c(!1),w(!1),b(!1),v(!1),d(null),m(null),x(null),N(null),C(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"API Keys"]}),e.jsx(Q,{children:"Membuat, melihat prefix, dan menonaktifkan API key"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Kelola API keys untuk integrasi aplikasi"}),e.jsxs(k,{onClick:q,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Create API Key"]})]}),e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Nama"}),e.jsx(J,{children:"Prefix"}),e.jsx(J,{children:"Created"}),e.jsx(J,{children:"Last Used"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Aksi"})]})}),e.jsx(mt,{children:U.map(M=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:M.name}),e.jsx(X,{children:e.jsxs("code",{className:"bg-muted px-2 py-1 rounded text-sm",children:[M.prefix,"***"]})}),e.jsx(X,{children:M.created}),e.jsx(X,{className:"text-muted-foreground",children:M.lastUsed}),e.jsx(X,{children:e.jsx(W,{variant:M.status==="Aktif"?"default":"secondary",children:M.status})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",title:"Copy API Key",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",title:"View Details",onClick:()=>ne(M),children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",title:"Edit API Key",onClick:()=>z(M),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",title:"Delete API Key",onClick:()=>Y(M),children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},M.id))})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(yi,{className:"w-5 h-5"}),"Webhooks"]}),e.jsx(Q,{children:"Konfigurasi URL endpoint untuk menerima notifikasi event-driven"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Setup webhook endpoints untuk event notifications"}),e.jsxs(k,{onClick:ae,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Webhook"]})]}),e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Nama"}),e.jsx(J,{children:"URL"}),e.jsx(J,{children:"Events"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Aksi"})]})}),e.jsx(mt,{children:L.map(M=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:M.name}),e.jsx(X,{children:e.jsx("code",{className:"bg-muted px-2 py-1 rounded text-xs",children:M.url})}),e.jsx(X,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:M.events.map((ue,fe)=>e.jsx(W,{variant:"outline",className:"text-xs",children:ue},fe))})}),e.jsx(X,{children:e.jsx(W,{variant:M.status==="Aktif"?"default":"secondary",children:M.status})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",title:"Edit Webhook",onClick:()=>Ee(M),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",title:"Delete Webhook",onClick:()=>me(M),children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},M.id))})]})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Jt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create New API Key"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate API key untuk integrasi aplikasi"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:ke,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:se,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Nama API Key"}),e.jsx(K,{id:"name",value:f.name,onChange:M=>p(ue=>({...ue,name:M.target.value})),placeholder:"e.g., Production API",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"expiresAt",children:"Tanggal Expired"}),e.jsx(K,{id:"expiresAt",type:"date",value:f.expiresAt,onChange:M=>p(ue=>({...ue,expiresAt:M.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"Deskripsi"}),e.jsx(Re,{id:"description",value:f.description,onChange:M=>p(ue=>({...ue,description:M.target.value})),placeholder:"Jelaskan tujuan penggunaan API key ini",rows:3})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:P.map(M=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:M.id,checked:f.permissions.includes(M.id),onChange:ue=>{ue.target.checked?p(fe=>({...fe,permissions:[...fe.permissions,M.id]})):p(fe=>({...fe,permissions:fe.permissions.filter(qe=>qe!==M.id)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:M.id,className:"text-sm font-medium text-gray-900",children:M.name}),e.jsx("p",{className:"text-xs text-gray-500",children:M.description})]})]},M.id))})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"isActive",checked:f.isActive,onCheckedChange:M=>p(ue=>({...ue,isActive:M}))}),e.jsx(_,{htmlFor:"isActive",children:"API Key aktif"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create API Key"]}),e.jsx(k,{type:"button",variant:"outline",onClick:ke,className:"flex-1",children:"Cancel"})]})]})]})})}),a&&o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(Ye,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit API Key"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update informasi API key"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:ke,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-name",children:"Nama API Key"}),e.jsx(K,{id:"edit-name",value:f.name,onChange:M=>p(ue=>({...ue,name:M.target.value})),placeholder:"e.g., Production API",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-expiresAt",children:"Tanggal Expired"}),e.jsx(K,{id:"edit-expiresAt",type:"date",value:f.expiresAt,onChange:M=>p(ue=>({...ue,expiresAt:M.target.value}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-description",children:"Deskripsi"}),e.jsx(Re,{id:"edit-description",value:f.description,onChange:M=>p(ue=>({...ue,description:M.target.value})),placeholder:"Jelaskan tujuan penggunaan API key ini",rows:3})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:P.map(M=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:`edit-${M.id}`,checked:f.permissions.includes(M.id),onChange:ue=>{ue.target.checked?p(fe=>({...fe,permissions:[...fe.permissions,M.id]})):p(fe=>({...fe,permissions:fe.permissions.filter(qe=>qe!==M.id)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`edit-${M.id}`,className:"text-sm font-medium text-gray-900",children:M.name}),e.jsx("p",{className:"text-xs text-gray-500",children:M.description})]})]},M.id))})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"edit-isActive",checked:f.isActive,onCheckedChange:M=>p(ue=>({...ue,isActive:M}))}),e.jsx(_,{htmlFor:"edit-isActive",children:"API Key aktif"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update API Key"]}),e.jsx(k,{type:"button",variant:"outline",onClick:ke,className:"flex-1",children:"Cancel"})]})]})]})})}),l&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:e.jsx(ze,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"API Key Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Informasi lengkap API key"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:ke,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Full API Key"}),e.jsxs(k,{variant:"outline",size:"sm",className:"hover:bg-blue-50 hover:border-blue-300",children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Copy"]})]}),e.jsx("code",{className:"bg-white border rounded px-3 py-2 text-sm font-mono block w-full break-all",children:h.key}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"⚠️ Simpan dengan aman, tidak akan ditampilkan lagi"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Nama"}),e.jsx("p",{className:"text-gray-900",children:h.name})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Deskripsi"}),e.jsx("p",{className:"text-gray-900",children:h.description})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsx(W,{variant:h.status==="Aktif"?"default":"secondary",children:h.status})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Dibuat"}),e.jsx("p",{className:"text-gray-900",children:h.created})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Terakhir Digunakan"}),e.jsx("p",{className:"text-gray-900",children:h.lastUsed})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Jumlah Penggunaan"}),e.jsx("p",{className:"text-gray-900",children:h.usageCount.toLocaleString()})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Permissions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.permissions.map(M=>{const ue=P.find(fe=>fe.id===M);return e.jsx(W,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:ue?ue.name:M},M)})})]}),e.jsx("div",{className:"flex gap-4 pt-6 border-t",children:e.jsx(k,{variant:"outline",onClick:ke,className:"flex-1",children:"Close"})})]})]})})}),n&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-8 h-8 text-red-600"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Delete API Key"}),e.jsx("p",{className:"text-gray-600",children:"Anda yakin ingin menghapus API key ini?"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.name}),e.jsx("p",{className:"text-sm text-gray-500",children:u.description}),e.jsxs("code",{className:"text-xs text-gray-600 mt-1 block",children:[u.prefix,"***"]})]})}),e.jsxs(is,{className:"mb-6",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsxs(ls,{children:[e.jsx("strong",{children:"Peringatan:"})," API key yang dihapus tidak dapat dipulihkan. Semua aplikasi yang menggunakan key ini akan berhenti berfungsi."]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(k,{onClick:Be,variant:"destructive",className:"flex-1",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete API Key"]}),e.jsx(k,{variant:"outline",onClick:ke,className:"flex-1",children:"Cancel"})]})]})})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsx(yi,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create New Webhook"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Setup endpoint untuk menerima notifikasi event"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:ke,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:ye,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"webhook-name",children:"Nama Webhook"}),e.jsx(K,{id:"webhook-name",value:D.name,onChange:M=>E(ue=>({...ue,name:M.target.value})),placeholder:"e.g., Order Notifications",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"webhook-url",children:"URL Endpoint"}),e.jsx(K,{id:"webhook-url",value:D.url,onChange:M=>E(ue=>({...ue,url:M.target.value})),placeholder:"https://api.company.com/webhook",type:"url",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"webhook-description",children:"Deskripsi"}),e.jsx(Re,{id:"webhook-description",value:D.description,onChange:M=>E(ue=>({...ue,description:M.target.value})),placeholder:"Jelaskan tujuan webhook ini",rows:3})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Events yang akan dikirim"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:R.map(M=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:M.id,checked:D.events.includes(M.id),onChange:ue=>{ue.target.checked?E(fe=>({...fe,events:[...fe.events,M.id]})):E(fe=>({...fe,events:fe.events.filter(qe=>qe!==M.id)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:M.id,className:"text-sm font-medium text-gray-900",children:M.name}),e.jsx("p",{className:"text-xs text-gray-500",children:M.description})]})]},M.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"retryCount",children:"Jumlah Retry"}),e.jsxs(ie,{value:D.retryCount.toString(),onValueChange:M=>E(ue=>({...ue,retryCount:parseInt(M)})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"1",children:"1 kali"}),e.jsx(T,{value:"3",children:"3 kali"}),e.jsx(T,{value:"5",children:"5 kali"}),e.jsx(T,{value:"10",children:"10 kali"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"timeout",children:"Timeout (detik)"}),e.jsxs(ie,{value:D.timeout.toString(),onValueChange:M=>E(ue=>({...ue,timeout:parseInt(M)})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"15",children:"15 detik"}),e.jsx(T,{value:"30",children:"30 detik"}),e.jsx(T,{value:"45",children:"45 detik"}),e.jsx(T,{value:"60",children:"60 detik"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"webhook-isActive",checked:D.isActive,onCheckedChange:M=>E(ue=>({...ue,isActive:M}))}),e.jsx(_,{htmlFor:"webhook-isActive",children:"Webhook aktif"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create Webhook"]}),e.jsx(k,{type:"button",variant:"outline",onClick:ke,className:"flex-1",children:"Cancel"})]})]})]})})}),S&&j&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Ye,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Edit Webhook"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update konfigurasi webhook"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:ke,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:he,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-webhook-name",children:"Nama Webhook"}),e.jsx(K,{id:"edit-webhook-name",value:D.name,onChange:M=>E(ue=>({...ue,name:M.target.value})),placeholder:"e.g., Order Notifications",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-webhook-url",children:"URL Endpoint"}),e.jsx(K,{id:"edit-webhook-url",value:D.url,onChange:M=>E(ue=>({...ue,url:M.target.value})),placeholder:"https://api.company.com/webhook",type:"url",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-webhook-description",children:"Deskripsi"}),e.jsx(Re,{id:"edit-webhook-description",value:D.description,onChange:M=>E(ue=>({...ue,description:M.target.value})),placeholder:"Jelaskan tujuan webhook ini",rows:3})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Events yang akan dikirim"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:R.map(M=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:`edit-${M.id}`,checked:D.events.includes(M.id),onChange:ue=>{ue.target.checked?E(fe=>({...fe,events:[...fe.events,M.id]})):E(fe=>({...fe,events:fe.events.filter(qe=>qe!==M.id)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`edit-${M.id}`,className:"text-sm font-medium text-gray-900",children:M.name}),e.jsx("p",{className:"text-xs text-gray-500",children:M.description}),e.jsx("p",{className:"text-xs text-gray-500",children:M.description})]})]},M.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-retryCount",children:"Jumlah Retry"}),e.jsxs(ie,{value:D.retryCount.toString(),onValueChange:M=>E(ue=>({...ue,retryCount:parseInt(M)})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"1",children:"1 kali"}),e.jsx(T,{value:"3",children:"3 kali"}),e.jsx(T,{value:"5",children:"5 kali"}),e.jsx(T,{value:"10",children:"10 kali"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-timeout",children:"Timeout (detik)"}),e.jsxs(ie,{value:D.timeout.toString(),onValueChange:M=>E(ue=>({...ue,timeout:parseInt(M)})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"15",children:"15 detik"}),e.jsx(T,{value:"30",children:"30 detik"}),e.jsx(T,{value:"45",children:"45 detik"}),e.jsx(T,{value:"60",children:"60 detik"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"edit-webhook-isActive",checked:D.isActive,onCheckedChange:M=>E(ue=>({...ue,isActive:M}))}),e.jsx(_,{htmlFor:"edit-webhook-isActive",children:"Webhook aktif"})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update Webhook"]}),e.jsx(k,{type:"button",variant:"outline",onClick:ke,className:"flex-1",children:"Cancel"})]})]})]})})}),A&&O&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-8 h-8 text-red-600"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Delete Webhook"}),e.jsx("p",{className:"text-gray-600",children:"Anda yakin ingin menghapus webhook ini?"})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-gray-900",children:O.name}),e.jsx("p",{className:"text-sm text-gray-500",children:O.description}),e.jsx("code",{className:"text-xs text-gray-600 mt-1 block break-all",children:O.url})]})}),e.jsxs(is,{className:"mb-6",children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsxs(ls,{children:[e.jsx("strong",{children:"Peringatan:"})," Webhook yang dihapus tidak dapat dipulihkan. Semua notifikasi event akan berhenti dikirim ke endpoint ini."]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(k,{onClick:Oe,variant:"destructive",className:"flex-1",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Webhook"]}),e.jsx(k,{variant:"outline",onClick:ke,className:"flex-1",children:"Cancel"})]})]})})})]})},YH=()=>{const[t,s]=y.useState([{id:1,name:"Ramah & Profesional",language:"ID",tone:"Formal",greetingMessage:"Halo! Selamat datang di layanan kami. Ada yang bisa saya bantu?",errorMessage:"Maaf, saya tidak memahami permintaan Anda. Bisakah Anda menjelaskan lebih detail?",fallbackMessage:"Saya akan menghubungkan Anda dengan tim support kami.",isActive:!0,created:"2024-03-15"},{id:2,name:"Casual & Friendly",language:"ID",tone:"Informal",greetingMessage:"Hai! Gimana kabarnya? Ada yang bisa dibantu?",errorMessage:"Waduh, saya kurang paham nih. Coba dijelasin lagi dong!",fallbackMessage:"Tunggu sebentar ya, saya panggilin yang lebih expert!",isActive:!1,created:"2024-03-10"}]),[a,r]=y.useState(t[0]),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[o,d]=y.useState(!1),[u,m]=y.useState(null),[h,x]=y.useState(null),[f,p]=y.useState({name:"",language:"id",tone:"formal",greetingMessage:"",errorMessage:"",fallbackMessage:"",isActive:!1}),g=(C,D)=>{p(E=>({...E,[C]:D}))},w=()=>{p({name:"",language:"id",tone:"formal",greetingMessage:"",errorMessage:"",fallbackMessage:"",isActive:!1})},S=()=>{w(),i(!0)},b=C=>{m(C),p({name:C.name,language:C.language.toLowerCase(),tone:C.tone.toLowerCase(),greetingMessage:C.greetingMessage,errorMessage:C.errorMessage,fallbackMessage:C.fallbackMessage,isActive:C.isActive}),c(!0)},A=C=>{x(C),d(!0)},v=C=>{C.preventDefault();const D={id:Date.now(),name:f.name,language:f.language.toUpperCase(),tone:f.tone.charAt(0).toUpperCase()+f.tone.slice(1),greetingMessage:f.greetingMessage,errorMessage:f.errorMessage,fallbackMessage:f.fallbackMessage,isActive:f.isActive,created:new Date().toISOString().split("T")[0]};s(E=>[...E,D]),i(!1),w()},j=C=>{C.preventDefault(),s(D=>D.map(E=>E.id===u.id?{...E,name:f.name,language:f.language.toUpperCase(),tone:f.tone.charAt(0).toUpperCase()+f.tone.slice(1),greetingMessage:f.greetingMessage,errorMessage:f.errorMessage,fallbackMessage:f.fallbackMessage,isActive:f.isActive}:E)),c(!1),m(null),w()},N=()=>{s(C=>C.filter(D=>D.id!==h.id)),d(!1),x(null)},O=()=>{i(!1),c(!1),d(!1),m(null),x(null),w()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Bot Personalities"]}),e.jsx(Q,{children:"Kelola bot_personalities untuk mengatur bahasa, tone, dan pesan sistem"})]}),e.jsxs(k,{onClick:S,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Personality"]})]})}),e.jsx(B,{className:"p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{className:"min-w-[200px]",children:"Nama Personality"}),e.jsx(J,{className:"min-w-[120px]",children:"Bahasa"}),e.jsx(J,{className:"min-w-[100px]",children:"Tone"}),e.jsx(J,{className:"min-w-[100px]",children:"Aksi"})]})}),e.jsx(mt,{children:t.map(C=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:C.name}),e.jsx(X,{children:e.jsx(W,{variant:"outline",children:C.language})}),e.jsx(X,{children:e.jsx(W,{variant:"secondary",children:C.tone})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>b(C),title:"Edit Personality",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>A(C),title:"Delete Personality",className:"text-red-600 hover:text-red-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},C.id))})]})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Pesan Sistem"]}),e.jsx(Q,{children:"Konfigurasi greeting_message, error_message, dan pesan sistem lainnya"})]}),e.jsxs(B,{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"personality-select",children:"Pilih Personality"}),e.jsxs(ie,{value:a.id.toString(),onValueChange:C=>{const D=t.find(E=>E.id.toString()===C);D&&r(D)},children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsx(oe,{children:t.map(C=>e.jsx(T,{value:C.id.toString(),children:C.name},C.id))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"greeting-message",children:"Greeting Message"}),e.jsx(Re,{id:"greeting-message",value:a.greetingMessage,rows:3,placeholder:"Pesan sambutan untuk pengguna baru",readOnly:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"error-message",children:"Error Message"}),e.jsx(Re,{id:"error-message",value:a.errorMessage,rows:3,placeholder:"Pesan ketika bot tidak memahami input pengguna",readOnly:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"language-select",children:"Bahasa"}),e.jsxs(ie,{value:a.language.toLowerCase(),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"id",children:"Bahasa Indonesia"}),e.jsx(T,{value:"en",children:"English"}),e.jsx(T,{value:"es",children:"Español"}),e.jsx(T,{value:"fr",children:"Français"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"tone-select",children:"Tone"}),e.jsxs(ie,{value:a.tone.toLowerCase(),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"formal",children:"Formal"}),e.jsx(T,{value:"informal",children:"Informal"}),e.jsx(T,{value:"friendly",children:"Ramah"}),e.jsx(T,{value:"professional",children:"Profesional"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(k,{variant:"outline",children:"Reset"}),e.jsx(k,{children:"Simpan Perubahan"})]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Bot Personality"}),e.jsx(k,{variant:"ghost",size:"sm",onClick:O,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Personality Name *"}),e.jsx(K,{id:"name",placeholder:"e.g., Professional Customer Service, Friendly Sales Bot",value:f.name,onChange:C=>g("name",C.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"language",children:"Language *"}),e.jsxs(ie,{value:f.language,onValueChange:C=>g("language",C),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"id",children:"🇮🇩 Bahasa Indonesia"}),e.jsx(T,{value:"en",children:"🇺🇸 English"}),e.jsx(T,{value:"es",children:"🇪🇸 Español"}),e.jsx(T,{value:"fr",children:"🇫🇷 Français"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"tone",children:"Tone *"}),e.jsxs(ie,{value:f.tone,onValueChange:C=>g("tone",C),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"formal",children:"Formal"}),e.jsx(T,{value:"informal",children:"Informal"}),e.jsx(T,{value:"friendly",children:"Friendly"}),e.jsx(T,{value:"professional",children:"Professional"}),e.jsx(T,{value:"casual",children:"Casual"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"greeting",children:"Greeting Message *"}),e.jsx(Re,{id:"greeting",placeholder:"Welcome message for new users",value:f.greetingMessage,onChange:C=>g("greetingMessage",C.target.value),rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"error",children:"Error Message *"}),e.jsx(Re,{id:"error",placeholder:"Message when bot doesn't understand user input",value:f.errorMessage,onChange:C=>g("errorMessage",C.target.value),rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"fallback",children:"Fallback Message"}),e.jsx(Re,{id:"fallback",placeholder:"Message when escalating to human agent",value:f.fallbackMessage,onChange:C=>g("fallbackMessage",C.target.value),rows:2})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Set as Active"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Make this personality active immediately"})]}),e.jsx(de,{checked:f.isActive,onCheckedChange:C=>g("isActive",C)})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Personality Guidelines"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"Create consistent personality traits that match your brand voice. Consider your target audience and communication style."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create Personality"]}),e.jsx(k,{type:"button",variant:"outline",onClick:O,className:"flex-1",children:"Cancel"})]})]})]})})}),l&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Bot Personality"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Editing: ",e.jsx("span",{className:"font-medium",children:u.name})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:O,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-name",children:"Personality Name *"}),e.jsx(K,{id:"edit-name",placeholder:"e.g., Professional Customer Service, Friendly Sales Bot",value:f.name,onChange:C=>g("name",C.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-language",children:"Language *"}),e.jsxs(ie,{value:f.language,onValueChange:C=>g("language",C),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"id",children:"🇮🇩 Bahasa Indonesia"}),e.jsx(T,{value:"en",children:"🇺🇸 English"}),e.jsx(T,{value:"es",children:"🇪🇸 Español"}),e.jsx(T,{value:"fr",children:"🇫🇷 Français"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-tone",children:"Tone *"}),e.jsxs(ie,{value:f.tone,onValueChange:C=>g("tone",C),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"formal",children:"Formal"}),e.jsx(T,{value:"informal",children:"Informal"}),e.jsx(T,{value:"friendly",children:"Friendly"}),e.jsx(T,{value:"professional",children:"Professional"}),e.jsx(T,{value:"casual",children:"Casual"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-greeting",children:"Greeting Message *"}),e.jsx(Re,{id:"edit-greeting",placeholder:"Welcome message for new users",value:f.greetingMessage,onChange:C=>g("greetingMessage",C.target.value),rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-error",children:"Error Message *"}),e.jsx(Re,{id:"edit-error",placeholder:"Message when bot doesn't understand user input",value:f.errorMessage,onChange:C=>g("errorMessage",C.target.value),rows:3,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-fallback",children:"Fallback Message"}),e.jsx(Re,{id:"edit-fallback",placeholder:"Message when escalating to human agent",value:f.fallbackMessage,onChange:C=>g("fallbackMessage",C.target.value),rows:2})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Set as Active"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Make this personality active"})]}),e.jsx(de,{checked:f.isActive,onCheckedChange:C=>g("isActive",C)})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-green-900",children:"Personality Status"}),e.jsxs("p",{className:"text-green-700",children:["Created: ",new Date(u.created).toLocaleDateString("id-ID")," • Status: ",u.isActive?"Active":"Inactive"]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update Personality"]}),e.jsx(k,{type:"button",variant:"outline",onClick:O,className:"flex-1",children:"Cancel"})]})]})]})})}),o&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Personality"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Are you sure you want to delete this bot personality?"}),e.jsx("div",{className:"bg-gray-50 border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($s,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.language," • ",h.tone]})]})]})})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qe,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-red-900",children:"Warning"}),e.jsx("p",{className:"text-red-700 mt-1",children:"Deleting this personality will remove all associated messages and configurations. Any active chats using this personality will switch to the default personality."})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{onClick:N,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Personality"]}),e.jsx(k,{variant:"outline",onClick:O,className:"flex-1",children:"Cancel"})]})]})})})]})},XH=({editingAgent:t,setEditingAgent:s,updateAgentPersonality:a})=>{const[r,n]=y.useState("users"),[i,l]=y.useState(!1),[c,o]=y.useState(!1),[d,u]=y.useState(!1),[m,h]=y.useState(!1),[x,f]=y.useState(!1),[p,g]=y.useState(!1),[w,S]=y.useState(null),[b,A]=y.useState(null),[v,j]=y.useState(null),[N,O]=y.useState(null),[C,D]=y.useState({name:"",email:"",role:"agent",sendInvite:!0,message:""}),[E,P]=y.useState({name:"",email:"",role:"",isActive:!0}),[R,U]=y.useState({name:"",email:"",specialization:"",maxConcurrentChats:5,botPersonalityId:1,isActive:!0,autoAssign:!0}),[I,L]=y.useState([{id:1,name:"Ahmad Rahman",email:"ahmad.rahman@company.com",role:"Admin",status:"online",lastSeen:"Sekarang",isActive:!0,joinedDate:"2024-01-15"},{id:2,name:"Sari Dewi",email:"sari.dewi@company.com",role:"Agent",status:"busy",lastSeen:"5 menit lalu",isActive:!0,joinedDate:"2024-02-20"},{id:3,name:"Budi Santoso",email:"budi.santoso@company.com",role:"Agent",status:"offline",lastSeen:"2 jam lalu",isActive:!0,joinedDate:"2024-03-01"}]),[Z,q]=y.useState([{id:1,name:"Sari Dewi",email:"sari@company.com",specialization:"Customer Support",status:"online",activeSessions:3,totalSessions:127,avgResponseTime:"2m 30s",personalityName:"Ramah & Profesional",botPersonalityId:1,maxConcurrentChats:5,isActive:!0,joinedDate:"2024-02-20"},{id:2,name:"Budi Santoso",email:"budi@company.com",specialization:"Technical Support",status:"busy",activeSessions:1,totalSessions:89,avgResponseTime:"4m 15s",personalityName:"Casual & Friendly",botPersonalityId:2,maxConcurrentChats:3,isActive:!0,joinedDate:"2024-03-01"},{id:3,name:"Rina Sari",email:"rina@company.com",specialization:"Sales",status:"offline",activeSessions:0,totalSessions:156,avgResponseTime:"1m 45s",personalityName:"Ramah & Profesional",botPersonalityId:1,maxConcurrentChats:4,isActive:!0,joinedDate:"2024-01-15"}]),z=[{id:1,name:"Ramah & Profesional",language:"ID",tone:"Formal",greetingMessage:"Halo! Selamat datang di layanan kami. Ada yang bisa saya bantu?",errorMessage:"Maaf, saya tidak memahami permintaan Anda. Bisakah Anda menjelaskan lebih detail?"},{id:2,name:"Casual & Friendly",language:"ID",tone:"Informal",greetingMessage:"Hai! Gimana kabarnya? Ada yang bisa dibantu?",errorMessage:"Waduh, saya kurang paham nih. Coba dijelasin lagi dong!"}],ne=(ee,G)=>{D(je=>({...je,[ee]:G}))},Y=(ee,G)=>{P(je=>({...je,[ee]:G}))},se=(ee,G)=>{U(je=>({...je,[ee]:G}))},ve=()=>{D({name:"",email:"",role:"agent",sendInvite:!0,message:""})},Be=()=>{P({name:"",email:"",role:"",isActive:!0})},ae=()=>{U({name:"",email:"",specialization:"",maxConcurrentChats:5,botPersonalityId:1,isActive:!0,autoAssign:!0})},Ee=()=>{ve(),l(!0)},me=ee=>{S(ee),P({name:ee.name,email:ee.email,role:ee.role.toLowerCase(),isActive:ee.isActive}),o(!0)},ye=ee=>{A(ee),u(!0)},he=()=>{ae(),h(!0)},Oe=ee=>{j(ee),U({name:ee.name,email:ee.email,specialization:ee.specialization,maxConcurrentChats:ee.maxConcurrentChats,botPersonalityId:ee.botPersonalityId,isActive:ee.isActive,autoAssign:!0}),f(!0)},ke=ee=>{O(ee),g(!0)},M=ee=>{ee.preventDefault();const G={id:Date.now(),name:C.name,email:C.email,role:C.role.charAt(0).toUpperCase()+C.role.slice(1),status:"offline",lastSeen:"Never",isActive:!0,joinedDate:new Date().toISOString().split("T")[0]};L(je=>[...je,G]),l(!1),ve()},ue=ee=>{ee.preventDefault(),L(G=>G.map(je=>je.id===w.id?{...je,name:E.name,email:E.email,role:E.role.charAt(0).toUpperCase()+E.role.slice(1),isActive:E.isActive}:je)),o(!1),S(null),Be()},fe=()=>{L(ee=>ee.filter(G=>G.id!==b.id)),u(!1),A(null)},qe=ee=>{ee.preventDefault();const G=z.find(be=>be.id===R.botPersonalityId),je={id:Date.now(),name:R.name,email:R.email,specialization:R.specialization,status:"offline",activeSessions:0,totalSessions:0,avgResponseTime:"0m 0s",personalityName:(G==null?void 0:G.name)||"Default",botPersonalityId:R.botPersonalityId,maxConcurrentChats:R.maxConcurrentChats,isActive:R.isActive,joinedDate:new Date().toISOString().split("T")[0]};q(be=>[...be,je]),h(!1),ae()},Ge=ee=>{ee.preventDefault();const G=z.find(je=>je.id===R.botPersonalityId);q(je=>je.map(be=>be.id===v.id?{...be,name:R.name,email:R.email,specialization:R.specialization,maxConcurrentChats:R.maxConcurrentChats,personalityName:(G==null?void 0:G.name)||"Default",botPersonalityId:R.botPersonalityId,isActive:R.isActive}:be)),f(!1),j(null),ae()},it=()=>{q(ee=>ee.filter(G=>G.id!==N.id)),g(!1),O(null)},Ue=()=>{l(!1),o(!1),u(!1),h(!1),f(!1),g(!1),S(null),A(null),j(null),O(null),ve(),Be(),ae()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Team Management"]}),e.jsx(Q,{children:"Kelola users dan agents dalam organisasi"})]}),e.jsx(B,{children:e.jsxs(kt,{value:r,onValueChange:n,children:[e.jsxs(wt,{children:[e.jsx(pe,{value:"users",children:"Users"}),e.jsx(pe,{value:"agents",children:"Agents"})]}),e.jsxs(ge,{value:"users",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mengundang users baru dan menetapkan role (org_admin, agent, viewer)"}),e.jsxs(k,{onClick:Ee,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Invite User"]})]}),e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"User"}),e.jsx(J,{children:"Email"}),e.jsx(J,{children:"Role"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Last Seen"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:I.map(ee=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fn,{user:ee,size:"default",showOnlineStatus:!0,status:ee.status}),e.jsx("div",{children:e.jsx("p",{className:"font-medium",children:ee.name})})]})}),e.jsx(X,{children:ee.email}),e.jsx(X,{children:e.jsx(W,{variant:"outline",children:ee.role})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${ee.status==="online"?"bg-green-500":ee.status==="busy"?"bg-yellow-500":"bg-gray-400"}`}),e.jsx("span",{className:"capitalize",children:ee.status})]})}),e.jsx(X,{className:"text-muted-foreground",children:ee.lastSeen}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",title:"Edit User",onClick:()=>me(ee),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",title:"Delete User",onClick:()=>ye(ee),className:"text-red-600 hover:text-red-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},ee.id))})]})]}),e.jsxs(ge,{value:"agents",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Kelola profil spesifik agents, mengatur specialization dan max_concurrent_chats"}),e.jsxs(k,{onClick:he,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Agent"]})]}),e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Agent"}),e.jsx(J,{children:"Specialization"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Active Sessions"}),e.jsx(J,{children:"Avg Response"}),e.jsx(J,{children:"Bot Personality"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:Z.map(ee=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${ee.status==="online"?"bg-green-500":ee.status==="busy"?"bg-yellow-500":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:ee.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ee.email})]})]})}),e.jsx(X,{children:ee.specialization}),e.jsx(X,{children:e.jsx(W,{variant:ee.status==="online"?"default":ee.status==="busy"?"secondary":"outline",children:ee.status})}),e.jsx(X,{children:ee.activeSessions}),e.jsx(X,{children:ee.avgResponseTime}),e.jsx(X,{children:e.jsx(k,{variant:"outline",size:"sm",onClick:()=>s&&s(ee),children:ee.personalityName})}),e.jsx(X,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",title:"Edit Agent",onClick:()=>Oe(ee),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"outline",size:"sm",title:"Delete Agent",onClick:()=>ke(ee),className:"text-red-600 hover:text-red-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},ee.id))})]})]})]})})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(F,{className:"w-full max-w-2xl",children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Setup Bot Personality untuk ",t.name]}),e.jsx(Q,{children:"Pilih personality yang akan digunakan oleh agent ini dalam berinteraksi dengan pelanggan"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.status==="online"?"bg-green-500":t.status==="busy"?"bg-yellow-500":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.specialization})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Current Personality:"})," ",t.personalityName]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{children:"Pilih Bot Personality"}),e.jsx("div",{className:"space-y-3",children:z.map(ee=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-all ${t.botPersonalityId===ee.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>s&&s({...t,botPersonalityId:ee.id}),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:ee.name}),e.jsx(W,{variant:"outline",children:ee.language}),e.jsx(W,{variant:"secondary",children:ee.tone})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Greeting:"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:ee.greetingMessage})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Error Message:"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:ee.errorMessage})]})]})]}),t.botPersonalityId===ee.id&&e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"w-4 h-4 rounded-full bg-primary flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})})]})},ee.id))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(k,{variant:"outline",onClick:()=>s&&s(null),children:"Batal"}),e.jsxs(k,{onClick:()=>{a&&t&&a(t.id,t.botPersonalityId)},children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Simpan Personality"]})]})]})]})}),i&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invite New User"}),e.jsx(k,{variant:"ghost",size:"sm",onClick:Ue,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"invite-name",children:"Full Name *"}),e.jsx(K,{id:"invite-name",placeholder:"John Doe",value:C.name,onChange:ee=>ne("name",ee.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"invite-email",children:"Email Address *"}),e.jsx(K,{id:"invite-email",type:"email",placeholder:"john.doe@company.com",value:C.email,onChange:ee=>ne("email",ee.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"invite-role",children:"Role *"}),e.jsxs(ie,{value:C.role,onValueChange:ee=>ne("role",ee),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"admin",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Admin - Full access to all features"]})}),e.jsx(T,{value:"agent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Agent - Handle customer chats"]})}),e.jsx(T,{value:"viewer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4"}),"Viewer - Read-only access"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"invite-message",children:"Welcome Message (Optional)"}),e.jsx(Re,{id:"invite-message",placeholder:"Welcome to our team! We're excited to have you on board...",value:C.message,onChange:ee=>ne("message",ee.target.value),rows:3})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Send Invitation Email"}),e.jsx("p",{className:"text-sm text-gray-600",children:"User will receive an email with login instructions"})]}),e.jsx(de,{checked:C.sendInvite,onCheckedChange:ee=>ne("sendInvite",ee)})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Role Permissions"}),e.jsxs("ul",{className:"text-blue-700 mt-2 space-y-1",children:[e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Admin:"})," Full access, user management, settings"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Agent:"})," Handle chats, view analytics, manage knowledge"]}),e.jsxs("li",{children:["• ",e.jsx("strong",{children:"Viewer:"})," Read-only access to dashboards and reports"]})]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Send Invitation"]}),e.jsx(k,{type:"button",variant:"outline",onClick:Ue,className:"flex-1",children:"Cancel"})]})]})]})})}),c&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit User"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Editing: ",e.jsx("span",{className:"font-medium",children:w.name})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:Ue,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-name",children:"Full Name *"}),e.jsx(K,{id:"edit-name",placeholder:"John Doe",value:E.name,onChange:ee=>Y("name",ee.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-email",children:"Email Address *"}),e.jsx(K,{id:"edit-email",type:"email",placeholder:"john.doe@company.com",value:E.email,onChange:ee=>Y("email",ee.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-role",children:"Role *"}),e.jsxs(ie,{value:E.role,onValueChange:ee=>Y("role",ee),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"admin",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Admin - Full access to all features"]})}),e.jsx(T,{value:"agent",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Agent - Handle customer chats"]})}),e.jsx(T,{value:"viewer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-4 h-4"}),"Viewer - Read-only access"]})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Account Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable or disable user access"})]}),e.jsx(de,{checked:E.isActive,onCheckedChange:ee=>Y("isActive",ee)})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-green-900",children:"User Information"}),e.jsxs("p",{className:"text-green-700",children:["Joined: ",new Date(w.joinedDate).toLocaleDateString("id-ID")," • Last seen: ",w.lastSeen]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update User"]}),e.jsx(k,{type:"button",variant:"outline",onClick:Ue,className:"flex-1",children:"Cancel"})]})]})]})})}),d&&b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Remove User"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Are you sure you want to remove this user from your organization?"}),e.jsx("div",{className:"bg-gray-50 border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fn,{user:b,size:"default",showOnlineStatus:!1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:b.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[b.email," • ",b.role]})]})]})})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qe,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-red-900",children:"Warning"}),e.jsx("p",{className:"text-red-700 mt-1",children:"Removing this user will:"}),e.jsxs("ul",{className:"text-red-700 mt-2 space-y-1",children:[e.jsx("li",{children:"• Revoke access to the organization"}),e.jsx("li",{children:"• Transfer active chats to other agents"}),e.jsx("li",{children:"• Preserve chat history for compliance"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{onClick:fe,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Remove User"]}),e.jsx(k,{variant:"outline",onClick:Ue,className:"flex-1",children:"Cancel"})]})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Agent"}),e.jsx(k,{variant:"ghost",size:"sm",onClick:Ue,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:qe,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"agent-name",children:"Full Name *"}),e.jsx(K,{id:"agent-name",placeholder:"John Doe",value:R.name,onChange:ee=>se("name",ee.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"agent-email",children:"Email Address *"}),e.jsx(K,{id:"agent-email",type:"email",placeholder:"john.doe@company.com",value:R.email,onChange:ee=>se("email",ee.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"agent-specialization",children:"Specialization *"}),e.jsxs(ie,{value:R.specialization,onValueChange:ee=>se("specialization",ee),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select agent specialization"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"Customer Support",children:"Customer Support"}),e.jsx(T,{value:"Technical Support",children:"Technical Support"}),e.jsx(T,{value:"Sales",children:"Sales"}),e.jsx(T,{value:"Billing",children:"Billing"}),e.jsx(T,{value:"General",children:"General"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"max-chats",children:"Max Concurrent Chats"}),e.jsx(K,{id:"max-chats",type:"number",min:"1",max:"10",value:R.maxConcurrentChats,onChange:ee=>se("maxConcurrentChats",parseInt(ee.target.value))}),e.jsx("p",{className:"text-xs text-gray-500",children:"Maximum number of simultaneous chats"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"bot-personality",children:"Bot Personality"}),e.jsxs(ie,{value:R.botPersonalityId.toString(),onValueChange:ee=>se("botPersonalityId",parseInt(ee)),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsx(oe,{children:z.map(ee=>e.jsx(T,{value:ee.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),ee.name]})},ee.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Active Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable agent for chat handling"})]}),e.jsx(de,{checked:R.isActive,onCheckedChange:ee=>se("isActive",ee)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Auto Assignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically assign new chats"})]}),e.jsx(de,{checked:R.autoAssign,onCheckedChange:ee=>se("autoAssign",ee)})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ns,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Agent Configuration"}),e.jsx("p",{className:"text-blue-700 mt-1",children:"Agents will be able to handle customer chats based on their specialization. They can switch between manual and AI-assisted modes during conversations."})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Add Agent"]}),e.jsx(k,{type:"button",variant:"outline",onClick:Ue,className:"flex-1",children:"Cancel"})]})]})]})})}),x&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Agent"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Editing: ",e.jsx("span",{className:"font-medium",children:v.name})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:Ue,children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:Ge,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-agent-name",children:"Full Name *"}),e.jsx(K,{id:"edit-agent-name",placeholder:"John Doe",value:R.name,onChange:ee=>se("name",ee.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-agent-email",children:"Email Address *"}),e.jsx(K,{id:"edit-agent-email",type:"email",placeholder:"john.doe@company.com",value:R.email,onChange:ee=>se("email",ee.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-agent-specialization",children:"Specialization *"}),e.jsxs(ie,{value:R.specialization,onValueChange:ee=>se("specialization",ee),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"Customer Support",children:"Customer Support"}),e.jsx(T,{value:"Technical Support",children:"Technical Support"}),e.jsx(T,{value:"Sales",children:"Sales"}),e.jsx(T,{value:"Billing",children:"Billing"}),e.jsx(T,{value:"General",children:"General"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-max-chats",children:"Max Concurrent Chats"}),e.jsx(K,{id:"edit-max-chats",type:"number",min:"1",max:"10",value:R.maxConcurrentChats,onChange:ee=>se("maxConcurrentChats",parseInt(ee.target.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"edit-bot-personality",children:"Bot Personality"}),e.jsxs(ie,{value:R.botPersonalityId.toString(),onValueChange:ee=>se("botPersonalityId",parseInt(ee)),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsx(oe,{children:z.map(ee=>e.jsx(T,{value:ee.id.toString(),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),ee.name]})},ee.id))})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(_,{children:"Active Status"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable or disable agent"})]}),e.jsx(de,{checked:R.isActive,onCheckedChange:ee=>se("isActive",ee)})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-green-900",children:"Agent Performance"}),e.jsxs("p",{className:"text-green-700",children:["Total Sessions: ",v.totalSessions," • Avg Response: ",v.avgResponseTime," • Joined: ",new Date(v.joinedDate).toLocaleDateString("id-ID")]})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update Agent"]}),e.jsx(k,{type:"button",variant:"outline",onClick:Ue,className:"flex-1",children:"Cancel"})]})]})]})})}),p&&N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Remove Agent"}),e.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Are you sure you want to remove this agent from your team?"}),e.jsx("div",{className:"bg-gray-50 border rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${N.status==="online"?"bg-green-500":N.status==="busy"?"bg-yellow-500":"bg-gray-400"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:N.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[N.email," • ",N.specialization]})]})]})})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qe,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-red-900",children:"Warning"}),e.jsx("p",{className:"text-red-700 mt-1",children:"Removing this agent will:"}),e.jsxs("ul",{className:"text-red-700 mt-2 space-y-1",children:[e.jsxs("li",{children:["• Transfer active chats (",N.activeSessions,") to other agents"]}),e.jsx("li",{children:"• Preserve chat history and performance data"}),e.jsx("li",{children:"• Revoke agent access to the system"}),e.jsx("li",{children:"• Remove from auto-assignment rotation"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{onClick:it,className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Remove Agent"]}),e.jsx(k,{variant:"outline",onClick:Ue,className:"flex-1",children:"Cancel"})]})]})})})]})},JH=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState("general");y.useState(!1),y.useState(!1);const[n,i]=y.useState({sessionTimeout:"24",maxLoginAttempts:"5",lockoutDuration:"30",passwordExpiry:"90",requireStrongPassword:!0,twoFactorAuth:!1,twoFactorMethod:"app",backupCodes:!0,rememberDevice:!0,ipWhitelist:!1,allowedIPs:["192.168.1.0/24","10.0.0.0/8"],geoRestriction:!1,allowedCountries:["ID","SG","MY"],apiRateLimit:"1000",apiKeyExpiry:"365",requireApiKeyAuth:!0,apiKeyPermissions:["read","write"],dataEncryption:!0,backupEncryption:!0,auditLogRetention:"365",sensitiveDataMasking:!0,securityAlerts:!0,loginNotifications:!0,suspiciousActivityAlerts:!0,adminNotifications:!0}),l=[{id:1,timestamp:"2024-03-20 14:30:25",user:"Ahmad Rahman",action:"API Key Created",resource:"Production API",ip:"192.168.1.100"},{id:2,timestamp:"2024-03-20 13:45:12",user:"Sari Dewi",action:"User Role Updated",resource:"Budi Santoso",ip:"192.168.1.101"},{id:3,timestamp:"2024-03-20 12:15:45",user:"Ahmad Rahman",action:"Webhook Modified",resource:"Order Notifications",ip:"192.168.1.100"},{id:4,timestamp:"2024-03-20 11:30:18",user:"System",action:"Bot Personality Updated",resource:"Ramah & Profesional",ip:"System"},{id:5,timestamp:"2024-03-20 10:22:33",user:"Sari Dewi",action:"Integration Configured",resource:"WhatsApp Business",ip:"192.168.1.101"},{id:6,timestamp:"2024-03-20 09:45:17",user:"Ahmad Rahman",action:"User Invited",resource:"budi.santoso@company.com",ip:"192.168.1.100"},{id:7,timestamp:"2024-03-20 08:30:45",user:"System",action:"Backup Completed",resource:"Database Backup",ip:"System"},{id:8,timestamp:"2024-03-19 17:22:11",user:"Rina Sari",action:"Channel Activated",resource:"Facebook Messenger",ip:"192.168.1.102"}],c={totalLogs:156,todayLogs:8,activeUsers:3,failedAttempts:0},o=()=>{s(!0)},d=()=>{s(!1),r("general")},u=(x,f,p)=>{i(g=>({...g,[f]:p}))},m=()=>{console.log("Saving security settings:",n),d()},h=()=>{i({sessionTimeout:"24",maxLoginAttempts:"5",lockoutDuration:"30",passwordExpiry:"90",requireStrongPassword:!0,twoFactorAuth:!1,twoFactorMethod:"app",backupCodes:!0,rememberDevice:!0,ipWhitelist:!1,allowedIPs:["192.168.1.0/24","10.0.0.0/8"],geoRestriction:!1,allowedCountries:["ID","SG","MY"],apiRateLimit:"1000",apiKeyExpiry:"365",requireApiKeyAuth:!0,apiKeyPermissions:["read","write"],dataEncryption:!0,backupEncryption:!0,auditLogRetention:"365",sensitiveDataMasking:!0,securityAlerts:!0,loginNotifications:!0,suspiciousActivityAlerts:!0,adminNotifications:!0})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Ae,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:c.totalLogs}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Logs"})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ae,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:c.todayLogs}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Today's Activity"})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:e.jsx(Ae,{className:"w-4 h-4 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:c.activeUsers}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Qe,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:c.failedAttempts}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed Attempts"})]})]})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Security & Audit Logs"]}),e.jsx(Q,{children:"Tampilan read-only audit_logs dengan filter organization_id"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs(is,{children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx(ls,{children:"Audit logs menampilkan aktivitas untuk organization_id Anda saja. Data ini tidak dapat diedit dan bersifat read-only."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{className:"min-w-[180px]",children:"Timestamp"}),e.jsx(J,{className:"min-w-[120px]",children:"User"}),e.jsx(J,{className:"min-w-[150px]",children:"Action"}),e.jsx(J,{className:"min-w-[150px]",children:"Resource"}),e.jsx(J,{className:"min-w-[120px]",children:"IP Address"})]})}),e.jsx(mt,{children:l.map(x=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-mono text-sm",children:x.timestamp}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[x.user==="System"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{className:x.user==="System"?"text-blue-600 font-medium":"",children:x.user})]})}),e.jsx(X,{children:e.jsx(W,{variant:"outline",className:x.action.includes("Created")||x.action.includes("Activated")?"border-green-200 text-green-700":x.action.includes("Updated")||x.action.includes("Modified")?"border-blue-200 text-blue-700":x.action.includes("Deleted")||x.action.includes("Removed")?"border-red-200 text-red-700":"border-gray-200 text-gray-700",children:x.action})}),e.jsx(X,{className:"font-medium",children:x.resource}),e.jsx(X,{className:"font-mono text-sm text-muted-foreground",children:x.ip})]},x.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Menampilkan ",l.length," dari ",c.totalLogs," total log entries"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),e.jsx(k,{variant:"outline",size:"sm",children:"Next"})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Security Settings"]}),e.jsx(Q,{children:"Konfigurasi keamanan untuk organisasi"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Session Management"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Session Timeout"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically logout after inactivity"})]}),e.jsx(W,{children:"24 hours"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extra security for admin accounts"})]}),e.jsx(W,{variant:"secondary",children:"Disabled"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Access Control"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"IP Whitelist"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Restrict access to specific IPs"})]}),e.jsx(W,{variant:"secondary",children:"Not configured"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"API Rate Limiting"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Limit API requests per minute"})]}),e.jsx(W,{children:"1000/min"})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(k,{onClick:o,children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Configure Security Settings"]})})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:e.jsx(Ae,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:"Security Settings Configuration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Konfigurasi keamanan lengkap untuk organisasi Anda"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:d,className:"hover:bg-gray-100 rounded-full",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs(kt,{value:a,onValueChange:r,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-6 mb-8",children:[e.jsxs(pe,{value:"general",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"General"]}),e.jsxs(pe,{value:"authentication",className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"w-4 h-4"}),"Auth"]}),e.jsxs(pe,{value:"access",className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),"Access"]}),e.jsxs(pe,{value:"api",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"API"]}),e.jsxs(pe,{value:"data",className:"flex items-center gap-2",children:[e.jsx(on,{className:"w-4 h-4"}),"Data"]}),e.jsxs(pe,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4"}),"Alerts"]})]}),e.jsx(ge,{value:"general",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-blue-600"}),"Session Management"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"sessionTimeout",children:"Session Timeout (hours)"}),e.jsxs(ie,{value:n.sessionTimeout,onValueChange:x=>u("general","sessionTimeout",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"1",children:"1 hour"}),e.jsx(T,{value:"4",children:"4 hours"}),e.jsx(T,{value:"8",children:"8 hours"}),e.jsx(T,{value:"24",children:"24 hours"}),e.jsx(T,{value:"168",children:"1 week"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"maxLoginAttempts",children:"Maximum Login Attempts"}),e.jsxs(ie,{value:n.maxLoginAttempts,onValueChange:x=>u("general","maxLoginAttempts",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"3",children:"3 attempts"}),e.jsx(T,{value:"5",children:"5 attempts"}),e.jsx(T,{value:"10",children:"10 attempts"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"lockoutDuration",children:"Account Lockout Duration (minutes)"}),e.jsxs(ie,{value:n.lockoutDuration,onValueChange:x=>u("general","lockoutDuration",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"15",children:"15 minutes"}),e.jsx(T,{value:"30",children:"30 minutes"}),e.jsx(T,{value:"60",children:"1 hour"}),e.jsx(T,{value:"1440",children:"24 hours"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-green-600"}),"Password Policy"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"passwordExpiry",children:"Password Expiry (days)"}),e.jsxs(ie,{value:n.passwordExpiry,onValueChange:x=>u("general","passwordExpiry",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"30",children:"30 days"}),e.jsx(T,{value:"60",children:"60 days"}),e.jsx(T,{value:"90",children:"90 days"}),e.jsx(T,{value:"180",children:"180 days"}),e.jsx(T,{value:"365",children:"1 year"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"requireStrongPassword",checked:n.requireStrongPassword,onCheckedChange:x=>u("general","requireStrongPassword",x)}),e.jsx(_,{htmlFor:"requireStrongPassword",children:"Require Strong Password"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"Strong Password Requirements:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Minimum 8 characters"}),e.jsx("li",{children:"• Mix of uppercase and lowercase"}),e.jsx("li",{children:"• Include numbers and symbols"}),e.jsx("li",{children:"• No common patterns"})]})]})]})})]})]})]})}),e.jsx(ge,{value:"authentication",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(gw,{className:"w-5 h-5 text-purple-600"}),"Two-Factor Authentication"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"twoFactorAuth",checked:n.twoFactorAuth,onCheckedChange:x=>u("authentication","twoFactorAuth",x)}),e.jsx(_,{htmlFor:"twoFactorAuth",children:"Enable 2FA"})]}),n.twoFactorAuth&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"twoFactorMethod",children:"2FA Method"}),e.jsxs(ie,{value:n.twoFactorMethod,onValueChange:x=>u("authentication","twoFactorMethod",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"app",children:"Authenticator App (TOTP)"}),e.jsx(T,{value:"sms",children:"SMS Code"}),e.jsx(T,{value:"email",children:"Email Code"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"backupCodes",checked:n.backupCodes,onCheckedChange:x=>u("authentication","backupCodes",x)}),e.jsx(_,{htmlFor:"backupCodes",children:"Generate Backup Codes"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"rememberDevice",checked:n.rememberDevice,onCheckedChange:x=>u("authentication","rememberDevice",x)}),e.jsx(_,{htmlFor:"rememberDevice",children:"Remember Device (30 days)"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(vw,{className:"w-5 h-5 text-orange-600"}),"Additional Security"]}),e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(nt,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-medium",children:"Security Recommendations:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Enable 2FA for all admin accounts"}),e.jsx("li",{children:"• Use strong, unique passwords"}),e.jsx("li",{children:"• Regularly review access logs"}),e.jsx("li",{children:"• Keep software updated"})]})]})]})})})]})]})}),e.jsx(ge,{value:"access",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(jw,{className:"w-5 h-5 text-indigo-600"}),"IP Address Control"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"ipWhitelist",checked:n.ipWhitelist,onCheckedChange:x=>u("access","ipWhitelist",x)}),e.jsx(_,{htmlFor:"ipWhitelist",children:"Enable IP Whitelist"})]}),n.ipWhitelist&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Allowed IP Addresses/Ranges"}),e.jsxs("div",{className:"space-y-2",children:[n.allowedIPs.map((x,f)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:x,placeholder:"192.168.1.0/24"}),e.jsx(k,{variant:"outline",size:"sm",children:"Remove"})]},f)),e.jsx(k,{variant:"outline",size:"sm",children:"+ Add IP Range"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ss,{className:"w-5 h-5 text-teal-600"}),"Geographic Restrictions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"geoRestriction",checked:n.geoRestriction,onCheckedChange:x=>u("access","geoRestriction",x)}),e.jsx(_,{htmlFor:"geoRestriction",children:"Enable Geographic Restrictions"})]}),n.geoRestriction&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Allowed Countries"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.allowedCountries.map((x,f)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:x,defaultChecked:!0}),e.jsx(_,{htmlFor:x,className:"text-sm",children:x})]},f))})]})]})]})]})}),e.jsx(ge,{value:"api",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Et,{className:"w-5 h-5 text-yellow-600"}),"Rate Limiting"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"apiRateLimit",children:"API Rate Limit (requests per minute)"}),e.jsxs(ie,{value:n.apiRateLimit,onValueChange:x=>u("api","apiRateLimit",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"100",children:"100/min"}),e.jsx(T,{value:"500",children:"500/min"}),e.jsx(T,{value:"1000",children:"1000/min"}),e.jsx(T,{value:"5000",children:"5000/min"}),e.jsx(T,{value:"10000",children:"10000/min"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"apiKeyExpiry",children:"API Key Expiry (days)"}),e.jsxs(ie,{value:n.apiKeyExpiry,onValueChange:x=>u("api","apiKeyExpiry",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"30",children:"30 days"}),e.jsx(T,{value:"90",children:"90 days"}),e.jsx(T,{value:"180",children:"180 days"}),e.jsx(T,{value:"365",children:"1 year"}),e.jsx(T,{value:"0",children:"Never expire"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5 text-red-600"}),"API Authentication"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"requireApiKeyAuth",checked:n.requireApiKeyAuth,onCheckedChange:x=>u("api","requireApiKeyAuth",x)}),e.jsx(_,{htmlFor:"requireApiKeyAuth",children:"Require API Key Authentication"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{children:"Default API Key Permissions"}),e.jsx("div",{className:"space-y-2",children:["read","write","delete","admin"].map(x=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:x,checked:n.apiKeyPermissions.includes(x),onChange:f=>{f.target.checked?u("api","apiKeyPermissions",[...n.apiKeyPermissions,x]):u("api","apiKeyPermissions",n.apiKeyPermissions.filter(p=>p!==x))}}),e.jsx(_,{htmlFor:x,className:"text-sm capitalize",children:x})]},x))})]})]})]})]})}),e.jsx(ge,{value:"data",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(on,{className:"w-5 h-5 text-emerald-600"}),"Data Encryption"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"dataEncryption",checked:n.dataEncryption,onCheckedChange:x=>u("data","dataEncryption",x)}),e.jsx(_,{htmlFor:"dataEncryption",children:"Enable Data Encryption at Rest"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"backupEncryption",checked:n.backupEncryption,onCheckedChange:x=>u("data","backupEncryption",x)}),e.jsx(_,{htmlFor:"backupEncryption",children:"Encrypt Backup Data"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"sensitiveDataMasking",checked:n.sensitiveDataMasking,onCheckedChange:x=>u("data","sensitiveDataMasking",x)}),e.jsx(_,{htmlFor:"sensitiveDataMasking",children:"Mask Sensitive Data in Logs"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5 text-blue-600"}),"Data Retention"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"auditLogRetention",children:"Audit Log Retention (days)"}),e.jsxs(ie,{value:n.auditLogRetention,onValueChange:x=>u("data","auditLogRetention",x),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"30",children:"30 days"}),e.jsx(T,{value:"90",children:"90 days"}),e.jsx(T,{value:"180",children:"180 days"}),e.jsx(T,{value:"365",children:"1 year"}),e.jsx(T,{value:"1095",children:"3 years"})]})]})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-green-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("p",{className:"font-medium",children:"Current Data Protection Status:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• All data encrypted in transit (TLS 1.3)"}),e.jsx("li",{children:"• Database encryption enabled"}),e.jsx("li",{children:"• Regular security audits performed"}),e.jsx("li",{children:"• GDPR compliance maintained"})]})]})]})})]})]})]})}),e.jsx(ge,{value:"notifications",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(dn,{className:"w-5 h-5 text-purple-600"}),"Security Alerts"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"securityAlerts",checked:n.securityAlerts,onCheckedChange:x=>u("notifications","securityAlerts",x)}),e.jsx(_,{htmlFor:"securityAlerts",children:"Enable Security Alerts"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"suspiciousActivityAlerts",checked:n.suspiciousActivityAlerts,onCheckedChange:x=>u("notifications","suspiciousActivityAlerts",x)}),e.jsx(_,{htmlFor:"suspiciousActivityAlerts",children:"Suspicious Activity Alerts"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"adminNotifications",checked:n.adminNotifications,onCheckedChange:x=>u("notifications","adminNotifications",x)}),e.jsx(_,{htmlFor:"adminNotifications",children:"Admin Notifications"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5 text-indigo-600"}),"Login Notifications"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"loginNotifications",checked:n.loginNotifications,onCheckedChange:x=>u("notifications","loginNotifications",x)}),e.jsx(_,{htmlFor:"loginNotifications",children:"Login Notifications"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ns,{className:"w-4 h-4 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium",children:"Notification Channels:"}),e.jsxs("ul",{className:"mt-1 space-y-1",children:[e.jsx("li",{children:"• Email notifications"}),e.jsx("li",{children:"• SMS alerts (if configured)"}),e.jsx("li",{children:"• In-app notifications"}),e.jsx("li",{children:"• Webhook notifications"})]})]})]})})]})]})]})})]}),e.jsxs("div",{className:"flex gap-4 pt-8 border-t mt-8",children:[e.jsx(k,{variant:"outline",onClick:h,children:"Reset to Defaults"}),e.jsxs("div",{className:"flex gap-3 ml-auto",children:[e.jsx(k,{variant:"outline",onClick:d,children:"Cancel"}),e.jsxs(k,{onClick:m,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Save Security Settings"]})]})]})]})})})]})},QH=()=>{const[t,s]=y.useState("channels"),[a,r]=y.useState(!1),[n,i]=y.useState(null),[l,c]=y.useState(DH),[o,d]=y.useState(null),[u,m]=y.useState(!1),[h,x]=y.useState("all"),[f,p]=y.useState(""),g=[{id:1,name:"Website Chat",type:"Web Widget",status:"Aktif",lastUsed:"2 menit lalu"},{id:2,name:"WhatsApp Business",type:"WhatsApp",status:"Aktif",lastUsed:"5 menit lalu"},{id:3,name:"Facebook Messenger",type:"Facebook",status:"Nonaktif",lastUsed:"2 jam lalu"}],w=v=>{d(v),m(!0)},S=v=>{o&&c(j=>j.map(N=>N.id===o.id?{...N,config:v}:N)),m(!1),d(null)},b=v=>{c(j=>j.map(N=>N.id===v?{...N,status:N.status==="active"?"inactive":"active"}:N))},A=(v,j)=>{console.log("Updating agent",v,"with personality",j),i(null)};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Pengaturan"}),e.jsx("p",{className:"text-muted-foreground",children:"Konfigurasi teknis dan administratif untuk organisasi"})]}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide mb-6",children:e.jsxs(wt,{className:"inline-flex h-10 min-w-full lg:grid lg:grid-cols-7 lg:h-10",children:[e.jsx(pe,{value:"channels",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Channels"}),e.jsx(pe,{value:"bot-personalities",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Bot Personalities"}),e.jsx(pe,{value:"integrations",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Integrations"}),e.jsx(pe,{value:"team-management",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Team"}),e.jsx(pe,{value:"billing",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Billing"}),e.jsx(pe,{value:"developer",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Developer"}),e.jsx(pe,{value:"security",className:"text-xs lg:text-sm whitespace-nowrap px-3 lg:px-4",children:"Security"})]})}),e.jsx(ge,{value:"channels",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(HH,{channels:g,showApiKey:a,setShowApiKey:r})}),e.jsx(ge,{value:"bot-personalities",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(YH,{})}),e.jsx(ge,{value:"integrations",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(VH,{integrationsState:l,selectedCategory:h,setSelectedCategory:x,searchQuery:f,setSearchQuery:p,handleConfigureIntegration:w,handleToggleIntegrationStatus:b})}),e.jsx(ge,{value:"team-management",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(XH,{editingAgent:n,setEditingAgent:i,updateAgentPersonality:A})}),e.jsx(ge,{value:"billing",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(GH,{})}),e.jsx(ge,{value:"developer",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(ZH,{})}),e.jsx(ge,{value:"security",className:"space-y-6 focus:outline-none data-[state=inactive]:hidden",children:e.jsx(JH,{})})]}),e.jsx(KH,{integration:o,isOpen:u,onClose:()=>{m(!1),d(null)},onSave:S})]})})},eV=()=>e.jsx(QH,{}),tV=()=>{const[t,s]=y.useState("profile"),[a,r]=y.useState(!1),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[o,d]=y.useState(!1),[u,m]=y.useState(!1),[h,x]=y.useState({fullName:"John Doe",email:"john.doe@company.com",phone:"+62 812-3456-7890",avatarUrl:null}),[f,p]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[g,w]=y.useState({language:"id",theme:"auto",notifications:{email:{weeklyReport:!0,billing:!0,securityAlerts:!0},inApp:{newTeamMember:!0,integrationStatus:!0}}}),[S,b]=y.useState([{id:"session-1",device:"Chrome on Windows",location:"Jakarta, Indonesia",lastActive:"2024-01-15T10:30:00Z",isCurrent:!0,ipAddress:"192.168.1.100"},{id:"session-2",device:"Safari on iPhone",location:"Bandung, Indonesia",lastActive:"2024-01-14T15:45:00Z",isCurrent:!1,ipAddress:"10.0.0.50"},{id:"session-3",device:"Firefox on Mac",location:"Surabaya, Indonesia",lastActive:"2024-01-13T09:15:00Z",isCurrent:!1,ipAddress:"172.16.0.25"}]),[A,v]=y.useState(!1),[j,N]=y.useState(!1),[O,C]=y.useState(!1),[D,E]=y.useState({}),[P,R]=y.useState(0);y.useEffect(()=>{const ae={fullName:"John Doe",email:"john.doe@company.com",phone:"+62 812-3456-7890"},Ee=h.fullName!==ae.fullName||h.email!==ae.email||h.phone!==ae.phone;v(Ee)},[h]),y.useEffect(()=>{const ae=f.currentPassword!==""||f.newPassword!==""||f.confirmPassword!=="";N(ae)},[f]),y.useEffect(()=>{C(!0)},[g]),y.useEffect(()=>{if(f.newPassword){let ae=0;const Ee=f.newPassword;Ee.length>=8&&(ae+=25),/[a-z]/.test(Ee)&&(ae+=25),/[A-Z]/.test(Ee)&&(ae+=25),/[0-9]/.test(Ee)&&(ae+=25),R(ae)}else R(0)},[f.newPassword]);const U=(ae,Ee)=>{x(me=>({...me,[ae]:Ee}))},I=(ae,Ee)=>{p(me=>({...me,[ae]:Ee}))},L=(ae,Ee,me)=>{w(ye=>({...ye,[ae]:{...ye[ae],[Ee]:me}}))},Z=(ae,Ee)=>{w(me=>({...me,[ae]:Ee}))},q=async()=>{r(!0);try{await new Promise(ae=>setTimeout(ae,1e3)),v(!1),alert("Profil berhasil diperbarui!")}catch(ae){console.error("Error saving profile:",ae),alert("Gagal menyimpan profil. Silakan coba lagi.")}finally{r(!1)}},z=async()=>{if(f.newPassword!==f.confirmPassword){E({confirmPassword:"Konfirmasi kata sandi tidak cocok"});return}if(P<75){E({newPassword:"Kata sandi terlalu lemah"});return}r(!0);try{await new Promise(ae=>setTimeout(ae,1e3)),p({currentPassword:"",newPassword:"",confirmPassword:""}),N(!1),alert("Kata sandi berhasil diubah! Semua sesi lain akan diakhiri."),b(ae=>ae.filter(Ee=>Ee.isCurrent))}catch(ae){console.error("Error changing password:",ae),alert("Gagal mengubah kata sandi. Silakan coba lagi.")}finally{r(!1)}},ne=async()=>{r(!0);try{await new Promise(ae=>setTimeout(ae,1e3)),C(!1),alert("Preferensi berhasil disimpan!")}catch(ae){console.error("Error saving preferences:",ae),alert("Gagal menyimpan preferensi. Silakan coba lagi.")}finally{r(!1)}},Y=async()=>{if(window.confirm("Anda yakin ingin keluar dari semua perangkat lain? Ini akan mengakhiri semua sesi aktif di perangkat lain.")){r(!0);try{await new Promise(ae=>setTimeout(ae,1e3)),b(ae=>ae.filter(Ee=>Ee.isCurrent)),alert("Berhasil keluar dari semua perangkat lain!")}catch(ae){console.error("Error logging out from all devices:",ae),alert("Gagal keluar dari semua perangkat. Silakan coba lagi.")}finally{r(!1)}}},se=()=>P<25?"bg-red-500":P<50?"bg-orange-500":P<75?"bg-yellow-500":"bg-green-500",ve=()=>P<25?"Sangat Lemah":P<50?"Lemah":P<75?"Sedang":"Kuat",Be=ae=>new Date(ae).toLocaleString("id-ID",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600",children:"Kelola profil, keamanan, dan preferensi akun Anda"})]})}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-3",children:[e.jsxs(pe,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),"My Profile"]}),e.jsxs(pe,{value:"security",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),"Security"]}),e.jsxs(pe,{value:"preferences",className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-4 h-4"}),"Preferences"]})]}),e.jsx(ge,{value:"profile",className:"space-y-6 mt-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"w-5 h-5"}),"Informasi Personal"]}),e.jsx(Q,{children:"Kelola data identitas fundamental yang terasosiasi dengan akun admin"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"fullName",className:"text-sm font-medium",children:"Nama Lengkap *"}),e.jsx(K,{id:"fullName",value:h.fullName,onChange:ae=>U("fullName",ae.target.value),placeholder:"Masukkan nama lengkap Anda"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"email",className:"text-sm font-medium",children:"Alamat Email *"}),e.jsx(K,{id:"email",type:"email",value:h.email,onChange:ae=>U("email",ae.target.value),placeholder:"Masukkan alamat email Anda"}),h.email!=="john.doe@company.com"&&e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Verifikasi Tertunda - Email verifikasi akan dikirim"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"phone",className:"text-sm font-medium",children:"Nomor Telepon"}),e.jsx(K,{id:"phone",value:h.phone,onChange:ae=>U("phone",ae.target.value),placeholder:"Masukkan nomor telepon Anda"}),h.phone!=="+62 812-3456-7890"&&e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-sm",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Verifikasi Tertunda - OTP akan dikirim"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(k,{onClick:q,disabled:!A||a,className:"w-full",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),a?"Menyimpan...":"Simpan Perubahan"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(Ti,{className:"w-32 h-32 mx-auto",children:[e.jsx(Xm,{src:h.avatarUrl}),e.jsx(Oi,{className:"text-2xl",children:h.fullName.split(" ").map(ae=>ae[0]).join("")})]}),e.jsx(k,{size:"sm",variant:"outline",className:"absolute bottom-0 right-0 rounded-full w-8 h-8 p-0",onClick:()=>m(!0),children:e.jsx(Kl,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Foto Profil"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG/PNG, maks 2MB"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(k,{size:"sm",variant:"outline",onClick:()=>m(!0),children:[e.jsx(Kl,{className:"w-4 h-4 mr-2"}),"Unggah Foto Baru"]}),h.avatarUrl&&e.jsxs(k,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Hapus Foto"]})]})]})]})]})})]})}),e.jsx(ge,{value:"security",className:"space-y-6 mt-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"w-5 h-5"}),"Manajemen Kata Sandi & Keamanan"]}),e.jsx(Q,{children:"Antarmuka yang aman dan jelas untuk mengelola kredensial login dan sesi akun"})]}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:ae=>{ae.preventDefault(),z()},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"currentPassword",className:"text-sm font-medium",children:"Kata Sandi Saat Ini *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"currentPassword",type:n?"text":"password",value:f.currentPassword,onChange:ae=>I("currentPassword",ae.target.value),placeholder:"Masukkan kata sandi saat ini",required:!0}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>i(!n),children:n?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"newPassword",className:"text-sm font-medium",children:"Kata Sandi Baru *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"newPassword",type:l?"text":"password",value:f.newPassword,onChange:ae=>I("newPassword",ae.target.value),placeholder:"Masukkan kata sandi baru",required:!0}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>c(!l),children:l?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),f.newPassword&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Kekuatan Kata Sandi:"}),e.jsx("span",{className:P<75?"text-red-600":"text-green-600",children:ve()})]}),e.jsx(us,{value:P,className:"h-2",children:e.jsx("div",{className:`h-full transition-all duration-300 ${se()}`})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Konfirmasi Kata Sandi Baru *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"confirmPassword",type:o?"text":"password",value:f.confirmPassword,onChange:ae=>I("confirmPassword",ae.target.value),placeholder:"Konfirmasi kata sandi baru",required:!0}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>d(!o),children:o?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),D.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600",children:D.confirmPassword})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(k,{type:"submit",disabled:!j||a,className:"w-full",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),a?"Mengubah...":"Ubah Kata Sandi"]})})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Sesi Aktif"}),e.jsxs(k,{variant:"outline",size:"sm",onClick:Y,disabled:S.length<=1,children:[e.jsx(Yd,{className:"w-4 h-4 mr-2"}),"Keluar dari Semua Perangkat Lain"]})]}),e.jsx("div",{className:"space-y-3",children:S.map(ae=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${ae.isCurrent?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:ae.isCurrent?e.jsx(W,{variant:"default",className:"bg-blue-600",children:"Sesi Saat Ini"}):e.jsx(W,{variant:"secondary",children:"Sesi Aktif"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(co,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:ae.device})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Pr,{className:"w-4 h-4"}),e.jsx("span",{children:ae.location}),e.jsx("span",{children:"•"}),e.jsx("span",{children:ae.ipAddress})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsxs("span",{children:["Terakhir aktif: ",Be(ae.lastActive)]})]})]})]},ae.id))})]})]})]})}),e.jsx(ge,{value:"preferences",className:"space-y-6 mt-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Preferensi Antarmuka & Notifikasi"]}),e.jsx(Q,{children:"Sesuaikan lingkungan kerja Anda di dalam platform sesuai preferensi pribadi"})]}),e.jsxs(B,{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(yw,{className:"w-5 h-5"}),"Pengaturan Tampilan"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"language",className:"text-sm font-medium",children:"Bahasa / Language"}),e.jsxs(ie,{value:g.language,onValueChange:ae=>Z("language",ae),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"id",children:"Bahasa Indonesia"}),e.jsx(T,{value:"en",children:"English"})]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Perubahan akan langsung diterapkan setelah disimpan"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{className:"text-sm font-medium",children:"Tema"}),e.jsx("div",{className:"flex gap-3",children:[{value:"light",label:"Terang",icon:"☀️"},{value:"dark",label:"Gelap",icon:"🌙"},{value:"auto",label:"Otomatis",icon:"🔄"}].map(ae=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:ae.value,name:"theme",value:ae.value,checked:g.theme===ae.value,onChange:Ee=>Z("theme",Ee.target.value),className:"w-4 h-4 text-blue-600"}),e.jsxs(_,{htmlFor:ae.value,className:"text-sm cursor-pointer",children:[e.jsx("span",{className:"mr-2",children:ae.icon}),ae.label]})]},ae.value))})]})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(dn,{className:"w-5 h-5"}),"Pengaturan Notifikasi"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700",children:"Notifikasi Email"}),e.jsx("div",{className:"space-y-3",children:[{key:"weeklyReport",label:"Kirim ringkasan laporan performa mingguan"},{key:"billing",label:"Kirim notifikasi tagihan (faktur terbit, pembayaran berhasil/gagal)"},{key:"securityAlerts",label:"Kirim lansiran keamanan penting (login dari perangkat baru)"}].map(ae=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{htmlFor:ae.key,className:"text-sm cursor-pointer",children:ae.label}),e.jsx(de,{id:ae.key,checked:g.notifications.email[ae.key],onCheckedChange:Ee=>L("email",ae.key,Ee)})]},ae.key))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-700",children:"Notifikasi Dalam Aplikasi"}),e.jsx("div",{className:"space-y-3",children:[{key:"newTeamMember",label:"Tampilkan notifikasi saat pengguna baru berhasil bergabung dengan tim"},{key:"integrationStatus",label:"Tampilkan notifikasi saat integrasi penting (WhatsApp) terputus"}].map(ae=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(_,{htmlFor:ae.key,className:"text-sm cursor-pointer",children:ae.label}),e.jsx(de,{id:ae.key,checked:g.notifications.inApp[ae.key],onCheckedChange:Ee=>L("inApp",ae.key,Ee)})]},ae.key))})]})]})]}),e.jsx(as,{}),e.jsx("div",{className:"pt-4",children:e.jsxs(k,{onClick:ne,disabled:!O||a,className:"w-full",children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),a?"Menyimpan...":"Simpan Preferensi"]})})]})]})})]}),e.jsx(At,{open:u,onOpenChange:m,children:e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Unggah Foto Profil"}),e.jsx(Tt,{children:"Pilih foto profil baru untuk akun Anda"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx(Kl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Klik untuk memilih file atau drag & drop"}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG, PNG atau GIF. Maksimal 2MB."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{className:"flex-1",children:"Pilih File"}),e.jsx(k,{variant:"outline",onClick:()=>m(!1),children:"Batal"})]})]})]})})]})},xt=Ym.create({baseURL:"http://localhost:9000/api",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});xt.interceptors.request.use(t=>{const s=localStorage.getItem("jwt_token"),a=localStorage.getItem("sanctum_token");return s&&(t.headers.Authorization=`Bearer ${s}`),a&&(t.headers["X-Sanctum-Token"]=a),t},t=>Promise.reject(t));xt.interceptors.response.use(t=>t,async t=>{var a;const s=t.config;if(((a=t.response)==null?void 0:a.status)===401&&!s._retry){s._retry=!0;try{const r=localStorage.getItem("refresh_token");if(r){const n=await Ym.post("http://localhost:9000/api/auth/refresh",{refresh_token:r});if(n.data.success){const{access_token:i,refresh_token:l}=n.data.data;return localStorage.setItem("jwt_token",i),localStorage.setItem("refresh_token",l),s.headers.Authorization=`Bearer ${i}`,xt(s)}}}catch{localStorage.removeItem("jwt_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("sanctum_token"),localStorage.removeItem("user"),window.location.pathname!=="/auth/login"&&(window.location.href="/auth/login")}}return Promise.reject(t)});class sV{constructor(){this.baseUrl="/v1/roles"}async getRoles(s={}){try{return(await xt.get(this.baseUrl,{params:s})).data}catch(a){throw this.handleError(a)}}async getRole(s){try{return(await xt.get(`${this.baseUrl}/${s}`)).data}catch(a){throw this.handleError(a)}}async createRole(s){try{return(await xt.post(this.baseUrl,s)).data}catch(a){throw this.handleError(a)}}async updateRole(s,a){try{return(await xt.put(`${this.baseUrl}/${s}`,a)).data}catch(r){throw this.handleError(r)}}async deleteRole(s){try{return(await xt.delete(`${this.baseUrl}/${s}`)).data}catch(a){throw this.handleError(a)}}async getUsersByRole(s){try{return(await xt.get(`${this.baseUrl}/${s}/users`)).data}catch(a){throw this.handleError(a)}}async assignRole(s,a,r={}){try{return(await xt.post(`${this.baseUrl}/assign`,{role_id:s,user_ids:a,...r})).data}catch(n){throw this.handleError(n)}}async revokeRole(s,a){try{return(await xt.post(`${this.baseUrl}/revoke`,{role_id:s,user_ids:a})).data}catch(r){throw this.handleError(r)}}async getAvailableRoles(){try{return(await xt.get(`${this.baseUrl}/available`)).data}catch(s){throw this.handleError(s)}}async getRoleStatistics(){try{return(await xt.get(`${this.baseUrl}/statistics`)).data}catch(s){throw this.handleError(s)}}async validateRoleAssignment(s,a){try{return(await xt.post(`${this.baseUrl}/validate-assignment`,{role_id:s,user_ids:a})).data}catch(r){throw this.handleError(r)}}async getPermissionsForRole(){try{return(await xt.get(`${this.baseUrl}/permissions`)).data}catch(s){throw this.handleError(s)}}handleError(s){if(s.response){const{status:a,data:r}=s.response;switch(a){case 400:return new Error(r.message||"Invalid request data");case 401:return new Error("Unauthorized access");case 403:return new Error("Permission denied");case 404:return new Error("Role not found");case 409:return new Error(r.message||"Role already exists");case 422:return new Error(r.message||"Validation failed");case 500:return new Error("Internal server error");default:return new Error(r.message||"An error occurred")}}return new Error("Network error")}formatRoleData(s){return{name:s.name,code:s.code,display_name:s.display_name,description:s.description,level:parseInt(s.level),scope:s.scope,is_active:!!s.is_active,is_system_role:!!s.is_system_role,permission_ids:s.permission_ids||[],metadata:s.metadata||{}}}formatAssignmentData(s,a,r={}){return{role_id:s,user_ids:a,is_active:!!(r.is_active??!0),is_primary:!!(r.is_primary??!1),scope:r.scope||"organization",scope_context:r.scope_context,effective_from:r.effective_from,effective_until:r.effective_until,assigned_reason:r.assigned_reason}}}const Ws=new sV,aV=({isOpen:t,onClose:s,onSubmit:a,loading:r=!1})=>{const[n,i]=y.useState({name:"",code:"",display_name:"",description:"",scope:"organization",level:50,is_system_role:!1,is_default:!1,is_active:!0,max_users:null,color:"#3B82F6",icon:"shield",badge_text:"",inherits_permissions:!0,parent_role_id:null,organization_id:null}),[l,c]=y.useState({}),[o,d]=y.useState(!1);y.useEffect(()=>{t&&u()},[t]);const u=y.useCallback(()=>{i({name:"",code:"",display_name:"",description:"",scope:"organization",level:50,is_system_role:!1,is_default:!1,is_active:!0,max_users:null,color:"#3B82F6",icon:"shield",badge_text:"",inherits_permissions:!0,parent_role_id:null,organization_id:null}),c({})},[]),m=y.useCallback((w,S)=>{i(b=>({...b,[w]:S})),l[w]&&c(b=>({...b,[w]:null}))},[l]),h=y.useCallback(()=>{if(n.name){const w=n.name.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_");m("code",w)}},[n.name,m]),x=y.useCallback(()=>{const w={};return n.name.trim()||(w.name="Role name is required"),n.code.trim()?/^[a-z0-9_]+$/.test(n.code)||(w.code="Role code must contain only lowercase letters, numbers, and underscores"):w.code="Role code is required",(n.level<1||n.level>100)&&(w.level="Level must be between 1 and 100"),n.max_users&&n.max_users<1&&(w.max_users="Max users must be at least 1"),n.color&&!/^#[0-9A-F]{6}$/i.test(n.color)&&(w.color="Color must be a valid hex color (e.g., #3B82F6)"),c(w),Object.keys(w).length===0},[n]),f=y.useCallback(async w=>{if(w.preventDefault(),!!x())try{d(!0);const S={name:n.name.trim(),code:n.code.trim(),display_name:n.display_name.trim()||n.name.trim(),description:n.description.trim(),scope:n.scope,level:parseInt(n.level),is_system_role:!!n.is_system_role,is_default:!!n.is_default,status:n.is_active?"active":"inactive",max_users:n.max_users?parseInt(n.max_users):null,color:n.color,icon:n.icon,badge_text:n.badge_text.trim(),inherits_permissions:!!n.inherits_permissions,parent_role_id:n.parent_role_id,organization_id:n.organization_id,metadata:{created_via:"manual",created_by:"current_user",icon:n.icon,badge_text:n.badge_text}},b=await Ws.createRole(S);b.success?(Se.success(`Role "${b.data.name}" has been created successfully`),a&&await a(b.data),u(),s()):Se.error(b.message||"Failed to create role")}catch(S){console.error("Failed to create role:",S),S.message?Se.error(S.message):Se.error("Failed to create role. Please try again.")}finally{d(!1)}},[n,a,x,s,u]),p=y.useCallback(()=>{o||(u(),s())},[o,s,u]);if(!t)return null;const g=n.name.trim()&&n.code.trim()&&n.level>=1&&n.level<=100;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(at,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Role"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Define a new role with specific permissions and settings"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:p,disabled:o,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:f,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Basic Information"]}),e.jsx(Q,{children:"Define the role's identity and basic properties"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),e.jsx(K,{placeholder:"e.g., Content Manager",value:n.name,onChange:w=>m("name",w.target.value),className:l.name?"border-red-300":"",disabled:o}),l.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Code *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"e.g., content_manager",value:n.code,onChange:w=>m("code",w.target.value),className:l.code?"border-red-300":"",disabled:o}),e.jsx(k,{type:"button",variant:"outline",onClick:h,className:"whitespace-nowrap",disabled:o,children:"Generate"})]}),l.code&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.code})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),e.jsx(K,{placeholder:"e.g., Content Manager",value:n.display_name,onChange:w=>m("display_name",w.target.value),disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Badge Text"}),e.jsx(K,{placeholder:"e.g., CONTENT",value:n.badge_text,onChange:w=>m("badge_text",w.target.value),maxLength:20,disabled:o})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{placeholder:"Describe the role's purpose and responsibilities...",value:n.description,onChange:w=>m("description",w.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",disabled:o})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Role Configuration"]}),e.jsx(Q,{children:"Configure role scope, level, and access controls"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scope *"}),e.jsxs(ie,{value:n.scope,onValueChange:w=>m("scope",w),disabled:o,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"global",children:"Global"}),e.jsx(T,{value:"organization",children:"Organization"}),e.jsx(T,{value:"department",children:"Department"}),e.jsx(T,{value:"team",children:"Team"}),e.jsx(T,{value:"personal",children:"Personal"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level *"}),e.jsx(K,{type:"number",min:"1",max:"100",value:n.level,onChange:w=>m("level",parseInt(w.target.value)),className:l.level?"border-red-300":"",disabled:o}),l.level&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Users"}),e.jsx(K,{type:"number",min:"1",placeholder:"No limit",value:n.max_users||"",onChange:w=>m("max_users",w.target.value?parseInt(w.target.value):null),className:l.max_users?"border-red-300":"",disabled:o}),l.max_users&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.max_users})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsxs(ie,{value:n.icon,onValueChange:w=>m("icon",w),disabled:o,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"shield",children:"Shield"}),e.jsx(T,{value:"users",children:"Users"}),e.jsx(T,{value:"settings",children:"Settings"}),e.jsx(T,{value:"eye",children:"Eye"}),e.jsx(T,{value:"key",children:"Key"}),e.jsx(T,{value:"lock",children:"Lock"}),e.jsx(T,{value:"star",children:"Star"}),e.jsx(T,{value:"heart",children:"Heart"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{type:"color",value:n.color,onChange:w=>m("color",w.target.value),className:"w-16 h-10 p-1",disabled:o}),e.jsx(K,{value:n.color,onChange:w=>m("color",w.target.value),className:`flex-1 ${l.color?"border-red-300":""}`,disabled:o})]}),l.color&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.color})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Role Settings"]}),e.jsx(Q,{children:"Configure role behavior and inheritance"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Role"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Protected role that cannot be modified"})]}),e.jsx(de,{checked:n.is_system_role,onCheckedChange:w=>m("is_system_role",w),disabled:o})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Default Role"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Automatically assigned to new users"})]}),e.jsx(de,{checked:n.is_default,onCheckedChange:w=>m("is_default",w),disabled:o})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Active"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Role is currently available"})]}),e.jsx(de,{checked:n.is_active,onCheckedChange:w=>m("is_active",w),disabled:o})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Inherit Permissions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Inherit from parent role"})]}),e.jsx(de,{checked:n.inherits_permissions,onCheckedChange:w=>m("inherits_permissions",w),disabled:o})]})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Role Preview"]}),e.jsx(Q,{children:"See how the role will appear in the system"})]}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:n.color+"20"},children:e.jsx(Ae,{className:"w-6 h-6",style:{color:n.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.name||"Role Name"}),n.is_system_role&&e.jsx(W,{variant:"destructive",children:"System"}),n.is_default&&e.jsx(W,{variant:"secondary",children:"Default"}),n.badge_text&&e.jsx(W,{variant:"outline",children:n.badge_text})]}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:n.code||"role_code"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.description||"Role description will appear here..."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(W,{className:"bg-blue-100 text-blue-800",children:n.scope||"scope"}),e.jsxs(W,{variant:"outline",children:["Level ",n.level||"50"]})]})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx(k,{type:"button",variant:"outline",onClick:p,disabled:o,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:o||!g,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:o?e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create Role"]})})]})]})]})})},rV=({isOpen:t,onClose:s,role:a,onEdit:r,onClone:n,onDelete:i})=>{var E,P;const[l,c]=y.useState("overview"),[o,d]=y.useState(!1),[u,m]=y.useState(null),[h,x]=y.useState([]),[f,p]=y.useState([]),[g,w]=y.useState([]);y.useEffect(()=>{t&&a&&S()},[t,a]);const S=y.useCallback(async()=>{var R,U,I;if(a!=null&&a.id)try{d(!0);const L=await Ws.getRole(a.id);L.success?m(L.data):Se.error("Failed to load role details"),(R=L.data)!=null&&R.permissions&&x(L.data.permissions);try{const Z=await Ws.getUsersByRole(a.id);Z.success&&p(Z.data||[])}catch(Z){console.warn("Could not load assigned users:",Z),p([])}w([{id:1,action:"Role details viewed",user:"Current User",timestamp:new Date().toLocaleString(),details:"Role details accessed via dashboard"},{id:2,action:"Role created",user:((U=u==null?void 0:u.metadata)==null?void 0:U.created_by)||"System",timestamp:u!=null&&u.created_at?new Date(u.created_at).toLocaleString():"Unknown",details:`Role created via ${((I=u==null?void 0:u.metadata)==null?void 0:I.created_via)||"system"}`}])}catch(L){console.error("Error loading role details:",L),Se.error("Failed to load role details")}finally{d(!1)}},[a]),b=y.useCallback(()=>{s(),m(null),x([]),p([]),w([]),c("overview")},[s]),A=y.useCallback(()=>{r(u||a),s()},[r,u,a,s]),v=y.useCallback(()=>{n(u||a),s()},[n,u,a,s]),j=y.useCallback(()=>{i(u||a),s()},[i,u,a,s]);if(!t||!a)return null;const N=u||a,O=R=>{switch(R){case"global":return{icon:Ss,color:"bg-purple-100 text-purple-800",label:"Global"};case"organization":return{icon:Ta,color:"bg-blue-100 text-blue-800",label:"Organization"};case"department":return{icon:Pe,color:"bg-green-100 text-green-800",label:"Department"};case"team":return{icon:Pe,color:"bg-yellow-100 text-yellow-800",label:"Team"};case"personal":return{icon:Vt,color:"bg-gray-100 text-gray-800",label:"Personal"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:R}}},C=R=>{switch(R){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},D=O(N.scope).icon;return o&&!u?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mn,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600",children:"Loading role details..."})]})})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:(N.color||"#6B7280")+"20"},children:e.jsx(Ae,{className:"w-6 h-6",style:{color:N.color||"#6B7280"}})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:N.name}),e.jsx("p",{className:"text-sm text-gray-600 font-mono",children:N.code})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!N.is_system_role&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:A,className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Edit"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:v,className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),"Clone"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:j,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Delete"]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:b,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsx("div",{className:"p-6",children:e.jsxs(kt,{value:l,onValueChange:c,className:"space-y-4",children:[e.jsxs(wt,{className:"grid w-full grid-cols-4",children:[e.jsx(pe,{value:"overview",children:"Overview"}),e.jsx(pe,{value:"permissions",children:"Permissions"}),e.jsx(pe,{value:"users",children:"Users"}),e.jsx(pe,{value:"activity",children:"Activity"})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Role Information"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:N.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Display Name"}),e.jsx("p",{className:"text-base text-gray-900",children:N.display_name||N.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-base text-gray-700",children:N.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role Code"}),e.jsx("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded font-mono",children:N.code})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Scope"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs(W,{className:O(N.scope).color,children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),O(N.scope).label]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Level"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsx(W,{variant:"outline",className:"font-mono",children:N.level})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:N.status==="active"?e.jsxs(W,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(W,{variant:"secondary",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),N.status||"Inactive"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Type"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[N.is_system_role&&e.jsx(W,{variant:"destructive",children:"System Role"}),N.is_default&&e.jsx(W,{variant:"secondary",children:"Default Role"}),N.badge_text&&e.jsx(W,{variant:"outline",children:N.badge_text})]})]})]})]})})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"User Statistics"]})}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N.current_users||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Current Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:N.max_users||"∞"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Max Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:N.permissions_count||h.length||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Permissions"})]})]}),N.max_users&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"User Capacity"}),e.jsxs("span",{children:[N.current_users||0," / ",N.max_users]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(N.current_users||0)/N.max_users*100}%`}})})]})]})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Additional Information"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Created: ",N.created_at?new Date(N.created_at).toLocaleDateString():"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Updated: ",N.updated_at?new Date(N.updated_at).toLocaleDateString():"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["ID: ",N.id]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Created via: ",((E=N.metadata)==null?void 0:E.created_via)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["System Role: ",N.is_system_role?"Yes":"No"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Dangerous: ",(P=N.metadata)!=null&&P.dangerous_role?"Yes":"No"]})]})]})]})})]})]}),e.jsx(ge,{value:"permissions",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Assigned Permissions"]}),e.jsxs(Q,{children:[h.length," permissions assigned to this role"]})]}),e.jsx(B,{children:h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(R=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(Jt,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:R.name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:R.code}),e.jsx("p",{className:"text-xs text-gray-400",children:R.category||"General"})]})]}),e.jsx(W,{className:`${C(R.risk_level||"medium")} border`,children:(R.risk_level||"medium").charAt(0).toUpperCase()+(R.risk_level||"medium").slice(1)})]},R.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Jt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No permissions assigned to this role"})]})})]})}),e.jsx(ge,{value:"users",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Assigned Users"]}),e.jsxs(Q,{children:[f.length," users currently assigned to this role"]})]}),e.jsx(B,{children:f.length>0?e.jsx("div",{className:"space-y-3",children:f.map(R=>{var U;return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Vt,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:R.name||R.email}),e.jsx("p",{className:"text-sm text-gray-500",children:R.email}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Assigned: ",(U=R.pivot)!=null&&U.created_at?new Date(R.pivot.created_at).toLocaleDateString():"Unknown"]})]})]}),e.jsx(W,{className:R.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:(R.status||"active").charAt(0).toUpperCase()+(R.status||"active").slice(1)})]},R.id)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Pe,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No users assigned to this role"})]})})]})}),e.jsx(ge,{value:"activity",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Zs,{className:"w-5 h-5"}),"Role Activity"]}),e.jsx(Q,{children:"Recent activity and changes related to this role"})]}),e.jsx(B,{children:g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(R=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mt-1",children:e.jsx(et,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:R.action}),e.jsx("p",{className:"text-sm text-gray-600",children:R.details}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["by ",R.user]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-400",children:R.timestamp})]})]})]},R.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Zs,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No activity recorded for this role"})]})})]})})]})})})]})})},nV=({isOpen:t,onClose:s,role:a,onSubmit:r,loading:n=!1})=>{const[i,l]=y.useState({name:"",code:"",display_name:"",description:"",scope:"organization",level:50,is_system_role:!1,is_default:!1,is_active:!0,max_users:null,color:"#3B82F6",icon:"shield",badge_text:"",inherits_permissions:!0,parent_role_id:null,organization_id:null}),[c,o]=y.useState({}),[d,u]=y.useState(!1),[m,h]=y.useState(!1);y.useEffect(()=>{t&&a&&x()},[t,a]);const x=y.useCallback(async()=>{if(a)try{h(!0);let v=a;if(typeof a=="string"||a&&a.id&&!a.name){const j=await Ws.getRole(a.id||a);if(j.success)v=j.data;else{Se.error("Failed to load role data");return}}l({name:v.name||"",code:v.code||"",display_name:v.display_name||"",description:v.description||"",scope:v.scope||"organization",level:v.level||50,is_system_role:!!v.is_system_role,is_default:!!v.is_default,is_active:v.status==="active",max_users:v.max_users||null,color:v.color||"#3B82F6",icon:v.icon||"shield",badge_text:v.badge_text||"",inherits_permissions:!!v.inherits_permissions,parent_role_id:v.parent_role_id||null,organization_id:v.organization_id||null})}catch(v){console.error("Error loading role data:",v),Se.error("Failed to load role data")}finally{h(!1)}},[a]);y.useEffect(()=>{t||f()},[t]);const f=y.useCallback(()=>{l({name:"",code:"",display_name:"",description:"",scope:"organization",level:50,is_system_role:!1,is_default:!1,is_active:!0,max_users:null,color:"#3B82F6",icon:"shield",badge_text:"",inherits_permissions:!0,parent_role_id:null,organization_id:null}),o({})},[]),p=y.useCallback((v,j)=>{l(N=>({...N,[v]:j})),c[v]&&o(N=>({...N,[v]:null}))},[c]),g=y.useCallback(()=>{if(i.name){const v=i.name.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_");p("code",v)}},[i.name,p]),w=y.useCallback(()=>{const v={};return i.name.trim()||(v.name="Role name is required"),i.code.trim()?/^[a-z0-9_]+$/.test(i.code)||(v.code="Role code must contain only lowercase letters, numbers, and underscores"):v.code="Role code is required",(i.level<1||i.level>100)&&(v.level="Level must be between 1 and 100"),i.max_users&&i.max_users<1&&(v.max_users="Max users must be at least 1"),i.color&&!/^#[0-9A-F]{6}$/i.test(i.color)&&(v.color="Color must be a valid hex color (e.g., #3B82F6)"),o(v),Object.keys(v).length===0},[i]),S=y.useCallback(async v=>{if(v.preventDefault(),!!w())try{u(!0);const j={name:i.name.trim(),code:i.code.trim(),display_name:i.display_name.trim()||i.name.trim(),description:i.description.trim(),scope:i.scope,level:parseInt(i.level),is_system_role:!!i.is_system_role,is_default:!!i.is_default,status:i.is_active?"active":"inactive",max_users:i.max_users?parseInt(i.max_users):null,color:i.color,icon:i.icon,badge_text:i.badge_text.trim(),inherits_permissions:!!i.inherits_permissions,parent_role_id:i.parent_role_id,organization_id:i.organization_id,metadata:{updated_via:"manual",updated_by:"current_user",icon:i.icon,badge_text:i.badge_text,system_role:i.is_system_role,dangerous_role:i.level>=90}},N=typeof a=="string"?a:(a==null?void 0:a.id)||a,O=await Ws.updateRole(N,j);if(O.success){let C=O.data;if(O.message&&typeof O.message=="string")try{C=JSON.parse(O.message)}catch(D){console.warn("Failed to parse response message as JSON:",D)}Se.success(`Role "${C.name||O.data}" has been updated successfully`),r&&await r(C),s()}else Se.error(O.message||"Failed to update role")}catch(j){console.error("Failed to update role:",j),j.message?Se.error(j.message):Se.error("Failed to update role. Please try again.")}finally{u(!1)}},[i,r,w,s,a]),b=y.useCallback(()=>{d||s()},[d,s]);if(!t)return null;const A=i.name.trim()&&i.code.trim()&&i.level>=1&&i.level<=100;return m?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(mn,{className:"w-6 h-6 animate-spin text-blue-600"}),e.jsx("span",{className:"text-lg text-gray-600",children:"Loading role data..."})]})})})}):e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ye,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Role"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Modify role settings and permissions"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:b,disabled:d,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:S,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Basic Information"]}),e.jsx(Q,{children:"Modify the role's identity and basic properties"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),e.jsx(K,{placeholder:"e.g., Content Manager",value:i.name,onChange:v=>p("name",v.target.value),className:c.name?"border-red-300":"",disabled:d}),c.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Code *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"e.g., content_manager",value:i.code,onChange:v=>p("code",v.target.value),className:c.code?"border-red-300":"",disabled:d}),e.jsx(k,{type:"button",variant:"outline",onClick:g,className:"whitespace-nowrap",disabled:d,children:"Generate"})]}),c.code&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.code})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),e.jsx(K,{placeholder:"e.g., Content Manager",value:i.display_name,onChange:v=>p("display_name",v.target.value),disabled:d})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Badge Text"}),e.jsx(K,{placeholder:"e.g., CONTENT",value:i.badge_text,onChange:v=>p("badge_text",v.target.value),maxLength:20,disabled:d})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{placeholder:"Describe the role's purpose and responsibilities...",value:i.description,onChange:v=>p("description",v.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-50 disabled:cursor-not-allowed",disabled:d})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Role Configuration"]}),e.jsx(Q,{children:"Configure role scope, level, and access controls"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scope *"}),e.jsxs(ie,{value:i.scope,onValueChange:v=>p("scope",v),disabled:d,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"global",children:"Global"}),e.jsx(T,{value:"organization",children:"Organization"}),e.jsx(T,{value:"department",children:"Department"}),e.jsx(T,{value:"team",children:"Team"}),e.jsx(T,{value:"personal",children:"Personal"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level *"}),e.jsx(K,{type:"number",min:"1",max:"100",value:i.level,onChange:v=>p("level",parseInt(v.target.value)),className:c.level?"border-red-300":"",disabled:d}),c.level&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.level})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Users"}),e.jsx(K,{type:"number",min:"1",placeholder:"No limit",value:i.max_users||"",onChange:v=>p("max_users",v.target.value?parseInt(v.target.value):null),className:c.max_users?"border-red-300":"",disabled:d}),c.max_users&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.max_users})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsxs(ie,{value:i.icon,onValueChange:v=>p("icon",v),disabled:d,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"shield",children:"Shield"}),e.jsx(T,{value:"users",children:"Users"}),e.jsx(T,{value:"settings",children:"Settings"}),e.jsx(T,{value:"eye",children:"Eye"}),e.jsx(T,{value:"key",children:"Key"}),e.jsx(T,{value:"lock",children:"Lock"}),e.jsx(T,{value:"star",children:"Star"}),e.jsx(T,{value:"heart",children:"Heart"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{type:"color",value:i.color,onChange:v=>p("color",v.target.value),className:"w-16 h-10 p-1",disabled:d}),e.jsx(K,{value:i.color,onChange:v=>p("color",v.target.value),className:`flex-1 ${c.color?"border-red-300":""}`,disabled:d})]}),c.color&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.color})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Role Settings"]}),e.jsx(Q,{children:"Configure role behavior and inheritance"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Role"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Protected role that cannot be modified"})]}),e.jsx(de,{checked:i.is_system_role,onCheckedChange:v=>p("is_system_role",v),disabled:d})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Default Role"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Automatically assigned to new users"})]}),e.jsx(de,{checked:i.is_default,onCheckedChange:v=>p("is_default",v),disabled:d})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Active"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Role is currently available"})]}),e.jsx(de,{checked:i.is_active,onCheckedChange:v=>p("is_active",v),disabled:d})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Inherit Permissions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Inherit from parent role"})]}),e.jsx(de,{checked:i.inherits_permissions,onCheckedChange:v=>p("inherits_permissions",v),disabled:d})]})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Role Preview"]}),e.jsx(Q,{children:"See how the role will appear in the system"})]}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:i.color+"20"},children:e.jsx(Ae,{className:"w-6 h-6",style:{color:i.color}})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.name||"Role Name"}),i.is_system_role&&e.jsx(W,{variant:"destructive",children:"System"}),i.is_default&&e.jsx(W,{variant:"secondary",children:"Default"}),i.badge_text&&e.jsx(W,{variant:"outline",children:i.badge_text})]}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:i.code||"role_code"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:i.description||"Role description will appear here..."}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(W,{className:"bg-blue-100 text-blue-800",children:i.scope||"scope"}),e.jsxs(W,{variant:"outline",children:["Level ",i.level||"50"]})]})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx(k,{type:"button",variant:"outline",onClick:b,disabled:d,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:d||!A,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400",children:d?e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update Role"]})})]})]})]})})},iV=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(null),[l,c]=y.useState(null),[o,d]=y.useState(!1),[u,m]=y.useState(!1),[h,x]=y.useState(!1),[f,p]=y.useState(!1),[g,w]=y.useState(!1),[S,b]=y.useState({current_page:1,last_page:1,per_page:15,total:0}),[A,v]=y.useState({search:"",scope:"",is_active:"",is_system_role:"",level_min:"",level_max:""}),j=y.useCallback(async(q=1)=>{try{r(!0),i(null);const z={page:q,per_page:S.per_page,...A};Object.keys(z).forEach(Y=>{(z[Y]===""||z[Y]===null||z[Y]===void 0)&&delete z[Y]});const ne=await Ws.getRoles(z);ne.success?(s(ne.data||[]),ne.meta&&ne.meta.pagination&&b({current_page:ne.meta.pagination.current_page||q,last_page:ne.meta.pagination.last_page||1,per_page:ne.meta.pagination.per_page||15,total:ne.meta.pagination.total||0})):i(ne.message||"Failed to load roles")}catch(z){console.error("Error loading roles:",z),i(z.message||"Failed to load roles")}finally{r(!1)}},[A,S.per_page]);y.useEffect(()=>{j()},[j]);const N=y.useCallback((q,z)=>{v(ne=>({...ne,[q]:z})),b(ne=>({...ne,current_page:1}))},[]),O=y.useCallback(q=>{b(z=>({...z,current_page:q})),j(q)},[j]),C=y.useCallback(()=>{d(!0)},[]),D=y.useCallback(q=>{c(q),m(!0)},[]),E=y.useCallback(q=>{c(q),x(!0)},[]),P=y.useCallback(async q=>{try{w(!0);const z=Ws.formatRoleData(q),ne=await Ws.createRole(z);ne.success?(Se.success(`Role "${ne.data.name}" has been created successfully`),d(!1),j(S.current_page)):Se.error(ne.message||"Failed to create role")}catch(z){console.error("Error creating role:",z),Se.error(z.message||"Failed to create role")}finally{w(!1)}},[j,S.current_page]),R=y.useCallback(async q=>{try{w(!0);const z={...q,name:`${q.name} (Copy)`,code:`${q.code}_copy`,display_name:`${q.display_name} (Copy)`,description:`${q.description} (Cloned from ${q.name})`,is_system_role:!1},ne=Ws.formatRoleData(z),Y=await Ws.createRole(ne);Y.success?(Se.success(`Role "${Y.data.name}" has been cloned successfully`),j(S.current_page)):Se.error(Y.message||"Failed to clone role")}catch(z){console.error("Error cloning role:",z),Se.error(z.message||"Failed to clone role")}finally{w(!1)}},[j,S.current_page]),U=y.useCallback(async q=>{try{if(w(!0),!q||!q.id){console.error("Invalid role data received:",q),Se.error("Invalid role data received");return}s(z=>z.map(ne=>ne.id===q.id?q:ne)),m(!1),c(null),j(S.current_page)}catch(z){console.error("Error handling role update:",z),Se.error("Failed to update role list")}finally{w(!1)}},[j,S.current_page]),I=y.useCallback(q=>{if(q.is_system_role){Se.error("System roles cannot be deleted");return}c(q),p(!0)},[]),L=y.useCallback(async()=>{if(l)try{w(!0);const q=await Ws.deleteRole(l.id);q.success?(Se.success(`Role "${l.name}" has been deleted successfully`),p(!1),c(null),j(S.current_page)):Se.error(q.message||"Failed to delete role")}catch(q){console.error("Error deleting role:",q),Se.error(q.message||"Failed to delete role")}finally{w(!1)}},[l,j,S.current_page]),Z=y.useCallback(q=>{switch(q){case"global":return{icon:Ss,color:"bg-purple-100 text-purple-800",label:"Global"};case"organization":return{icon:Ta,color:"bg-blue-100 text-blue-800",label:"Organization"};case"department":return{icon:Pe,color:"bg-green-100 text-green-800",label:"Department"};case"team":return{icon:da,color:"bg-yellow-100 text-yellow-800",label:"Team"};case"personal":return{icon:Te,color:"bg-gray-100 text-gray-800",label:"Personal"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:q}}},[]);return a&&t.length===0?e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(ka,{className:"h-16 w-full"}),e.jsx(ka,{className:"h-32 w-full"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((q,z)=>e.jsx(ka,{className:"h-20 w-full"},z))})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(F,{className:"mb-6",children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{className:"text-3xl font-bold text-gray-900",children:"Role Management"}),e.jsx(Q,{children:"Manage user roles, permissions, and access control across the system"})]}),e.jsxs(k,{onClick:C,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Create Role"]})]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(K,{placeholder:"Search roles by name, code, or description...",value:A.search,onChange:q=>N("search",q.target.value),className:"w-full",icon:e.jsx(cs,{className:"w-4 h-4"})})}),e.jsxs(ie,{value:A.scope,onValueChange:q=>N("scope",q),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"All Scopes"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"",children:"All Scopes"}),e.jsx(T,{value:"global",children:"Global"}),e.jsx(T,{value:"organization",children:"Organization"}),e.jsx(T,{value:"department",children:"Department"}),e.jsx(T,{value:"team",children:"Team"}),e.jsx(T,{value:"personal",children:"Personal"})]})]}),e.jsxs(ie,{value:A.is_active,onValueChange:q=>N("is_active",q),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"All Status"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"",children:"All Status"}),e.jsx(T,{value:"true",children:"Active"}),e.jsx(T,{value:"false",children:"Inactive"})]})]}),e.jsxs(ie,{value:A.is_system_role,onValueChange:q=>N("is_system_role",q),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"All Types"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"",children:"All Types"}),e.jsx(T,{value:"true",children:"System Roles"}),e.jsx(T,{value:"false",children:"Custom Roles"})]})]})]})})]}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(nt,{className:"w-5 h-5 text-red-400 mr-2"}),e.jsx("span",{className:"text-red-800",children:n})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Roles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S.total})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Roles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(q=>q.status==="active").length})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ss,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Roles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(q=>q.is_system_role).length})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Pe,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.reduce((q,z)=>q+(z.current_users||0),0)})]})]})})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Roles Overview"}),e.jsxs(Q,{children:[S.total," roles found • Showing ",S.current_page," of ",S.last_page," pages"]})]}),e.jsxs(B,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role Information"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scope & Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Users & Limits"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(q=>{const z=Z(q.scope),ne=z.icon;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:{backgroundColor:(q.color||"#6B7280")+"20"},children:e.jsx(Ae,{className:"w-5 h-5",style:{color:q.color||"#6B7280"}})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:q.name}),q.is_system_role&&e.jsx(W,{variant:"destructive",className:"text-xs",children:q.badge_text||"SYS"}),q.is_default&&e.jsx(W,{variant:"secondary",className:"text-xs",children:"Default"})]}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:q.code}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:q.description})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(W,{className:z.color,children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),z.label]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Level:"}),e.jsx(W,{variant:"outline",className:"font-mono",children:q.level})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[q.permissions_count||0," permissions"]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:q.current_users||0})]}),q.max_users&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Max:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:q.max_users})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:q.max_users?`${(q.current_users||0)/q.max_users*100}%`:"100%"}})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center gap-2",children:q.status==="active"?e.jsxs(W,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(W,{variant:"secondary",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),q.status||"Inactive"]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(Gj,{children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{align:"end",className:"w-48",children:[e.jsx(qn,{children:"Actions"}),e.jsx(Ia,{}),e.jsxs(st,{onClick:()=>E(q),children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(st,{onClick:()=>D(q),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit Role"]}),e.jsxs(st,{onClick:()=>R(q),children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Clone Role"]}),!q.is_system_role&&e.jsxs(e.Fragment,{children:[e.jsx(Ia,{}),e.jsxs(st,{onClick:()=>I(q),className:"text-red-600 focus:text-red-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Role"]})]})]})]})})})]},q.id)})})]})}),S.last_page>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(S.current_page-1)*S.per_page+1," to"," ",Math.min(S.current_page*S.per_page,S.total)," of"," ",S.total," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>O(S.current_page-1),disabled:S.current_page===1,children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:S.last_page},(q,z)=>z+1).map(q=>e.jsx(k,{variant:q===S.current_page?"default":"outline",size:"sm",onClick:()=>O(q),className:"w-8 h-8 p-0",children:q},q))}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>O(S.current_page+1),disabled:S.current_page===S.last_page,children:"Next"})]})]})]})]})]}),e.jsx(aV,{isOpen:o,onClose:()=>d(!1),onSubmit:P,loading:g}),e.jsx(rV,{isOpen:h,onClose:()=>x(!1),role:l,onEdit:D,onClone:R,onDelete:I}),e.jsx(nV,{isOpen:u,onClose:()=>m(!1),role:l,onSubmit:U,loading:g}),f&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(nt,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Role"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete the role ",e.jsxs("strong",{children:['"',l.name,'"']}),"? This action cannot be undone and will affect all users assigned to this role."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(k,{variant:"outline",onClick:()=>p(!1),disabled:g,children:"Cancel"}),e.jsx(k,{variant:"destructive",onClick:L,disabled:g,children:g?"Deleting...":"Delete Role"})]})]})})]})};class lV{constructor(){this.baseUrl="/v1/permissions"}async getPermissions(s={}){try{return(await xt.get(this.baseUrl,{params:s})).data}catch(a){throw this.handleError(a)}}async getPermission(s){try{return(await xt.get(`${this.baseUrl}/${s}`)).data}catch(a){throw this.handleError(a)}}async createPermission(s){try{return(await xt.post(this.baseUrl,s)).data}catch(a){throw this.handleError(a)}}async updatePermission(s,a){try{return(await xt.put(`${this.baseUrl}/${s}`,a)).data}catch(r){throw this.handleError(r)}}async deletePermission(s){try{return(await xt.delete(`${this.baseUrl}/${s}`)).data}catch(a){throw this.handleError(a)}}async getPermissionGroups(){try{return(await xt.get(`${this.baseUrl}/groups`)).data}catch(s){throw this.handleError(s)}}async createPermissionGroup(s){try{return(await xt.post(`${this.baseUrl}/groups`,s)).data}catch(a){throw this.handleError(a)}}async getRolePermissions(s){try{return(await xt.get(`${this.baseUrl}/roles/${s}`)).data}catch(a){throw this.handleError(a)}}async assignPermissionsToRole(s,a){try{return(await xt.post(`${this.baseUrl}/roles/${s}/assign`,{permission_ids:a})).data}catch(r){throw this.handleError(r)}}async removePermissionsFromRole(s,a){try{return(await xt.post(`${this.baseUrl}/roles/${s}/revoke`,{permission_ids:a})).data}catch(r){throw this.handleError(r)}}async checkUserPermission(s){try{return(await xt.get(`${this.baseUrl}/check/${s}`)).data}catch(a){throw this.handleError(a)}}async getUserPermissions(){try{return(await xt.get(`${this.baseUrl}/user`)).data}catch(s){throw this.handleError(s)}}handleError(s){if(s.response){const{status:a,data:r}=s.response;switch(a){case 400:return new Error(r.message||"Invalid request data");case 401:return new Error("Unauthorized access");case 403:return new Error("Permission denied");case 404:return new Error("Permission not found");case 409:return new Error(r.message||"Permission already exists");case 422:return new Error(r.message||"Validation failed");case 500:return new Error("Internal server error");default:return new Error(r.message||"An error occurred")}}return new Error("Network error")}formatPermissionData(s){return{name:s.name,code:s.code,description:s.description,category:s.category,resource:s.resource,action:s.action,is_system:!!s.is_system,is_visible:!!s.is_visible,status:s.status||"active",metadata:s.metadata||{}}}getCategories(){return["user_management","role_management","permission_management","system_administration","content_management","analytics","billing","api_management","workflows","automations"]}getResources(){return["users","roles","permissions","organizations","clients","knowledge","chat_sessions","analytics","billing","api_keys","workflows","automations"]}getActions(){return["view","create","update","delete","manage","execute","publish","export","import","assign","revoke"]}}const tt=new lV,cV=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(null),[l,c]=y.useState({}),[o,d]=y.useState({current_page:1,last_page:1,per_page:15,total:0}),u=y.useRef(l),m=y.useRef(o);y.useEffect(()=>{u.current=l},[l]),y.useEffect(()=>{m.current=o},[o]);const h=y.useCallback(async(j=1)=>{try{r(!0),i(null);const N=u.current,O=m.current,C={page:j,per_page:O.per_page,...N};Object.keys(C).forEach(E=>{(C[E]===""||C[E]===null||C[E]===void 0)&&delete C[E]});const D=await tt.getPermissions(C);D.success?(s(D.data||[]),D.meta&&D.meta.pagination&&d(E=>({...E,current_page:D.meta.pagination.current_page||j,last_page:D.meta.pagination.last_page||1,per_page:D.meta.pagination.per_page||E.per_page,total:D.meta.pagination.total||0}))):i(D.message||"Failed to load permissions")}catch(N){console.error("Error loading permissions:",N),i(N.message||"Failed to load permissions")}finally{r(!1)}},[]);y.useEffect(()=>{h()},[]);const x=y.useCallback(async j=>{try{r(!0);const N=tt.formatPermissionData(j),O=await tt.createPermission(N);return O.success?(Se.success(`Permission "${O.data.name}" has been created successfully`),await h(m.current.current_page),{success:!0,data:O.data}):(Se.error(O.message||"Failed to create permission"),{success:!1,error:O.message})}catch(N){return console.error("Error creating permission:",N),Se.error(N.message||"Failed to create permission"),{success:!1,error:N.message}}finally{r(!1)}},[h]),f=y.useCallback(async(j,N)=>{try{if(!j)return{success:!1,error:"Permission ID is required"};r(!0);const O=tt.formatPermissionData(N),C=await tt.updatePermission(j,O);return C.success?(Se.success(`Permission "${C.data.name}" has been updated successfully`),await h(m.current.current_page),{success:!0,data:C.data}):(Se.error(C.message||"Failed to update permission"),{success:!1,error:C.message})}catch(O){return console.error("Error updating permission:",O),Se.error(O.message||"Failed to update permission"),{success:!1,error:O.message}}finally{r(!1)}},[h]),p=y.useCallback(async j=>{try{if(!j)return{success:!1,error:"Permission ID is required"};r(!0);const N=await tt.deletePermission(j);return N.success?(Se.success("Permission has been deleted successfully"),await h(m.current.current_page),{success:!0}):(Se.error(N.message||"Failed to delete permission"),{success:!1,error:N.message})}catch(N){return console.error("Error deleting permission:",N),Se.error(N.message||"Failed to delete permission"),{success:!1,error:N.message}}finally{r(!1)}},[h]),g=y.useCallback(async j=>{try{if(!j)return{success:!1,error:"Permission data is required"};r(!0);const N={...j,name:`${j.name} (Copy)`,code:`${j.code}_copy`,description:`${j.description} (Cloned from ${j.name})`,is_system:!1},O=tt.formatPermissionData(N),C=await tt.createPermission(O);return C.success?(Se.success(`Permission "${C.data.name}" has been cloned successfully`),await h(m.current.current_page),{success:!0,data:C.data}):(Se.error(C.message||"Failed to clone permission"),{success:!1,error:C.message})}catch(N){return console.error("Error cloning permission:",N),Se.error(N.message||"Failed to clone permission"),{success:!1,error:N.message}}finally{r(!1)}},[h]),w=y.useCallback(j=>{d(N=>({...N,current_page:j})),h(j)},[h]),S=y.useCallback(j=>{d(N=>({...N,per_page:j,current_page:1})),h(1)},[h]),b=y.useCallback(()=>{i(null)},[]),A=y.useCallback(()=>{h(m.current.current_page)},[h]),v=y.useCallback(j=>{c(j),d(N=>({...N,current_page:1})),setTimeout(()=>h(1),0)},[h]);return{permissions:t,loading:a,error:n,filters:l,pagination:o,loadPermissions:h,createPermission:x,updatePermission:f,deletePermission:p,clonePermission:g,handlePageChange:w,handlePerPageChange:S,clearError:b,refreshPermissions:A,setFilters:v,getPermission:tt.getPermission.bind(tt),getPermissionGroups:tt.getPermissionGroups.bind(tt),getRolePermissions:tt.getRolePermissions.bind(tt),assignPermissionsToRole:tt.assignPermissionsToRole.bind(tt),removePermissionsFromRole:tt.removePermissionsFromRole.bind(tt),checkUserPermission:tt.checkUserPermission.bind(tt),getUserPermissions:tt.getUserPermissions.bind(tt),getCategories:tt.getCategories.bind(tt),getResources:tt.getResources.bind(tt),getActions:tt.getActions.bind(tt),formatPermissionData:tt.formatPermissionData.bind(tt)}},oV=()=>{const{user:t,hasPermission:s,hasAnyPermission:a,hasAllPermissions:r}=Xs(),n=()=>!t||!t.permissions?[]:t.permissions,i=h=>s(h),l=h=>a(h);return{user:t,getUserPermissions:n,can:i,cannot:h=>!i(h),canAny:l,canAll:h=>r(h),isAdmin:()=>(t==null?void 0:t.role)==="super_admin"||(t==null?void 0:t.role)==="org_admin",isSuperAdmin:()=>(t==null?void 0:t.role)==="super_admin",canManageAny:()=>l(["users.create","users.update","users.delete","roles.create","roles.update","roles.delete","permissions.create","permissions.update","permissions.delete"])}},dV=({isOpen:t,onClose:s,onSubmit:a,loading:r=!1})=>{const[n,i]=y.useState({name:"",code:"",description:"",category:"",resource:"",action:"",is_system:!1,is_visible:!0,status:"active",metadata:{}}),[l,c]=y.useState({}),[o,d]=y.useState(!1),[u,m]=y.useState([]),[h,x]=y.useState([]),[f,p]=y.useState([]);y.useEffect(()=>{m(tt.getCategories()),x(tt.getResources()),p(tt.getActions())},[]),y.useEffect(()=>{t&&g()},[t]);const g=y.useCallback(()=>{i({name:"",code:"",description:"",category:"",resource:"",action:"",is_system:!1,is_visible:!0,status:"active",metadata:{}}),c({})},[]),w=y.useCallback((j,N)=>{i(O=>({...O,[j]:N})),l[j]&&c(O=>({...O,[j]:null}))},[l]),S=y.useCallback(()=>{if(n.name){const j=n.name.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,".");w("code",j)}},[n.name,w]),b=y.useCallback(()=>{const j={};return n.name.trim()||(j.name="Permission name is required"),n.code.trim()?/^[a-z0-9._-]+$/.test(n.code)||(j.code="Code can only contain lowercase letters, numbers, dots, underscores, and hyphens"):j.code="Permission code is required",n.category||(j.category="Category is required"),n.resource||(j.resource="Resource is required"),n.action||(j.action="Action is required"),c(j),Object.keys(j).length===0},[n]),A=y.useCallback(async j=>{if(j.preventDefault(),!!b())try{d(!0),await a(n),g(),s()}catch(N){console.error("Error creating permission:",N),Se.error(N.message||"Failed to create permission")}finally{d(!1)}},[n,b,a,g,s]),v=y.useCallback(()=>{!o&&!r&&s()},[o,r,s]);return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Permission"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Define a new permission for the system"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:v,disabled:o||r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{className:"text-lg",children:"Basic Information"}),e.jsx(Q,{children:"Core permission details"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Permission Name *"}),e.jsx(K,{value:n.name,onChange:j=>w("name",j.target.value),placeholder:"e.g., Create Users",className:l.name?"border-red-500":""}),l.name&&e.jsx("p",{className:"text-sm text-red-500",children:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Permission Code *"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(K,{value:n.code,onChange:j=>w("code",j.target.value),placeholder:"e.g., users.create",className:l.code?"border-red-500":""}),e.jsx(k,{type:"button",variant:"outline",onClick:S,className:"px-3",children:e.jsx(at,{className:"w-4 h-4"})})]}),l.code&&e.jsx("p",{className:"text-sm text-red-500",children:l.code}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-generate from name or enter manually"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),e.jsx(Re,{value:n.description,onChange:j=>w("description",j.target.value),placeholder:"Describe what this permission allows users to do...",rows:3})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{className:"text-lg",children:"Permission Structure"}),e.jsx(Q,{children:"Define the permission's scope and action"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Category *"}),e.jsxs(ie,{value:n.category,onValueChange:j=>w("category",j),children:[e.jsx(le,{className:l.category?"border-red-500":"",children:e.jsx(ce,{placeholder:"Select category"})}),e.jsx(oe,{children:u.map(j=>e.jsx(T,{value:j,children:j.replace("_"," ").replace(/\b\w/g,N=>N.toUpperCase())},j))})]}),l.category&&e.jsx("p",{className:"text-sm text-red-500",children:l.category})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Resource *"}),e.jsxs(ie,{value:n.resource,onValueChange:j=>w("resource",j),children:[e.jsx(le,{className:l.resource?"border-red-500":"",children:e.jsx(ce,{placeholder:"Select resource"})}),e.jsx(oe,{children:h.map(j=>e.jsx(T,{value:j,children:j.replace("_"," ").replace(/\b\w/g,N=>N.toUpperCase())},j))})]}),l.resource&&e.jsx("p",{className:"text-sm text-red-500",children:l.resource})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Action *"}),e.jsxs(ie,{value:n.action,onValueChange:j=>w("action",j),children:[e.jsx(le,{className:l.action?"border-red-500":"",children:e.jsx(ce,{placeholder:"Select action"})}),e.jsx(oe,{children:f.map(j=>e.jsx(T,{value:j,children:j.replace(/\b\w/g,N=>N.toUpperCase())},j))})]}),l.action&&e.jsx("p",{className:"text-sm text-red-500",children:l.action})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Permission Code Preview"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(W,{variant:"outline",className:"text-sm font-mono",children:n.category&&n.resource&&n.action?`${n.category}.${n.resource}.${n.action}`:"category.resource.action"})})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{className:"text-lg",children:"Settings"}),e.jsx(Q,{children:"Configure permission behavior"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs(ie,{value:n.status,onValueChange:j=>w("status",j),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Visibility"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"is_visible",checked:n.is_visible,onCheckedChange:j=>w("is_visible",j)}),e.jsx("label",{htmlFor:"is_visible",className:"text-sm text-gray-700",children:"Visible to users"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"System Permission"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"is_system",checked:n.is_system,onCheckedChange:j=>w("is_system",j)}),e.jsx("label",{htmlFor:"is_system",className:"text-sm text-gray-700",children:"Mark as system permission"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"System permissions cannot be deleted and have restricted editing"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[e.jsx(k,{type:"button",variant:"outline",onClick:v,disabled:o||r,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:o||r,className:"bg-blue-600 hover:bg-blue-700",children:o?e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create Permission"]})})]})]})]})}):null},uV=({isOpen:t,onClose:s,permission:a,onEdit:r,onClone:n,onDelete:i})=>{var o,d,u;if(!t||!a)return null;const c=(m=>{switch(m){case"user_management":return Vt;case"role_management":return Ae;case"permission_management":return Ae;case"system_administration":return Te;default:return Te}})(a.category);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Permission Details"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View permission information and settings"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{className:"text-lg",children:"Basic Information"}),e.jsx(Q,{children:"Core permission details"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"w-8 h-8 text-gray-600"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:a.code})]}),a.description&&e.jsx("p",{className:"text-gray-600",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:a.status==="active"?"default":"secondary",children:a.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-3 h-3 mr-1"})," Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"})," Inactive"]})}),a.is_system&&e.jsx(W,{variant:"destructive",children:"System"}),a.is_visible?e.jsx(W,{variant:"outline",children:"Visible"}):e.jsx(W,{variant:"outline",children:"Hidden"})]})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{className:"text-lg",children:"Permission Structure"}),e.jsx(Q,{children:"Permission scope and action details"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Category"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(c,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:(o=a.category)==null?void 0:o.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Resource"}),e.jsx(W,{variant:"outline",children:(d=a.resource)==null?void 0:d.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Action"}),e.jsx(W,{variant:"outline",children:(u=a.action)==null?void 0:u.replace(/\b\w/g,m=>m.toUpperCase())})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Full Permission Code"})]}),e.jsx("div",{className:"mt-2",children:e.jsx(W,{variant:"outline",className:"text-sm font-mono",children:a.category&&a.resource&&a.action?`${a.category}.${a.resource}.${a.action}`:"N/A"})})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{className:"text-lg",children:"Additional Information"}),e.jsx(Q,{children:"System metadata and timestamps"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-900",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.created_at?new Date(a.created_at).toLocaleDateString():"N/A"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Updated"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-900",children:[e.jsx(et,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.updated_at?new Date(a.updated_at).toLocaleDateString():"N/A"})]})]}),a.created_by&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Created By"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-900",children:[e.jsx(Vt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.created_by})]})]}),a.updated_by&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Last Updated By"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-900",children:[e.jsx(Vt,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{children:a.updated_by})]})]})]}),a.metadata&&Object.keys(a.metadata).length>0&&e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Custom Metadata"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:e.jsx("pre",{className:"text-xs text-gray-700 overflow-x-auto",children:JSON.stringify(a.metadata,null,2)})})]})]})]})]}),a.is_system&&e.jsxs(F,{className:"border-orange-200 bg-orange-50",children:[e.jsxs(H,{children:[e.jsxs(V,{className:"text-lg text-orange-800 flex items-center space-x-2",children:[e.jsx(nt,{className:"w-5 h-5"}),"System Permission"]}),e.jsx(Q,{className:"text-orange-700",children:"This is a system permission with restricted editing capabilities"})]}),e.jsx(B,{children:e.jsxs("div",{className:"text-sm text-orange-700 space-y-2",children:[e.jsx("p",{children:"• System permissions cannot be deleted"}),e.jsx("p",{children:"• Limited editing capabilities for security reasons"}),e.jsx("p",{children:"• Changes may affect core system functionality"})]})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[e.jsx(k,{variant:"outline",onClick:s,children:"Close"}),e.jsxs(k,{variant:"outline",onClick:()=>n(a),children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Clone"]}),!a.is_system&&e.jsxs(e.Fragment,{children:[e.jsxs(k,{variant:"outline",onClick:()=>r(a),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(k,{variant:"destructive",onClick:()=>i(a),children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})]})})},mV=({isOpen:t,onClose:s,permission:a,onSubmit:r,loading:n=!1})=>{const[i,l]=y.useState({name:"",description:"",category:"",resource:"",action:"",is_system:!1,is_visible:!0,status:"active"}),[c,o]=y.useState({}),[d,u]=y.useState([]),[m,h]=y.useState([]),[x,f]=y.useState([]);y.useEffect(()=>{a&&(l({name:a.name||"",description:a.description||"",category:a.category||"",resource:a.resource||"",action:a.action||"",is_system:a.is_system||!1,is_visible:a.is_visible!==void 0?a.is_visible:!0,status:a.status||"active"}),o({}))},[a]),y.useEffect(()=>{u(["user_management","role_management","permission_management","system_administration","content_management","analytics","billing","api_management","workflows","automations"]),h(["users","roles","permissions","organizations","clients","knowledge","chat_sessions","analytics","billing","api_keys","workflows","automations"]),f(["view","create","update","delete","manage","execute","publish","export","import","assign","revoke"])},[]);const p=(b,A)=>{l(v=>({...v,[b]:A})),c[b]&&o(v=>({...v,[b]:null}))},g=()=>{const b={};return i.name.trim()||(b.name="Permission name is required"),i.category||(b.category="Category is required"),i.resource||(b.resource="Resource is required"),i.action||(b.action="Action is required"),o(b),Object.keys(b).length===0},w=async b=>{if(b.preventDefault(),!!g())try{await r(i),s()}catch(A){console.error("Error updating permission:",A)}},S=()=>{n||s()};return a?e.jsx(At,{open:t,onOpenChange:S,children:e.jsxs(Ct,{className:"sm:max-w-[600px]",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Edit Permission"}),e.jsx(Tt,{children:"Update the permission details. System permissions cannot be modified."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"name",children:"Permission Name *"}),e.jsx(K,{id:"name",value:i.name,onChange:b=>p("name",b.target.value),placeholder:"e.g., users.create",disabled:a.is_system,className:c.name?"border-red-500":""}),c.name&&e.jsx("p",{className:"text-sm text-red-500",children:c.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"category",children:"Category *"}),e.jsxs(ie,{value:i.category,onValueChange:b=>p("category",b),disabled:a.is_system,children:[e.jsx(le,{className:c.category?"border-red-500":"",children:e.jsx(ce,{placeholder:"Select category"})}),e.jsx(oe,{children:d.map(b=>e.jsx(T,{value:b,children:b.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())},b))})]}),c.category&&e.jsx("p",{className:"text-sm text-red-500",children:c.category})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"resource",children:"Resource *"}),e.jsxs(ie,{value:i.resource,onValueChange:b=>p("resource",b),disabled:a.is_system,children:[e.jsx(le,{className:c.resource?"border-red-500":"",children:e.jsx(ce,{placeholder:"Select resource"})}),e.jsx(oe,{children:m.map(b=>e.jsx(T,{value:b,children:b.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())},b))})]}),c.resource&&e.jsx("p",{className:"text-sm text-red-500",children:c.resource})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"action",children:"Action *"}),e.jsxs(ie,{value:i.action,onValueChange:b=>p("action",b),disabled:a.is_system,children:[e.jsx(le,{className:c.action?"border-red-500":"",children:e.jsx(ce,{placeholder:"Select action"})}),e.jsx(oe,{children:x.map(b=>e.jsx(T,{value:b,children:b.replace(/\b\w/g,A=>A.toUpperCase())},b))})]}),c.action&&e.jsx("p",{className:"text-sm text-red-500",children:c.action})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(Re,{id:"description",value:i.description,onChange:b=>p("description",b.target.value),placeholder:"Describe what this permission allows users to do...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"status",children:"Status"}),e.jsxs(ie,{value:i.status,onValueChange:b=>p("status",b),disabled:a.is_system,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"is_visible",checked:i.is_visible,onCheckedChange:b=>p("is_visible",b),disabled:a.is_system}),e.jsx(_,{htmlFor:"is_visible",children:"Visible to users"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{id:"is_system",checked:i.is_system,disabled:!0}),e.jsx(_,{htmlFor:"is_system",children:"System permission"})]})]}),a.is_system&&e.jsxs(is,{children:[e.jsx(nt,{className:"h-4 w-4"}),e.jsx(ls,{children:"This is a system permission and cannot be modified. Only the description and visibility can be changed."})]}),e.jsxs(xn,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:S,disabled:n,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:n||a.is_system,children:n?e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update Permission"})]})]})]})}):null},hV=()=>{const{permissions:t,loading:s,error:a,filters:r,pagination:n,loadPermissions:i,createPermission:l,updatePermission:c,deletePermission:o,clearError:d,handlePageChange:u,handlePerPageChange:m,refreshPermissions:h,setFilters:x}=cV(),{can:f}=oV(),[p,g]=y.useState(null),[w,S]=y.useState(!1),[b,A]=y.useState(!1),[v,j]=y.useState(!1),[N,O]=y.useState(!1),[C,D]=y.useState(!1),E=y.useCallback((me,ye)=>{x(he=>({...he,[me]:ye}))},[x]),P=y.useCallback(me=>{x(me)},[x]),R=y.useCallback(me=>{switch(me){case"system":return{icon:Ae,color:"bg-red-100 text-red-800",label:"System"};case"user_management":return{icon:Pe,color:"bg-blue-100 text-blue-800",label:"User Management"};case"role_management":return{icon:Jt,color:"bg-purple-100 text-purple-800",label:"Role Management"};case"permission_management":return{icon:Ja,color:"bg-green-100 text-green-800",label:"Permission Management"};case"content_management":return{icon:Gt,color:"bg-yellow-100 text-yellow-800",label:"Content Management"};case"settings":return{icon:Te,color:"bg-gray-100 text-gray-800",label:"Settings"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:(me==null?void 0:me.replace("_"," ").replace(/\b\w/g,ye=>ye.toUpperCase()))||"Other"}}},[]);y.useEffect(()=>{i()},[r]),y.useEffect(()=>{a&&(Se.error(a),d())},[a,d]);const U=y.useMemo(()=>{const me=new Set(t.map(ye=>ye.category).filter(Boolean));return Array.from(me)},[t]),I=y.useMemo(()=>{let me=t;if(r.search){const ye=r.search.toLowerCase();me=me.filter(he=>(he.name||"").toLowerCase().includes(ye)||(he.description||"").toLowerCase().includes(ye)||(he.category||"").toLowerCase().includes(ye)||(he.resource||"").toLowerCase().includes(ye)||(he.action||"").toLowerCase().includes(ye))}return r.category&&(me=me.filter(ye=>ye.category===r.category)),r.is_system!==""&&(me=me.filter(ye=>ye.is_system===(r.is_system==="true"))),r.is_visible!==""&&(me=me.filter(ye=>ye.is_visible===(r.is_visible==="true"))),r.status&&(me=me.filter(ye=>ye.status===r.status)),me},[t,r]),L=y.useMemo(()=>[{key:"category",label:"Category",placeholder:"All Categories",options:[{value:"",label:"All Categories"},...U.map(me=>({value:me,label:me.replace("_"," ").replace(/\b\w/g,ye=>ye.toUpperCase())}))]},{key:"is_system",label:"Type",placeholder:"All Types",options:[{value:"",label:"All Types"},{value:"true",label:"System Permissions"},{value:"false",label:"Custom Permissions"}]},{key:"status",label:"Status",placeholder:"All Status",options:[{value:"",label:"All Status"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}]}],[U]),Z=y.useMemo(()=>[{header:"Permission",key:"name",className:"w-[30%] min-w-[240px]",render:(me,ye)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-3",style:{backgroundColor:(ye.color||"#6B7280")+"20"},children:e.jsx(Ae,{className:"w-5 h-5",style:{color:ye.color||"#6B7280"}})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:ye.name}),ye.is_system&&e.jsx(W,{variant:"destructive",className:"text-xs",children:"SYS"})]}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:ye.code}),ye.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:ye.description})]})]})},{header:"Category & Resource",key:"category",className:"w-[30%] min-w-[220px]",render:(me,ye)=>{const he=R(ye.category);return e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(W,{className:he.color,children:[e.jsx(he.icon,{className:"w-3 h-3 mr-1"}),he.label]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Resource:"}),e.jsx(W,{variant:"outline",className:"font-mono",children:ye.resource||"N/A"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Action: ",ye.action||"N/A"]})]})}},{header:"Access & Scope",key:"scope",className:"w-[20%] min-w-[180px]",render:(me,ye)=>{var he;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Type:"}),e.jsx(W,{variant:ye.is_system?"destructive":"outline",children:ye.is_system?"System":"Custom"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Visible:"}),e.jsx(W,{variant:ye.is_visible?"default":"secondary",children:ye.is_visible?"Yes":"No"})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[((he=ye.metadata)==null?void 0:he.scope)||"Global"," scope"]})]})}},{header:"Status",key:"status",className:"w-[10%] min-w-[120px]",render:me=>me==="active"?e.jsxs(W,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs(W,{variant:"secondary",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),me||"Inactive"]})}],[R]),q=y.useMemo(()=>[{label:"View Details",icon:ze,onClick:me=>se(me)},{label:"Edit Permission",icon:Ye,onClick:me=>ne(me),className:f("permissions.update")?"":"pointer-events-none opacity-50",separator:!0},{label:"Clone Permission",icon:Ht,onClick:me=>ve(me)},{label:"Delete Permission",icon:Ve,onClick:me=>Be(me),className:`text-red-600 focus:text-red-600 ${f("permissions.delete")?"":"pointer-events-none opacity-50"}`,separator:!0}],[f]),z=async me=>{try{D(!0);const ye=await l(me);ye.success?(Se.success("Permission created"),S(!1)):Se.error(ye.error||"Failed to create")}finally{D(!1)}},ne=me=>{g(me),A(!0)},Y=async me=>{try{if(!p)return;D(!0);const ye=await c(p.id,me);ye.success?(Se.success("Permission updated"),A(!1),g(null)):Se.error(ye.error||"Failed to update")}finally{D(!1)}},se=me=>{g(me),j(!0)},ve=me=>{g({...me,id:void 0,name:`${me.name} (Copy)`}),S(!0)},Be=me=>{g(me),O(!0)},ae=async()=>{try{if(!p)return;D(!0);const me=await o(p.id);me.success?(Se.success("Permission deleted"),O(!1),g(null)):Se.error(me.error||"Failed to delete")}finally{D(!1)}};if(s&&t.length===0)return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(ka,{className:"h-16 w-full"}),e.jsx(ka,{className:"h-32 w-full"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((me,ye)=>e.jsx(ka,{className:"h-20 w-full"},ye))})]})});const Ee=!s&&I.length===0;return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(CS,{title:"Permission Management",description:"Manage system permissions, access controls, and security policies across the system",primaryAction:{text:"Create Permission",icon:at,onClick:()=>{g(null),S(!0)},disabled:!f("permissions.create")}}),e.jsx(PS,{error:a,className:""}),e.jsx(NS,{filters:r,onFilterChange:E,onClearFilters:P,searchPlaceholder:"Search permissions by name, code, description, or resource...",filterOptions:L,className:""}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(li,{children:e.jsx("div",{className:"p-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Permissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.total||t.length})]})]})})}),e.jsx(li,{children:e.jsx("div",{className:"p-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Permissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(me=>me.status==="active").length})]})]})})}),e.jsx(li,{children:e.jsx("div",{className:"p-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"System Permissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(me=>me.is_system).length})]})]})})}),e.jsx(li,{children:e.jsx("div",{className:"p-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(Ht,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Custom Permissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(me=>!me.is_system).length})]})]})})})]}),e.jsxs(li,{children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Permissions Overview"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[n.total," permissions found • Showing ",n.current_page," of ",n.last_page," pages"]})]}),Ee?e.jsx(_S,{title:"No permissions found",description:"Try adjusting filters or create a new permission.",actionText:f("permissions.create")?"Create Permission":void 0,onAction:f("permissions.create")?()=>{g(null),S(!0)}:void 0,className:""}):e.jsxs(e.Fragment,{children:[e.jsx(wS,{data:I,columns:Z,actions:q,loading:s,emptyMessage:"No permissions found."}),e.jsx(bS,{className:"mt-6",currentPage:n.current_page,totalPages:n.last_page,totalItems:n.total,perPage:n.per_page,onPageChange:u,onPerPageChange:m})]})]})]}),e.jsx(dV,{isOpen:w,onClose:()=>S(!1),onSubmit:z,loading:C}),e.jsx(mV,{isOpen:b,onClose:()=>A(!1),permission:p,onSubmit:Y,loading:C}),e.jsx(uV,{isOpen:v,onClose:()=>j(!1),permission:p,onEdit:ne,onClone:ve,onDelete:Be}),e.jsx(kS,{isOpen:N,onClose:()=>O(!1),onConfirm:ae,itemName:p==null?void 0:p.name,itemType:"permission",loading:C})]})},xV=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"System overview and administration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"1,234"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+12% from last month"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Active Organizations"}),e.jsx(Zs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"89"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+5 new this month"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Monthly Revenue"}),e.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"$45,231"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+20.1% from last month"})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"System Status"}),e.jsx(Te,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"Healthy"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All systems operational"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Recent Activity"}),e.jsx(Q,{children:"Latest system events and user actions"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"New user registered"}),e.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"System backup completed"}),e.jsx("p",{className:"text-xs text-gray-500",children:"1 hour ago"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"High CPU usage detected"}),e.jsx("p",{className:"text-xs text-gray-500",children:"3 hours ago"})]})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common administrative tasks"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{className:"w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"Client Management"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Manage organizations and clients"})]}),e.jsxs("button",{className:"w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"View Financials"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Monitor revenue and subscriptions"})]}),e.jsxs("button",{className:"w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-medium",children:"System Settings"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Configure system parameters"})]})]})})]})]})]}),fV=({plan:t,isOpen:s,onClose:a,onSave:r})=>{const[n,i]=y.useState({name:"",tier:"basic",priceMonthly:0,priceYearly:0,maxAgents:1,maxMessagesPerMonth:100,features:[],isActive:!0,description:"",highlights:[],isPopular:!1,sortOrder:0}),[l,c]=y.useState(""),[o,d]=y.useState(""),[u,m]=y.useState({}),[h,x]=y.useState(!1);y.useEffect(()=>{var N;i(t?{name:t.name||"",tier:t.tier||"basic",priceMonthly:t.priceMonthly||0,priceYearly:t.priceYearly||0,maxAgents:t.maxAgents||1,maxMessagesPerMonth:t.maxMessagesPerMonth||100,features:t.features||[],isActive:t.isActive!==void 0?t.isActive:!0,description:t.description||"",highlights:t.highlights||[],isPopular:((N=t.highlights)==null?void 0:N.includes("Terpopuler"))||!1,sortOrder:t.sortOrder||0}:{name:"",tier:"basic",priceMonthly:0,priceYearly:0,maxAgents:1,maxMessagesPerMonth:100,features:[],isActive:!0,description:"",highlights:[],isPopular:!1,sortOrder:0}),m({})},[t]);const f=()=>{const N={};return n.name.trim()||(N.name="Nama paket wajib diisi"),n.priceMonthly<0&&(N.priceMonthly="Harga harus positif"),n.maxAgents<1&&(N.maxAgents="Minimal harus ada 1 agent"),n.maxMessagesPerMonth<1&&(N.maxMessagesPerMonth="Minimal harus ada 1 pesan per bulan"),m(N),Object.keys(N).length===0},p=async N=>{if(N.preventDefault(),!!f()){x(!0);try{const O={...n,priceYearly:n.priceYearly||Math.round(n.priceMonthly*10),highlights:n.highlights||[]};n.isPopular&&!O.highlights.includes("Terpopuler")?O.highlights.push("Terpopuler"):n.isPopular||(O.highlights=O.highlights.filter(C=>C!=="Terpopuler")),await r(O),a()}catch(O){console.error("Error saving plan:",O)}finally{x(!1)}}},g=()=>{l.trim()&&!n.features.includes(l.trim())&&(i(N=>({...N,features:[...N.features,l.trim()]})),c(""))},w=N=>{i(O=>({...O,features:O.features.filter((C,D)=>D!==N)}))},S=()=>{o.trim()&&!n.highlights.includes(o.trim())&&(i(N=>({...N,highlights:[...N.highlights,o.trim()]})),d(""))},b=N=>{i(O=>({...O,highlights:O.highlights.filter((C,D)=>D!==N)}))},A=N=>{const O={basic:"bg-green-100 text-green-800 border-green-200",professional:"bg-blue-100 text-blue-800 border-blue-200",enterprise:"bg-purple-100 text-purple-800 border-purple-200"};return O[N]||O.basic},v=N=>{const O={basic:e.jsx(Pe,{className:"w-4 h-4"}),professional:e.jsx(Et,{className:"w-4 h-4"}),enterprise:e.jsx(lj,{className:"w-4 h-4"})};return O[N]||O.basic},j=N=>{const O={basic:"Untuk UMKM dan startup",professional:"Untuk bisnis yang berkembang",enterprise:"Solusi enterprise lengkap"};return O[N]||O.basic};return e.jsx(At,{open:s,onOpenChange:a,children:e.jsxs(Ct,{className:"max-w-5xl max-h-[95vh] overflow-y-auto p-0",children:[e.jsxs(_t,{className:"px-8 py-6 border-b",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[v(n.tier),e.jsxs("div",{children:[e.jsx(Pt,{className:"text-2xl font-bold",children:t?"Edit Paket Berlangganan":"Buat Paket Baru"}),e.jsx(Tt,{className:"text-base",children:t?"Perbarui detail dan fitur paket berlangganan":"Buat paket berlangganan baru untuk pelanggan Anda"})]})]}),e.jsx(Vj,{onClick:a,className:"absolute right-6 top-6"})]}),e.jsxs("form",{onSubmit:p,className:"px-8 py-6 space-y-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3 text-blue-600",children:[e.jsx(_r,{className:"w-6 h-6"}),"Informasi Dasar"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"name",className:"text-sm font-medium",children:"Nama Paket *"}),e.jsx(K,{id:"name",value:n.name,onChange:N=>i(O=>({...O,name:N.target.value})),placeholder:"e.g., Starter, Business, Enterprise",className:u.name?"border-red-500 focus:border-red-500":""}),u.name&&e.jsx("p",{className:"text-sm text-red-600",children:u.name})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"tier",className:"text-sm font-medium",children:"Tier Paket"}),e.jsxs(ie,{value:n.tier,onValueChange:N=>i(O=>({...O,tier:N})),children:[e.jsx(le,{className:"w-full",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"basic",children:"Basic"}),e.jsx(T,{value:"professional",children:"Professional"}),e.jsx(T,{value:"enterprise",children:"Enterprise"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(W,{variant:"outline",className:`${A(n.tier)} text-sm font-medium`,children:[n.tier.charAt(0).toUpperCase()+n.tier.slice(1)," Tier"]}),e.jsx("span",{className:"text-xs text-gray-500",children:j(n.tier)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"description",className:"text-sm font-medium",children:"Deskripsi Paket"}),e.jsx(Re,{id:"description",value:n.description,onChange:N=>i(O=>({...O,description:N.target.value})),placeholder:"Jelaskan apa yang ditawarkan paket ini, manfaat, dan target pengguna...",rows:3,className:"resize-none"})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3 text-green-600",children:[e.jsx(_r,{className:"w-6 h-6"}),"Harga & Billing"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"priceMonthly",className:"text-sm font-medium",children:"Harga Bulanan (Rp) *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Rp"}),e.jsx(K,{id:"priceMonthly",type:"number",value:n.priceMonthly,onChange:N=>i(O=>({...O,priceMonthly:parseInt(N.target.value)||0})),placeholder:"0",className:`pl-12 ${u.priceMonthly?"border-red-500 focus:border-red-500":""}`})]}),u.priceMonthly&&e.jsx("p",{className:"text-sm text-red-600",children:u.priceMonthly}),e.jsx("p",{className:"text-xs text-gray-500",children:"Harga per bulan untuk pelanggan"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"priceYearly",className:"text-sm font-medium",children:"Harga Tahunan (Rp)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"Rp"}),e.jsx(K,{id:"priceYearly",type:"number",value:n.priceYearly,onChange:N=>i(O=>({...O,priceYearly:parseInt(N.target.value)||0})),placeholder:"Auto-calculated (20% discount)",className:"pl-12"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Kosongkan untuk kalkulasi otomatis (10 bulan bayar untuk 12 bulan)"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg",children:[e.jsx(de,{id:"isPopular",checked:n.isPopular,onCheckedChange:N=>i(O=>({...O,isPopular:N}))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(os,{className:"w-5 h-5 text-yellow-500"}),e.jsx(_,{htmlFor:"isPopular",className:"text-sm font-medium text-yellow-800",children:"Tandai sebagai Paket Terpopuler"})]}),e.jsx(W,{variant:"outline",className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white border-0",children:"⭐ Terpopuler"})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3 text-purple-600",children:[e.jsx(Pe,{className:"w-6 h-6"}),"Batasan Penggunaan"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"maxAgents",className:"text-sm font-medium",children:"Maksimal Agent *"}),e.jsx(K,{id:"maxAgents",type:"number",value:n.maxAgents,onChange:N=>i(O=>({...O,maxAgents:parseInt(N.target.value)||1})),placeholder:"1",className:u.maxAgents?"border-red-500 focus:border-red-500":""}),u.maxAgents&&e.jsx("p",{className:"text-sm text-red-600",children:u.maxAgents}),e.jsx("p",{className:"text-xs text-gray-500",children:"Jumlah agent yang dapat diaktifkan"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"maxMessagesPerMonth",className:"text-sm font-medium",children:"Maksimal Pesan per Bulan *"}),e.jsx(K,{id:"maxMessagesPerMonth",type:"number",value:n.maxMessagesPerMonth,onChange:N=>i(O=>({...O,maxMessagesPerMonth:parseInt(N.target.value)||100})),placeholder:"100",className:u.maxMessagesPerMonth?"border-red-500 focus:border-red-500":""}),u.maxMessagesPerMonth&&e.jsx("p",{className:"text-sm text-red-600",children:u.maxMessagesPerMonth}),e.jsx("p",{className:"text-xs text-gray-500",children:"Batas pesan yang dapat dikirim per bulan"})]})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3 text-indigo-600",children:[e.jsx(Et,{className:"w-6 h-6"}),"Fitur & Kemampuan"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(K,{placeholder:"Tambahkan fitur baru...",value:l,onChange:N=>c(N.target.value),onKeyPress:N=>N.key==="Enter"&&(N.preventDefault(),g()),className:"flex-1"}),e.jsx(k,{type:"button",onClick:g,variant:"outline",children:e.jsx(at,{className:"w-4 h-4"})})]}),n.features.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.features.map((N,O)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Me,{className:"w-4 h-4 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm flex-1",children:N}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",onClick:()=>w(O),className:"text-red-600 hover:text-red-700 p-1 h-6 w-6 flex-shrink-0",children:e.jsx(Ve,{className:"w-3 h-3"})})]},O))})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3 text-amber-600",children:[e.jsx(os,{className:"w-6 h-6"}),"Highlight & Promosi"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(K,{placeholder:"Tambahkan highlight baru...",value:o,onChange:N=>d(N.target.value),onKeyPress:N=>N.key==="Enter"&&(N.preventDefault(),S()),className:"flex-1"}),e.jsx(k,{type:"button",onClick:S,variant:"outline",children:e.jsx(at,{className:"w-4 h-4"})})]}),n.highlights.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.highlights.map((N,O)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-50 rounded-lg",children:[e.jsx(os,{className:"w-4 h-4 text-amber-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm flex-1",children:N}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",onClick:()=>b(O),className:"text-red-600 hover:text-red-700 p-1 h-6 w-6 flex-shrink-0",children:e.jsx(Ve,{className:"w-3 h-3"})})]},O))})]})]}),e.jsx(as,{}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3 text-gray-600",children:[e.jsx(Te,{className:"w-6 h-6"}),"Status & Konfigurasi"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{id:"isActive",checked:n.isActive,onCheckedChange:N=>i(O=>({...O,isActive:N}))}),e.jsx(_,{htmlFor:"isActive",className:"text-base font-medium",children:"Paket Aktif"}),e.jsx(W,{variant:n.isActive?"default":"secondary",children:n.isActive?"Aktif":"Tidak Aktif"})]}),!n.isActive&&e.jsxs(is,{children:[e.jsx(Qe,{className:"h-4 w-4"}),e.jsx(ls,{children:"Paket ini akan disembunyikan dari pelanggan ketika tidak aktif."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"sortOrder",className:"text-sm font-medium",children:"Urutan Tampilan"}),e.jsx(K,{id:"sortOrder",type:"number",value:n.sortOrder,onChange:N=>i(O=>({...O,sortOrder:parseInt(N.target.value)||0})),placeholder:"0",className:"w-32"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Angka lebih kecil akan ditampilkan lebih dulu"})]})]})]}),e.jsxs("div",{className:"flex gap-4 pt-8 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",disabled:h,children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),h?"Menyimpan...":t?"Update Paket":"Buat Paket"]}),e.jsx(k,{type:"button",variant:"outline",onClick:a,disabled:h,className:"flex-1",children:"Batal"})]})]})]})})};class pV{constructor(){this.storageKey="subscriptionPlans",this.metadataKey="subscriptionPlansMetadata",this.initializeStorage()}initializeStorage(){localStorage.getItem(this.storageKey)||localStorage.setItem(this.storageKey,JSON.stringify(pr)),localStorage.getItem(this.metadataKey)||localStorage.setItem(this.metadataKey,JSON.stringify(Yr))}async getSubscriptionPlans(){try{const s=localStorage.getItem(this.storageKey);return s?JSON.parse(s):pr}catch(s){return console.error("Error getting subscription plans:",s),pr}}async getMetadata(){try{const s=localStorage.getItem(this.metadataKey);return s?JSON.parse(s):Yr}catch(s){return console.error("Error getting metadata:",s),Yr}}async createPlan(s){try{const a=await this.getSubscriptionPlans(),r={...s,id:`plan-${Date.now()}`,activeSubscriptions:0,totalRevenue:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n=[...a,r];return localStorage.setItem(this.storageKey,JSON.stringify(n)),await this.updateMetadata(n),r}catch(a){throw console.error("Error creating plan:",a),a}}async updatePlan(s,a){try{const n=(await this.getSubscriptionPlans()).map(i=>i.id===s?{...a,id:s,updatedAt:new Date().toISOString()}:i);return localStorage.setItem(this.storageKey,JSON.stringify(n)),await this.updateMetadata(n),n.find(i=>i.id===s)}catch(r){throw console.error("Error updating plan:",r),r}}async deletePlan(s){try{const r=(await this.getSubscriptionPlans()).filter(n=>n.id!==s);return localStorage.setItem(this.storageKey,JSON.stringify(r)),await this.updateMetadata(r),!0}catch(a){throw console.error("Error deleting plan:",a),a}}async updateMetadata(s){try{const a=s.reduce((i,l)=>i+(l.activeSubscriptions||0),0),r=s.reduce((i,l)=>i+(l.totalRevenue||0),0),n={lastUpdated:new Date().toISOString(),version:"1.0.0",totalPlans:s.length,totalActiveSubscriptions:a,totalMonthlyRevenue:r};return localStorage.setItem(this.metadataKey,JSON.stringify(n)),n}catch(a){throw console.error("Error updating metadata:",a),a}}async exportToJSON(){try{const s=await this.getSubscriptionPlans(),a=await this.getMetadata(),r={subscriptionPlans:s,metadata:a},n=JSON.stringify(r,null,2),i=new Blob([n],{type:"application/json"}),l=document.createElement("a");return l.href=URL.createObjectURL(i),l.download=`subscription-plans-${new Date().toISOString().split("T")[0]}.json`,l.click(),r}catch(s){throw console.error("Error exporting data:",s),s}}async importFromJSON(s){try{return new Promise((a,r)=>{const n=new FileReader;n.onload=i=>{try{const l=JSON.parse(i.target.result);l.subscriptionPlans&&Array.isArray(l.subscriptionPlans)?(localStorage.setItem(this.storageKey,JSON.stringify(l.subscriptionPlans)),l.metadata&&localStorage.setItem(this.metadataKey,JSON.stringify(l.metadata)),a(l)):r(new Error("Invalid data format"))}catch(l){r(l)}},n.onerror=r,n.readAsText(s)})}catch(a){throw console.error("Error importing data:",a),a}}async resetToDefault(){try{return localStorage.setItem(this.storageKey,JSON.stringify(pr)),localStorage.setItem(this.metadataKey,JSON.stringify(Yr)),{plans:pr,metadata:Yr}}catch(s){throw console.error("Error resetting data:",s),s}}}const Zr=new pV,gV=()=>{const[t,s]=y.useState("plans"),[a,r]=y.useState(null),[n,i]=y.useState(!1),[l,c]=y.useState([]),[o,d]=y.useState(Yr),[u,m]=y.useState(!0);y.useEffect(()=>{(async()=>{try{m(!0);const[v,j]=await Promise.all([Zr.getSubscriptionPlans(),Zr.getMetadata()]);c(v),d(j)}catch(v){console.error("Error loading subscription plans:",v)}finally{m(!1)}})()},[]);const[h]=y.useState([{id:"txn-001",date:"2024-03-20",organization:"ABC Corporation",orgCode:"ABC-001",description:"Enterprise Plan - March 2024",amount:25e5,status:"success",paymentMethod:"Credit Card",transactionId:"ch_1234567890"},{id:"txn-002",date:"2024-03-20",organization:"TechStart Inc",orgCode:"TSI-002",description:"Professional Plan - March 2024",amount:125e4,status:"success",paymentMethod:"Bank Transfer",transactionId:"tr_0987654321"},{id:"txn-003",date:"2024-03-19",organization:"Digital Agency Pro",orgCode:"DAP-004",description:"Professional Plan - March 2024",amount:125e4,status:"failed",paymentMethod:"Credit Card",transactionId:"ch_1122334455"},{id:"txn-004",date:"2024-03-18",organization:"StartupXYZ",orgCode:"SXZ-005",description:"Basic Plan - March 2024",amount:5e5,status:"refunded",paymentMethod:"Credit Card",transactionId:"ch_5566778899"}]),x=A=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(A),f=A=>{const v={success:"green",failed:"red",refunded:"default",pending:"yellow"},j={success:"Success",failed:"Failed",refunded:"Refunded",pending:"Pending"};return e.jsx(W,{variant:v[A],children:j[A]})},p=(A,v)=>{console.log(`${A} for transaction ${v}`)},g=async A=>{console.log("Saving plan:",A);try{if(a){console.log("Updating existing plan:",a.id,A);const j=await Zr.updatePlan(a.id,A);c(N=>N.map(O=>O.id===a.id?j:O))}else{console.log("Creating new plan:",A);const j=await Zr.createPlan(A);c(N=>[...N,j])}const v=await Zr.getMetadata();d(v),i(!1),r(null)}catch(v){console.error("Error saving plan:",v)}},w=A=>{r(A),i(!0)},S=()=>{r(null),i(!0)},b=()=>{i(!1),r(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Financials"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage subscription plans and view transaction history"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x(o.totalMonthlyRevenue)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+12.5%"})," dari bulan lalu"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Active Subscriptions"}),e.jsx(un,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o.totalActiveSubscriptions}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+8"})," subscription baru"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Average Revenue Per User"}),e.jsx(rs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x(142)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+5.2%"})," dari bulan lalu"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Failed Payments"}),e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"3"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-red-600",children:"2"})," perlu tindak lanjut"]})]})]})]}),e.jsxs(kt,{value:t,onValueChange:s,children:[e.jsxs(wt,{children:[e.jsx(pe,{value:"plans",children:"Subscription Plans"}),e.jsx(pe,{value:"transactions",children:"Transactions"})]}),e.jsxs(ge,{value:"plans",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Subscription Plans"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{variant:"outline",onClick:()=>Zr.exportToJSON(),children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export Data"]}),e.jsxs(k,{onClick:S,children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Create New Plan"]})]})]}),u?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading subscription plans..."})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:l.map(A=>{var v;return e.jsxs(F,{className:`relative overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-105 ${A.tier==="enterprise"?"border-2 border-purple-500 shadow-lg":A.tier==="professional"?"border-2 border-blue-500 shadow-md":"border-2 border-green-500"}`,children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${A.tier==="enterprise"?"bg-purple-500":A.tier==="professional"?"bg-blue-500":"bg-green-500"}`}),e.jsx(V,{className:"text-2xl font-bold",children:A.name})]}),e.jsx(Q,{className:"capitalize text-base",children:A.tier==="enterprise"?"Solusi Enterprise":A.tier==="professional"?"Untuk Bisnis":"Untuk UMKM"})]}),e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",className:"opacity-60 hover:opacity-100",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{children:[e.jsxs(st,{onClick:()=>w(A),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit Plan"]}),e.jsxs(st,{className:"text-red-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Plan"]})]})]})]})}),e.jsxs(B,{className:"space-y-6",children:[((v=A.highlights)==null?void 0:v.includes("Terpopuler"))&&e.jsx("div",{className:"absolute top-4 right-4 z-10",children:e.jsx(W,{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white border-0 animate-pulse",children:"⭐ Terpopuler"})}),A.highlights&&A.highlights.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:A.highlights.map((j,N)=>e.jsx(W,{variant:"secondary",className:"text-xs font-medium bg-gradient-to-r from-blue-50 to-purple-50 border-blue-200",children:j},N))}),e.jsxs("div",{className:"text-center space-y-2 p-4 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100",children:[e.jsxs("div",{className:"text-4xl font-bold text-gray-900",children:[x(A.priceMonthly),e.jsx("span",{className:"text-lg font-normal text-gray-500",children:"/bulan"})]}),A.priceYearly&&e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["💰 ",x(A.priceYearly),"/tahun",e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(hemat 2 bulan)"})]})]}),A.description&&e.jsx("div",{className:"text-sm text-gray-600 leading-relaxed",children:A.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:A.maxAgents}),e.jsx("div",{className:"text-xs text-gray-600",children:"Agent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:A.maxMessagesPerMonth.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-600",children:"Pesan/Bulan"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4 text-yellow-500"}),e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Fitur Unggulan:"})]}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[A.features.slice(0,6).map((j,N)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},N)),A.features.length>6&&e.jsxs("li",{className:"text-xs text-blue-600 font-medium",children:["+",A.features.length-6," fitur lainnya..."]})]})]}),e.jsx(k,{className:`w-full py-3 font-semibold ${A.tier==="enterprise"?"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700":A.tier==="professional"?"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700"}`,children:"🚀 Pilih Paket Ini"}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Pelanggan Aktif"}),e.jsx("span",{className:"font-medium text-gray-700",children:A.activeSubscriptions})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Revenue Bulanan"}),e.jsx("span",{className:"font-medium text-gray-700",children:x(A.totalRevenue)})]})]})]})]},A.id)})})]}),e.jsxs(ge,{value:"transactions",className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Transaction History"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(k,{variant:"outline",children:[e.jsx(nn,{className:"w-4 h-4 mr-2"}),"Filter"]}),e.jsxs(k,{variant:"outline",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),e.jsx(F,{children:e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Date"}),e.jsx(J,{children:"Organization"}),e.jsx(J,{children:"Description"}),e.jsx(J,{children:"Amount"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Payment Method"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:h.map(A=>e.jsxs(_e,{children:[e.jsx(X,{className:"text-muted-foreground",children:A.date}),e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A.organization}),e.jsx("div",{className:"text-sm text-muted-foreground",children:A.orgCode})]})}),e.jsx(X,{children:A.description}),e.jsx(X,{className:"font-medium",children:x(A.amount)}),e.jsx(X,{children:f(A.status)}),e.jsx(X,{children:A.paymentMethod}),e.jsx(X,{children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"outline",size:"sm",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{children:[e.jsx(st,{onClick:()=>p("view",A.id),children:"View Details"}),A.status==="success"&&e.jsx(st,{className:"text-red-600",onClick:()=>p("refund",A.id),children:"Process Refund"}),A.status==="failed"&&e.jsx(st,{onClick:()=>p("retry",A.id),children:"Retry Payment"})]})]})})]},A.id))})]})})})]})]}),e.jsx(fV,{plan:a,isOpen:n,onClose:b,onSave:g})]})},vV=()=>e.jsx(gV,{}),jV=(t,s={})=>{const{locale:a="id-ID",format:r="medium",timeZone:n="Asia/Jakarta"}=s;if(!t)return"";const i=new Date(t);if(isNaN(i.getTime()))return"";try{const l={timeZone:n,...yV(r)};return new Intl.DateTimeFormat(a,l).format(i)}catch(l){return console.error("Date formatting error:",l),i.toLocaleDateString(a)}},yV=t=>{switch(t){case"short":return{year:"numeric",month:"short",day:"numeric"};case"medium":return{year:"numeric",month:"long",day:"numeric"};case"long":return{weekday:"long",year:"numeric",month:"long",day:"numeric"};case"time":return{hour:"2-digit",minute:"2-digit"};case"datetime":return{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};case"relative":return{year:"numeric",month:"short",day:"numeric"};default:return{year:"numeric",month:"short",day:"numeric"}}},bV=()=>{const[t,s]=y.useState([]),[a,r]=y.useState([]),[n,i]=y.useState(""),[l,c]=y.useState("all"),[o,d]=y.useState(!0),u=[{id:1,name:"PT Teknologi Nusantara",org_code:"TN001",email:"admin@teknusantara.com",status:"active",plan_id:"enterprise",plan_name:"Enterprise",created_at:"2024-01-15T10:30:00Z",agents_count:25,messages_sent:15420},{id:2,name:"Digital Agency Pro",org_code:"DAP002",email:"contact@digitalagencypro.com",status:"trial",plan_id:"pro",plan_name:"Professional",created_at:"2024-02-20T14:15:00Z",agents_count:8,messages_sent:3240},{id:3,name:"StartupXYZ",org_code:"SXYZ003",email:"hello@startupxyz.com",status:"suspended",plan_id:"basic",plan_name:"Basic",created_at:"2024-01-05T09:00:00Z",agents_count:3,messages_sent:890}];y.useEffect(()=>{setTimeout(()=>{s(u),r(u),d(!1)},1e3)},[]),y.useEffect(()=>{let g=t;n&&(g=g.filter(w=>w.name.toLowerCase().includes(n.toLowerCase())||w.org_code.toLowerCase().includes(n.toLowerCase())||w.email.toLowerCase().includes(n.toLowerCase()))),l!=="all"&&(g=g.filter(w=>w.status===l)),r(g)},[t,n,l]);const m=g=>{const S={active:{variant:"green",label:"Active"},trial:{variant:"default",label:"Trial"},suspended:{variant:"red",label:"Suspended"}}[g]||{variant:"default",label:g};return e.jsx(W,{variant:S.variant,children:S.label})},h=g=>{const S={Basic:{variant:"blue",className:""},Professional:{variant:"purple",className:""},Enterprise:{variant:"green",className:""}}[g]||{variant:"default",className:""};return e.jsx(W,{variant:S.variant,className:S.className,children:g})},x=(g,w)=>{s(S=>S.map(b=>b.id===g?{...b,status:w}:b))},f=g=>{alert(`Login as admin untuk ${g.name} - Fitur ini akan mengarahkan ke dashboard admin organisasi`)},p=g=>{alert(`Reset password telah dikirim ke ${g.email}`)};return o?e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2",children:"Loading organizations..."})]})})}):e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Organizations"}),e.jsx(Q,{children:"Manajemen semua klien/tenant yang terdaftar di platform"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"flex gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(K,{placeholder:"Search organizations...",value:n,onChange:g=>i(g.target.value),className:"pl-10"})]})}),e.jsxs(ie,{value:l,onValueChange:c,children:[e.jsxs(le,{className:"w-48",children:[e.jsx(nn,{className:"h-4 w-4 mr-2"}),e.jsx(ce,{placeholder:"Filter by status"})]}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"trial",children:"Trial"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Organization"}),e.jsx(J,{children:"Code"}),e.jsx(J,{children:"Email"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Plan"}),e.jsx(J,{children:"Created"}),e.jsx(J,{className:"w-20",children:"Actions"})]})}),e.jsx(mt,{children:a.map(g=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:g.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[g.agents_count," agents • ",g.messages_sent.toLocaleString()," messages"]})]})}),e.jsx(X,{children:e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:g.org_code})}),e.jsx(X,{children:g.email}),e.jsx(X,{children:m(g.status)}),e.jsx(X,{children:h(g.plan_name)}),e.jsx(X,{children:jV(g.created_at,{format:"short"})}),e.jsx(X,{children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(la,{className:"h-4 w-4"})})}),e.jsxs(ma,{align:"end",children:[e.jsxs(st,{onClick:()=>window.location.href=`/superadmin/clients/${g.id}`,children:[e.jsx(ze,{className:"h-4 w-4 mr-2"}),"Client 360° View"]}),e.jsxs(st,{onClick:()=>f(g),children:[e.jsx(bw,{className:"h-4 w-4 mr-2"}),"Login as Admin"]}),e.jsxs(st,{onClick:()=>p(g),children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Force Password Reset"]}),e.jsx(st,{onClick:()=>x(g.id,g.status==="active"?"suspended":"active"),className:g.status==="suspended"?"text-green-600":"text-red-600",children:g.status==="suspended"?e.jsxs(e.Fragment,{children:[e.jsx(cn,{className:"h-4 w-4 mr-2"}),"Activate"]}):e.jsxs(e.Fragment,{children:[e.jsx(Tr,{className:"h-4 w-4 mr-2"}),"Suspend"]})})]})]})})]},g.id))})]})}),e.jsxs("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-500",children:[e.jsxs("span",{children:["Showing ",a.length," of ",t.length," organizations"]}),e.jsxs("span",{children:["Total Active: ",t.filter(g=>g.status==="active").length," • Total Trial: ",t.filter(g=>g.status==="trial").length," • Total Suspended: ",t.filter(g=>g.status==="suspended").length]})]})]})]})},NV=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Client Management"}),e.jsx("p",{className:"text-gray-600",children:"Pusat komando untuk semua hal yang berkaitan dengan klien/tenant"})]}),e.jsx(bV,{})]}),wV=()=>{const t=[{title:"Role Management",description:"Manage user roles, permissions, and access control",icon:Ae,href:"/superadmin/system/roles",color:"from-blue-500 to-blue-600",bgColor:"from-blue-50 to-blue-100"},{title:"Permission Management",description:"Configure system permissions and access rights",icon:Ja,href:"/superadmin/system/permissions",color:"from-green-500 to-green-600",bgColor:"from-green-50 to-green-100"},{title:"User Management",description:"Manage system users and their accounts",icon:Pe,href:"/superadmin/users",color:"from-purple-500 to-purple-600",bgColor:"from-purple-50 to-purple-100"},{title:"System Configuration",description:"Configure system-wide settings and parameters",icon:Te,href:"/superadmin/system/config",color:"from-orange-500 to-orange-600",bgColor:"from-orange-50 to-orange-100"},{title:"Database Management",description:"Monitor and manage database operations",icon:on,href:"/superadmin/system/database",color:"from-red-500 to-red-600",bgColor:"from-red-50 to-red-100"},{title:"System Monitoring",description:"Monitor system health and performance",icon:vt,href:"/superadmin/system/monitoring",color:"from-indigo-500 to-indigo-600",bgColor:"from-indigo-50 to-indigo-100"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Administration"}),e.jsx("p",{className:"text-gray-600",children:"Manage system-wide settings, roles, permissions, and configurations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>{const a=s.icon;return e.jsx(Ms,{to:s.href,children:e.jsxs(F,{className:"hover:shadow-lg transition-all duration-200 hover:scale-105 cursor-pointer border-0 bg-gradient-to-br bg-white",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${s.color} flex items-center justify-center`,children:e.jsx(a,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(V,{className:"text-lg",children:s.title}),e.jsx(Q,{className:"text-sm",children:s.description})]})]})}),e.jsx(B,{children:e.jsx("div",{className:`h-2 bg-gradient-to-r ${s.bgColor} rounded-full`})})]})},s.title)})}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common system administration tasks"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("button",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Ae,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Create New Role"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Add a new user role"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Pe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Add User"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Create new system user"})]})]}),e.jsxs("button",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Te,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"System Config"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Update system settings"})]})]})]})})]})]})},SV=({isOpen:t,onClose:s,onSubmit:a,loading:r=!1})=>{const[n,i]=y.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"agent",organization:"TechCorp Inc.",department:"IT",position:"",location:"",timezone:"America/New_York",is_verified:!1,is_2fa_enabled:!1,status:"pending",permissions:[],metadata:{employee_id:"",hire_date:"",manager:"",cost_center:""}}),[l,c]=y.useState({}),[o,d]=y.useState(!1),[u,m]=y.useState(!1),h=y.useCallback((j,N)=>{i(O=>({...O,[j]:N})),l[j]&&c(O=>({...O,[j]:null}))},[l]),x=y.useCallback((j,N)=>{i(O=>({...O,metadata:{...O.metadata,[j]:N}}))},[]);y.useCallback((j,N)=>{i(O=>({...O,permissions:N?[...O.permissions,j]:O.permissions.filter(C=>C!==j)}))},[]);const f=y.useCallback(()=>{const j=Date.now().toString().slice(-6),N=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),O=`EMP${j}${N}`;x("employee_id",O)},[x]),p=y.useCallback(()=>{const j={};return n.name.trim()||(j.name="User name is required"),n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(j.email="Please enter a valid email address"):j.email="Email is required",n.password?n.password.length<8&&(j.password="Password must be at least 8 characters long"):j.password="Password is required",n.password!==n.confirmPassword&&(j.confirmPassword="Passwords do not match"),n.role||(j.role="Role is required"),n.organization||(j.organization="Organization is required"),n.department||(j.department="Department is required"),n.position||(j.position="Position is required"),c(j),Object.keys(j).length===0},[n]),g=y.useCallback(async j=>{if(j.preventDefault(),!!p())try{await a(n),i({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"agent",organization:"TechCorp Inc.",department:"IT",position:"",location:"",timezone:"America/New_York",is_verified:!1,is_2fa_enabled:!1,status:"pending",permissions:[],metadata:{employee_id:"",hire_date:"",manager:"",cost_center:""}}),c({})}catch(N){console.error("Failed to create user:",N)}},[n,a,p]),w=y.useCallback(()=>{r||(i({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"agent",organization:"TechCorp Inc.",department:"IT",position:"",location:"",timezone:"America/New_York",is_verified:!1,is_2fa_enabled:!1,status:"pending",permissions:[],metadata:{employee_id:"",hire_date:"",manager:"",cost_center:""}}),c({}),s())},[r,s]),S=j=>{switch(j){case"super_admin":return{icon:Ae,color:"bg-red-100 text-red-800",label:"Super Admin"};case"org_admin":return{icon:Ta,color:"bg-blue-100 text-blue-800",label:"Org Admin"};case"agent":return{icon:Pe,color:"bg-green-100 text-green-800",label:"Agent"};case"client":return{icon:da,color:"bg-purple-100 text-purple-800",label:"Client"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:j}}},b=j=>{switch(j){case"active":return{icon:Me,color:"bg-green-100 text-green-800",label:"Active"};case"inactive":return{icon:Cs,color:"bg-gray-100 text-gray-800",label:"Inactive"};case"pending":return{icon:et,color:"bg-yellow-100 text-yellow-800",label:"Pending"};case"suspended":return{icon:Qe,color:"bg-red-100 text-red-800",label:"Suspended"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:j}}};if(!t)return null;const A=S(n.role).icon,v=b(n.status).icon;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(oa,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New User"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Add a new user to the system with appropriate roles and permissions"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:w,disabled:r,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Basic Information"]}),e.jsx(Q,{children:"Enter the user's personal and contact information"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx(K,{id:"name",placeholder:"e.g., John Doe",value:n.name,onChange:j=>h("name",j.target.value),className:l.name?"border-red-300":""}),l.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx(K,{id:"email",type:"email",placeholder:"e.g., john.doe@example.com",value:n.email,onChange:j=>h("email",j.target.value),className:l.email?"border-red-300":""}),l.email&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx(K,{id:"phone",type:"tel",placeholder:"e.g., +1-555-0123",value:n.phone,onChange:j=>h("phone",j.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position *"}),e.jsx(K,{id:"position",placeholder:"e.g., Software Engineer",value:n.position,onChange:j=>h("position",j.target.value),className:l.position?"border-red-300":""}),l.position&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.position})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx(K,{id:"location",placeholder:"e.g., San Francisco, CA",value:n.location,onChange:j=>h("location",j.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs(ie,{value:n.timezone,onValueChange:j=>h("timezone",j),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx(T,{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx(T,{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx(T,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),e.jsx(T,{value:"Europe/London",children:"London (GMT)"}),e.jsx(T,{value:"Europe/Paris",children:"Paris (CET)"}),e.jsx(T,{value:"Asia/Tokyo",children:"Tokyo (JST)"}),e.jsx(T,{value:"Asia/Shanghai",children:"Shanghai (CST)"})]})]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Account Settings"]}),e.jsx(Q,{children:"Configure user account and security settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"password",type:o?"text":"password",placeholder:"Enter password",value:n.password,onChange:j=>h("password",j.target.value),className:l.password?"border-red-300 pr-10":"pr-10"}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>d(!o),children:o?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),l.password&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.password})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"confirmPassword",type:u?"text":"password",placeholder:"Confirm password",value:n.confirmPassword,onChange:j=>h("confirmPassword",j.target.value),className:l.confirmPassword?"border-red-300 pr-10":"pr-10"}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!u),children:u?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),l.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.confirmPassword})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Email Verified"}),e.jsx("p",{className:"text-xs text-gray-500",children:"User has verified their email address"})]}),e.jsx(de,{checked:n.is_verified,onCheckedChange:j=>h("is_verified",j)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"2FA Enabled"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable two-factor authentication"})]}),e.jsx(de,{checked:n.is_2fa_enabled,onCheckedChange:j=>h("is_2fa_enabled",j)})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsxs(ie,{value:n.status,onValueChange:j=>h("status",j),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})]})})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ta,{className:"w-5 h-5"}),"Organization & Role"]}),e.jsx(Q,{children:"Assign user to organization, department, and role"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization *"}),e.jsxs(ie,{value:n.organization,onValueChange:j=>h("organization",j),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"TechCorp Inc.",children:"TechCorp Inc."}),e.jsx(T,{value:"ClientCorp Ltd.",children:"ClientCorp Ltd."}),e.jsx(T,{value:"PartnerOrg LLC",children:"PartnerOrg LLC"})]})]}),l.organization&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.organization})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),e.jsxs(ie,{value:n.department,onValueChange:j=>h("department",j),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"IT",children:"IT"}),e.jsx(T,{value:"HR",children:"HR"}),e.jsx(T,{value:"Support",children:"Support"}),e.jsx(T,{value:"Sales",children:"Sales"}),e.jsx(T,{value:"Marketing",children:"Marketing"}),e.jsx(T,{value:"Finance",children:"Finance"}),e.jsx(T,{value:"Operations",children:"Operations"})]})]}),l.department&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.department})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs(ie,{value:n.role,onValueChange:j=>h("role",j),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"super_admin",children:"Super Administrator"}),e.jsx(T,{value:"org_admin",children:"Organization Administrator"}),e.jsx(T,{value:"agent",children:"Agent"}),e.jsx(T,{value:"client",children:"Client"})]})]}),l.role&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:l.role})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"Employee Information"]}),e.jsx(Q,{children:"Additional employee details and metadata"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"e.g., EMP001",value:n.metadata.employee_id,onChange:j=>x("employee_id",j.target.value)}),e.jsx(k,{type:"button",variant:"outline",onClick:f,className:"whitespace-nowrap",children:"Generate"})]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx(K,{type:"date",value:n.metadata.hire_date,onChange:j=>x("hire_date",j.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manager"}),e.jsx(K,{placeholder:"e.g., John Smith",value:n.metadata.manager,onChange:j=>x("manager",j.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Center"}),e.jsx(K,{placeholder:"e.g., IT-001",value:n.metadata.cost_center,onChange:j=>x("cost_center",j.target.value)})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"User Preview"]}),e.jsx(Q,{children:"See how the user will appear in the system"})]}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:n.name||"User Name"}),n.is_verified&&e.jsxs(W,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Verified"]}),n.is_2fa_enabled&&e.jsxs(W,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Ae,{className:"w-3 h-3 mr-1"}),"2FA"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:n.email||"user@example.com"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[n.position||"Position"," • ",n.organization||"Organization"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(W,{className:S(n.role).color,children:[e.jsx(A,{className:"w-3 h-3 mr-1"}),S(n.role).label]}),e.jsxs(W,{className:b(n.status).color,children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),b(n.status).label]}),n.department&&e.jsx(W,{className:"bg-purple-100 text-purple-800",children:n.department})]})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx(k,{type:"button",variant:"outline",onClick:w,disabled:r,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:r,className:"bg-blue-600 hover:bg-blue-700",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Create User"]})})]})]})]})})},kV=({isOpen:t,onClose:s,user:a,onEdit:r,onClone:n,onDelete:i})=>{const[l,c]=y.useState("overview"),o=[{id:1,name:"User Management",code:"users.manage",category:"user_management",risk_level:"high",is_active:!0},{id:2,name:"Role Management",code:"roles.manage",category:"role_management",risk_level:"critical",is_active:!0},{id:3,name:"System Administration",code:"system.admin",category:"system_management",risk_level:"critical",is_active:!0},{id:4,name:"Dashboard Access",code:"dashboard.view",category:"general",risk_level:"low",is_active:!0}],d=[{id:1,action:"User logged in",timestamp:"2024-01-25 14:30:00",ip:"192.168.1.50",user_agent:"Chrome 120.0.0.0",location:"San Francisco, CA"},{id:2,action:"Password changed",timestamp:"2024-01-24 10:15:00",ip:"192.168.1.50",user_agent:"Chrome 120.0.0.0",location:"San Francisco, CA"},{id:3,action:"Role updated",timestamp:"2024-01-20 16:45:00",ip:"192.168.1.100",user_agent:"Admin Panel",location:"System"},{id:4,action:"2FA enabled",timestamp:"2024-01-18 09:30:00",ip:"192.168.1.50",user_agent:"Chrome 120.0.0.0",location:"San Francisco, CA"},{id:5,action:"Profile updated",timestamp:"2024-01-15 14:20:00",ip:"192.168.1.50",user_agent:"Chrome 120.0.0.0",location:"San Francisco, CA"}],u=[{id:1,device:"Chrome on Windows",ip:"192.168.1.50",location:"San Francisco, CA",last_activity:"2024-01-25 14:30:00",status:"active"},{id:2,device:"Safari on iPhone",ip:"203.0.113.45",location:"New York, NY",last_activity:"2024-01-24 18:20:00",status:"expired"},{id:3,device:"Firefox on Mac",ip:"198.51.100.123",location:"Austin, TX",last_activity:"2024-01-23 11:15:00",status:"expired"}],m=[{date:"2024-01-25",login_count:3,actions_performed:15,avg_session_duration:"2h 30m"},{date:"2024-01-24",login_count:2,actions_performed:12,avg_session_duration:"1h 45m"},{date:"2024-01-23",login_count:1,actions_performed:8,avg_session_duration:"3h 15m"},{date:"2024-01-22",login_count:2,actions_performed:10,avg_session_duration:"2h 10m"},{date:"2024-01-21",login_count:1,actions_performed:6,avg_session_duration:"1h 30m"}],h=y.useCallback(()=>{s()},[s]),x=y.useCallback(()=>{r(a),s()},[r,a,s]),f=y.useCallback(()=>{n(a),s()},[n,a,s]),p=y.useCallback(()=>{i(a),s()},[i,a,s]);if(!t||!a)return null;const g=j=>{switch(j){case"active":return{icon:Me,color:"bg-green-100 text-green-800",label:"Active"};case"inactive":return{icon:Cs,color:"bg-gray-100 text-gray-800",label:"Inactive"};case"pending":return{icon:et,color:"bg-yellow-100 text-yellow-800",label:"Pending"};case"suspended":return{icon:Qe,color:"bg-red-100 text-red-800",label:"Suspended"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:j}}},w=j=>{switch(j){case"super_admin":return{icon:Ae,color:"bg-red-100 text-red-800",label:"Super Admin"};case"org_admin":return{icon:Ta,color:"bg-blue-100 text-blue-800",label:"Org Admin"};case"agent":return{icon:Pe,color:"bg-green-100 text-green-800",label:"Agent"};case"client":return{icon:da,color:"bg-purple-100 text-purple-800",label:"Client"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:j}}},S=j=>{switch(j){case"user_management":return Pe;case"role_management":return Ae;case"system_management":return Te;case"general":return ze;default:return Te}},b=j=>{switch(j){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},A=g(a.status).icon,v=w(a.role).icon;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(k,{variant:"outline",size:"sm",onClick:x,className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Edit"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:f,className:"flex items-center gap-2",children:[e.jsx(Ht,{className:"w-4 h-4"}),"Clone"]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:p,className:"flex items-center gap-2 text-red-600 hover:text-red-700",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Delete"]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:h,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsx("div",{className:"p-6",children:e.jsxs(kt,{value:l,onValueChange:c,className:"space-y-4",children:[e.jsxs(wt,{className:"grid w-full grid-cols-5",children:[e.jsx(pe,{value:"overview",children:"Overview"}),e.jsx(pe,{value:"permissions",children:"Permissions"}),e.jsx(pe,{value:"sessions",children:"Sessions"}),e.jsx(pe,{value:"activity",children:"Activity"}),e.jsx(pe,{value:"analytics",children:"Analytics"})]}),e.jsxs(ge,{value:"overview",className:"space-y-6",children:[e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"User Information"]})}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),e.jsx("p",{className:"text-base text-gray-700",children:a.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),e.jsx("p",{className:"text-base text-gray-700",children:a.phone||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Position"}),e.jsx("p",{className:"text-base text-gray-700",children:a.position})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Role"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs(W,{className:w(a.role).color,children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),w(a.role).label]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status"}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs(W,{className:g(a.status).color,children:[e.jsx(A,{className:"w-3 h-3 mr-1"}),g(a.status).label]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Organization"}),e.jsx("p",{className:"text-base text-gray-700",children:a.organization})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Department"}),e.jsx("p",{className:"text-base text-gray-700",children:a.department})]})]})]})})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-5 h-5"}),"Location & Timezone"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pr,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Location: ",a.location||"Not specified"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Timezone: ",a.timezone]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Created: ",new Date(a.created_at).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Last Updated: ",new Date(a.updated_at).toLocaleDateString()]})]})]})]})})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Account Security"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Email Verified: ",a.is_verified?"Yes":"No"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["2FA Enabled: ",a.is_2fa_enabled?"Yes":"No"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Login Count: ",a.login_count]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Last Login: ",a.last_login?new Date(a.last_login).toLocaleString():"Never"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["User ID: ",a.id]})]})]})]})})]}),a.metadata&&e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"Employee Information"]})}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Employee ID: ",a.metadata.employee_id||"Not assigned"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Hire Date: ",a.metadata.hire_date||"Not specified"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Manager: ",a.metadata.manager||"Not assigned"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ta,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Cost Center: ",a.metadata.cost_center||"Not assigned"]})]})]})]})})]})]}),e.jsx(ge,{value:"permissions",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"User Permissions"]}),e.jsxs(Q,{children:[o.length," permissions currently assigned to this user"]})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-3",children:o.map(j=>{const N=S(j.category);return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:j.code}),e.jsx("p",{className:"text-xs text-gray-400",children:j.category})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(W,{className:`${b(j.risk_level)} border`,children:j.risk_level.charAt(0).toUpperCase()+j.risk_level.slice(1)}),e.jsx("div",{className:"mt-1",children:e.jsx(W,{className:j.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:j.is_active?"Active":"Inactive"})})]})]},j.id)})})})]})}),e.jsx(ge,{value:"sessions",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"Active Sessions"]}),e.jsxs(Q,{children:[u.filter(j=>j.status==="active").length," active sessions"]})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-3",children:u.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(vt,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.device}),e.jsxs("p",{className:"text-sm text-gray-500",children:["IP: ",j.ip]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Location: ",j.location]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(W,{className:j.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:j.status.charAt(0).toUpperCase()+j.status.slice(1)}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Last: ",new Date(j.last_activity).toLocaleString()]})]})]},j.id))})})]})}),e.jsx(ge,{value:"activity",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(vt,{className:"w-5 h-5"}),"User Activity"]}),e.jsx(Q,{children:"Recent activity and actions performed by this user"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-3",children:d.map(j=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mt-1",children:e.jsx(vt,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.action}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["IP: ",j.ip]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-400",children:j.location}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-400",children:new Date(j.timestamp).toLocaleString()})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:j.user_agent})]})]},j.id))})})]})}),e.jsx(ge,{value:"analytics",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-5 h-5"}),"Usage Analytics"]}),e.jsx(Q,{children:"User activity patterns and statistics"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.reduce((j,N)=>j+N.login_count,0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Logins (5 days)"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:m.reduce((j,N)=>j+N.actions_performed,0)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Total Actions"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"2h 15m"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Avg Session Duration"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Daily Usage (Last 5 Days)"}),e.jsx("div",{className:"space-y-2",children:m.map((j,N)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600",children:j.date}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[j.login_count," logins"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[j.actions_performed," actions"]}),e.jsx("span",{className:"text-sm text-gray-600",children:j.avg_session_duration})]})]},N))})]})]})})]})})]})})})]})})},AV=({isOpen:t,onClose:s,user:a,onSubmit:r,loading:n=!1})=>{const[i,l]=y.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"agent",organization:"TechCorp Inc.",department:"IT",position:"",location:"",timezone:"America/New_York",is_verified:!1,is_2fa_enabled:!1,status:"pending",permissions:[],metadata:{employee_id:"",hire_date:"",manager:"",cost_center:""}}),[c,o]=y.useState({}),[d,u]=y.useState(!1),[m,h]=y.useState(!1),[x,f]=y.useState(!1);y.useEffect(()=>{var D,E,P,R;a&&(l({name:a.name||"",email:a.email||"",phone:a.phone||"",password:"",confirmPassword:"",role:a.role||"agent",organization:a.organization||"TechCorp Inc.",department:a.department||"IT",position:a.position||"",location:a.location||"",timezone:a.timezone||"America/New_York",is_verified:a.is_verified||!1,is_2fa_enabled:a.is_2fa_enabled||!1,status:a.status||"pending",permissions:a.permissions||[],metadata:{employee_id:((D=a.metadata)==null?void 0:D.employee_id)||"",hire_date:((E=a.metadata)==null?void 0:E.hire_date)||"",manager:((P=a.metadata)==null?void 0:P.manager)||"",cost_center:((R=a.metadata)==null?void 0:R.cost_center)||""}}),f(!1),o({}))},[a]);const p=y.useCallback((D,E)=>{l(P=>({...P,[D]:E})),c[D]&&o(P=>({...P,[D]:null})),D==="password"&&f(!0)},[c]),g=y.useCallback((D,E)=>{l(P=>({...P,metadata:{...P.metadata,[D]:E}}))},[]);y.useCallback((D,E)=>{l(P=>({...P,permissions:E?[...P.permissions,D]:P.permissions.filter(R=>R!==D)}))},[]);const w=y.useCallback(()=>{const D=Date.now().toString().slice(-6),E=Math.floor(Math.random()*1e3).toString().padStart(3,"0"),P=`EMP${D}${E}`;g("employee_id",P)},[g]),S=y.useCallback(()=>{l(D=>({...D,password:"",confirmPassword:""})),f(!1),o(D=>({...D,password:null,confirmPassword:null}))},[]),b=y.useCallback(()=>{const D={};return i.name.trim()||(D.name="User name is required"),i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(D.email="Please enter a valid email address"):D.email="Email is required",x&&(i.password?i.password.length<8&&(D.password="Password must be at least 8 characters long"):D.password="Password is required",i.password!==i.confirmPassword&&(D.confirmPassword="Passwords do not match")),i.role||(D.role="Role is required"),i.organization||(D.organization="Organization is required"),i.department||(D.department="Department is required"),i.position||(D.position="Position is required"),o(D),Object.keys(D).length===0},[i,x]),A=y.useCallback(async D=>{if(D.preventDefault(),!!b())try{const E={...i};x||(delete E.password,delete E.confirmPassword),await r(E)}catch(E){console.error("Failed to update user:",E)}},[i,x,r,b]),v=y.useCallback(()=>{n||(l({name:"",email:"",phone:"",password:"",confirmPassword:"",role:"agent",organization:"TechCorp Inc.",department:"IT",position:"",location:"",timezone:"America/New_York",is_verified:!1,is_2fa_enabled:!1,status:"pending",permissions:[],metadata:{employee_id:"",hire_date:"",manager:"",cost_center:""}}),o({}),f(!1),s())},[n,s]),j=D=>{switch(D){case"super_admin":return{icon:Ae,color:"bg-red-100 text-red-800",label:"Super Admin"};case"org_admin":return{icon:Ta,color:"bg-blue-100 text-blue-800",label:"Org Admin"};case"agent":return{icon:Pe,color:"bg-green-100 text-green-800",label:"Agent"};case"client":return{icon:da,color:"bg-purple-100 text-purple-800",label:"Client"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:D}}},N=D=>{switch(D){case"active":return{icon:Me,color:"bg-green-100 text-green-800",label:"Active"};case"inactive":return{icon:Cs,color:"bg-gray-100 text-gray-800",label:"Inactive"};case"pending":return{icon:et,color:"bg-yellow-100 text-yellow-800",label:"Pending"};case"suspended":return{icon:Qe,color:"bg-red-100 text-red-800",label:"Suspended"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:D}}};if(!t||!a)return null;const O=j(i.role).icon,C=N(i.status).icon;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Ye,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit User"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Update user information and settings"})]})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:v,disabled:n,className:"text-gray-400 hover:text-gray-600",children:e.jsx(Je,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:A,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Basic Information"]}),e.jsx(Q,{children:"Update the user's personal and contact information"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx(K,{id:"name",placeholder:"e.g., John Doe",value:i.name,onChange:D=>p("name",D.target.value),className:c.name?"border-red-300":""}),c.name&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.name})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx(K,{id:"email",type:"email",placeholder:"e.g., john.doe@example.com",value:i.email,onChange:D=>p("email",D.target.value),className:c.email?"border-red-300":""}),c.email&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx(K,{id:"phone",type:"tel",placeholder:"e.g., +1-555-0123",value:i.phone,onChange:D=>p("phone",D.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position *"}),e.jsx(K,{id:"position",placeholder:"e.g., Software Engineer",value:i.position,onChange:D=>p("position",D.target.value),className:c.position?"border-red-300":""}),c.position&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.position})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsx(K,{id:"location",placeholder:"e.g., San Francisco, CA",value:i.location,onChange:D=>p("location",D.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"timezone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),e.jsxs(ie,{value:i.timezone,onValueChange:D=>p("timezone",D),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx(T,{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx(T,{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx(T,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),e.jsx(T,{value:"Europe/London",children:"London (GMT)"}),e.jsx(T,{value:"Europe/Paris",children:"Paris (CET)"}),e.jsx(T,{value:"Asia/Tokyo",children:"Tokyo (JST)"}),e.jsx(T,{value:"Asia/Shanghai",children:"Shanghai (CST)"})]})]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Account Settings"]}),e.jsx(Q,{children:"Update user account and security settings"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Password"}),e.jsx("p",{className:"text-xs text-gray-500",children:x?"Password will be updated":"Leave blank to keep current password"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(k,{type:"button",variant:"outline",size:"sm",onClick:()=>f(!0),className:"text-xs",children:"Change Password"}),x&&e.jsxs(k,{type:"button",variant:"ghost",size:"sm",onClick:S,className:"text-xs text-gray-500",children:[e.jsx(ws,{className:"w-3 h-3 mr-1"}),"Reset"]})]})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"password",type:d?"text":"password",placeholder:"Enter new password",value:i.password,onChange:D=>p("password",D.target.value),className:c.password?"border-red-300 pr-10":"pr-10"}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!d),children:d?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),c.password&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.password})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"confirmPassword",type:m?"text":"password",placeholder:"Confirm new password",value:i.confirmPassword,onChange:D=>p("confirmPassword",D.target.value),className:c.confirmPassword?"border-red-300 pr-10":"pr-10"}),e.jsx(k,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!m),children:m?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]}),c.confirmPassword&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.confirmPassword})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"Email Verified"}),e.jsx("p",{className:"text-xs text-gray-500",children:"User has verified their email address"})]}),e.jsx(de,{checked:i.is_verified,onCheckedChange:D=>p("is_verified",D)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium text-gray-700",children:"2FA Enabled"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable two-factor authentication"})]}),e.jsx(de,{checked:i.is_2fa_enabled,onCheckedChange:D=>p("is_2fa_enabled",D)})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Status"}),e.jsxs(ie,{value:i.status,onValueChange:D=>p("status",D),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})]})})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Ta,{className:"w-5 h-5"}),"Organization & Role"]}),e.jsx(Q,{children:"Update user's organization, department, and role assignment"})]}),e.jsx(B,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization *"}),e.jsxs(ie,{value:i.organization,onValueChange:D=>p("organization",D),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"TechCorp Inc.",children:"TechCorp Inc."}),e.jsx(T,{value:"ClientCorp Ltd.",children:"ClientCorp Ltd."}),e.jsx(T,{value:"PartnerOrg LLC",children:"PartnerOrg LLC"})]})]}),c.organization&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.organization})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),e.jsxs(ie,{value:i.department,onValueChange:D=>p("department",D),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"IT",children:"IT"}),e.jsx(T,{value:"HR",children:"HR"}),e.jsx(T,{value:"Support",children:"Support"}),e.jsx(T,{value:"Sales",children:"Sales"}),e.jsx(T,{value:"Marketing",children:"Marketing"}),e.jsx(T,{value:"Finance",children:"Finance"}),e.jsx(T,{value:"Operations",children:"Operations"})]})]}),c.department&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.department})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs(ie,{value:i.role,onValueChange:D=>p("role",D),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"super_admin",children:"Super Administrator"}),e.jsx(T,{value:"org_admin",children:"Organization Administrator"}),e.jsx(T,{value:"agent",children:"Agent"}),e.jsx(T,{value:"client",children:"Client"})]})]}),c.role&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:c.role})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Sr,{className:"w-5 h-5"}),"Employee Information"]}),e.jsx(Q,{children:"Update additional employee details and metadata"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{placeholder:"e.g., EMP001",value:i.metadata.employee_id,onChange:D=>g("employee_id",D.target.value)}),e.jsx(k,{type:"button",variant:"outline",onClick:w,className:"whitespace-nowrap",children:"Generate"})]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx(K,{type:"date",value:i.metadata.hire_date,onChange:D=>g("hire_date",D.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manager"}),e.jsx(K,{placeholder:"e.g., John Smith",value:i.metadata.manager,onChange:D=>g("manager",D.target.value)})]}),e.jsxs("div",{children:[e.jsx(_,{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Center"}),e.jsx(K,{placeholder:"e.g., IT-001",value:i.metadata.cost_center,onChange:D=>g("cost_center",D.target.value)})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"User Preview"]}),e.jsx(Q,{children:"See how the user will appear after updates"})]}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center gap-3 p-4 border border-gray-200 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i.name||"User Name"}),i.is_verified&&e.jsxs(W,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),"Verified"]}),i.is_2fa_enabled&&e.jsxs(W,{className:"bg-blue-100 text-blue-800",children:[e.jsx(Ae,{className:"w-3 h-3 mr-1"}),"2FA"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:i.email||"user@example.com"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[i.position||"Position"," • ",i.organization||"Organization"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(W,{className:j(i.role).color,children:[e.jsx(O,{className:"w-3 h-3 mr-1"}),j(i.role).label]}),e.jsxs(W,{className:N(i.status).color,children:[e.jsx(C,{className:"w-3 h-3 mr-1"}),N(i.status).label]}),i.department&&e.jsx(W,{className:"bg-purple-100 text-purple-800",children:i.department})]})]})]})})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx(k,{type:"button",variant:"outline",onClick:v,disabled:n,children:"Cancel"}),e.jsx(k,{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Update User"]})})]})]})]})})},CV=()=>{const[t,s]=y.useState([]),[a,r]=y.useState(!0),[n,i]=y.useState(null),[l,c]=y.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10}),[o,d]=y.useState({search:"",status:"all",role:"all",organization:"all",department:"all"}),[u,m]=y.useState(null),[h,x]=y.useState(!1),[f,p]=y.useState(!1),[g,w]=y.useState(!1),[S,b]=y.useState(!1),[A,v]=y.useState(!1),j=y.useMemo(()=>[{id:1,name:"John Doe",email:"john.doe@example.com",phone:"+1-555-0123",avatar:null,status:"active",role:"super_admin",organization:"TechCorp Inc.",department:"IT",position:"Chief Technology Officer",location:"San Francisco, CA",timezone:"America/Los_Angeles",last_login:"2024-01-25 14:30:00",created_at:"2023-01-15 10:00:00",updated_at:"2024-01-25 14:30:00",is_verified:!0,is_2fa_enabled:!0,login_count:156,permissions:["users.manage","roles.manage","system.admin"],metadata:{employee_id:"EMP001",hire_date:"2023-01-15",manager:"CEO",cost_center:"IT-001"}},{id:2,name:"Jane Smith",email:"jane.smith@example.com",phone:"+1-555-0124",avatar:null,status:"active",role:"org_admin",organization:"TechCorp Inc.",department:"HR",position:"HR Director",location:"New York, NY",timezone:"America/New_York",last_login:"2024-01-24 09:15:00",created_at:"2023-03-20 14:30:00",updated_at:"2024-01-24 09:15:00",is_verified:!0,is_2fa_enabled:!1,login_count:89,permissions:["users.view","hr.manage"],metadata:{employee_id:"EMP002",hire_date:"2023-03-20",manager:"COO",cost_center:"HR-001"}},{id:3,name:"Bob Johnson",email:"bob.johnson@example.com",phone:"+1-555-0125",avatar:null,status:"inactive",role:"agent",organization:"TechCorp Inc.",department:"Support",position:"Support Specialist",location:"Austin, TX",timezone:"America/Chicago",last_login:"2024-01-20 16:45:00",created_at:"2023-06-10 11:00:00",updated_at:"2024-01-20 16:45:00",is_verified:!0,is_2fa_enabled:!1,login_count:45,permissions:["support.view","tickets.manage"],metadata:{employee_id:"EMP003",hire_date:"2023-06-10",manager:"Support Manager",cost_center:"SUP-001"}},{id:4,name:"Alice Brown",email:"alice.brown@example.com",phone:"+1-555-0126",avatar:null,status:"active",role:"client",organization:"ClientCorp Ltd.",department:"Marketing",position:"Marketing Manager",location:"London, UK",timezone:"Europe/London",last_login:"2024-01-25 12:00:00",created_at:"2023-08-15 09:00:00",updated_at:"2024-01-25 12:00:00",is_verified:!0,is_2fa_enabled:!0,login_count:67,permissions:["dashboard.view","reports.view"],metadata:{client_id:"CLI001",contract_start:"2023-08-15",account_manager:"John Doe",subscription_plan:"Enterprise"}},{id:5,name:"Charlie Wilson",email:"charlie.wilson@example.com",phone:"+1-555-0127",avatar:null,status:"pending",role:"agent",organization:"TechCorp Inc.",department:"Sales",position:"Sales Representative",location:"Chicago, IL",timezone:"America/Chicago",last_login:null,created_at:"2024-01-20 15:00:00",updated_at:"2024-01-20 15:00:00",is_verified:!1,is_2fa_enabled:!1,login_count:0,permissions:["sales.view"],metadata:{employee_id:"EMP004",hire_date:"2024-01-20",manager:"Sales Manager",cost_center:"SAL-001"}}],[]),N=y.useCallback(async()=>{try{r(!0),await new Promise(se=>setTimeout(se,1e3));let Y=[...j];if(o.search){const se=o.search.toLowerCase();Y=Y.filter(ve=>ve.name.toLowerCase().includes(se)||ve.email.toLowerCase().includes(se)||ve.organization.toLowerCase().includes(se))}o.status!=="all"&&(Y=Y.filter(se=>se.status===o.status)),o.role!=="all"&&(Y=Y.filter(se=>se.role===o.role)),o.organization!=="all"&&(Y=Y.filter(se=>se.organization===o.organization)),o.department!=="all"&&(Y=Y.filter(se=>se.department===o.department)),s(Y),c(se=>({...se,totalItems:Y.length,totalPages:Math.ceil(Y.length/se.itemsPerPage)}))}catch(Y){i("Failed to load users"),console.error("Error loading users:",Y)}finally{r(!1)}},[o]);y.useEffect(()=>{N()},[N]);const O=y.useCallback((Y,se)=>{d(ve=>({...ve,[Y]:se}))},[]),C=y.useCallback(Y=>{c(se=>({...se,currentPage:Y}))},[]),D=y.useCallback(()=>{x(!0)},[]),E=y.useCallback(Y=>{m(Y),p(!0)},[]),P=y.useCallback(Y=>{m(Y),w(!0)},[]),R=y.useCallback(Y=>{alert(`Cloning user: ${Y.name}`)},[]),U=y.useCallback(Y=>{m(Y),b(!0)},[]),I=y.useCallback(async()=>{if(u)try{v(!0),await new Promise(Y=>setTimeout(Y,1e3)),s(Y=>Y.filter(se=>se.id!==u.id)),b(!1),m(null),alert(`User "${u.name}" has been deleted successfully`)}catch(Y){alert(`Failed to delete user: ${Y.message}`)}finally{v(!1)}},[u]),L=y.useCallback(async Y=>{try{v(!0),await new Promise(ve=>setTimeout(ve,1e3));const se={...Y,id:Math.max(...t.map(ve=>ve.id))+1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_login:null,login_count:0,permissions:Y.permissions||[],metadata:{...Y.metadata,employee_id:`EMP${String(Math.max(...t.map(ve=>{var Be,ae;return parseInt(((ae=(Be=ve.metadata)==null?void 0:Be.employee_id)==null?void 0:ae.replace("EMP",""))||"0")}))+1).padStart(3,"0")}`}};s(ve=>[se,...ve]),x(!1),alert(`User "${se.name}" has been created successfully`)}catch(se){alert(`Failed to create user: ${se.message}`)}finally{v(!1)}},[t]),Z=y.useCallback(async Y=>{try{v(!0),await new Promise(se=>setTimeout(se,1e3)),s(se=>se.map(ve=>ve.id===u.id?{...ve,...Y,updated_at:new Date().toISOString()}:ve)),p(!1),m(null),alert(`User "${Y.name}" has been updated successfully`)}catch(se){alert(`Failed to update user: ${se.message}`)}finally{v(!1)}},[u]),q=Y=>{switch(Y){case"active":return{icon:Me,color:"bg-green-100 text-green-800",label:"Active"};case"inactive":return{icon:Cs,color:"bg-gray-100 text-gray-800",label:"Inactive"};case"pending":return{icon:et,color:"bg-yellow-100 text-yellow-800",label:"Pending"};case"suspended":return{icon:nt,color:"bg-red-100 text-red-800",label:"Suspended"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:Y}}},z=Y=>{switch(Y){case"super_admin":return{icon:Ae,color:"bg-red-100 text-red-800",label:"Super Admin"};case"org_admin":return{icon:Ta,color:"bg-blue-100 text-blue-800",label:"Org Admin"};case"agent":return{icon:Pe,color:"bg-green-100 text-green-800",label:"Agent"};case"client":return{icon:da,color:"bg-purple-100 text-purple-800",label:"Client"};default:return{icon:Te,color:"bg-gray-100 text-gray-800",label:Y}}},ne=y.useMemo(()=>{const Y=t.length,se=t.filter(ae=>ae.status==="active").length,ve=t.filter(ae=>ae.status==="pending").length,Be=t.filter(ae=>ae.is_verified).length;return{totalUsers:Y,activeUsers:se,pendingUsers:ve,verifiedUsers:Be}},[t]);return a?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx(ka,{className:"h-8 w-64"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((Y,se)=>e.jsx(ka,{className:"h-24"},se))}),e.jsx(ka,{className:"h-96"})]})}):n?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(nt,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Users"}),e.jsx("p",{className:"text-gray-600 mb-4",children:n}),e.jsx(k,{onClick:N,children:"Try Again"})]})})})})}):e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage system users, roles, and permissions"})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4 sm:mt-0",children:[e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(rj,{className:"w-4 h-4 mr-2"}),"Import"]}),e.jsxs(k,{onClick:D,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Create User"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Pe,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ne.totalUsers})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ne.activeUsers})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(et,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ne.pendingUsers})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Ae,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Verified Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ne.verifiedUsers})]})]})})})]}),e.jsx(F,{className:"mb-6",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(K,{placeholder:"Search users...",value:o.search,onChange:Y=>O("search",Y.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs(ie,{value:o.status,onValueChange:Y=>O("status",Y),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"inactive",children:"Inactive"}),e.jsx(T,{value:"pending",children:"Pending"}),e.jsx(T,{value:"suspended",children:"Suspended"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsxs(ie,{value:o.role,onValueChange:Y=>O("role",Y),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Roles"}),e.jsx(T,{value:"super_admin",children:"Super Admin"}),e.jsx(T,{value:"org_admin",children:"Org Admin"}),e.jsx(T,{value:"agent",children:"Agent"}),e.jsx(T,{value:"client",children:"Client"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organization"}),e.jsxs(ie,{value:o.organization,onValueChange:Y=>O("organization",Y),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Organizations"}),e.jsx(T,{value:"TechCorp Inc.",children:"TechCorp Inc."}),e.jsx(T,{value:"ClientCorp Ltd.",children:"ClientCorp Ltd."})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),e.jsxs(ie,{value:o.department,onValueChange:Y=>O("department",Y),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Departments"}),e.jsx(T,{value:"IT",children:"IT"}),e.jsx(T,{value:"HR",children:"HR"}),e.jsx(T,{value:"Support",children:"Support"}),e.jsx(T,{value:"Sales",children:"Sales"}),e.jsx(T,{value:"Marketing",children:"Marketing"})]})]})]})]})})}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{children:["Users (",t.length,")"]}),e.jsx(Q,{children:"Manage system users and their access permissions"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"User"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Organization"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Last Login"}),e.jsx("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:t.map(Y=>{const se=q(Y.status).icon,ve=z(Y.role).icon;return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"font-medium text-gray-900",children:Y.name}),e.jsx("p",{className:"text-sm text-gray-500",children:Y.email}),e.jsx("p",{className:"text-xs text-gray-400",children:Y.position})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center",children:e.jsxs(W,{className:z(Y.role).color,children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),z(Y.role).label]})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:Y.organization}),e.jsx("p",{className:"text-xs text-gray-500",children:Y.department})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center",children:e.jsxs(W,{className:q(Y.status).color,children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),q(Y.status).label]})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"text-sm text-gray-900",children:Y.last_login?e.jsxs("div",{children:[e.jsx("p",{children:new Date(Y.last_login).toLocaleDateString()}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(Y.last_login).toLocaleTimeString()})]}):e.jsx("span",{className:"text-gray-400",children:"Never"})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx(Gj,{children:e.jsxs(Ea,{children:[e.jsx(ua,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(la,{className:"w-4 h-4"})})}),e.jsxs(ma,{align:"end",children:[e.jsx(qn,{children:"Actions"}),e.jsx(Ia,{}),e.jsxs(st,{onClick:()=>P(Y),children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"View Details"]}),e.jsxs(st,{onClick:()=>E(Y),children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit User"]}),e.jsxs(st,{onClick:()=>R(Y),children:[e.jsx(Ht,{className:"w-4 h-4 mr-2"}),"Clone User"]}),e.jsx(Ia,{}),e.jsxs(st,{onClick:()=>U(Y),className:"text-red-600",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete User"]})]})]})})})]},Y.id)})})]})}),l.totalPages>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",(l.currentPage-1)*l.itemsPerPage+1," to"," ",Math.min(l.currentPage*l.itemsPerPage,l.totalItems)," of"," ",l.totalItems," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{variant:"outline",size:"sm",onClick:()=>C(l.currentPage-1),disabled:l.currentPage===1,children:"Previous"}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",l.currentPage," of ",l.totalPages]}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>C(l.currentPage+1),disabled:l.currentPage===l.totalPages,children:"Next"})]})]})]})]}),e.jsx(SV,{isOpen:h,onClose:()=>x(!1),onSubmit:L,loading:A}),e.jsx(AV,{isOpen:f,onClose:()=>p(!1),user:u,onSubmit:Z,loading:A}),e.jsx(kV,{isOpen:g,onClose:()=>w(!1),user:u,onEdit:E,onClone:R,onDelete:U}),S&&u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(nt,{className:"w-6 h-6 text-red-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete User"})]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete the user ",e.jsxs("strong",{children:['"',u.name,'"']}),"? This action cannot be undone and will remove all access permissions."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(k,{variant:"outline",onClick:()=>b(!1),disabled:A,children:"Cancel"}),e.jsx(k,{variant:"destructive",onClick:I,disabled:A,children:A?"Deleting...":"Delete User"})]})]})})]})})},_V=()=>{const[t,s]=y.useState("7d"),[a,r]=y.useState(new Date),[n,i]=y.useState({realtime:{activeChats:5,pendingChats:2,avgResponseTime:"2.3 menit",currentCSAT:4.7,todayResolved:12,onlineTime:"6h 45m"},goals:{monthly:{targetCSAT:4.5,currentCSAT:4.7,targetResolutions:100,currentResolutions:78,targetAHT:"5 menit",currentAHT:"4.2 menit"}},followUps:[{id:1,customer:"PT Maju Jaya",issue:"Masalah integrasi API",priority:"high",dueDate:"2024-01-26T14:00:00Z",tags:["technical","api"]},{id:2,customer:"CV Digital Solution",issue:"Follow-up training user",priority:"medium",dueDate:"2024-01-27T10:00:00Z",tags:["training","onboarding"]},{id:3,customer:"StartupXYZ",issue:"Konfirmasi upgrade plan",priority:"low",dueDate:"2024-01-28T16:00:00Z",tags:["sales","upgrade"]}]}),[l,c]=y.useState([{date:"19 Jan",csat:4.2,aht:5.1,resolved:8},{date:"20 Jan",csat:4.4,aht:4.8,resolved:12},{date:"21 Jan",csat:4.3,aht:5.2,resolved:9},{date:"22 Jan",csat:4.6,aht:4.5,resolved:15},{date:"23 Jan",csat:4.5,aht:4.7,resolved:11},{date:"24 Jan",csat:4.8,aht:4.2,resolved:14},{date:"25 Jan",csat:4.7,aht:4.3,resolved:12}]),[o,d]=y.useState([{id:1,title:"Customer Hero",description:"Mencapai CSAT 4.5+ selama 7 hari berturut-turut",icon:mx,unlocked:!0,unlockedDate:"2024-01-20"},{id:2,title:"Speed Master",description:"Average Handle Time di bawah 5 menit",icon:Et,unlocked:!0,unlockedDate:"2024-01-22"},{id:3,title:"Resolution Expert",description:"Menyelesaikan 50+ chat dalam sebulan",icon:ba,unlocked:!1,progress:78}]);y.useEffect(()=>{const h=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(h)},[]);const u=h=>{const x={high:{color:"red",label:"High"},medium:{color:"yellow",label:"Medium"},low:{color:"green",label:"Low"}},f=x[h]||x.medium;return e.jsx(W,{variant:f.color,children:f.label})},m=h=>{const x=new Date,p=new Date(h)-x;if(p<0)return"Overdue";const g=Math.floor(p/(1e3*60*60)),w=Math.floor(p%(1e3*60*60)/(1e3*60));return g>24?`${Math.floor(g/24)}d ${g%24}h`:g>0?`${g}h ${w}m`:`${w}m`};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"My Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Online sejam ",n.realtime.onlineTime]})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a.toLocaleTimeString("id-ID")," WIB"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),t==="7d"?"7 Hari":"30 Hari"]}),e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(Nw,{className:"w-4 h-4 mr-2"}),"Break"]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Obrolan Aktif"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mb-1",children:n.realtime.activeChats}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["+",n.realtime.pendingChats," pending"]})]})]}),e.jsx("div",{className:"p-2.5 bg-blue-50 rounded-lg flex-shrink-0",children:e.jsx(Le,{className:"w-5 h-5 text-blue-600"})})]})})}),e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"CSAT Saya"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:n.realtime.currentCSAT}),e.jsx(os,{className:"w-4 h-4 text-yellow-500 fill-current"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(hx,{className:"w-3 h-3 text-green-500"}),e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"+0.2 dari kemarin"})]})]}),e.jsx("div",{className:"p-2.5 bg-yellow-50 rounded-lg flex-shrink-0",children:e.jsx(ww,{className:"w-5 h-5 text-yellow-600"})})]})})}),e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Avg Handle Time"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mb-1",children:n.goals.monthly.currentAHT}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Me,{className:"w-3 h-3 text-green-500"}),e.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Target: ",n.goals.monthly.targetAHT]})]})]}),e.jsx("div",{className:"p-2.5 bg-green-50 rounded-lg flex-shrink-0",children:e.jsx(xx,{className:"w-5 h-5 text-green-600"})})]})})}),e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Resolved Hari Ini"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mb-1",children:n.realtime.todayResolved}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ba,{className:"w-3 h-3 text-purple-500"}),e.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Target: 15/hari"})]})]}),e.jsx("div",{className:"p-2.5 bg-purple-50 rounded-lg flex-shrink-0",children:e.jsx(Me,{className:"w-5 h-5 text-purple-600"})})]})})}),e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Response Time"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600 mb-1",children:n.realtime.avgResponseTime}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(et,{className:"w-3 h-3 text-indigo-500"}),e.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:"Avg minggu ini"})]})]}),e.jsx("div",{className:"p-2.5 bg-indigo-50 rounded-lg flex-shrink-0",children:e.jsx(et,{className:"w-5 h-5 text-indigo-600"})})]})})}),e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Follow-ups"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mb-1",children:n.followUps.length}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(nt,{className:"w-3 h-3 text-orange-500"}),e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Perlu ditindaklanjuti"})]})]}),e.jsx("div",{className:"p-2.5 bg-orange-50 rounded-lg flex-shrink-0",children:e.jsx(dn,{className:"w-5 h-5 text-orange-600"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(F,{className:"hover:shadow-md transition-shadow",children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(Zs,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{children:"Trend Performa"})]}),e.jsx(Q,{className:"mt-1",children:"CSAT dan AHT 7 hari terakhir"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"CSAT"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-gray-600",children:"AHT"})]})]})]})}),e.jsx(B,{className:"pt-0",children:e.jsx("div",{className:"h-72",children:e.jsx(Va,{width:"100%",height:"100%",children:e.jsxs(BN,{data:l,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(Nr,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),e.jsx(Ks,{dataKey:"date",stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Ds,{yAxisId:"left",domain:[4,5],stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:h=>h.toFixed(1)}),e.jsx(Ds,{yAxisId:"right",orientation:"right",domain:[0,8],stroke:"#6b7280",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Xt,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),e.jsx(er,{yAxisId:"left",type:"monotone",dataKey:"csat",stroke:"#fbbf24",strokeWidth:3,name:"CSAT",dot:{fill:"#fbbf24",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#fbbf24",strokeWidth:2}}),e.jsx(er,{yAxisId:"right",type:"monotone",dataKey:"aht",stroke:"#10b981",strokeWidth:3,name:"AHT (min)",dot:{fill:"#10b981",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#10b981",strokeWidth:2}})]})})})})]}),e.jsxs(F,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs(V,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(ba,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Target Bulanan"})]}),e.jsx(Q,{className:"mt-1",children:"Progress pencapaian target Januari 2024"})]}),e.jsxs(B,{className:"pt-0 space-y-6",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(os,{className:"w-4 h-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-semibold text-yellow-800",children:"CSAT Target"})]}),e.jsxs("span",{className:"text-sm font-bold text-yellow-700",children:[n.goals.monthly.currentCSAT,"/",n.goals.monthly.targetCSAT]})]}),e.jsx(us,{value:n.goals.monthly.currentCSAT/n.goals.monthly.targetCSAT*100,className:"h-2.5 mb-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-yellow-700",children:["+",(n.goals.monthly.currentCSAT/n.goals.monthly.targetCSAT*100-100).toFixed(1),"% dari target"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(hx,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"On Track"})]})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Resolusi"})]}),e.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[n.goals.monthly.currentResolutions,"/",n.goals.monthly.targetResolutions]})]}),e.jsx(us,{value:n.goals.monthly.currentResolutions/n.goals.monthly.targetResolutions*100,className:"h-2.5 mb-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-blue-700",children:[(n.goals.monthly.currentResolutions/n.goals.monthly.targetResolutions*100).toFixed(0),"% tercapai"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ba,{className:"w-3 h-3 text-blue-500"}),e.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:[n.goals.monthly.targetResolutions-n.goals.monthly.currentResolutions," lagi"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xx,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-semibold text-green-800",children:"Average Handle Time"})]}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:n.goals.monthly.currentAHT})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-green-700",children:["Target: ",n.goals.monthly.targetAHT]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-green-600 font-medium",children:"Target Tercapai!"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs(F,{className:"col-span-2 hover:shadow-md transition-shadow",children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(nt,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{children:"Daftar Follow-up"})]}),e.jsx(Q,{className:"mt-1",children:"Pelanggan yang perlu ditindaklanjuti"})]}),e.jsxs(W,{variant:"blue",className:"px-3 py-1",children:[n.followUps.length," aktif"]})]})}),e.jsx(B,{className:"pt-0",children:e.jsx("div",{className:"space-y-4",children:n.followUps.map(h=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-gray-300 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:h.customer}),u(h.priority)]}),e.jsx("div",{className:`text-sm font-medium px-2 py-1 rounded-full ${m(h.dueDate)==="Overdue"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:m(h.dueDate)})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 leading-relaxed",children:h.issue}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:h.tags.map(x=>e.jsx(W,{variant:"gray",className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 border-gray-200",children:x},x))}),e.jsx(k,{size:"sm",variant:"outline",className:"hover:bg-orange-50 hover:border-orange-300 hover:text-orange-700",children:"Tindak Lanjut"})]})]},h.id))})})]}),e.jsxs(F,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(H,{className:"pb-4",children:[e.jsxs(V,{className:"flex items-center space-x-2 text-lg",children:[e.jsx(mx,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{children:"Pencapaian"})]}),e.jsx(Q,{className:"mt-1",children:"Badge dan milestone Anda"})]}),e.jsx(B,{className:"pt-0 space-y-4",children:o.map(h=>e.jsxs("div",{className:`p-4 rounded-lg border transition-all duration-200 ${h.unlocked?"bg-gradient-to-br from-yellow-50 to-amber-50 border-yellow-200 hover:shadow-sm":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[e.jsx("div",{className:`p-2.5 rounded-lg flex-shrink-0 ${h.unlocked?"bg-yellow-100":"bg-gray-200"}`,children:e.jsx(h.icon,{className:`w-4 h-4 ${h.unlocked?"text-yellow-600":"text-gray-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold text-sm mb-1 ${h.unlocked?"text-yellow-800":"text-gray-700"}`,children:h.title}),e.jsx("p",{className:`text-xs leading-relaxed ${h.unlocked?"text-yellow-700":"text-gray-600"}`,children:h.description})]})]}),h.unlocked?e.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-green-50 rounded-lg border border-green-200",children:[e.jsx(Me,{className:"w-4 h-4 text-green-500"}),e.jsx("div",{className:"flex-1",children:e.jsxs("span",{className:"text-xs font-medium text-green-700",children:["Unlocked ",new Date(h.unlockedDate).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[h.progress,"%"]})]}),e.jsx(us,{value:h.progress,className:"h-2"}),e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:[100-h.progress,"% lagi untuk unlock"]})]})]},h.id))})]})]}),e.jsxs(F,{className:"hover:shadow-md transition-shadow",children:[e.jsxs(H,{className:"pb-4",children:[e.jsx(V,{className:"text-lg",children:"Quick Actions"}),e.jsx(Q,{className:"mt-1",children:"Aksi cepat untuk meningkatkan produktivitas"})]}),e.jsx(B,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-24 flex-col hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mb-2 group-hover:bg-blue-200 transition-colors",children:e.jsx(Qd,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium",children:"Buka Inbox"})]}),e.jsxs(k,{variant:"outline",className:"h-24 flex-col hover:bg-green-50 hover:border-green-300 hover:text-green-700 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg mb-2 group-hover:bg-green-200 transition-colors",children:e.jsx(Pe,{className:"w-6 h-6 text-green-600"})}),e.jsx("span",{className:"text-sm font-medium",children:"Cari Customer"})]}),e.jsxs(k,{variant:"outline",className:"h-24 flex-col hover:bg-purple-50 hover:border-purple-300 hover:text-purple-700 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mb-2 group-hover:bg-purple-200 transition-colors",children:e.jsx(vt,{className:"w-6 h-6 text-purple-600"})}),e.jsx("span",{className:"text-sm font-medium",children:"Knowledge Base"})]}),e.jsxs(k,{variant:"outline",className:"h-24 flex-col hover:bg-orange-50 hover:border-orange-300 hover:text-orange-700 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg mb-2 group-hover:bg-orange-200 transition-colors",children:e.jsx(Mt,{className:"w-6 h-6 text-orange-600"})}),e.jsx("span",{className:"text-sm font-medium",children:"Jadwal Follow-up"})]}),e.jsxs(k,{variant:"outline",className:"h-24 flex-col hover:bg-indigo-50 hover:border-indigo-300 hover:text-indigo-700 transition-all duration-200 group",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg mb-2 group-hover:bg-indigo-200 transition-colors",children:e.jsx(Zs,{className:"w-6 h-6 text-indigo-600"})}),e.jsx("span",{className:"text-sm font-medium",children:"Lihat Laporan"})]})]})})]})]})},PV=()=>{const[t,s]=y.useState(null),[a,r]=y.useState(""),[n,i]=y.useState(""),[l,c]=y.useState("all");y.useState("my-queue");const[o,d]=y.useState("customer-info"),[u,m]=y.useState(!1),[h,x]=y.useState(!1),[f,p]=y.useState(""),[g,w]=y.useState(!1),S=y.useRef(null),[b,A]=y.useState([{id:"session-001",customer:{id:"cust-001",name:"Ahmad Rahman",email:"ahmad.rahman@abccorp.com",company:"PT ABC Corporation",plan:"Enterprise",avatar:null,phone:"+62812345678",lastActivity:"2024-01-25T15:30:00Z",joinDate:"2023-06-15",totalSessions:12,avgRating:4.5},status:"active",priority:"high",startTime:"2024-01-25T15:15:00Z",lastMessage:"2024-01-25T15:29:00Z",waitingTime:2,slaStatus:"warning",unreadCount:2,category:"technical",tags:["api","integration"],messages:[{id:"msg-001",type:"customer",content:"Halo, saya mengalami masalah dengan integrasi API. Status code 401 terus muncul.",timestamp:"2024-01-25T15:15:00Z",delivered:!0,read:!0},{id:"msg-002",type:"agent",content:"Halo Ahmad! Saya akan membantu Anda dengan masalah API ini. Bisakah Anda share endpoint yang Anda gunakan?",timestamp:"2024-01-25T15:17:00Z",delivered:!0,read:!0},{id:"msg-003",type:"customer",content:"Saya menggunakan POST /api/v1/users untuk membuat user baru. API key sudah benar.",timestamp:"2024-01-25T15:20:00Z",delivered:!0,read:!0},{id:"msg-004",type:"customer",content:"Apakah ada perubahan pada authentikasi?",timestamp:"2024-01-25T15:29:00Z",delivered:!0,read:!1}],internalNotes:"Customer menggunakan old API key. Perlu update ke v2. Follow up untuk training tim development mereka."},{id:"session-002",customer:{id:"cust-002",name:"Sari Dewi",email:"sari.dewi@techstart.id",company:"CV TechStart Indonesia",plan:"Professional",avatar:null,phone:"+62821234567",lastActivity:"2024-01-25T14:45:00Z",joinDate:"2023-09-20",totalSessions:8,avgRating:4.8},status:"waiting",priority:"medium",startTime:"2024-01-25T14:30:00Z",lastMessage:"2024-01-25T14:45:00Z",waitingTime:45,slaStatus:"danger",unreadCount:1,category:"billing",tags:["payment","upgrade"],messages:[{id:"msg-005",type:"customer",content:"Saya ingin upgrade ke plan Enterprise. Bagaimana prosesnya?",timestamp:"2024-01-25T14:30:00Z",delivered:!0,read:!0},{id:"msg-006",type:"customer",content:"Apakah ada diskon untuk upgrade annual?",timestamp:"2024-01-25T14:45:00Z",delivered:!0,read:!1}],internalNotes:"High-value customer. Tanyakan ke sales team tentang diskon khusus. Potential upsell opportunity."},{id:"session-003",customer:{id:"cust-003",name:"Budi Santoso",email:"budi@digitalsolutions.com",company:"Digital Solutions Pro",plan:"Basic",avatar:null,phone:"+62813456789",lastActivity:"2024-01-25T13:20:00Z",joinDate:"2024-01-10",totalSessions:3,avgRating:4.2},status:"pending",priority:"low",startTime:"2024-01-25T13:00:00Z",lastMessage:"2024-01-25T13:20:00Z",waitingTime:125,slaStatus:"safe",unreadCount:0,category:"general",tags:["onboarding","training"],messages:[{id:"msg-007",type:"customer",content:"Terima kasih atas bantuan setup awal. Semuanya sudah berjalan dengan baik.",timestamp:"2024-01-25T13:20:00Z",delivered:!0,read:!0}],internalNotes:"New customer. Perlu follow-up training untuk advanced features. Schedule demo session."}]),[v,j]=y.useState(["Halo! Saya akan membantu Anda hari ini.","Terima kasih telah menghubungi support. Saya sedang mengecek masalah Anda.","Apakah masalah ini sudah teratasi?","Saya akan eskalasi masalah ini ke tim teknis.","Terima kasih atas kesabaran Anda."]),[N,O]=y.useState([{id:"kb-001",title:"API Authentication Setup",category:"technical",relevance:95,url:"/kb/api-auth"},{id:"kb-002",title:"Troubleshooting 401 Errors",category:"technical",relevance:90,url:"/kb/401-errors"},{id:"kb-003",title:"Upgrade Pricing Plans",category:"billing",relevance:85,url:"/kb/pricing"}]),[C,D]=y.useState([{id:"hist-001",date:"2024-01-20",type:"chat",summary:"Setup initial configuration",rating:5,agent:"Agent Sarah"},{id:"hist-002",date:"2024-01-15",type:"email",summary:"Welcome onboarding sequence",rating:null,agent:"System"},{id:"hist-003",date:"2024-01-10",type:"phone",summary:"Account activation assistance",rating:4,agent:"Agent Mike"}]),E=(z,ne)=>{const Y={safe:"bg-green-500",warning:"bg-yellow-500",danger:"bg-red-500"};return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Y[z]} ${z==="danger"?"animate-pulse":""}`}),e.jsxs("span",{className:`text-xs ${z==="danger"?"text-red-600":z==="warning"?"text-yellow-600":"text-green-600"}`,children:[ne,"m"]})]})},P=z=>{const ne={high:{color:"red",label:"High"},medium:{color:"yellow",label:"Medium"},low:{color:"green",label:"Low"}},Y=ne[z]||ne.medium;return e.jsx(W,{variant:Y.color,className:"text-xs",children:Y.label})},R=()=>{if(!a.trim()||!t)return;const z={id:`msg-${Date.now()}`,type:"agent",content:a,timestamp:new Date().toISOString(),delivered:!0,read:!1};A(ne=>ne.map(Y=>Y.id===t.id?{...Y,messages:[...Y.messages,z]}:Y)),r("")},U=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),R())},I=z=>{s(z),A(ne=>ne.map(Y=>Y.id===z.id?{...Y,unreadCount:0,messages:Y.messages.map(se=>({...se,read:!0}))}:Y))},L=()=>{m(!1)},Z=()=>{x(!1)},q=b.filter(z=>{const ne=z.customer.name.toLowerCase().includes(n.toLowerCase())||z.customer.company.toLowerCase().includes(n.toLowerCase()),Y=l==="all"||z.status===l;return ne&&Y});return y.useEffect(()=>{S.current&&S.current.scrollIntoView({behavior:"smooth"})},[t==null?void 0:t.messages]),e.jsxs("div",{className:"h-screen flex bg-gray-50 overflow-hidden",children:[e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col shadow-sm flex-shrink-0",children:[e.jsxs("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4 text-blue-600"}),e.jsx("h2",{className:"text-sm font-semibold text-gray-900",children:"My Queue"})]}),e.jsx(W,{variant:"blue",className:"px-2 py-0.5 text-xs",children:q.length})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-2 top-2 h-3 w-3 text-gray-400"}),e.jsx(K,{placeholder:"Cari customer...",value:n,onChange:z=>i(z.target.value),className:"pl-7 h-7 text-xs bg-white border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(ie,{value:l,onValueChange:c,children:[e.jsx(le,{className:"h-7 text-xs bg-white border-gray-300",children:e.jsx(ce,{placeholder:"Filter status"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"Semua Status"}),e.jsx(T,{value:"active",children:"Active"}),e.jsx(T,{value:"waiting",children:"Waiting"}),e.jsx(T,{value:"pending",children:"Pending"})]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:q.map(z=>{var ne;return e.jsxs("div",{onClick:()=>I(z),className:`p-2.5 border-b border-gray-100 cursor-pointer transition-all duration-200 ${(t==null?void 0:t.id)===z.id?"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-l-blue-500":"hover:bg-gray-50 hover:border-l-4 hover:border-l-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-medium text-xs",children:z.customer.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-xs truncate",children:z.customer.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:z.customer.company})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[E(z.slaStatus,z.waitingTime),z.unreadCount>0&&e.jsx(W,{variant:"red",className:"text-xs px-1 py-0.5 animate-pulse",children:z.unreadCount})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[P(z.priority),e.jsx(W,{variant:"blue",className:"text-xs px-1 py-0.5",children:z.category})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[z.tags.slice(0,1).map(Y=>e.jsx(W,{variant:"gray",className:"text-xs px-1 py-0.5 bg-gray-100 text-gray-700 border-gray-200",children:Y},Y)),z.tags.length>1&&e.jsxs(W,{variant:"gray",className:"text-xs px-1 py-0.5",children:["+",z.tags.length-1]})]})]}),e.jsx("div",{className:"mb-1.5",children:e.jsx("p",{className:"text-xs text-gray-600 line-clamp-1 leading-relaxed",children:(ne=z.messages[z.messages.length-1])==null?void 0:ne.content})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-gray-400",children:new Date(z.lastMessage).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${z.status==="active"?"bg-green-500":z.status==="waiting"?"bg-yellow-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:z.status})]})]})]},z.id)})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white min-w-0",children:t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-white to-gray-50 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0",children:t.customer.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-1 truncate",children:t.customer.name}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1 min-w-0",children:[e.jsx(Xd,{className:"w-3 h-3 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-gray-600 truncate",children:t.customer.company})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full flex-shrink-0"}),e.jsx(W,{variant:"blue",className:"text-xs px-1 py-0.5 flex-shrink-0",children:t.customer.plan}),e.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-gray-600",children:t.customer.avgRating})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>w(!g),className:`hover:bg-yellow-50 hover:text-yellow-700 p-2 ${g?"bg-yellow-100 text-yellow-700":""}`,children:e.jsx(Gt,{className:"w-3 h-3"})}),e.jsxs(At,{open:u,onOpenChange:m,children:[e.jsx(Qt,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",className:"hover:bg-orange-50 hover:text-orange-700",children:e.jsx(fx,{className:"w-4 h-4"})})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(_t,{children:[e.jsxs(Pt,{className:"flex items-center space-x-2",children:[e.jsx(fx,{className:"w-5 h-5 text-orange-600"}),e.jsx("span",{children:"Transfer Session"})]}),e.jsx(Tt,{children:"Transfer chat ini ke agent atau departemen lain"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"transferTo",className:"text-sm font-medium",children:"Transfer ke"}),e.jsxs(ie,{children:[e.jsx(le,{className:"mt-1",children:e.jsx(ce,{placeholder:"Pilih agent atau departemen"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"agent-sarah",children:"Agent Sarah"}),e.jsx(T,{value:"agent-mike",children:"Agent Mike"}),e.jsx(T,{value:"technical-team",children:"Tim Teknis"}),e.jsx(T,{value:"billing-team",children:"Tim Billing"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"transferReason",className:"text-sm font-medium",children:"Alasan Transfer"}),e.jsx(Re,{placeholder:"Jelaskan alasan transfer...",rows:3,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(k,{variant:"outline",onClick:()=>m(!1),children:"Batal"}),e.jsx(k,{onClick:L,className:"bg-orange-600 hover:bg-orange-700",children:"Transfer"})]})]})]})]}),e.jsxs(At,{open:h,onOpenChange:x,children:[e.jsx(Qt,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",className:"hover:bg-green-50 hover:text-green-700",children:e.jsx(Me,{className:"w-4 h-4"})})}),e.jsxs(Ct,{className:"max-w-md",children:[e.jsxs(_t,{children:[e.jsxs(Pt,{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{children:"Wrap-Up Session"})]}),e.jsx(Tt,{children:"Selesaikan chat session ini"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"category",className:"text-sm font-medium",children:"Kategori Sesi"}),e.jsxs(ie,{children:[e.jsx(le,{className:"mt-1",children:e.jsx(ce,{placeholder:"Pilih kategori"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"technical",children:"Masalah Teknis"}),e.jsx(T,{value:"billing",children:"Pertanyaan Billing"}),e.jsx(T,{value:"general",children:"Pertanyaan Umum"}),e.jsx(T,{value:"feature",children:"Permintaan Fitur"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-sm font-medium",children:"Tandai untuk Tim Lain"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"sales",className:"rounded border-gray-300"}),e.jsx(_,{htmlFor:"sales",className:"text-sm",children:"Peluang Sales"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"churn",className:"rounded border-gray-300"}),e.jsx(_,{htmlFor:"churn",className:"text-sm",children:"Risiko Churn"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"feedback",className:"rounded border-gray-300"}),e.jsx(_,{htmlFor:"feedback",className:"text-sm",children:"Feedback Produk"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"summary",className:"text-sm font-medium",children:"Ringkasan Session"}),e.jsx(Re,{placeholder:"Ringkas masalah dan solusi yang diberikan...",rows:3,className:"mt-1"})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[e.jsx(k,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),e.jsx(k,{onClick:Z,className:"bg-green-600 hover:bg-green-700",children:"Selesaikan Session"})]})]})]})]})]})]})}),g&&e.jsxs("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 border-b border-yellow-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"w-4 h-4 text-yellow-700"}),e.jsx(_,{className:"text-sm font-semibold text-yellow-800",children:"Internal Notes"})]}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>w(!1),className:"hover:bg-yellow-100 hover:text-yellow-800",children:e.jsx(Je,{className:"w-4 h-4"})})]}),e.jsx(Re,{value:f||t.internalNotes,onChange:z=>p(z.target.value),placeholder:"Catatan internal untuk tim...",rows:2,className:"bg-white border-yellow-300 focus:border-yellow-500 focus:ring-yellow-500 resize-none text-sm"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("p",{className:"text-xs text-yellow-700",children:"💡 Hanya visible untuk tim internal"}),e.jsxs(k,{size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white text-xs px-3 py-1",children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"}),"Simpan"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-gray-50 to-white",children:[t.messages.map(z=>e.jsx("div",{className:`flex ${z.type==="agent"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-3 py-2 rounded-xl shadow-sm ${z.type==="agent"?"bg-gradient-to-r from-blue-600 to-blue-700 text-white":"bg-white text-gray-900 border border-gray-200 shadow-md"}`,children:[e.jsx("p",{className:"text-sm leading-relaxed",children:z.content}),e.jsxs("div",{className:`text-xs mt-1.5 flex items-center justify-between ${z.type==="agent"?"text-blue-100":"text-gray-500"}`,children:[e.jsx("span",{className:"font-medium",children:new Date(z.timestamp).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}),z.type==="agent"&&e.jsxs("div",{className:"flex items-center space-x-1",children:[z.delivered&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Me,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"✓"})]}),z.read&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ze,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs",children:"👁"})]})]})]})]})},z.id)),e.jsx("div",{ref:S})]}),e.jsxs("div",{className:"px-4 py-2 bg-gradient-to-r from-gray-50 to-blue-50 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(Et,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Quick Replies"})]}),e.jsx("div",{className:"flex space-x-1 overflow-x-auto pb-1",children:v.map((z,ne)=>e.jsx(k,{variant:"outline",size:"sm",className:"whitespace-nowrap text-xs px-2 py-1 hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200",onClick:()=>r(z),children:z},ne))})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Re,{value:a,onChange:z=>r(z.target.value),onKeyPress:U,placeholder:"Ketik pesan...",rows:2,className:"resize-none border-gray-300 focus:border-blue-500 focus:ring-blue-500 text-sm"}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"💡 Quick replies untuk respon cepat"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Enter untuk kirim"})]})]}),e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx(k,{variant:"ghost",size:"sm",className:"hover:bg-gray-100 hover:text-gray-700 p-2",title:"Attach file",children:e.jsx(Sw,{className:"w-3 h-3"})}),e.jsx(k,{onClick:R,disabled:!a.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed p-2",title:"Send message",children:e.jsx(_i,{className:"w-3 h-3"})})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Le,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pilih Chat Session"}),e.jsx("p",{className:"text-gray-600",children:"Pilih chat dari antrian untuk mulai membantu customer"})]})})}),e.jsx("div",{className:"w-64 bg-white border-l border-gray-200 shadow-sm flex-shrink-0",children:e.jsxs(kt,{value:o,onValueChange:d,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-2.5 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-blue-50 flex-shrink-0",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-1.5",children:"Context & Help"}),e.jsxs(wt,{className:"grid w-full grid-cols-3 p-1 bg-white border border-gray-200",children:[e.jsx(pe,{value:"customer-info",className:"text-xs data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:"Customer"}),e.jsx(pe,{value:"knowledge",className:"text-xs data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:"Knowledge"}),e.jsx(pe,{value:"history",className:"text-xs data-[state=active]:bg-blue-100 data-[state=active]:text-blue-700",children:"History"})]})]}),e.jsx(ge,{value:"customer-info",className:"flex-1 overflow-y-auto p-2.5 pt-0",children:t?e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs(F,{className:"border-gray-200 hover:shadow-sm transition-shadow",children:[e.jsx(H,{className:"pb-1.5",children:e.jsx(V,{className:"text-xs font-semibold text-gray-800",children:"Customer Details"})}),e.jsxs(B,{className:"space-y-2.5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center text-white font-semibold text-xs flex-shrink-0",children:t.customer.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-xs truncate",children:t.customer.name}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:t.customer.email})]})]}),e.jsxs("div",{className:"space-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-2 p-1 bg-gray-50 rounded-lg",children:[e.jsx(Xd,{className:"w-3 h-3 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium truncate",children:t.customer.company})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-1 bg-gray-50 rounded-lg",children:[e.jsx(Pa,{className:"w-3 h-3 text-green-600 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 font-medium truncate",children:t.customer.phone})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-1 bg-gray-50 rounded-lg",children:[e.jsx(Mt,{className:"w-3 h-3 text-purple-600 flex-shrink-0"}),e.jsxs("span",{className:"text-gray-700 font-medium truncate",children:["Member since ",new Date(t.customer.joinDate).toLocaleDateString("id-ID")]})]})]})]})]}),e.jsxs(F,{className:"border-gray-200 hover:shadow-sm transition-shadow",children:[e.jsx(H,{className:"pb-1.5",children:e.jsx(V,{className:"text-xs font-semibold text-gray-800",children:"Plan & Statistics"})}),e.jsxs(B,{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between p-1 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-blue-700 font-medium truncate",children:"Current Plan"}),e.jsx(W,{variant:"blue",className:"px-1 py-0.5 text-xs flex-shrink-0",children:t.customer.plan})]}),e.jsxs("div",{className:"flex items-center justify-between p-1 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-green-700 font-medium truncate",children:"Total Sessions"}),e.jsx("span",{className:"text-xs font-bold text-green-700 flex-shrink-0",children:t.customer.totalSessions})]}),e.jsxs("div",{className:"flex items-center justify-between p-1 bg-yellow-50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-yellow-700 font-medium truncate",children:"Avg Rating"}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs font-bold text-yellow-700",children:t.customer.avgRating})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-1 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-xs text-purple-700 font-medium truncate",children:"Last Activity"}),e.jsx("span",{className:"text-xs font-bold text-purple-700 flex-shrink-0",children:new Date(t.customer.lastActivity).toLocaleDateString("id-ID")})]})]})]}),e.jsxs(F,{className:"border-gray-200 hover:shadow-sm transition-shadow",children:[e.jsx(H,{className:"pb-1.5",children:e.jsx(V,{className:"text-xs font-semibold text-gray-800",children:"Session Tags"})}),e.jsx(B,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.tags.map(z=>e.jsx(W,{variant:"gray",className:"text-xs px-1 py-0.5 bg-gray-100 text-gray-700 border-gray-200",children:z},z)),e.jsx(k,{variant:"ghost",size:"sm",className:"h-4 px-1 hover:bg-gray-100 hover:text-gray-700",children:e.jsx(at,{className:"w-2.5 h-2.5"})})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ns,{className:"w-6 h-6 mx-auto mb-1 text-gray-400"}),e.jsx("p",{className:"text-xs",children:"Pilih chat untuk melihat info customer"})]})})}),e.jsx(ge,{value:"knowledge",className:"flex-1 overflow-y-auto p-2.5 pt-0",children:e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-2 top-2 h-3 w-3 text-gray-400"}),e.jsx(K,{placeholder:"Cari knowledge...",className:"pl-7 h-7 text-xs border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsx("div",{className:"space-y-1.5",children:N.map(z=>e.jsx(F,{className:"p-2.5 hover:shadow-md cursor-pointer transition-all duration-200 border-gray-200 hover:border-blue-300",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-xs font-semibold text-gray-900 mb-1 truncate",children:z.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(W,{variant:"blue",className:"text-xs px-1 py-0.5",children:z.category}),e.jsxs("span",{className:"text-xs text-gray-500",children:[z.relevance,"%"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx(ca,{className:"w-3 h-3 text-blue-600"}),e.jsxs(W,{variant:"green",className:"text-xs px-1 py-0.5",children:[z.relevance,"%"]})]})]})},z.id))})]})}),e.jsx(ge,{value:"history",className:"flex-1 overflow-y-auto p-2.5 pt-0",children:t?e.jsx("div",{className:"space-y-1.5",children:C.map(z=>e.jsxs(F,{className:"p-2.5 hover:shadow-sm transition-shadow border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${z.type==="chat"?"bg-blue-500":z.type==="email"?"bg-green-500":"bg-purple-500"}`}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:z.date})]}),z.rating&&e.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[e.jsx(os,{className:"w-3 h-3 text-yellow-500 fill-current"}),e.jsx("span",{className:"text-xs font-medium text-yellow-700",children:z.rating})]})]}),e.jsx("h4",{className:"text-xs font-semibold text-gray-900 mb-1 truncate",children:z.summary}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-gray-600 truncate",children:["by ",z.agent]}),e.jsx(W,{variant:"gray",className:"text-xs px-1 py-0.5 bg-gray-100 text-gray-700 flex-shrink-0",children:z.type})]})]},z.id))}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ec,{className:"w-5 h-5 mx-auto mb-1 text-gray-400"}),e.jsx("p",{className:"text-xs",children:"Pilih chat untuk melihat history"})]})})})]})})]})},TV=()=>{const[t,s]=y.useState("profile"),[a,r]=y.useState(!1),[n,i]=y.useState(null),[l,c]=y.useState(!1),[o,d]=y.useState(null),[u,m]=y.useState({fullName:"Sarah Johnson",email:"sarah.johnson@company.com",phone:"+62812345678",avatar:null,jobTitle:"Senior Customer Success Agent",department:"Customer Support",employeeId:"EMP-001",startDate:"2023-01-15",location:"Jakarta, Indonesia",timezone:"Asia/Jakarta"}),[h,x]=y.useState({status:"online",autoStatusChange:!0,maxConcurrentChats:5,workingHours:{start:"09:00",end:"18:00",timezone:"Asia/Jakarta"},workingDays:["monday","tuesday","wednesday","thursday","friday"],breakMode:!1,awayMessage:"Saya sedang tidak tersedia. Akan segera membalas pesan Anda."}),[f,p]=y.useState({newMessage:{desktop:!0,sound:!0,email:!1,mobile:!0},sessionAssigned:{desktop:!0,sound:!0,email:!0,mobile:!0},urgentMessage:{desktop:!0,sound:!0,email:!0,mobile:!0},teamMention:{desktop:!0,sound:!1,email:!1,mobile:!0},systemAlert:{desktop:!0,sound:!1,email:!0,mobile:!1},soundVolume:75,quietHours:{enabled:!0,start:"22:00",end:"07:00"},emailDigest:{enabled:!0,frequency:"daily",time:"18:00"}}),[g,w]=y.useState([{id:"temp-001",title:"Salam Pembuka",category:"greeting",content:"Halo! Saya Sarah dari tim Customer Support. Saya akan membantu Anda hari ini. Ada yang bisa saya bantu?",tags:["greeting","introduction"],usageCount:45,lastUsed:"2024-01-25T10:30:00Z",createdAt:"2024-01-10T14:20:00Z"},{id:"temp-002",title:"Konfirmasi Masalah Teknis",category:"technical",content:"Terima kasih telah melaporkan masalah ini. Saya sedang mengecek sistem dan akan segera memberikan solusi. Mohon ditunggu sebentar ya.",tags:["technical","acknowledgment"],usageCount:32,lastUsed:"2024-01-24T15:45:00Z",createdAt:"2024-01-12T09:15:00Z"},{id:"temp-003",title:"Eskalasi ke Tim Teknis",category:"escalation",content:"Untuk masalah ini, saya perlu menghubungkan Anda dengan tim teknis kami yang lebih spesialis. Mereka akan segera menghubungi Anda dalam 30 menit.",tags:["escalation","technical"],usageCount:18,lastUsed:"2024-01-23T11:20:00Z",createdAt:"2024-01-15T16:30:00Z"},{id:"temp-004",title:"Penutup Positif",category:"closing",content:"Senang bisa membantu Anda! Jika ada pertanyaan lain, jangan ragu untuk menghubungi kami kembali. Semoga harinya menyenangkan! 😊",tags:["closing","positive"],usageCount:67,lastUsed:"2024-01-25T14:10:00Z",createdAt:"2024-01-08T11:45:00Z"}]),[S,b]=y.useState({title:"",category:"",content:"",tags:[]}),[A,v]=y.useState({theme:"light",language:"id",fontSize:"medium",density:"comfortable",showAvatars:!0,showTimestamps:!0,autoRefresh:!0,refreshInterval:30,chatLayout:"bubbles",sidebarCollapsed:!1}),j=()=>{console.log("Profile updated:",u)},N=()=>{console.log("Password change requested")},O=I=>{const L=I.target.files[0];if(L){d(L);const Z=new FileReader;Z.onload=q=>{m(z=>({...z,avatar:q.target.result}))},Z.readAsDataURL(L)}},C=()=>{if(n)w(I=>I.map(L=>L.id===n.id?{...L,...S,lastModified:new Date().toISOString()}:L));else{const I={id:`temp-${Date.now()}`,...S,usageCount:0,lastUsed:null,createdAt:new Date().toISOString()};w(L=>[I,...L])}b({title:"",category:"",content:"",tags:[]}),i(null),r(!1)},D=I=>{i(I),b({title:I.title,category:I.category,content:I.content,tags:I.tags}),r(!0)},E=I=>{w(L=>L.filter(Z=>Z.id!==I))},P=I=>{w(L=>L.map(Z=>Z.id===I.id?{...Z,usageCount:Z.usageCount+1,lastUsed:new Date().toISOString()}:Z))},R=I=>{const L={online:"bg-green-500",away:"bg-yellow-500",busy:"bg-red-500",offline:"bg-gray-500"};return L[I]||L.offline},U=[{value:"greeting",label:"Salam Pembuka"},{value:"technical",label:"Teknis"},{value:"billing",label:"Billing"},{value:"escalation",label:"Eskalasi"},{value:"closing",label:"Penutup"},{value:"general",label:"Umum"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile & Settings"}),e.jsx("p",{className:"text-gray-600",children:"Kelola profil dan preferensi akun Anda"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${R(h.status)}`}),e.jsxs(ie,{value:h.status,onValueChange:I=>x(L=>({...L,status:I})),children:[e.jsx(le,{className:"w-32",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"online",children:"Online"}),e.jsx(T,{value:"away",children:"Away"}),e.jsx(T,{value:"busy",children:"Busy"}),e.jsx(T,{value:"offline",children:"Offline"})]})]})]})})]}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-5",children:[e.jsxs(pe,{value:"profile",className:"flex items-center space-x-2",children:[e.jsx(Vt,{className:"w-4 h-4"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(pe,{value:"availability",className:"flex items-center space-x-2",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{children:"Availability"})]}),e.jsxs(pe,{value:"notifications",className:"flex items-center space-x-2",children:[e.jsx(dn,{className:"w-4 h-4"}),e.jsx("span",{children:"Notifications"})]}),e.jsxs(pe,{value:"templates",className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"Templates"})]}),e.jsxs(pe,{value:"preferences",className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"Preferences"})]})]}),e.jsxs(ge,{value:"profile",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs(F,{className:"col-span-2",children:[e.jsxs(H,{children:[e.jsx(V,{children:"Profile Information"}),e.jsx(Q,{children:"Update your personal information and contact details"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"fullName",children:"Full Name"}),e.jsx(K,{id:"fullName",value:u.fullName,onChange:I=>m(L=>({...L,fullName:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"email",children:"Email"}),e.jsx(K,{id:"email",type:"email",value:u.email,onChange:I=>m(L=>({...L,email:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"phone",children:"Phone"}),e.jsx(K,{id:"phone",value:u.phone,onChange:I=>m(L=>({...L,phone:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"jobTitle",children:"Job Title"}),e.jsx(K,{id:"jobTitle",value:u.jobTitle,onChange:I=>m(L=>({...L,jobTitle:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"department",children:"Department"}),e.jsx(K,{id:"department",value:u.department,onChange:I=>m(L=>({...L,department:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"location",children:"Location"}),e.jsx(K,{id:"location",value:u.location,onChange:I=>m(L=>({...L,location:I.target.value}))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(k,{variant:"outline",children:"Cancel"}),e.jsxs(k,{onClick:j,children:[e.jsx(jt,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Profile Picture"}),e.jsx(Q,{children:"Upload your profile picture"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center overflow-hidden",children:u.avatar?e.jsx("img",{src:u.avatar,alt:"Avatar",className:"w-full h-full object-cover"}):e.jsx(Vt,{className:"w-12 h-12 text-gray-600"})}),e.jsxs("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 p-1 bg-blue-600 rounded-full cursor-pointer hover:bg-blue-700",children:[e.jsx(Kl,{className:"w-4 h-4 text-white"}),e.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:O,className:"hidden"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-medium",children:u.fullName}),e.jsx("p",{className:"text-sm text-gray-600",children:u.jobTitle}),e.jsx(W,{variant:"blue",className:"mt-2",children:u.employeeId})]})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date"}),e.jsx("span",{children:new Date(u.startDate).toLocaleDateString("id-ID")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Timezone"}),e.jsx("span",{children:u.timezone})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${R(h.status)}`}),e.jsx("span",{className:"capitalize",children:h.status})]})]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Security"}),e.jsx(Q,{children:"Change your password and security settings"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(K,{id:"currentPassword",type:l?"text":"password",placeholder:"Enter current password"}),e.jsx(k,{variant:"ghost",size:"sm",className:"absolute right-2 top-2 h-6 w-6 p-0",onClick:()=>c(!l),children:l?e.jsx(It,{className:"w-4 h-4"}):e.jsx(ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"newPassword",children:"New Password"}),e.jsx(K,{id:"newPassword",type:l?"text":"password",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(K,{id:"confirmPassword",type:l?"text":"password",placeholder:"Confirm new password"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsxs(k,{onClick:N,children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Change Password"]})})]})]})]}),e.jsx(ge,{value:"availability",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Current Status"}),e.jsx(Q,{children:"Manage your availability status"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"status",children:"Status"}),e.jsxs(ie,{value:h.status,onValueChange:I=>x(L=>({...L,status:I})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"online",children:"🟢 Online"}),e.jsx(T,{value:"away",children:"🟡 Away"}),e.jsx(T,{value:"busy",children:"🔴 Busy"}),e.jsx(T,{value:"offline",children:"⚫ Offline"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"awayMessage",children:"Away Message"}),e.jsx(Re,{id:"awayMessage",value:h.awayMessage,onChange:I=>x(L=>({...L,awayMessage:I.target.value})),rows:3})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Auto Status Change"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically change status based on activity"})]}),e.jsx(de,{checked:h.autoStatusChange,onCheckedChange:I=>x(L=>({...L,autoStatusChange:I}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"maxChats",children:"Max Concurrent Chats"}),e.jsx(K,{id:"maxChats",type:"number",min:"1",max:"10",value:h.maxConcurrentChats,onChange:I=>x(L=>({...L,maxConcurrentChats:parseInt(I.target.value)}))})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Working Hours"}),e.jsx(Q,{children:"Set your regular working schedule"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"startTime",children:"Start Time"}),e.jsx(K,{id:"startTime",type:"time",value:h.workingHours.start,onChange:I=>x(L=>({...L,workingHours:{...L.workingHours,start:I.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"endTime",children:"End Time"}),e.jsx(K,{id:"endTime",type:"time",value:h.workingHours.end,onChange:I=>x(L=>({...L,workingHours:{...L.workingHours,end:I.target.value}}))})]})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Working Days"}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mt-2",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(I=>{const L={monday:"Sen",tuesday:"Sel",wednesday:"Rab",thursday:"Kam",friday:"Jum",saturday:"Sab",sunday:"Min"};return e.jsx(k,{variant:h.workingDays.includes(I)?"default":"outline",size:"sm",className:"h-8",onClick:()=>{x(Z=>({...Z,workingDays:Z.workingDays.includes(I)?Z.workingDays.filter(q=>q!==I):[...Z.workingDays,I]}))},children:L[I]},I)})})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"timezone",children:"Timezone"}),e.jsxs(ie,{value:h.workingHours.timezone,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"Asia/Jakarta",children:"Asia/Jakarta (WIB)"}),e.jsx(T,{value:"Asia/Makassar",children:"Asia/Makassar (WITA)"}),e.jsx(T,{value:"Asia/Jayapura",children:"Asia/Jayapura (WIT)"})]})]})]})]})]})]})}),e.jsx(ge,{value:"notifications",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Notification Preferences"}),e.jsx(Q,{children:"Choose how you want to receive notifications"})]}),e.jsx(B,{className:"space-y-6",children:Object.entries(f).filter(([I])=>!["soundVolume","quietHours","emailDigest"].includes(I)).map(([I,L])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-sm capitalize",children:I.replace(/([A-Z])/g," $1").trim()}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:L.desktop,onCheckedChange:Z=>p(q=>({...q,[I]:{...q[I],desktop:Z}}))}),e.jsx(eu,{className:"w-4 h-4"}),e.jsx("span",{children:"Desktop"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:L.sound,onCheckedChange:Z=>p(q=>({...q,[I]:{...q[I],sound:Z}}))}),e.jsx(kw,{className:"w-4 h-4"}),e.jsx("span",{children:"Sound"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:L.email,onCheckedChange:Z=>p(q=>({...q,[I]:{...q[I],email:Z}}))}),e.jsx(fs,{className:"w-4 h-4"}),e.jsx("span",{children:"Email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{checked:L.mobile,onCheckedChange:Z=>p(q=>({...q,[I]:{...q[I],mobile:Z}}))}),e.jsx(co,{className:"w-4 h-4"}),e.jsx("span",{children:"Mobile"})]})]})]},I))})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Advanced Settings"}),e.jsx(Q,{children:"Fine-tune your notification experience"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(_,{htmlFor:"soundVolume",children:["Sound Volume (",f.soundVolume,"%)"]}),e.jsx("input",{id:"soundVolume",type:"range",min:"0",max:"100",value:f.soundVolume,onChange:I=>p(L=>({...L,soundVolume:parseInt(I.target.value)})),className:"w-full mt-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Quiet Hours"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Disable notifications during specific hours"})]}),e.jsx(de,{checked:f.quietHours.enabled,onCheckedChange:I=>p(L=>({...L,quietHours:{...L.quietHours,enabled:I}}))})]}),f.quietHours.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"quietStart",children:"Start"}),e.jsx(K,{id:"quietStart",type:"time",value:f.quietHours.start,onChange:I=>p(L=>({...L,quietHours:{...L.quietHours,start:I.target.value}}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"quietEnd",children:"End"}),e.jsx(K,{id:"quietEnd",type:"time",value:f.quietHours.end,onChange:I=>p(L=>({...L,quietHours:{...L.quietHours,end:I.target.value}}))})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Email Digest"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive summary of activities"})]}),e.jsx(de,{checked:f.emailDigest.enabled,onCheckedChange:I=>p(L=>({...L,emailDigest:{...L.emailDigest,enabled:I}}))})]}),f.emailDigest.enabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"digestFreq",children:"Frequency"}),e.jsxs(ie,{value:f.emailDigest.frequency,onValueChange:I=>p(L=>({...L,emailDigest:{...L.emailDigest,frequency:I}})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"daily",children:"Daily"}),e.jsx(T,{value:"weekly",children:"Weekly"}),e.jsx(T,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"digestTime",children:"Time"}),e.jsx(K,{id:"digestTime",type:"time",value:f.emailDigest.time,onChange:I=>p(L=>({...L,emailDigest:{...L.emailDigest,time:I.target.value}}))})]})]})]})]})]})]})}),e.jsxs(ge,{value:"templates",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Personal Templates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage your custom response templates"})]}),e.jsxs(At,{open:a,onOpenChange:r,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"New Template"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:n?"Edit Template":"Create New Template"}),e.jsx(Tt,{children:"Create a reusable template for common responses"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"templateTitle",children:"Title"}),e.jsx(K,{id:"templateTitle",placeholder:"Template name",value:S.title,onChange:I=>b(L=>({...L,title:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"templateCategory",children:"Category"}),e.jsxs(ie,{value:S.category,onValueChange:I=>b(L=>({...L,category:I})),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select category"})}),e.jsx(oe,{children:U.map(I=>e.jsx(T,{value:I.value,children:I.label},I.value))})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"templateContent",children:"Content"}),e.jsx(Re,{id:"templateContent",placeholder:"Enter your template content...",rows:6,value:S.content,onChange:I=>b(L=>({...L,content:I.target.value}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"templateTags",children:"Tags (comma separated)"}),e.jsx(K,{id:"templateTags",placeholder:"e.g., greeting, technical, urgent",value:S.tags.join(", "),onChange:I=>b(L=>({...L,tags:I.target.value.split(",").map(Z=>Z.trim()).filter(Z=>Z)}))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(k,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(k,{onClick:C,children:[n?"Update":"Create"," Template"]})]})]})]})]})]}),e.jsx(F,{children:e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Template"}),e.jsx(J,{children:"Category"}),e.jsx(J,{children:"Usage"}),e.jsx(J,{children:"Last Used"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:g.map(I=>{var L;return e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:I.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate max-w-xs",children:I.content}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:I.tags.map(Z=>e.jsx(W,{variant:"gray",className:"text-xs",children:Z},Z))})]})}),e.jsx(X,{children:e.jsx(W,{variant:"blue",className:"text-xs",children:((L=U.find(Z=>Z.value===I.category))==null?void 0:L.label)||I.category})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Et,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm",children:I.usageCount})]})}),e.jsx(X,{children:e.jsx("span",{className:"text-sm text-gray-600",children:I.lastUsed?new Date(I.lastUsed).toLocaleDateString("id-ID"):"Never"})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>P(I),children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>D(I),children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>E(I.id),className:"text-red-600",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},I.id)})})]})})})]}),e.jsxs(ge,{value:"preferences",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Interface Preferences"}),e.jsx(Q,{children:"Customize your workspace appearance"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"theme",children:"Theme"}),e.jsxs(ie,{value:A.theme,onValueChange:I=>v(L=>({...L,theme:I})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"light",children:"🌞 Light"}),e.jsx(T,{value:"dark",children:"🌙 Dark"}),e.jsx(T,{value:"auto",children:"🔄 Auto"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"language",children:"Language"}),e.jsxs(ie,{value:A.language,onValueChange:I=>v(L=>({...L,language:I})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"id",children:"🇮🇩 Bahasa Indonesia"}),e.jsx(T,{value:"en",children:"🇺🇸 English"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"fontSize",children:"Font Size"}),e.jsxs(ie,{value:A.fontSize,onValueChange:I=>v(L=>({...L,fontSize:I})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"small",children:"Small"}),e.jsx(T,{value:"medium",children:"Medium"}),e.jsx(T,{value:"large",children:"Large"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"density",children:"Density"}),e.jsxs(ie,{value:A.density,onValueChange:I=>v(L=>({...L,density:I})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"compact",children:"Compact"}),e.jsx(T,{value:"comfortable",children:"Comfortable"}),e.jsx(T,{value:"spacious",children:"Spacious"})]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Chat Preferences"}),e.jsx(Q,{children:"Customize your chat experience"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Show Avatars"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Display profile pictures in chat"})]}),e.jsx(de,{checked:A.showAvatars,onCheckedChange:I=>v(L=>({...L,showAvatars:I}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Show Timestamps"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Display message timestamps"})]}),e.jsx(de,{checked:A.showTimestamps,onCheckedChange:I=>v(L=>({...L,showTimestamps:I}))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Auto Refresh"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Automatically refresh data"})]}),e.jsx(de,{checked:A.autoRefresh,onCheckedChange:I=>v(L=>({...L,autoRefresh:I}))})]}),A.autoRefresh&&e.jsxs("div",{children:[e.jsx(_,{htmlFor:"refreshInterval",children:"Refresh Interval (seconds)"}),e.jsx(K,{id:"refreshInterval",type:"number",min:"10",max:"300",value:A.refreshInterval,onChange:I=>v(L=>({...L,refreshInterval:parseInt(I.target.value)}))})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"chatLayout",children:"Chat Layout"}),e.jsxs(ie,{value:A.chatLayout,onValueChange:I=>v(L=>({...L,chatLayout:I})),children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"bubbles",children:"Message Bubbles"}),e.jsx(T,{value:"compact",children:"Compact View"}),e.jsx(T,{value:"threaded",children:"Threaded View"})]})]})]})]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Data & Export"}),e.jsx(Q,{children:"Manage your data and export preferences"})]}),e.jsx(B,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Export Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Download your personal data and settings"})]}),e.jsxs(k,{variant:"outline",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export Data"]})]})})]})]})]})]})},OV=()=>e.jsx("div",{className:"p-8 space-y-8 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Soft Pastel Badge Component"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"8 beautiful badge variants with soft pastel colors - exactly like your image"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"All Badge Variants"}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsx(W,{variant:"default",children:"Badge"}),e.jsx(W,{variant:"red",children:"Badge"}),e.jsx(W,{variant:"yellow",children:"Badge"}),e.jsx(W,{variant:"green",children:"Badge"}),e.jsx(W,{variant:"blue",children:"Badge"}),e.jsx(W,{variant:"indigo",children:"Badge"}),e.jsx(W,{variant:"purple",children:"Badge"}),e.jsx(W,{variant:"pink",children:"Badge"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Color Palette Reference"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"default",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"default"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-gray-100 text-gray-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"red",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"red"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-red-100 text-red-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"yellow",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"yellow"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-yellow-100 text-yellow-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"green",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"green"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-green-100 text-green-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"blue",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"blue"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-blue-100 text-blue-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"indigo",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"indigo"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-indigo-100 text-indigo-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"purple",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"purple"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-purple-100 text-purple-800"})]}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(W,{variant:"pink",children:"Badge"}),e.jsx("p",{className:"text-xs text-gray-500",children:"pink"}),e.jsx("p",{className:"text-xs text-gray-400",children:"bg-pink-100 text-pink-800"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Practical Examples"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Status Indicators"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{variant:"green",children:"Active"}),e.jsx("span",{className:"text-sm text-gray-600",children:"User is online"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{variant:"yellow",children:"Pending"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Awaiting approval"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{variant:"red",children:"Error"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Connection failed"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Category Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(W,{variant:"blue",children:"Technology"}),e.jsx(W,{variant:"purple",children:"Design"}),e.jsx(W,{variant:"green",children:"Business"}),e.jsx(W,{variant:"pink",children:"Creative"}),e.jsx(W,{variant:"indigo",children:"Development"})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Usage Examples"}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Code Examples"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Basic Badge:"}),e.jsx("code",{className:"block bg-gray-100 p-3 rounded text-sm font-mono",children:"<Badge>Badge</Badge>"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"With Color Variant:"}),e.jsx("code",{className:"block bg-gray-100 p-3 rounded text-sm font-mono",children:'<Badge variant="blue">Blue Badge</Badge>'})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Custom Styling:"}),e.jsx("code",{className:"block bg-gray-100 p-3 rounded text-sm font-mono",children:'<Badge className="bg-orange-100 text-orange-800">Custom</Badge>'})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Design Features"}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-semibold text-blue-800 mb-4",children:"What Makes These Badges Special"}),e.jsxs("div",{className:"space-y-3 text-sm text-blue-700",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Soft Pastel Colors"}),": All variants use -100 background colors for gentle appearance"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Perfect Contrast"}),": -800 text colors ensure excellent readability"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Pill Shape"}),": rounded-full creates the perfect pill-shaped design"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Consistent Spacing"}),": px-2.5 py-0.5 provides balanced padding"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Typography"}),": text-xs font-medium for clean, readable text"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"8 Color Variants"}),": Covers the full spectrum of soft, professional colors"]})]})]})]})]})}),EV=()=>{const[t,s]=y.useState("30d");y.useState(!1);const[a]=y.useState({overview:{totalClients:156,activeClients:142,atRiskClients:12,criticalClients:2,totalMRR:456e6,mrrAtRisk:89e6,churnRate:2.8},healthDistribution:{healthy:{count:98,percentage:62.8,mrr:298e6},atRisk:{count:12,percentage:7.7,mrr:89e6},critical:{count:2,percentage:1.3,mrr:12e6},trial:{count:44,percentage:28.2,mrr:57e6}},cohortAnalysis:{q1_2024:{joined:45,churned:2,retention:95.6},q4_2023:{joined:38,churned:3,retention:92.1},q3_2023:{joined:42,churned:1,retention:97.6},q2_2023:{joined:31,churned:4,retention:87.1}},csmActivity:{totalCalls:89,totalEmails:234,playbooksExecuted:45,avgResponseTime:"2.3h",satisfactionScore:4.6},recentActivity:[{id:1,type:"call",client:"ABC Corporation",csm:"Sarah Johnson",duration:"45m",outcome:"positive"},{id:2,type:"email",client:"TechStart Inc",csm:"Mike Chen",subject:"Feature Training",outcome:"pending"},{id:3,type:"playbook",client:"Global Solutions",csm:"Lisa Wang",playbook:"Onboarding Enterprise",status:"completed"},{id:4,type:"call",client:"Digital Agency Pro",csm:"David Kim",duration:"32m",outcome:"positive"}]}),r=l=>{switch(l){case"healthy":return"text-green-600 bg-green-100";case"atRisk":return"text-yellow-600 bg-yellow-100";case"critical":return"text-red-600 bg-red-100";case"trial":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},n=l=>{switch(l){case"healthy":return e.jsx(Me,{className:"w-4 h-4"});case"atRisk":return e.jsx(Qe,{className:"w-4 h-4"});case"critical":return e.jsx(Qe,{className:"w-4 h-4"});case"trial":return e.jsx(et,{className:"w-4 h-4"});default:return e.jsx(vt,{className:"w-4 h-4"})}},i=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Client Health Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Portfolio health overview and Customer Success metrics"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ie,{value:t,onValueChange:s,children:[e.jsx(le,{className:"w-[180px]",children:e.jsx(ce,{placeholder:"Time Range"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"7d",children:"Last 7 Days"}),e.jsx(T,{value:"30d",children:"Last 30 Days"}),e.jsx(T,{value:"90d",children:"Last 90 Days"}),e.jsx(T,{value:"1y",children:"Last Year"})]})]}),e.jsxs(k,{children:[e.jsx(Zs,{className:"w-4 h-4 mr-2"}),"Export Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Total MRR"}),e.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i(a.overview.totalMRR)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"+12.5%"})," from last month"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"MRR at Risk"}),e.jsx(Qe,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:i(a.overview.mrrAtRisk)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-red-600",children:"+2.1%"})," from last month"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Churn Rate"}),e.jsx(Aw,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[a.overview.churnRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"text-green-600",children:"-0.3%"})," from last month"]})]})]}),e.jsxs(F,{children:[e.jsxs(H,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(V,{className:"text-sm font-medium",children:"Active Clients"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(B,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.overview.activeClients}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",a.overview.totalClients," total clients"]})]})]})]}),e.jsxs(kt,{defaultValue:"overview",className:"w-full",children:[e.jsxs(wt,{children:[e.jsx(pe,{value:"overview",children:"Overview"}),e.jsx(pe,{value:"cohort",children:"Cohort Analysis"}),e.jsx(pe,{value:"csm",children:"CSM Activity"}),e.jsx(pe,{value:"activity",children:"Recent Activity"})]}),e.jsx(ge,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Health Score Distribution"}),e.jsx(Q,{children:"Client portfolio health breakdown"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(a.healthDistribution).map(([l,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${r(l)}`,children:n(l)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:l}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.count," clients • ",i(c.mrr)," MRR"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[c.percentage,"%"]}),e.jsx(us,{value:c.percentage,className:"w-20 h-2"})]})]},l))})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"CSM Team Activity"}),e.jsx(Q,{children:"Last 7 days performance metrics"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pa,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"Total Calls"})]}),e.jsx("span",{className:"font-bold",children:a.csmActivity.totalCalls})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Total Emails"})]}),e.jsx("span",{className:"font-bold",children:a.csmActivity.totalEmails})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ca,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{children:"Playbooks Executed"})]}),e.jsx("span",{className:"font-bold",children:a.csmActivity.playbooksExecuted})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{children:"Avg Response Time"})]}),e.jsx("span",{className:"font-bold",children:a.csmActivity.avgResponseTime})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:"Satisfaction Score"})]}),e.jsxs("span",{className:"font-bold",children:[a.csmActivity.satisfactionScore,"/5.0"]})]})]})})]})]})}),e.jsx(ge,{value:"cohort",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Cohort Churn Analysis"}),e.jsx(Q,{children:"Client retention by join quarter"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(a.cohortAnalysis).map(([l,c])=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.toUpperCase()}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Joined: ",c.joined," • Churned: ",c.churned]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c.retention,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Retention Rate"})]})]},l))})})]})}),e.jsx(ge,{value:"csm",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"CSM Performance Metrics"}),e.jsx(Q,{children:"Detailed team performance breakdown"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:a.csmActivity.totalCalls}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Calls"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:a.csmActivity.totalEmails}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Emails"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:a.csmActivity.playbooksExecuted}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Playbooks Executed"})]})]})})]})}),e.jsx(ge,{value:"activity",className:"space-y-6",children:e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Recent CSM Activity"}),e.jsx(Q,{children:"Latest interactions and playbook executions"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:a.recentActivity.map(l=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${l.type==="call"?"bg-blue-100 text-blue-600":l.type==="email"?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"}`,children:l.type==="call"?e.jsx(Pa,{className:"w-4 h-4"}):l.type==="email"?e.jsx(fs,{className:"w-4 h-4"}):e.jsx(ca,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:l.client}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l.type==="call"?`Call with ${l.csm} • ${l.duration}`:l.type==="email"?`Email by ${l.csm} • ${l.subject}`:`${l.playbook} by ${l.csm}`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(W,{variant:l.outcome==="positive"?"green":l.outcome==="completed"?"blue":"default",children:l.outcome==="positive"?"Positive":l.outcome==="completed"?"Completed":l.outcome==="pending"?"Pending":l.outcome}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:l.type==="call"?"2 hours ago":l.type==="email"?"4 hours ago":"1 day ago"})]})]},l.id))})})]})})]})]})},IV=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState({name:"",plan:"",csm:"",expectedGoLive:""}),[n]=y.useState({"pre-kickoff":{title:"Pra-Kickoff",description:"Initial client contact and requirements gathering",color:"bg-blue-100 text-blue-800",clients:[{id:1,name:"TechStart Inc",plan:"Professional",csm:"Mike Chen",expectedGoLive:"2024-04-15",progress:25,lastActivity:"2 hours ago",nextStep:"Schedule kickoff meeting",priority:"high"},{id:2,name:"Digital Solutions Ltd",plan:"Enterprise",csm:"Sarah Johnson",expectedGoLive:"2024-04-20",progress:15,lastActivity:"1 day ago",nextStep:"Send welcome package",priority:"medium"}]},"technical-config":{title:"Konfigurasi Teknis",description:"Technical setup and configuration",color:"bg-yellow-100 text-yellow-800",clients:[{id:3,name:"Global Innovations",plan:"Enterprise",csm:"David Kim",expectedGoLive:"2024-04-10",progress:60,lastActivity:"4 hours ago",nextStep:"Configure SSO integration",priority:"high"}]},"training-session":{title:"Sesi Pelatihan",description:"User training and onboarding sessions",color:"bg-green-100 text-green-800",clients:[{id:4,name:"ABC Corporation",plan:"Enterprise",csm:"Lisa Wang",expectedGoLive:"2024-04-05",progress:80,lastActivity:"6 hours ago",nextStep:"Schedule final training session",priority:"medium"}]},"go-live":{title:"Go-Live",description:"Final preparation and launch",color:"bg-purple-100 text-purple-800",clients:[{id:5,name:"StartupXYZ",plan:"Professional",csm:"Alex Rodriguez",expectedGoLive:"2024-04-01",progress:95,lastActivity:"1 hour ago",nextStep:"Final system check",priority:"high"}]},"onboarding-complete":{title:"Selesai Onboarding",description:"Successfully onboarded clients",color:"bg-emerald-100 text-emerald-800",clients:[{id:6,name:"Innovation Labs",plan:"Professional",csm:"Emma Thompson",expectedGoLive:"2024-03-25",progress:100,lastActivity:"3 days ago",nextStep:"Schedule 30-day check-in",priority:"low"}]}}),i=d=>{switch(d){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},l=d=>d>=80?"bg-green-500":d>=60?"bg-blue-500":d>=40?"bg-yellow-500":"bg-red-500",c=()=>{console.log("Adding new client:",a),s(!1),r({name:"",plan:"",csm:"",expectedGoLive:""})},o=({client:d})=>e.jsx(F,{className:"mb-4 cursor-pointer hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:d.name}),e.jsx(W,{variant:"outline",className:"text-xs mb-2",children:d.plan})]}),e.jsx(W,{className:`text-xs ${i(d.priority)}`,children:d.priority})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-3 h-3"}),e.jsx("span",{children:d.csm})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-3 h-3"}),e.jsxs("span",{children:["Go-Live: ",d.expectedGoLive]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-3 h-3"}),e.jsx("span",{children:d.lastActivity})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium",children:[d.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${l(d.progress)}`,style:{width:`${d.progress}%`}})})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Next Step:"}),e.jsx("p",{className:"text-xs font-medium",children:d.nextStep})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(k,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(Le,{className:"w-3 h-3 mr-1"}),"Contact"]}),e.jsxs(k,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(ca,{className:"w-3 h-3 mr-1"}),"Playbook"]})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Onboarding Pipeline"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage structured client onboarding process"})]}),e.jsxs(At,{open:t,onOpenChange:s,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add New Client"]})}),e.jsxs(Ct,{children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Add New Client to Pipeline"}),e.jsx(Tt,{children:"Add a new client to the onboarding pipeline"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"name",children:"Client Name"}),e.jsx(K,{id:"name",value:a.name,onChange:d=>r({...a,name:d.target.value}),placeholder:"Enter client name"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"plan",children:"Plan"}),e.jsxs(ie,{value:a.plan,onValueChange:d=>r({...a,plan:d}),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select plan"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"basic",children:"Basic"}),e.jsx(T,{value:"professional",children:"Professional"}),e.jsx(T,{value:"enterprise",children:"Enterprise"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"csm",children:"Assigned CSM"}),e.jsxs(ie,{value:a.csm,onValueChange:d=>r({...a,csm:d}),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select CSM"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"mike-chen",children:"Mike Chen"}),e.jsx(T,{value:"sarah-johnson",children:"Sarah Johnson"}),e.jsx(T,{value:"david-kim",children:"David Kim"}),e.jsx(T,{value:"lisa-wang",children:"Lisa Wang"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"expectedGoLive",children:"Expected Go-Live Date"}),e.jsx(K,{id:"expectedGoLive",type:"date",value:a.expectedGoLive,onChange:d=>r({...a,expectedGoLive:d.target.value})})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(k,{onClick:c,className:"flex-1",children:"Add Client"}),e.jsx(k,{variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(n).map(([d,u])=>e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 rounded-full ${u.color} mb-3`,children:e.jsx("span",{className:"text-lg font-bold",children:u.clients.length})}),e.jsx("h3",{className:"font-semibold text-sm mb-1",children:u.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.description})]})},d))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:Object.entries(n).map(([d,u])=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-3 rounded-lg ${u.color}`,children:[e.jsx("h3",{className:"font-semibold text-sm",children:u.title}),e.jsxs("p",{className:"text-xs opacity-80",children:[u.clients.length," clients"]})]}),e.jsxs("div",{className:"space-y-3",children:[u.clients.map(m=>e.jsx(o,{client:m},m.id)),u.clients.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx(at,{className:"w-6 h-6"})}),e.jsx("p",{className:"text-sm",children:"No clients in this stage"})]})]})]},d))}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common onboarding tasks and shortcuts"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(ca,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"View Playbooks"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Pe,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"CSM Assignment"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Mt,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Schedule Training"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(rs,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"text-sm",children:"Pipeline Analytics"})]})]})})]})]})},DV=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState(!1),[n,i]=y.useState("playbooks"),[l]=y.useState([{id:1,name:"Onboarding Klien Enterprise",description:"Playbook lengkap untuk onboarding klien Enterprise dengan fitur advanced",category:"onboarding",steps:["Kickoff meeting dengan stakeholder","Technical configuration review","User training session (3 sessions)","Go-live preparation","30-day success review"],estimatedDuration:"4-6 weeks",successRate:95,isActive:!0,lastUpdated:"2024-03-15"},{id:2,name:"Playbook Penyelamatan Klien Berisiko",description:"Strategi untuk mengembalikan klien yang berisiko churn",category:"retention",steps:["Health score assessment","Root cause analysis","Custom solution development","Implementation support","Follow-up and monitoring"],estimatedDuration:"2-4 weeks",successRate:78,isActive:!0,lastUpdated:"2024-03-10"},{id:3,name:"Feature Adoption Accelerator",description:"Meningkatkan adopsi fitur platform untuk klien existing",category:"adoption",steps:["Usage analysis","Feature recommendation","Training session","Implementation support","Success measurement"],estimatedDuration:"2-3 weeks",successRate:82,isActive:!0,lastUpdated:"2024-03-08"}]),[c]=y.useState([{id:1,name:"Auto-Rescue At-Risk Clients",description:"Automatically apply rescue playbook when health score drops",trigger:"Health Score &lt; 40",actions:['Apply "Playbook Penyelamatan Klien Berisiko"',"Create task for assigned CSM","Send notification to CSM manager","Schedule health check meeting"],isActive:!0,lastTriggered:"2024-03-20",triggerCount:3},{id:2,name:"Usage Quota Alert",description:"Notify when client usage reaches 95% of package limit",trigger:"Usage &gt;= 95% of quota",actions:["Send email notification to client","Send notification to assigned CSM","Create upgrade opportunity task","Schedule usage review call"],isActive:!0,lastTriggered:"2024-03-19",triggerCount:12},{id:3,name:"Trial Expiration Warning",description:"Alert CSM 7 days before trial expires",trigger:"Trial expires in 7 days",actions:["Create conversion task for CSM","Send trial expiration email to client","Schedule conversion call",'Apply "Trial to Paid" playbook'],isActive:!0,lastTriggered:"2024-03-18",triggerCount:8}]),o=h=>{switch(h){case"onboarding":return"bg-blue-100 text-blue-800";case"retention":return"bg-red-100 text-red-800";case"adoption":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},d=h=>h>=90?"text-green-600":h>=80?"text-blue-600":h>=70?"text-yellow-600":"text-red-600",u=({playbook:h})=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.name}),e.jsx(W,{className:o(h.category),children:h.category})]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:h.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Duration: ",h.estimatedDuration]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ba,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Success Rate: ",e.jsxs("span",{className:d(h.successRate),children:[h.successRate,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm",children:["Last Updated: ",h.lastUpdated]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Steps:"}),e.jsx("ol",{className:"list-decimal list-inside space-y-1 text-sm text-muted-foreground",children:h.steps.map((x,f)=>e.jsx("li",{children:x},f))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{checked:h.isActive}),e.jsx("span",{className:"text-sm",children:h.isActive?"Active":"Inactive"})]}),e.jsxs(k,{size:"sm",children:[e.jsx(cn,{className:"w-4 h-4 mr-2"}),"Execute"]})]})]})}),m=({automation:h})=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:h.name}),e.jsx(W,{variant:h.isActive?"green":"default",children:h.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:h.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Tr,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Et,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Trigger"})]}),e.jsx("p",{className:"text-sm text-blue-800",children:h.trigger})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Me,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Actions"})]}),e.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-green-800",children:h.actions.map((x,f)=>e.jsx("li",{children:x},f))})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Last triggered: ",h.lastTriggered]}),e.jsxs("div",{children:["Triggered ",h.triggerCount," times"]})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Automation & Playbooks"}),e.jsx("p",{className:"text-muted-foreground",children:"Scale Customer Success operations through automation and structured playbooks"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(At,{open:t,onOpenChange:s,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{variant:"outline",children:[e.jsx(ca,{className:"w-4 h-4 mr-2"}),"Add Playbook"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Create New Playbook"}),e.jsx(Tt,{children:"Build a structured playbook for Customer Success Managers"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"playbookName",children:"Playbook Name"}),e.jsx(K,{id:"playbookName",placeholder:"Enter playbook name"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"playbookDescription",children:"Description"}),e.jsx(Re,{id:"playbookDescription",placeholder:"Describe the playbook purpose"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"playbookCategory",children:"Category"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select category"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"onboarding",children:"Onboarding"}),e.jsx(T,{value:"retention",children:"Retention"}),e.jsx(T,{value:"adoption",children:"Adoption"}),e.jsx(T,{value:"upsell",children:"Upsell"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"playbookSteps",children:"Steps (one per line)"}),e.jsx(Re,{id:"playbookSteps",placeholder:"Enter each step on a new line",rows:5})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(k,{className:"flex-1",children:"Create Playbook"}),e.jsx(k,{variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancel"})]})]})]})]}),e.jsxs(At,{open:a,onOpenChange:r,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Add Automation"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Create New Automation Rule"}),e.jsx(Tt,{children:"Set up IF-THEN automation rules for Customer Success"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"automationName",children:"Automation Name"}),e.jsx(K,{id:"automationName",placeholder:"Enter automation name"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"automationDescription",children:"Description"}),e.jsx(Re,{id:"automationDescription",placeholder:"Describe what this automation does"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"automationTrigger",children:"Trigger Condition (IF)"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select trigger condition"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"health-score-low",children:"Health Score < 40"}),e.jsx(T,{value:"usage-high",children:"Usage >= 95% of quota"}),e.jsx(T,{value:"trial-expiring",children:"Trial expires in 7 days"}),e.jsx(T,{value:"no-activity",children:"No activity for 14 days"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"automationActions",children:"Actions (THEN)"}),e.jsx(Re,{id:"automationActions",placeholder:"Enter each action on a new line",rows:4})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(k,{className:"flex-1",children:"Create Automation"}),e.jsx(k,{variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]})]}),e.jsxs(kt,{value:n,onValueChange:i,className:"w-full",children:[e.jsxs(wt,{children:[e.jsx(pe,{value:"playbooks",children:"Playbook Builder"}),e.jsx(pe,{value:"automation",children:"Automation Engine"})]}),e.jsx(ge,{value:"playbooks",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(h=>e.jsx(u,{playbook:h},h.id))})}),e.jsx(ge,{value:"automation",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:c.map(h=>e.jsx(m,{automation:h},h.id))})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Playbooks"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Automations"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"156"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Playbooks Executed"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"89%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Success Rate"})]})})]})]})},MV=()=>{const[t,s]=y.useState(!1),[a,r]=y.useState("campaigns");y.useState([]);const[n]=y.useState([{id:1,name:"Feature Update: AI Chatbot v2.0",description:"Announcing major improvements to our AI chatbot capabilities",type:"feature-announcement",status:"scheduled",scheduledDate:"2024-04-01 10:00",segments:["enterprise","professional","active-users"],estimatedRecipients:89,sentCount:0,openRate:0,clickRate:0,createdAt:"2024-03-25"},{id:2,name:"Maintenance Notice: System Upgrade",description:"Scheduled maintenance for platform improvements",type:"maintenance",status:"sent",scheduledDate:"2024-03-20 02:00",segments:["all-clients"],estimatedRecipients:156,sentCount:156,openRate:78.2,clickRate:12.5,createdAt:"2024-03-18"},{id:3,name:"Tips: Maximize Your Platform Usage",description:"Best practices and tips for getting the most out of our platform",type:"tips",status:"draft",scheduledDate:null,segments:["basic","trial"],estimatedRecipients:67,sentCount:0,openRate:0,clickRate:0,createdAt:"2024-03-22"}]),[i]=y.useState([{id:"enterprise",name:"Enterprise Clients",description:"All clients on Enterprise plan",criteria:'plan = "enterprise"',clientCount:23,lastUpdated:"2024-03-20"},{id:"professional",name:"Professional Clients",description:"All clients on Professional plan",criteria:'plan = "professional"',clientCount:45,lastUpdated:"2024-03-20"},{id:"basic",name:"Basic Plan Clients",description:"All clients on Basic plan",criteria:'plan = "basic"',clientCount:34,lastUpdated:"2024-03-20"},{id:"trial",name:"Trial Users",description:"All clients currently in trial period",criteria:'status = "trial"',clientCount:28,lastUpdated:"2024-03-20"},{id:"at-risk",name:"At-Risk Clients",description:"Clients with health score below 50",criteria:"health_score < 50",clientCount:12,lastUpdated:"2024-03-20"},{id:"high-usage",name:"High Usage Clients",description:"Clients using 80%+ of their quota",criteria:"usage_percentage > 80",clientCount:18,lastUpdated:"2024-03-20"},{id:"inactive",name:"Inactive Clients",description:"Clients with no activity in 30 days",criteria:"last_activity < 30 days",clientCount:8,lastUpdated:"2024-03-20"}]),[l]=y.useState([{id:1,name:"Feature Announcement",subject:"New Feature: {feature_name}",content:`Hi {client_name},

We're excited to announce our latest feature: {feature_name}!

{feature_description}

This feature will help you {benefit_description}.

Best regards,
Your Customer Success Team`,variables:["client_name","feature_name","feature_description","benefit_description"],category:"feature-announcement"},{id:2,name:"Maintenance Notice",subject:"Scheduled Maintenance: {maintenance_type}",content:`Hi {client_name},

We wanted to let you know about scheduled maintenance on {maintenance_date}.

Maintenance Type: {maintenance_type}
Duration: {duration}
Impact: {impact_description}

We apologize for any inconvenience.

Best regards,
Your Technical Team`,variables:["client_name","maintenance_date","maintenance_type","duration","impact_description"],category:"maintenance"},{id:3,name:"Usage Tips",subject:"Tips to Maximize Your {plan_name} Plan",content:`Hi {client_name},

Here are some tips to get the most out of your {plan_name} plan:

{tip_list}

If you have any questions, don't hesitate to reach out!

Best regards,
Your Customer Success Team`,variables:["client_name","plan_name","tip_list"],category:"tips"}]),c=m=>{switch(m){case"draft":return"bg-gray-100 text-gray-800";case"scheduled":return"bg-blue-100 text-blue-800";case"sending":return"bg-yellow-100 text-yellow-800";case"sent":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=m=>{switch(m){case"feature-announcement":return e.jsx(Et,{className:"w-4 h-4"});case"maintenance":return e.jsx(nt,{className:"w-4 h-4"});case"tips":return e.jsx(Lightbulb,{className:"w-4 h-4"});default:return e.jsx(Le,{className:"w-4 h-4"})}},d=({campaign:m})=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 rounded-full bg-blue-100 text-blue-600",children:o(m.type)}),e.jsx("h3",{className:"font-semibold text-lg",children:m.name}),e.jsx(W,{className:c(m.status),children:m.status})]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:m.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Segments"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:m.segments.map(h=>e.jsx(W,{variant:"outline",className:"text-xs",children:h},h))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Recipients"}),e.jsx("div",{className:"text-lg font-bold",children:m.estimatedRecipients})]})]}),m.status==="sent"&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:m.sentCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Sent"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[m.openRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Open Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[m.clickRate,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Click Rate"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Created: ",m.createdAt]}),m.scheduledDate&&e.jsxs("div",{children:["Scheduled: ",m.scheduledDate]})]})]})}),u=({segment:m})=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:m.name}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:m.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:m.clientCount}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"clients"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Criteria"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:m.criteria})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Updated: ",m.lastUpdated]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ye,{className:"w-3 h-3"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Pe,{className:"w-3 h-3"})})]})]})]})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Client Communication Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage segmented mass communications to clients"})]}),e.jsxs(At,{open:t,onOpenChange:s,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Create Campaign"]})}),e.jsxs(Ct,{className:"max-w-4xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Create New Communication Campaign"}),e.jsx(Tt,{children:"Create and schedule a new communication campaign for specific client segments"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"campaignName",children:"Campaign Name"}),e.jsx(K,{id:"campaignName",placeholder:"Enter campaign name"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"campaignType",children:"Campaign Type"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select type"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"feature-announcement",children:"Feature Announcement"}),e.jsx(T,{value:"maintenance",children:"Maintenance Notice"}),e.jsx(T,{value:"tips",children:"Usage Tips"}),e.jsx(T,{value:"newsletter",children:"Newsletter"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"campaignDescription",children:"Description"}),e.jsx(Re,{id:"campaignDescription",placeholder:"Describe the campaign purpose"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"campaignSubject",children:"Email Subject"}),e.jsx(K,{id:"campaignSubject",placeholder:"Enter email subject line"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"campaignContent",children:"Email Content"}),e.jsx(Re,{id:"campaignContent",placeholder:"Enter email content",rows:8})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Target Segments"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:i.map(m=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hn,{id:m.id}),e.jsxs(_,{htmlFor:m.id,className:"text-sm",children:[m.name," (",m.clientCount," clients)"]})]},m.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"scheduledDate",children:"Schedule Date (Optional)"}),e.jsx(K,{id:"scheduledDate",type:"datetime-local"})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"template",children:"Use Template"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select template"})}),e.jsx(oe,{children:l.map(m=>e.jsx(T,{value:m.id,children:m.name},m.id))})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(k,{className:"flex-1",children:"Create Campaign"}),e.jsx(k,{variant:"outline",onClick:()=>s(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsxs(kt,{value:a,onValueChange:r,className:"w-full",children:[e.jsxs(wt,{children:[e.jsx(pe,{value:"campaigns",children:"Campaigns"}),e.jsx(pe,{value:"segments",children:"Segments"}),e.jsx(pe,{value:"templates",children:"Templates"}),e.jsx(pe,{value:"analytics",children:"Analytics"})]}),e.jsx(ge,{value:"campaigns",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(m=>e.jsx(d,{campaign:m},m.id))})}),e.jsx(ge,{value:"segments",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(m=>e.jsx(u,{segment:m},m.id))})}),e.jsx(ge,{value:"templates",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(m=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsxs(B,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:m.name}),e.jsx(W,{className:"bg-blue-100 text-blue-800 mb-3",children:m.category}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Subject"}),e.jsx("div",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:m.subject})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Variables"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:m.variables.map(h=>e.jsx(W,{variant:"outline",className:"text-xs",children:h},h))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Preview"}),e.jsx("div",{className:"text-sm bg-gray-50 p-3 rounded max-h-32 overflow-y-auto",children:m.content})]})]})},m.id))})}),e.jsxs(ge,{value:"analytics",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Campaigns"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"1,234"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Emails Sent"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"78.5%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Open Rate"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"12.3%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average Click Rate"})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Campaign Performance"}),e.jsx(Q,{children:"Recent campaign metrics and trends"})]}),e.jsx(B,{children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Zs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Campaign performance charts will be displayed here"})]})})]})]})]})]})},$V=()=>{const[t,s]=y.useState("credentials"),[a,r]=y.useState("production"),[n,i]=y.useState(!1),[l,c]=y.useState(!1),[o,d]=y.useState({}),[u,m]=y.useState({name:"",provider:"",apiKey:"",secretKey:"",environment:"production",description:""}),[h,x]=y.useState({name:"",description:"",enabled:!1,rolloutPercentage:0,targetSegments:[],environment:"production"}),[f,p]=y.useState([{id:1,name:"Midtrans Payment Gateway",provider:"midtrans",environment:"production",status:"active",lastRotated:"2024-01-15",apiKeyPreview:"SB-Mid-••••••••••••-••••••••",description:"Production payment processing",createdBy:"john.doe@company.com",createdAt:"2024-01-01T08:00:00Z"},{id:2,name:"SendGrid Email Service",provider:"sendgrid",environment:"production",status:"active",lastRotated:"2024-01-10",apiKeyPreview:"SG.••••••••••••••••••••••••",description:"Transactional email delivery",createdBy:"jane.smith@company.com",createdAt:"2024-01-01T09:00:00Z"},{id:3,name:"Twilio SMS Gateway",provider:"twilio",environment:"staging",status:"warning",lastRotated:"2023-12-01",apiKeyPreview:"AC••••••••••••••••••••••••••",description:"SMS notifications and OTP",createdBy:"mike.wilson@company.com",createdAt:"2023-12-01T10:00:00Z"}]),[g,w]=y.useState([{id:1,name:"advanced_analytics",displayName:"Advanced Analytics Dashboard",description:"New analytics dashboard with real-time metrics",enabled:!0,rolloutPercentage:75,environment:"production",targetSegments:["enterprise","beta"],status:"active",affectedUsers:1250,createdBy:"dev.team@company.com",createdAt:"2024-01-20T10:00:00Z",lastModified:"2024-01-25T14:30:00Z"},{id:2,name:"new_ui_theme",displayName:"New UI Theme",description:"Updated user interface with modern design",enabled:!1,rolloutPercentage:0,environment:"staging",targetSegments:["internal"],status:"draft",affectedUsers:0,createdBy:"design.team@company.com",createdAt:"2024-01-22T09:00:00Z",lastModified:"2024-01-22T09:00:00Z"},{id:3,name:"mobile_app_integration",displayName:"Mobile App Integration",description:"Enhanced mobile application features",enabled:!0,rolloutPercentage:25,environment:"production",targetSegments:["mobile_users"],status:"testing",affectedUsers:320,createdBy:"mobile.team@company.com",createdAt:"2024-01-18T11:00:00Z",lastModified:"2024-01-24T16:00:00Z"}]),S=[{value:"development",label:"🚧 Development",color:"bg-yellow-100 text-yellow-800"},{value:"staging",label:"🔧 Staging",color:"bg-blue-100 text-blue-800"},{value:"production",label:"🚀 Production",color:"bg-green-100 text-green-800"}],b=[{value:"midtrans",label:"Midtrans",icon:"💳"},{value:"sendgrid",label:"SendGrid",icon:"📧"},{value:"twilio",label:"Twilio",icon:"📱"},{value:"aws",label:"AWS Services",icon:"☁️"},{value:"stripe",label:"Stripe",icon:"💰"},{value:"mailgun",label:"Mailgun",icon:"📮"}],A=[{value:"enterprise",label:"Enterprise Clients"},{value:"beta",label:"Beta Testers"},{value:"internal",label:"Internal Users"},{value:"mobile_users",label:"Mobile Users"},{value:"premium",label:"Premium Subscribers"}],v=P=>{P.preventDefault();const R={id:Date.now(),...u,status:"active",lastRotated:new Date().toISOString().split("T")[0],apiKeyPreview:u.apiKey.substring(0,8)+"••••••••••••••••",createdBy:"current.user@company.com",createdAt:new Date().toISOString()};p([R,...f]),m({name:"",provider:"",apiKey:"",secretKey:"",environment:"production",description:""}),i(!1)},j=P=>{P.preventDefault();const R={id:Date.now(),...h,displayName:h.name.replace(/_/g," ").replace(/\b\w/g,U=>U.toUpperCase()),status:h.enabled?"active":"draft",affectedUsers:h.enabled?Math.floor(Math.random()*1e3):0,createdBy:"current.user@company.com",createdAt:new Date().toISOString(),lastModified:new Date().toISOString()};w([R,...g]),x({name:"",description:"",enabled:!1,rolloutPercentage:0,targetSegments:[],environment:"production"}),c(!1)},N=P=>{d(R=>({...R,[P]:!R[P]}))},O=P=>{const R={active:{color:"green",label:"Active"},warning:{color:"yellow",label:"Warning"},error:{color:"red",label:"Error"},draft:{color:"gray",label:"Draft"},testing:{color:"blue",label:"Testing"}},U=R[P]||R.draft;return e.jsx(W,{variant:U.color,children:U.label})},C=P=>{const R=S.find(U=>U.value===P);return R?e.jsx(W,{className:R.color,children:R.label}):e.jsx(W,{variant:"gray",children:P})},D=f.filter(P=>a==="all"||P.environment===a),E=g.filter(P=>a==="all"||P.environment===a);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Platform Configuration"}),e.jsx("p",{className:"text-gray-600",children:"Manage third-party credentials, feature flags, and platform settings"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(ie,{value:a,onValueChange:r,children:[e.jsx(le,{className:"w-48",children:e.jsx(ce,{placeholder:"Select environment"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"🌐 All Environments"}),S.map(P=>e.jsx(T,{value:P.value,children:P.label},P.value))]})]})})]}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-4",children:[e.jsxs(pe,{value:"credentials",className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),e.jsx("span",{children:"Credentials"})]}),e.jsxs(pe,{value:"feature-flags",className:"flex items-center space-x-2",children:[e.jsx(xd,{className:"w-4 h-4"}),e.jsx("span",{children:"Feature Flags"})]}),e.jsxs(pe,{value:"throttling",className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Rate Limiting"})]}),e.jsxs(pe,{value:"audit",className:"flex items-center space-x-2",children:[e.jsx(ec,{className:"w-4 h-4"}),e.jsx("span",{children:"Audit Trail"})]})]}),e.jsxs(ge,{value:"credentials",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Third-Party Credentials"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Secure management of API keys and external service credentials"})]}),e.jsxs(At,{open:n,onOpenChange:i,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Credential"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Add New Credential"}),e.jsx(Tt,{children:"Securely store API keys and credentials for third-party services"})]}),e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"credName",children:"Credential Name *"}),e.jsx(K,{id:"credName",placeholder:"e.g., Midtrans Production",value:u.name,onChange:P=>m(R=>({...R,name:P.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"provider",children:"Provider *"}),e.jsxs(ie,{value:u.provider,onValueChange:P=>m(R=>({...R,provider:P})),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select provider"})}),e.jsx(oe,{children:b.map(P=>e.jsxs(T,{value:P.value,children:[P.icon," ",P.label]},P.value))})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"apiKey",children:"API Key *"}),e.jsx(K,{id:"apiKey",type:"password",placeholder:"Enter API key",value:u.apiKey,onChange:P=>m(R=>({...R,apiKey:P.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"secretKey",children:"Secret Key (Optional)"}),e.jsx(K,{id:"secretKey",type:"password",placeholder:"Enter secret key if required",value:u.secretKey,onChange:P=>m(R=>({...R,secretKey:P.target.value}))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"environment",children:"Environment *"}),e.jsxs(ie,{value:u.environment,onValueChange:P=>m(R=>({...R,environment:P})),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select environment"})}),e.jsx(oe,{children:S.map(P=>e.jsx(T,{value:P.value,children:P.label},P.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"description",children:"Description"}),e.jsx(Re,{id:"description",placeholder:"Describe the purpose and usage of this credential",rows:3,value:u.description,onChange:P=>m(R=>({...R,description:P.target.value})),className:"resize-none"})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Store Credential"]}),e.jsx(k,{type:"button",variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsx(F,{children:e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Credential"}),e.jsx(J,{children:"Provider"}),e.jsx(J,{children:"Environment"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Last Rotated"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:D.map(P=>{var R,U;return e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.name}),e.jsx("div",{className:"text-sm text-gray-600",children:P.description}),e.jsxs("div",{className:"flex items-center mt-1 text-xs text-gray-500",children:[e.jsx("span",{className:"font-mono",children:o[P.id]?P.apiKeyPreview.replace(/•/g,"X"):P.apiKeyPreview}),e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>N(P.id),className:"ml-2 h-6 w-6 p-0",children:o[P.id]?e.jsx(It,{className:"w-3 h-3"}):e.jsx(ze,{className:"w-3 h-3"})})]})]})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center",children:[(R=b.find(I=>I.value===P.provider))==null?void 0:R.icon,e.jsx("span",{className:"ml-2",children:(U=b.find(I=>I.value===P.provider))==null?void 0:U.label})]})}),e.jsx(X,{children:C(P.environment)}),e.jsx(X,{children:O(P.status)}),e.jsxs(X,{children:[e.jsx("div",{className:"text-sm",children:P.lastRotated}),e.jsx("div",{className:"text-xs text-gray-500",children:P.status==="warning"&&"⚠️ Rotation needed"})]}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(tu,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",className:"text-red-600",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},P.id)})})]})})})]}),e.jsxs(ge,{value:"feature-flags",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Feature Flags"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Control feature rollouts and enable/disable functionality"})]}),e.jsxs(At,{open:l,onOpenChange:c,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(xd,{className:"w-4 h-4 mr-2"}),"Create Feature Flag"]})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Create Feature Flag"}),e.jsx(Tt,{children:"Control feature visibility and rollout to specific user segments"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"flagName",children:"Feature Flag Name *"}),e.jsx(K,{id:"flagName",placeholder:"e.g., advanced_analytics",value:h.name,onChange:P=>x(R=>({...R,name:P.target.value})),required:!0}),e.jsx("p",{className:"text-xs text-gray-500",children:"Use lowercase with underscores (snake_case)"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"flagDescription",children:"Description *"}),e.jsx(Re,{id:"flagDescription",placeholder:"Describe what this feature flag controls",rows:3,value:h.description,onChange:P=>x(R=>({...R,description:P.target.value})),required:!0,className:"resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"flagEnvironment",children:"Environment *"}),e.jsxs(ie,{value:h.environment,onValueChange:P=>x(R=>({...R,environment:P})),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select environment"})}),e.jsx(oe,{children:S.map(P=>e.jsx(T,{value:P.value,children:P.label},P.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"rolloutPercentage",children:"Rollout Percentage"}),e.jsx(K,{id:"rolloutPercentage",type:"number",min:"0",max:"100",placeholder:"0-100",value:h.rolloutPercentage,onChange:P=>x(R=>({...R,rolloutPercentage:parseInt(P.target.value)||0}))})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{checked:h.enabled,onCheckedChange:P=>x(R=>({...R,enabled:P}))}),e.jsx(_,{htmlFor:"enabled",children:"Enable Feature Flag"})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(xd,{className:"w-4 h-4 mr-2"}),"Create Feature Flag"]}),e.jsx(k,{type:"button",variant:"outline",onClick:()=>c(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6",children:E.map(P=>e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:P.name}),O(P.status),C(P.environment)]}),e.jsx(Q,{className:"mt-2",children:P.description})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{checked:P.enabled}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]})}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Rollout"}),e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[P.rolloutPercentage,"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${P.rolloutPercentage}%`}})})]})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Affected Users"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:P.affectedUsers.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Created By"}),e.jsx("div",{className:"text-sm mt-1",children:P.createdBy})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Last Modified"}),e.jsx("div",{className:"text-sm mt-1",children:new Date(P.lastModified).toLocaleDateString()})]})]}),P.targetSegments.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Target Segments"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:P.targetSegments.map(R=>{var U;return e.jsx(W,{variant:"blue",className:"text-xs",children:((U=A.find(I=>I.value===R))==null?void 0:U.label)||R},R)})})]})]})]},P.id))})]}),e.jsxs(ge,{value:"throttling",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Global Rate Limiting & Throttling"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure rate limits to protect services from traffic spikes"})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),e.jsx("span",{children:"API Rate Limits"})]}),e.jsx(Q,{children:"Global rate limiting rules for API endpoints"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Requests per minute"}),e.jsx(K,{defaultValue:"1000",type:"number"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Burst limit"}),e.jsx(K,{defaultValue:"100",type:"number"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Concurrent connections"}),e.jsx(K,{defaultValue:"50",type:"number"})]})]}),e.jsx(k,{className:"w-full",children:"Update Rate Limits"})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center space-x-2",children:[e.jsx(vt,{className:"w-5 h-5"}),e.jsx("span",{children:"Service Throttling"})]}),e.jsx(Q,{children:"Configure throttling for different services"})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Service"}),e.jsx(J,{children:"Current Limit"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Actions"})]})}),e.jsxs(mt,{children:[e.jsxs(_e,{children:[e.jsx(X,{children:"Email Service"}),e.jsx(X,{children:"500/hour"}),e.jsx(X,{children:e.jsx(W,{variant:"green",children:"Healthy"})}),e.jsx(X,{children:e.jsx(k,{variant:"ghost",size:"sm",children:"Configure"})})]}),e.jsxs(_e,{children:[e.jsx(X,{children:"SMS Service"}),e.jsx(X,{children:"100/hour"}),e.jsx(X,{children:e.jsx(W,{variant:"yellow",children:"Near Limit"})}),e.jsx(X,{children:e.jsx(k,{variant:"ghost",size:"sm",children:"Configure"})})]}),e.jsxs(_e,{children:[e.jsx(X,{children:"Payment Processing"}),e.jsx(X,{children:"1000/hour"}),e.jsx(X,{children:e.jsx(W,{variant:"green",children:"Healthy"})}),e.jsx(X,{children:e.jsx(k,{variant:"ghost",size:"sm",children:"Configure"})})]})]})]})})]})]})]}),e.jsxs(ge,{value:"audit",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Configuration Audit Trail"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track all configuration changes and system modifications"})]}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:[{id:1,action:"Credential Updated",resource:"Midtrans Payment Gateway",user:"john.doe@company.com",timestamp:"2024-01-25T14:30:00Z",changes:"API key rotated",severity:"medium"},{id:2,action:"Feature Flag Modified",resource:"advanced_analytics",user:"dev.team@company.com",timestamp:"2024-01-25T13:15:00Z",changes:"Rollout increased to 75%",severity:"low"},{id:3,action:"Rate Limit Updated",resource:"API Gateway",user:"ops.team@company.com",timestamp:"2024-01-25T12:00:00Z",changes:"Increased from 500 to 1000 req/min",severity:"high"}].map(P=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${P.severity==="high"?"bg-red-500":P.severity==="medium"?"bg-yellow-500":"bg-green-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium",children:P.action}),e.jsx(W,{variant:"gray",className:"text-xs",children:P.resource})]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:P.changes}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["by ",P.user," • ",new Date(P.timestamp).toLocaleString()]})]}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ec,{className:"w-4 h-4"})})]},P.id))})})})]})]})]})},RV=()=>{const[t,s]=y.useState("microservices"),[a,r]=y.useState(30),[n,i]=y.useState(!0),[l,c]=y.useState([{id:"api-gateway",name:"API Gateway",status:"healthy",version:"v2.1.3",instances:3,healthyInstances:3,uptime:"99.9%",lastDeployment:"2024-01-20T10:00:00Z",metrics:{requestsPerMinute:1247,p99Latency:45,errorRate:.2,cpuUsage:65,memoryUsage:70,diskUsage:45},endpoints:[{path:"/api/v1/auth",status:"healthy",responseTime:120},{path:"/api/v1/users",status:"healthy",responseTime:85},{path:"/api/v1/payments",status:"degraded",responseTime:350}]},{id:"auth-service",name:"Authentication Service",status:"healthy",version:"v1.8.2",instances:2,healthyInstances:2,uptime:"99.8%",lastDeployment:"2024-01-18T14:30:00Z",metrics:{requestsPerMinute:523,p99Latency:78,errorRate:.1,cpuUsage:45,memoryUsage:60,diskUsage:30},endpoints:[{path:"/auth/login",status:"healthy",responseTime:95},{path:"/auth/refresh",status:"healthy",responseTime:65},{path:"/auth/verify",status:"healthy",responseTime:110}]},{id:"messaging-service",name:"Messaging Service",status:"warning",version:"v1.5.1",instances:2,healthyInstances:1,uptime:"98.5%",lastDeployment:"2024-01-15T09:15:00Z",metrics:{requestsPerMinute:892,p99Latency:156,errorRate:2.1,cpuUsage:85,memoryUsage:90,diskUsage:65},endpoints:[{path:"/messaging/email",status:"warning",responseTime:245},{path:"/messaging/sms",status:"healthy",responseTime:120},{path:"/messaging/webhook",status:"error",responseTime:0}]},{id:"payment-service",name:"Payment Processing",status:"healthy",version:"v3.2.1",instances:4,healthyInstances:4,uptime:"99.95%",lastDeployment:"2024-01-22T16:45:00Z",metrics:{requestsPerMinute:234,p99Latency:89,errorRate:.05,cpuUsage:35,memoryUsage:55,diskUsage:40},endpoints:[{path:"/payments/process",status:"healthy",responseTime:180},{path:"/payments/refund",status:"healthy",responseTime:145},{path:"/payments/webhook",status:"healthy",responseTime:90}]},{id:"n8n-workflows",name:"N8N Workflow Engine",status:"healthy",version:"v0.219.1",instances:2,healthyInstances:2,uptime:"99.7%",lastDeployment:"2024-01-19T11:20:00Z",metrics:{requestsPerMinute:167,p99Latency:234,errorRate:.3,cpuUsage:55,memoryUsage:65,diskUsage:70},endpoints:[{path:"/n8n/webhooks",status:"healthy",responseTime:156},{path:"/n8n/api",status:"healthy",responseTime:198},{path:"/n8n/editor",status:"healthy",responseTime:245}]}]),[o,d]=y.useState([{id:"email-queue",name:"Email Queue",status:"active",pending:23,processing:5,failed:2,completed:1247,workers:8,throughput:"45 jobs/min",avgProcessingTime:"2.3s",lastProcessed:"2024-01-25T15:30:00Z"},{id:"report-queue",name:"Report Generation",status:"active",pending:12,processing:2,failed:0,completed:89,workers:3,throughput:"8 jobs/min",avgProcessingTime:"15.6s",lastProcessed:"2024-01-25T15:28:00Z"},{id:"analytics-queue",name:"Analytics Aggregation",status:"paused",pending:156,processing:0,failed:5,completed:523,workers:0,throughput:"0 jobs/min",avgProcessingTime:"5.2s",lastProcessed:"2024-01-25T14:45:00Z"},{id:"backup-queue",name:"Database Backup",status:"active",pending:0,processing:1,failed:0,completed:24,workers:1,throughput:"1 job/day",avgProcessingTime:"45min",lastProcessed:"2024-01-25T03:00:00Z"}]),[u,m]=y.useState([{id:1,type:"Full Database",status:"completed",size:"2.3 GB",duration:"12 minutes",timestamp:"2024-01-25T03:00:00Z",retentionDays:30,location:"s3://backups/db-full-20240125.sql.gz"},{id:2,type:"Incremental",status:"completed",size:"156 MB",duration:"3 minutes",timestamp:"2024-01-24T15:00:00Z",retentionDays:7,location:"s3://backups/db-inc-20240124.sql.gz"},{id:3,type:"Configuration",status:"completed",size:"45 MB",duration:"1 minute",timestamp:"2024-01-24T12:00:00Z",retentionDays:14,location:"s3://backups/config-20240124.tar.gz"},{id:4,type:"Full Database",status:"failed",size:"0 MB",duration:"0 minutes",timestamp:"2024-01-23T03:00:00Z",retentionDays:30,location:null,error:"Connection timeout to backup storage"}]),[h,x]=y.useState([{id:1,name:"Customer Onboarding",status:"active",executions:156,successRate:98.7,lastExecution:"2024-01-25T15:25:00Z",avgDuration:"2.3s",description:"Automated customer onboarding workflow"},{id:2,name:"Payment Notifications",status:"active",executions:523,successRate:99.2,lastExecution:"2024-01-25T15:30:00Z",avgDuration:"1.8s",description:"Send payment confirmation emails"},{id:3,name:"Data Synchronization",status:"error",executions:89,successRate:85.4,lastExecution:"2024-01-25T14:45:00Z",avgDuration:"5.6s",description:"Sync data between systems",error:"API connection failed"}]),f=p=>{const g={healthy:{color:"green",label:"Healthy"},warning:{color:"yellow",label:"Warning"},error:{color:"red",label:"Error"},degraded:{color:"orange",label:"Degraded"},active:{color:"green",label:"Active"},paused:{color:"gray",label:"Paused"},failed:{color:"red",label:"Failed"},completed:{color:"green",label:"Completed"}},w=g[p]||g.healthy;return e.jsx(W,{variant:w.color,children:w.label})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Service & Infrastructure Health"}),e.jsx("p",{className:"text-gray-600",children:"Monitor microservices, job queues, and infrastructure components"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{children:"Auto-refresh"}),e.jsx("input",{type:"checkbox",checked:n,onChange:p=>i(p.target.checked),className:"rounded border-gray-300"}),e.jsxs(ie,{value:a.toString(),onValueChange:p=>r(parseInt(p)),children:[e.jsx(le,{className:"w-20",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"10",children:"10s"}),e.jsx(T,{value:"30",children:"30s"}),e.jsx(T,{value:"60",children:"1m"}),e.jsx(T,{value:"300",children:"5m"})]})]})]}),e.jsxs(k,{variant:"outline",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Me,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Healthy Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.filter(p=>p.status==="healthy").length})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Qe,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warning Services"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.filter(p=>p.status==="warning").length})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(vt,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Jobs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.reduce((p,g)=>p+g.processing,0)})]})]})})}),e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(px,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Instances"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.reduce((p,g)=>p+g.instances,0)})]})]})})})]}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-4",children:[e.jsxs(pe,{value:"microservices",className:"flex items-center space-x-2",children:[e.jsx(px,{className:"w-4 h-4"}),e.jsx("span",{children:"Microservices"})]}),e.jsxs(pe,{value:"queues",className:"flex items-center space-x-2",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{children:"Job Queues"})]}),e.jsxs(pe,{value:"workflows",className:"flex items-center space-x-2",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{children:"N8N Workflows"})]}),e.jsxs(pe,{value:"backups",className:"flex items-center space-x-2",children:[e.jsx(gx,{className:"w-4 h-4"}),e.jsx("span",{children:"Backups"})]})]}),e.jsx(ge,{value:"microservices",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:l.map(p=>e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${p.status==="healthy"?"bg-green-500":p.status==="warning"?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx(V,{className:"text-lg",children:p.name}),e.jsxs(Q,{children:[p.version," • ",p.instances," instances • ",p.uptime," uptime"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[f(p.status),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ql,{className:"w-4 h-4"})})]})]})}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Requests/min"}),e.jsx("div",{className:"text-lg font-bold mt-1",children:p.metrics.requestsPerMinute})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"P99 Latency"}),e.jsxs("div",{className:"text-lg font-bold mt-1",children:[p.metrics.p99Latency,"ms"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Error Rate"}),e.jsxs("div",{className:"text-lg font-bold mt-1",children:[p.metrics.errorRate,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"CPU"}),e.jsxs("div",{className:"text-lg font-bold mt-1",children:[p.metrics.cpuUsage,"%"]}),e.jsx(us,{value:p.metrics.cpuUsage,className:"mt-1 h-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Memory"}),e.jsxs("div",{className:"text-lg font-bold mt-1",children:[p.metrics.memoryUsage,"%"]}),e.jsx(us,{value:p.metrics.memoryUsage,className:"mt-1 h-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Disk"}),e.jsxs("div",{className:"text-lg font-bold mt-1",children:[p.metrics.diskUsage,"%"]}),e.jsx(us,{value:p.metrics.diskUsage,className:"mt-1 h-2"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Endpoint Health"}),e.jsx("div",{className:"space-y-2",children:p.endpoints.map((g,w)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${g.status==="healthy"?"bg-green-500":g.status==="degraded"?"bg-yellow-500":"bg-red-500"}`}),e.jsx("span",{className:"font-mono text-sm",children:g.path})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm text-gray-600",children:g.responseTime?`${g.responseTime}ms`:"N/A"}),e.jsx(W,{variant:g.status==="healthy"?"green":g.status==="degraded"?"yellow":"red",className:"text-xs",children:g.status})]})]},w))})]})]})]},p.id))})}),e.jsx(ge,{value:"queues",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:o.map(p=>e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(V,{className:"flex items-center space-x-3",children:[e.jsx("span",{children:p.name}),f(p.status)]}),e.jsxs(Q,{children:[p.workers," workers • ",p.throughput," • avg ",p.avgProcessingTime]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p.status==="paused"?e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(vx,{className:"w-4 h-4 mr-2"}),"Resume"]}):e.jsxs(k,{variant:"outline",size:"sm",children:[e.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Pause"]}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Te,{className:"w-4 h-4"})})]})]})}),e.jsxs(B,{children:[e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Pending"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-blue-600",children:p.pending})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Processing"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-yellow-600",children:p.processing})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Failed"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-red-600",children:p.failed}),p.failed>0&&e.jsxs(k,{variant:"outline",size:"sm",className:"mt-1",children:[e.jsx(ws,{className:"w-3 h-3 mr-1"}),"Retry"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Completed"}),e.jsx("div",{className:"text-2xl font-bold mt-1 text-green-600",children:p.completed})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Workers"}),e.jsx("div",{className:"text-2xl font-bold mt-1",children:p.workers})]})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Last processed: ",new Date(p.lastProcessed).toLocaleString()]})]})]},p.id))})}),e.jsxs(ge,{value:"workflows",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"N8N Workflow Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor and manage automated workflows"})]}),e.jsxs(k,{variant:"outline",children:[e.jsx(ql,{className:"w-4 h-4 mr-2"}),"Open N8N Editor"]})]}),e.jsx(F,{children:e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Workflow"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Executions"}),e.jsx(J,{children:"Success Rate"}),e.jsx(J,{children:"Avg Duration"}),e.jsx(J,{children:"Last Execution"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:h.map(p=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:p.name}),e.jsx("div",{className:"text-sm text-gray-600",children:p.description}),p.error&&e.jsxs("div",{className:"text-xs text-red-600 mt-1",children:["⚠️ ",p.error]})]})}),e.jsx(X,{children:f(p.status)}),e.jsx(X,{children:p.executions}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{children:[p.successRate,"%"]}),e.jsx(us,{value:p.successRate,className:"w-16 h-2"})]})}),e.jsx(X,{children:p.avgDuration}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(p.lastExecution).toLocaleString()})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[p.status==="active"?e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Cw,{className:"w-4 h-4"})}):e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(vx,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ql,{className:"w-4 h-4"})})]})})]},p.id))})]})})})]}),e.jsxs(ge,{value:"backups",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Backup & Disaster Recovery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor backup status and manage recovery processes"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(k,{variant:"outline",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Download Backup"]}),e.jsxs(k,{children:[e.jsx(tu,{className:"w-4 h-4 mr-2"}),"Create Backup"]})]})]}),e.jsx(F,{children:e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Backup Type"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Size"}),e.jsx(J,{children:"Duration"}),e.jsx(J,{children:"Timestamp"}),e.jsx(J,{children:"Retention"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:u.map(p=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gx,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"font-medium",children:p.type})]})}),e.jsx(X,{children:e.jsxs("div",{children:[f(p.status),p.error&&e.jsx("div",{className:"text-xs text-red-600 mt-1",children:p.error})]})}),e.jsx(X,{children:p.size}),e.jsx(X,{children:p.duration}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(p.timestamp).toLocaleString()})}),e.jsxs(X,{children:[p.retentionDays," days"]}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[p.status==="completed"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(tu,{className:"w-4 h-4"})})]}),p.status==="failed"&&e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ws,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",className:"text-red-600",children:e.jsx(Trash2,{className:"w-4 h-4"})})]})})]},p.id))})]})})}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Backup Policies"}),e.jsx(Q,{children:"Configure automated backup schedules and retention policies"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Full Backup Schedule"}),e.jsx(K,{defaultValue:"Daily at 03:00 UTC"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Incremental Schedule"}),e.jsx(K,{defaultValue:"Every 6 hours"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Configuration Backup"}),e.jsx(K,{defaultValue:"Daily at 12:00 UTC"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"Full Backup Retention"}),e.jsx(K,{defaultValue:"30",type:"number"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Incremental Retention"}),e.jsx(K,{defaultValue:"7",type:"number"})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Config Retention"}),e.jsx(K,{defaultValue:"14",type:"number"})]})]}),e.jsx(k,{className:"w-full",children:"Update Backup Policies"})]})})]})]})]})]})},LV=()=>{const[t,s]=y.useState("audit-trail"),[a,r]=y.useState(!1);y.useState(!1);const[n,i]=y.useState(""),[l,c]=y.useState("all"),[o,d]=y.useState("all"),[u,m]=y.useState("all"),[h,x]=y.useState("7d"),[f,p]=y.useState({name:"",description:"",permissions:[]}),[g,w]=y.useState([{id:1,timestamp:"2024-01-25T15:30:00Z",user:"john.doe@company.com",action:"credential_updated",resource:"Midtrans Payment Gateway",resourceType:"credential",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",location:"Jakarta, Indonesia",severity:"medium",status:"success",details:{changes:["API key rotated","Environment changed from staging to production"],previousValue:"SB-Mid-••••••••",newValue:"VT-Mid-••••••••"}},{id:2,timestamp:"2024-01-25T14:45:00Z",user:"admin@company.com",action:"user_login",resource:"Super Admin Panel",resourceType:"system",ipAddress:"203.142.45.123",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",location:"Singapore",severity:"low",status:"success",details:{loginMethod:"2FA",sessionDuration:"8 hours"}},{id:3,timestamp:"2024-01-25T13:20:00Z",user:"ops.team@company.com",action:"feature_flag_modified",resource:"advanced_analytics",resourceType:"feature_flag",ipAddress:"10.0.0.15",userAgent:"Mozilla/5.0 (X11; Linux x86_64)",location:"Internal Network",severity:"medium",status:"success",details:{changes:["Rollout percentage increased from 50% to 75%"],targetSegments:["enterprise","beta"]}},{id:4,timestamp:"2024-01-25T12:30:00Z",user:"unknown@external.com",action:"login_attempt",resource:"Super Admin Panel",resourceType:"system",ipAddress:"45.123.67.89",userAgent:"curl/7.68.0",location:"Unknown",severity:"high",status:"failed",details:{reason:"Invalid credentials",attempts:5}},{id:5,timestamp:"2024-01-25T11:15:00Z",user:"finance@company.com",action:"data_export",resource:"Payment Transactions",resourceType:"data",ipAddress:"192.168.1.205",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",location:"Jakarta, Indonesia",severity:"high",status:"success",details:{recordCount:1523,dateRange:"2024-01-01 to 2024-01-24",format:"CSV"}}]),[S,b]=y.useState([{id:1,name:"Platform Support Tier 2",description:"Advanced platform support with limited administrative access",permissions:["view_all_transactions","view_system_health","manage_feature_flags","view_audit_logs"],userCount:3,createdBy:"admin@company.com",createdAt:"2024-01-20T10:00:00Z",lastModified:"2024-01-23T14:30:00Z"},{id:2,name:"Finance Admin",description:"Financial operations and reporting access",permissions:["view_all_transactions","issue_refunds","export_financial_data","view_revenue_reports"],userCount:2,createdBy:"admin@company.com",createdAt:"2024-01-15T09:00:00Z",lastModified:"2024-01-15T09:00:00Z"},{id:3,name:"Customer Success Manager",description:"Client relationship and success management",permissions:["view_client_data","manage_client_communications","access_client_analytics","login_as_admin"],userCount:5,createdBy:"admin@company.com",createdAt:"2024-01-10T11:00:00Z",lastModified:"2024-01-22T16:00:00Z"}]),[A,v]=y.useState([{id:1,user:"john.doe@company.com",role:"Super Admin",ipAddress:"192.168.1.100",location:"Jakarta, Indonesia",device:"Windows 10 - Chrome",loginTime:"2024-01-25T08:00:00Z",lastActivity:"2024-01-25T15:30:00Z",status:"active",sessionId:"sess_abc123def456"},{id:2,user:"jane.smith@company.com",role:"Finance Admin",ipAddress:"192.168.1.150",location:"Jakarta, Indonesia",device:"macOS - Safari",loginTime:"2024-01-25T09:30:00Z",lastActivity:"2024-01-25T15:25:00Z",status:"active",sessionId:"sess_xyz789ghi012"},{id:3,user:"mike.wilson@company.com",role:"Platform Support Tier 2",ipAddress:"203.142.45.123",location:"Singapore",device:"Ubuntu - Firefox",loginTime:"2024-01-25T07:45:00Z",lastActivity:"2024-01-25T14:20:00Z",status:"idle",sessionId:"sess_mno345pqr678"}]),[j,N]=y.useState([{id:1,ipAddress:"192.168.1.0/24",description:"Main Office Network",addedBy:"admin@company.com",addedAt:"2024-01-01T00:00:00Z",lastUsed:"2024-01-25T15:30:00Z",status:"active"},{id:2,ipAddress:"203.142.45.123",description:"Singapore Office VPN",addedBy:"admin@company.com",addedAt:"2024-01-10T10:00:00Z",lastUsed:"2024-01-25T14:20:00Z",status:"active"},{id:3,ipAddress:"10.0.0.0/16",description:"Internal Development Network",addedBy:"dev.team@company.com",addedAt:"2024-01-15T12:00:00Z",lastUsed:"2024-01-24T18:45:00Z",status:"active"}]),O=[{id:"view_all_transactions",name:"View All Transactions",category:"Financial"},{id:"issue_refunds",name:"Issue Refunds",category:"Financial"},{id:"export_financial_data",name:"Export Financial Data",category:"Financial"},{id:"view_revenue_reports",name:"View Revenue Reports",category:"Financial"},{id:"login_as_admin",name:"Login as Organization Admin",category:"System"},{id:"manage_feature_flags",name:"Manage Feature Flags",category:"Platform"},{id:"view_system_health",name:"View System Health",category:"Platform"},{id:"manage_credentials",name:"Manage API Credentials",category:"Platform"},{id:"view_audit_logs",name:"View Audit Logs",category:"Security"},{id:"manage_users",name:"Manage User Accounts",category:"System"},{id:"view_client_data",name:"View Client Data",category:"Client"},{id:"manage_client_communications",name:"Manage Client Communications",category:"Client"},{id:"access_client_analytics",name:"Access Client Analytics",category:"Client"}],C=I=>{const L={success:{color:"green",label:"Success"},failed:{color:"red",label:"Failed"},active:{color:"green",label:"Active"},idle:{color:"yellow",label:"Idle"},blocked:{color:"red",label:"Blocked"}},Z=L[I]||L.active;return e.jsx(W,{variant:Z.color,children:Z.label})},D=I=>{const L={low:{color:"green",label:"Low"},medium:{color:"yellow",label:"Medium"},high:{color:"red",label:"High"},critical:{color:"red",label:"Critical"}},Z=L[I]||L.low;return e.jsx(W,{variant:Z.color,children:Z.label})},E=I=>{const Z={login_attempt:eu,user_login:Pe,credential_updated:Jt,feature_flag_modified:Te,data_export:ds,user_created:oa,user_deleted:Ve,system_config:Te}[I]||vt;return e.jsx(Z,{className:"w-4 h-4"})},P=g.filter(I=>{const L=I.user.toLowerCase().includes(n.toLowerCase())||I.resource.toLowerCase().includes(n.toLowerCase())||I.action.toLowerCase().includes(n.toLowerCase()),Z=l==="all"||I.action===l,q=o==="all"||I.user===o,z=u==="all"||I.severity===u;return L&&Z&&q&&z}),R=I=>{I.preventDefault();const L={id:Date.now(),...f,userCount:0,createdBy:"current.user@company.com",createdAt:new Date().toISOString(),lastModified:new Date().toISOString()};b([L,...S]),p({name:"",description:"",permissions:[]}),r(!1)},U=I=>{v(L=>L.filter(Z=>Z.sessionId!==I))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Security & Compliance"}),e.jsx("p",{className:"text-gray-600",children:"Audit trails, access management, and security monitoring"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(k,{variant:"outline",children:[e.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export Report"]}),e.jsxs(k,{children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Compliance Report"]})]})]}),e.jsxs(kt,{value:t,onValueChange:s,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-5",children:[e.jsxs(pe,{value:"audit-trail",className:"flex items-center space-x-2",children:[e.jsx(ec,{className:"w-4 h-4"}),e.jsx("span",{children:"Audit Trail"})]}),e.jsxs(pe,{value:"rbac",className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{children:"RBAC"})]}),e.jsxs(pe,{value:"sessions",className:"flex items-center space-x-2",children:[e.jsx(eu,{className:"w-4 h-4"}),e.jsx("span",{children:"Active Sessions"})]}),e.jsxs(pe,{value:"access-control",className:"flex items-center space-x-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Access Control"})]}),e.jsxs(pe,{value:"compliance",className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),e.jsx("span",{children:"Compliance"})]})]}),e.jsxs(ge,{value:"audit-trail",className:"space-y-6",children:[e.jsx(F,{children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{htmlFor:"search",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(K,{id:"search",placeholder:"Search logs...",value:n,onChange:I=>i(I.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"filterAction",children:"Action"}),e.jsxs(ie,{value:l,onValueChange:c,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"All actions"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Actions"}),e.jsx(T,{value:"login_attempt",children:"Login Attempt"}),e.jsx(T,{value:"user_login",children:"User Login"}),e.jsx(T,{value:"credential_updated",children:"Credential Updated"}),e.jsx(T,{value:"feature_flag_modified",children:"Feature Flag Modified"}),e.jsx(T,{value:"data_export",children:"Data Export"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"filterUser",children:"User"}),e.jsxs(ie,{value:o,onValueChange:d,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"All users"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Users"}),e.jsx(T,{value:"admin@company.com",children:"admin@company.com"}),e.jsx(T,{value:"john.doe@company.com",children:"john.doe@company.com"}),e.jsx(T,{value:"ops.team@company.com",children:"ops.team@company.com"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"filterSeverity",children:"Severity"}),e.jsxs(ie,{value:u,onValueChange:m,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"All severities"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Severities"}),e.jsx(T,{value:"low",children:"Low"}),e.jsx(T,{value:"medium",children:"Medium"}),e.jsx(T,{value:"high",children:"High"}),e.jsx(T,{value:"critical",children:"Critical"})]})]})]}),e.jsxs("div",{children:[e.jsx(_,{htmlFor:"dateRange",children:"Date Range"}),e.jsxs(ie,{value:h,onValueChange:x,children:[e.jsx(le,{children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"1d",children:"Last 24 hours"}),e.jsx(T,{value:"7d",children:"Last 7 days"}),e.jsx(T,{value:"30d",children:"Last 30 days"}),e.jsx(T,{value:"90d",children:"Last 90 days"})]})]})]})]})})}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{children:["Audit Logs (",P.length," entries)"]}),e.jsx(Q,{children:"Comprehensive system activity tracking"})]}),e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Timestamp"}),e.jsx(J,{children:"User"}),e.jsx(J,{children:"Action"}),e.jsx(J,{children:"Resource"}),e.jsx(J,{children:"Location"}),e.jsx(J,{children:"Severity"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Details"})]})}),e.jsx(mt,{children:P.map(I=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(I.timestamp).toLocaleString()})}),e.jsxs(X,{children:[e.jsx("div",{className:"font-medium",children:I.user}),e.jsx("div",{className:"text-xs text-gray-500",children:I.ipAddress})]}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[E(I.action),e.jsx("span",{className:"text-sm",children:I.action.replace(/_/g," ")})]})}),e.jsxs(X,{children:[e.jsx("div",{className:"font-medium",children:I.resource}),e.jsx("div",{className:"text-xs text-gray-500",children:I.resourceType})]}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Pr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:I.location})]})}),e.jsx(X,{children:D(I.severity)}),e.jsx(X,{children:C(I.status)}),e.jsx(X,{children:e.jsxs(At,{children:[e.jsx(Qt,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ze,{className:"w-4 h-4"})})}),e.jsxs(Ct,{className:"max-w-2xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Audit Log Details"}),e.jsxs(Tt,{children:[I.action.replace(/_/g," ")," • ",new Date(I.timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"User"}),e.jsx("div",{className:"text-sm",children:I.user})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"IP Address"}),e.jsx("div",{className:"text-sm",children:I.ipAddress})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"Location"}),e.jsx("div",{className:"text-sm",children:I.location})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"User Agent"}),e.jsx("div",{className:"text-sm truncate",children:I.userAgent})]})]}),I.details&&e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"Details"}),e.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:e.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(I.details,null,2)})})]})]})]})]})})]},I.id))})]})})]})]}),e.jsxs(ge,{value:"rbac",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Role-Based Access Control"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage custom roles and granular permissions"})]}),e.jsxs(At,{open:a,onOpenChange:r,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Create Custom Role"]})}),e.jsxs(Ct,{className:"max-w-3xl",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Create Custom Role"}),e.jsx(Tt,{children:"Define a new role with specific permissions following least privilege principle"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"roleName",children:"Role Name *"}),e.jsx(K,{id:"roleName",placeholder:"e.g., Platform Support Tier 3",value:f.name,onChange:I=>p(L=>({...L,name:I.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"roleDescription",children:"Description *"}),e.jsx(K,{id:"roleDescription",placeholder:"Brief description of the role",value:f.description,onChange:I=>p(L=>({...L,description:I.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(O.reduce((I,L)=>(I[L.category]||(I[L.category]=[]),I[L.category].push(L),I),{})).map(([I,L])=>e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:I}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.map(Z=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(hn,{checked:f.permissions.includes(Z.id),onChange:q=>{p(q?z=>({...z,permissions:[...z.permissions,Z.id]}):z=>({...z,permissions:z.permissions.filter(ne=>ne!==Z.id)}))}}),e.jsx(_,{className:"text-sm",children:Z.name})]},Z.id))})]},I))})]}),e.jsxs("div",{className:"flex gap-4 pt-4 border-t",children:[e.jsxs(k,{type:"submit",className:"flex-1",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Create Role"]}),e.jsx(k,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6",children:S.map(I=>e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:I.name}),e.jsxs(Q,{className:"mt-1",children:[I.description," • ",I.userCount," users assigned"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",className:"text-red-600",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]})}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(_,{className:"text-sm font-medium text-gray-700",children:["Permissions (",I.permissions.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:I.permissions.map(L=>{const Z=O.find(q=>q.id===L);return Z?e.jsx(W,{variant:"blue",className:"text-xs",children:Z.name},L):null})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-gray-500",children:[e.jsx("div",{children:e.jsxs("span",{children:["Created by: ",I.createdBy]})}),e.jsx("div",{children:e.jsxs("span",{children:["Last modified: ",new Date(I.lastModified).toLocaleDateString()]})})]})]})})]},I.id))})]}),e.jsxs(ge,{value:"sessions",className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Active Admin Sessions"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Monitor and manage active user sessions"})]}),e.jsxs(k,{variant:"outline",children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Refresh Sessions"]})]}),e.jsx(F,{children:e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"User"}),e.jsx(J,{children:"Role"}),e.jsx(J,{children:"Location"}),e.jsx(J,{children:"Device"}),e.jsx(J,{children:"Login Time"}),e.jsx(J,{children:"Last Activity"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:A.map(I=>e.jsxs(_e,{children:[e.jsxs(X,{children:[e.jsx("div",{className:"font-medium",children:I.user}),e.jsx("div",{className:"text-xs text-gray-500",children:I.ipAddress})]}),e.jsx(X,{children:e.jsx(W,{variant:"blue",children:I.role})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Pr,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:I.location})]})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:I.device})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(I.loginTime).toLocaleString()})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(I.lastActivity).toLocaleString()})}),e.jsx(X,{children:C(I.status)}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{variant:"ghost",size:"sm",onClick:()=>U(I.sessionId),className:"text-red-600",children:e.jsx(StopCircle,{className:"w-4 h-4"})}),e.jsxs(At,{children:[e.jsx(Qt,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(ze,{className:"w-4 h-4"})})}),e.jsxs(Ct,{children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Session Details"}),e.jsx(Tt,{children:"Detailed information about the user session"})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"Session ID"}),e.jsx("div",{className:"text-sm font-mono",children:I.sessionId})]}),e.jsxs("div",{children:[e.jsx(_,{className:"text-xs text-gray-500 uppercase",children:"Duration"}),e.jsxs("div",{className:"text-sm",children:[Math.floor((new Date(I.lastActivity)-new Date(I.loginTime))/(1e3*60*60))," hours"]})]})]})})]})]})]})})]},I.id))})]})})})]}),e.jsxs(ge,{value:"access-control",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Access Control Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"IP whitelisting and security access policies"})]}),e.jsxs(F,{children:[e.jsx(H,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(V,{children:"IP Whitelist"}),e.jsx(Q,{children:"Manage allowed IP addresses for admin panel access"})]}),e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add IP Address"]})]})}),e.jsx(B,{className:"p-0",children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"IP Address/Range"}),e.jsx(J,{children:"Description"}),e.jsx(J,{children:"Added By"}),e.jsx(J,{children:"Added Date"}),e.jsx(J,{children:"Last Used"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:j.map(I=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsx("span",{className:"font-mono text-sm",children:I.ipAddress})}),e.jsx(X,{children:I.description}),e.jsx(X,{children:I.addedBy}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(I.addedAt).toLocaleDateString()})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:new Date(I.lastUsed).toLocaleString()})}),e.jsx(X,{children:C(I.status)}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{variant:"ghost",size:"sm",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{variant:"ghost",size:"sm",className:"text-red-600",children:e.jsx(Ve,{className:"w-4 h-4"})})]})})]},I.id))})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Security Policies"}),e.jsx(Q,{children:"Configure global security settings"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Require 2FA for all admin accounts"})]}),e.jsx(de,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Session Timeout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Auto-logout inactive sessions"})]}),e.jsxs(ie,{defaultValue:"8h",children:[e.jsx(le,{className:"w-24",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"1h",children:"1 hour"}),e.jsx(T,{value:"4h",children:"4 hours"}),e.jsx(T,{value:"8h",children:"8 hours"}),e.jsx(T,{value:"24h",children:"24 hours"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Failed Login Lockout"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Lock accounts after failed attempts"})]}),e.jsx(K,{defaultValue:"5",type:"number",className:"w-20"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"IP Whitelisting"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Restrict access to whitelisted IPs"})]}),e.jsx(de,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Audit Log Retention"}),e.jsx("p",{className:"text-sm text-gray-600",children:"How long to keep audit logs"})]}),e.jsxs(ie,{defaultValue:"1y",children:[e.jsx(le,{className:"w-24",children:e.jsx(ce,{})}),e.jsxs(oe,{children:[e.jsx(T,{value:"3m",children:"3 months"}),e.jsx(T,{value:"6m",children:"6 months"}),e.jsx(T,{value:"1y",children:"1 year"}),e.jsx(T,{value:"2y",children:"2 years"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(_,{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Alert on suspicious activities"})]}),e.jsx(de,{defaultChecked:!0})]})]})]}),e.jsx(k,{className:"w-full",children:"Update Security Policies"})]})})]})]}),e.jsxs(ge,{value:"compliance",className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Data Privacy & Compliance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tools for GDPR compliance and data management"})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Data Retention Policies"}),e.jsx(Q,{children:"Automated data cleanup and retention management"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(_,{children:"System Logs"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{defaultValue:"180",type:"number"}),e.jsx("span",{className:"text-sm text-gray-500",children:"days"})]})]}),e.jsxs("div",{children:[e.jsx(_,{children:"Audit Logs"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{defaultValue:"365",type:"number"}),e.jsx("span",{className:"text-sm text-gray-500",children:"days"})]})]}),e.jsxs("div",{children:[e.jsx(_,{children:"User Activity"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{defaultValue:"90",type:"number"}),e.jsx("span",{className:"text-sm text-gray-500",children:"days"})]})]})]}),e.jsx(k,{children:"Update Retention Policies"})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Data Deletion Requests"}),e.jsx(Q,{children:"Process customer data deletion requests (GDPR Article 17)"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(K,{placeholder:"Enter user email or ID",className:"flex-1"}),e.jsxs(k,{variant:"outline",children:[e.jsx(cs,{className:"w-4 h-4 mr-2"}),"Search"]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Delete user@example.com data"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Requested on 2024-01-25"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(W,{variant:"yellow",children:"Pending"}),e.jsx(k,{size:"sm",children:"Process"})]})]})})})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Compliance Reports"}),e.jsx(Q,{children:"Generate compliance and security reports"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(k,{variant:"outline",className:"h-20 flex-col",children:[e.jsx(Gt,{className:"w-6 h-6 mb-2"}),e.jsx("span",{children:"Security Audit Report"})]}),e.jsxs(k,{variant:"outline",className:"h-20 flex-col",children:[e.jsx(Ae,{className:"w-6 h-6 mb-2"}),e.jsx("span",{children:"Access Control Report"})]}),e.jsxs(k,{variant:"outline",className:"h-20 flex-col",children:[e.jsx(on,{className:"w-6 h-6 mb-2"}),e.jsx("span",{children:"Data Processing Report"})]}),e.jsxs(k,{variant:"outline",className:"h-20 flex-col",children:[e.jsx(vt,{className:"w-6 h-6 mb-2"}),e.jsx("span",{children:"User Activity Report"})]})]})})]})]})]})]})},FV=({clientData:t})=>{const[s]=y.useState({healthScoreBreakdown:{usage:{score:95,status:"excellent"},satisfaction:{score:88,status:"good"},billing:{score:100,status:"excellent"},support:{score:85,status:"good"}},keyTimeline:[{date:"2024-01-15",event:"Account Created",type:"milestone"},{date:"2024-01-20",event:"First Subscription Activated",type:"milestone"},{date:"2024-03-10",event:"Support Ticket Resolved",type:"support"},{date:"2024-03-20",event:"Last Admin Login",type:"activity"}],usageAnalysis:{messages:{used:8500,limit:1e4,percentage:85},agents:{used:18,limit:25,percentage:72},storage:{used:4.2,limit:10,percentage:42}},featureAdoption:[{feature:"AI Chatbot",adopted:!0,usage:95},{feature:"Live Chat",adopted:!0,usage:78},{feature:"Analytics",adopted:!0,usage:65},{feature:"Integrations",adopted:!1,usage:0},{feature:"API Access",adopted:!0,usage:45}]}),a=n=>{switch(n){case"excellent":return"text-green-600";case"good":return"text-blue-600";case"fair":return"text-yellow-600";case"poor":return"text-red-600";default:return"text-gray-600"}},r=n=>n>=90?"bg-red-500":n>=70?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Health Score Breakdown"}),e.jsx(Q,{children:"Detailed analysis of client health metrics"})]}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Object.entries(s.healthScoreBreakdown).map(([n,i])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold mb-2 ${a(i.status)}`,children:i.score}),e.jsx("div",{className:"text-sm font-medium text-gray-600 capitalize mb-1",children:n}),e.jsx(W,{variant:i.status==="excellent"?"green":i.status==="good"?"blue":"yellow",children:i.status})]},n))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Key Timeline"}),e.jsx(Q,{children:"Important events and milestones"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:s.keyTimeline.map((n,i)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`p-2 rounded-full ${n.type==="milestone"?"bg-green-100 text-green-600":n.type==="support"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:n.type==="milestone"?e.jsx(Me,{className:"w-4 h-4"}):n.type==="support"?e.jsx(Le,{className:"w-4 h-4"}):e.jsx(vt,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:n.event}),e.jsx("div",{className:"text-xs text-gray-500",children:n.date})]})]},i))})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Usage Analysis"}),e.jsx(Q,{children:"Current resource utilization"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(s.usageAnalysis).map(([n,i])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:n}),e.jsxs("span",{className:"text-sm text-gray-600",children:[typeof i.used=="number"&&i.used<100?`${i.used}${n==="storage"?"GB":""}`:i.used.toLocaleString()," / ",typeof i.limit=="number"&&i.limit<100?`${i.limit}${n==="storage"?"GB":""}`:i.limit.toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${r(i.percentage)}`,style:{width:`${i.percentage}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[i.percentage,"% used"]})]},n))})})]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Feature Adoption"}),e.jsx(Q,{children:"Platform feature usage and adoption status"})]}),e.jsx(B,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:s.featureAdoption.map((n,i)=>e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:n.adopted?e.jsx(Me,{className:"w-6 h-6 text-green-600"}):e.jsx(Qe,{className:"w-6 h-6 text-gray-400"})}),e.jsx("div",{className:"font-medium text-sm mb-1",children:n.feature}),e.jsx(W,{variant:n.adopted?"green":"default",children:n.adopted?`${n.usage}% usage`:"Not Adopted"})]},i))})})]})]})},BV=({clientData:t})=>{const[s]=$.useState([{id:1,name:"John Doe",email:"john.doe@abccorp.com",role:"admin",status:"active",lastLogin:"2024-03-20 14:30",permissions:["full_access","user_management","billing"],agentType:"admin"},{id:2,name:"Jane Smith",email:"jane.smith@abccorp.com",role:"user",status:"active",lastLogin:"2024-03-19 09:15",permissions:["limited_access","chat_support"],agentType:"agent"},{id:3,name:"Mike Johnson",email:"mike.johnson@abccorp.com",role:"user",status:"inactive",lastLogin:"2024-03-10 11:45",permissions:["limited_access"],agentType:"agent"}]),a=i=>{switch(i){case"admin":return"bg-red-100 text-red-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},r=i=>{switch(i){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},n=i=>{switch(i){case"admin":return"bg-purple-100 text-purple-800";case"agent":return"bg-green-100 text-green-800";case"supervisor":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Users & Agents"}),e.jsxs("p",{className:"text-gray-600",children:["Manage users and support agents for ",t.name]})]}),e.jsxs(k,{children:[e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Add User"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Users"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(i=>i.status==="active").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Users"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.filter(i=>i.role==="admin").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Admins"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.filter(i=>i.agentType==="agent").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Support Agents"})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"User Management"}),e.jsx(Q,{children:"View and manage all users in this organization"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:s.map(i=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-semibold",children:i.name}),e.jsx(W,{className:a(i.role),children:i.role}),e.jsx(W,{className:r(i.status),children:i.status}),e.jsx(W,{className:n(i.agentType),children:i.agentType})]}),e.jsx("div",{className:"text-sm text-gray-600",children:i.email}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Last login: ",i.lastLogin]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(fs,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]},i.id))})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common user management tasks"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(oa,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Bulk Import Users"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Import users from CSV"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Ae,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Permission Templates"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Manage role permissions"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(vt,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"User Analytics"}),e.jsx("span",{className:"text-xs text-gray-500",children:"View usage statistics"})]})]})})]})]})},UV=({clientData:t})=>{const[s]=$.useState({currentSubscription:{plan:"Enterprise",amount:25e5,billingCycle:"monthly",nextBilling:"2024-04-15",status:"active",features:["Unlimited Users","Advanced Analytics","Priority Support","API Access"]},invoices:[{id:"INV-001",date:"2024-03-15",amount:25e5,status:"paid",dueDate:"2024-03-15",description:"Enterprise Plan - March 2024"},{id:"INV-002",date:"2024-02-15",amount:25e5,status:"paid",dueDate:"2024-02-15",description:"Enterprise Plan - February 2024"},{id:"INV-003",date:"2024-01-15",amount:25e5,status:"paid",dueDate:"2024-01-15",description:"Enterprise Plan - January 2024"}],paymentMethods:[{id:1,type:"credit_card",last4:"4242",expiry:"12/25",isDefault:!0}]}),a=n=>{switch(n){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},r=n=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(n);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Billing & Subscription"}),e.jsxs("p",{className:"text-gray-600",children:["Manage billing, invoices, and subscription for ",t.name]})]}),e.jsxs(k,{children:[e.jsx(jx,{className:"w-4 h-4 mr-2"}),"Generate Invoice"]})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Current Subscription"}),e.jsx(Q,{children:"Active subscription details and next billing information"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:[s.currentSubscription.plan," Plan"]}),e.jsx(W,{variant:"green",children:"Active"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Amount:"}),e.jsx("span",{className:"font-semibold",children:r(s.currentSubscription.amount)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Billing Cycle:"}),e.jsx("span",{className:"font-semibold capitalize",children:s.currentSubscription.billingCycle})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Next Billing:"}),e.jsx("span",{className:"font-semibold",children:s.currentSubscription.nextBilling})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Included Features"}),e.jsx("div",{className:"space-y-2",children:s.currentSubscription.features.map((n,i)=>e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),n]},i))})]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Invoice History"}),e.jsx(Q,{children:"Recent invoices and payment history"})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Invoice #"}),e.jsx(J,{children:"Date"}),e.jsx(J,{children:"Description"}),e.jsx(J,{children:"Amount"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:s.invoices.map(n=>e.jsxs(_e,{children:[e.jsx(X,{className:"font-medium",children:n.id}),e.jsx(X,{children:n.date}),e.jsx(X,{children:n.description}),e.jsx(X,{children:r(n.amount)}),e.jsx(X,{children:e.jsx(W,{className:a(n.status),children:n.status})}),e.jsx(X,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(ds,{className:"w-4 h-4"})})]})})]},n.id))})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Payment Methods"}),e.jsx(Q,{children:"Saved payment methods for automatic billing"})]}),e.jsx(B,{children:e.jsxs("div",{className:"space-y-4",children:[s.paymentMethods.map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(un,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["•••• •••• •••• ",n.last4]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Expires ",n.expiry]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[n.isDefault&&e.jsx(W,{variant:"green",children:"Default"}),e.jsx(k,{size:"sm",variant:"outline",children:"Edit"}),e.jsx(k,{size:"sm",variant:"outline",children:"Remove"})]})]},n.id)),e.jsxs(k,{variant:"outline",className:"w-full",children:[e.jsx(un,{className:"w-4 h-4 mr-2"}),"Add Payment Method"]})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common billing tasks"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(jx,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Download Invoice"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Get PDF copy"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Mt,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Change Billing"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Update cycle"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(rs,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Upgrade Plan"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Add features"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(_r,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Payment History"}),e.jsx("span",{className:"text-xs text-gray-500",children:"View all payments"})]})]})})]})]})},zV=({clientData:t})=>{const[s]=$.useState([{id:1,name:"Customer Support Ticket",description:"Automated workflow for handling customer support tickets",status:"active",lastExecuted:"2024-03-20 15:30",executionCount:156,successRate:98.5,avgExecutionTime:"2.3s",triggers:["new_ticket","ticket_update"]},{id:2,name:"Lead Qualification",description:"Workflow for qualifying and scoring new leads",status:"active",lastExecuted:"2024-03-20 14:15",executionCount:89,successRate:94.2,avgExecutionTime:"1.8s",triggers:["new_lead","lead_interaction"]},{id:3,name:"Invoice Generation",description:"Automated invoice generation and sending",status:"paused",lastExecuted:"2024-03-19 09:00",executionCount:23,successRate:100,avgExecutionTime:"5.2s",triggers:["billing_cycle","manual_trigger"]},{id:4,name:"User Onboarding",description:"Welcome workflow for new user registrations",status:"active",lastExecuted:"2024-03-20 16:45",executionCount:234,successRate:96.8,avgExecutionTime:"3.1s",triggers:["user_registration"]}]),a=n=>{switch(n){case"active":return"bg-green-100 text-green-800";case"paused":return"bg-yellow-100 text-yellow-800";case"error":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},r=n=>{switch(n){case"active":return e.jsx(cn,{className:"w-4 h-4"});case"paused":return e.jsx(Tr,{className:"w-4 h-4"});case"error":return e.jsx(Qe,{className:"w-4 h-4"});case"draft":return e.jsx(et,{className:"w-4 h-4"});default:return e.jsx(et,{className:"w-4 h-4"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"N8N Workflows"}),e.jsxs("p",{className:"text-gray-600",children:["Monitor and manage automated workflows for ",t.name]})]}),e.jsxs(k,{children:[e.jsx(Et,{className:"w-4 h-4 mr-2"}),"Create Workflow"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Workflows"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(n=>n.status==="active").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.reduce((n,i)=>n+i.executionCount,0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Executions"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[(s.reduce((n,i)=>n+i.successRate,0)/s.length).toFixed(1),"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Success Rate"})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Workflow Management"}),e.jsx(Q,{children:"View and manage all automated workflows"})]}),e.jsx(B,{children:e.jsxs(dt,{children:[e.jsx(ut,{children:e.jsxs(_e,{children:[e.jsx(J,{children:"Workflow"}),e.jsx(J,{children:"Status"}),e.jsx(J,{children:"Last Executed"}),e.jsx(J,{children:"Executions"}),e.jsx(J,{children:"Success Rate"}),e.jsx(J,{children:"Avg Time"}),e.jsx(J,{children:"Actions"})]})}),e.jsx(mt,{children:s.map(n=>e.jsxs(_e,{children:[e.jsx(X,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.name}),e.jsx("div",{className:"text-sm text-gray-500",children:n.description})]})}),e.jsx(X,{children:e.jsx(W,{className:a(n.status),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[r(n.status),e.jsx("span",{children:n.status})]})})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:n.lastExecuted})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm font-medium",children:n.executionCount.toLocaleString()})}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"text-sm font-medium",children:[n.successRate,"%"]}),e.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${n.successRate>=95?"bg-green-500":n.successRate>=80?"bg-yellow-500":"bg-red-500"}`,style:{width:`${n.successRate}%`}})})]})}),e.jsx(X,{children:e.jsx("div",{className:"text-sm",children:n.avgExecutionTime})}),e.jsx(X,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Te,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:n.status==="active"?e.jsx(Tr,{className:"w-4 h-4"}):e.jsx(cn,{className:"w-4 h-4"})})]})})]},n.id))})]})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Recent Executions"}),e.jsx(Q,{children:"Latest workflow execution logs and results"})]}),e.jsx(B,{children:e.jsx("div",{className:"space-y-4",children:s.slice(0,3).map(n=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${n.status==="active"?"bg-green-100 text-green-600":n.status==="paused"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Last executed: ",n.lastExecuted]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[n.executionCount," executions"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Success rate: ",n.successRate,"%"]})]})]},n.id))})})]}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common workflow management tasks"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Et,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Import Workflow"}),e.jsx("span",{className:"text-xs text-gray-500",children:"From JSON file"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Te,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Workflow Templates"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Pre-built workflows"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(vt,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Performance Analytics"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Execution metrics"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Qe,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Error Logs"}),e.jsx("span",{className:"text-xs text-gray-500",children:"View failures"})]})]})})]})]})},WV=({clientData:t})=>{const[s,a]=y.useState(!1),[r,n]=y.useState("history"),[i,l]=y.useState(""),[c,o]=y.useState("all"),[d,u]=y.useState("all"),[m,h]=y.useState({type:"",subject:"",recipient:"",message:"",priority:"",schedule:""}),[x,f]=y.useState({recentCommunications:[{id:1,type:"email",subject:"Weekly Check-in: Platform Usage Review",from:"Sarah Johnson (CSM)",to:"John Doe (Admin)",date:"2024-03-20 10:30",status:"sent",preview:"Hi John, I wanted to follow up on our last conversation about increasing your team's adoption..."},{id:2,type:"call",subject:"Technical Setup Call",from:"Mike Chen (Support)",to:"Jane Smith (IT Manager)",date:"2024-03-18 14:00",duration:"45 minutes",status:"completed",notes:"Discussed SSO integration and API configuration. Follow-up required for testing phase."},{id:3,type:"meeting",subject:"Quarterly Business Review",from:"Sarah Johnson (CSM)",to:"ABC Corporation Team",date:"2024-03-15 09:00",duration:"60 minutes",status:"completed",notes:"Reviewed Q1 performance, discussed expansion opportunities, scheduled next QBR for June."},{id:4,type:"email",subject:"Feature Update: AI Chatbot v2.0",from:"Product Team",to:"All Users",date:"2024-03-12 16:00",status:"delivered",preview:"We're excited to announce the latest updates to our AI chatbot capabilities..."}],upcomingCommunications:[{id:1,type:"call",subject:"Monthly Success Review",scheduled:"2024-03-25 10:00",attendees:["Sarah Johnson","John Doe"],status:"scheduled"},{id:2,type:"email",subject:"Invoice Reminder",scheduled:"2024-03-30 09:00",status:"scheduled"}],templates:[{id:1,name:"Weekly Check-in",type:"email",description:"Weekly status update template",content:"Hi [Name], I hope this email finds you well. I wanted to check in on how things are going with [Product/Service]..."},{id:2,name:"Support Follow-up",type:"call",description:"Post-support call template",content:"Thank you for taking the time to speak with us today. I wanted to follow up on the support call we had..."},{id:3,name:"QBR Preparation",type:"meeting",description:"Quarterly review template",content:"I'm looking forward to our Quarterly Business Review next week. Here's what we'll be covering..."},{id:4,name:"Feature Announcement",type:"email",description:"New feature notification",content:"We're excited to announce a new feature that we believe will significantly improve your experience..."}]}),p=C=>{switch(C){case"email":return e.jsx(fs,{className:"w-4 h-4"});case"call":return e.jsx(Pa,{className:"w-4 h-4"});case"meeting":return e.jsx(cj,{className:"w-4 h-4"});case"message":return e.jsx(Le,{className:"w-4 h-4"});default:return e.jsx(Le,{className:"w-4 h-4"})}},g=C=>{switch(C){case"email":return"bg-blue-100 text-blue-600";case"call":return"bg-green-100 text-green-600";case"meeting":return"bg-purple-100 text-purple-600";case"message":return"bg-yellow-100 text-yellow-600";default:return"bg-gray-100 text-gray-600"}},w=C=>{switch(C){case"sent":return"bg-green-100 text-green-800";case"delivered":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=(C,D)=>{h(E=>({...E,[C]:D}))},b=C=>{C.preventDefault();const D={id:Date.now(),...m,from:"Current User (CSM)",to:m.recipient==="admin"?"John Doe (Admin)":m.recipient==="it"?"Jane Smith (IT Manager)":"All Users",date:new Date().toLocaleString(),status:m.schedule?"scheduled":"sent",preview:m.message.substring(0,100)+"..."};m.schedule?f(E=>({...E,upcomingCommunications:[D,...E.upcomingCommunications]})):f(E=>({...E,recentCommunications:[D,...E.recentCommunications]})),v()},A=C=>{h(D=>({...D,type:C.type,message:C.content})),a(!0)},v=()=>{h({type:"",subject:"",recipient:"",message:"",priority:"",schedule:""}),a(!1)},j=(C,D)=>{f(D==="upcoming"?E=>({...E,upcomingCommunications:E.upcomingCommunications.filter(P=>P.id!==C)}):E=>({...E,recentCommunications:E.recentCommunications.filter(P=>P.id!==C)}))},N=x.recentCommunications.filter(C=>{const D=C.subject.toLowerCase().includes(i.toLowerCase())||C.from.toLowerCase().includes(i.toLowerCase())||C.to.toLowerCase().includes(i.toLowerCase()),E=c==="all"||C.status===c,P=d==="all"||C.type===d;return D&&E&&P}),O=x.upcomingCommunications.filter(C=>{const D=C.subject.toLowerCase().includes(i.toLowerCase()),E=d==="all"||C.type===d;return D&&E});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Communication Center"}),e.jsxs("p",{className:"text-gray-600",children:["All communication history with ",t.name]})]}),e.jsxs(At,{open:s,onOpenChange:a,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"New Communication"]})}),e.jsxs(Ct,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"New Communication"}),e.jsxs(Tt,{children:["Send a message or schedule a communication with ",t.name]})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"commType",className:"text-sm font-medium text-gray-700",children:"Communication Type *"}),e.jsxs(ie,{value:m.type,onValueChange:C=>S("type",C),children:[e.jsx(le,{className:"w-full",children:e.jsx(ce,{placeholder:"Select communication type"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"email",children:"📧 Email"}),e.jsx(T,{value:"call",children:"📞 Phone Call"}),e.jsx(T,{value:"meeting",children:"🤝 Meeting"}),e.jsx(T,{value:"message",children:"💬 Internal Message"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"subject",className:"text-sm font-medium text-gray-700",children:"Subject *"}),e.jsx(K,{id:"subject",placeholder:"Enter communication subject",value:m.subject,onChange:C=>S("subject",C.target.value),required:!0,className:"w-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"recipient",className:"text-sm font-medium text-gray-700",children:"Recipient *"}),e.jsxs(ie,{value:m.recipient,onValueChange:C=>S("recipient",C),children:[e.jsx(le,{className:"w-full",children:e.jsx(ce,{placeholder:"Select recipient"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"admin",children:"👤 John Doe (Admin)"}),e.jsx(T,{value:"it",children:"👨‍💻 Jane Smith (IT Manager)"}),e.jsx(T,{value:"team",children:"👥 All Users"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"message",className:"text-sm font-medium text-gray-700",children:"Message *"}),e.jsx(Re,{id:"message",placeholder:"Enter your detailed message here...",rows:6,value:m.message,onChange:C=>S("message",C.target.value),required:!0,className:"resize-none w-full"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"priority",className:"text-sm font-medium text-gray-700",children:"Priority"}),e.jsxs(ie,{value:m.priority,onValueChange:C=>S("priority",C),children:[e.jsx(le,{className:"w-full",children:e.jsx(ce,{placeholder:"Select priority"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"high",children:"🔴 High"}),e.jsx(T,{value:"medium",children:"🟡 Medium"}),e.jsx(T,{value:"low",children:"🟢 Low"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(_,{htmlFor:"schedule",className:"text-sm font-medium text-gray-700",children:"Schedule (Optional)"}),e.jsx(K,{id:"schedule",type:"datetime-local",value:m.schedule,onChange:C=>S("schedule",C.target.value),className:"w-full"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[e.jsxs(k,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[e.jsx(_i,{className:"w-4 h-4 mr-2"}),m.schedule?"Schedule Communication":"Send Now"]}),e.jsx(k,{type:"button",variant:"outline",onClick:v,className:"flex-1 border-gray-300 hover:bg-gray-50",children:"Cancel"})]})]})]})]})]}),e.jsxs(kt,{value:r,onValueChange:n,className:"w-full",children:[e.jsxs(wt,{className:"grid w-full grid-cols-3",children:[e.jsxs(pe,{value:"history",className:"flex items-center space-x-2",children:[e.jsx(Le,{className:"w-4 h-4"}),e.jsx("span",{children:"Communication History"}),e.jsx(W,{variant:"secondary",className:"ml-2",children:x.recentCommunications.length})]}),e.jsxs(pe,{value:"upcoming",className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"w-4 h-4"}),e.jsx("span",{children:"Upcoming"}),e.jsx(W,{variant:"secondary",className:"ml-2",children:x.upcomingCommunications.length})]}),e.jsxs(pe,{value:"templates",className:"flex items-center space-x-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),e.jsx("span",{children:"Templates"}),e.jsx(W,{variant:"secondary",className:"ml-2",children:x.templates.length})]})]}),e.jsxs(ge,{value:"history",className:"space-y-4 mt-6",children:[e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(K,{placeholder:"Search communications...",value:i,onChange:C=>l(C.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(ie,{value:c,onValueChange:o,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter by status"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Status"}),e.jsx(T,{value:"sent",children:"Sent"}),e.jsx(T,{value:"delivered",children:"Delivered"}),e.jsx(T,{value:"completed",children:"Completed"})]})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(ie,{value:d,onValueChange:u,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter by type"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Types"}),e.jsx(T,{value:"email",children:"Email"}),e.jsx(T,{value:"call",children:"Phone Call"}),e.jsx(T,{value:"meeting",children:"Meeting"})]})]})})]})})}),e.jsx("div",{className:"space-y-4",children:N.length===0?e.jsx(F,{children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(Le,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No communications found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i||c!=="all"||d!=="all"?"Try adjusting your search or filters":"Get started by sending your first communication"}),!i&&c==="all"&&d==="all"&&e.jsxs(k,{onClick:()=>a(!0),children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Send First Communication"]})]})}):N.map(C=>e.jsx(F,{className:"hover:shadow-md transition-shadow border-l-4 border-l-blue-500",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[e.jsx("div",{className:`p-2 rounded-full ${g(C.type)}`,children:p(C.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:C.subject}),e.jsx(W,{className:w(C.status),children:C.status})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("span",{className:"font-medium",children:"From:"})," ",C.from," →",e.jsx("span",{className:"font-medium",children:" To:"})," ",C.to]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(et,{className:"w-4 h-4 mr-1"}),C.date]}),C.duration&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mt,{className:"w-4 h-4 mr-1"}),C.duration]})]}),C.preview&&e.jsxs("p",{className:"text-sm text-gray-700 mb-3 italic bg-gray-50 p-3 rounded-lg",children:['"',C.preview,'"']}),C.notes&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:"Notes:"}),e.jsx("div",{className:"text-sm text-blue-600",children:C.notes})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(k,{size:"sm",variant:"outline",title:"View Details",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",title:"Reply",children:e.jsx(_w,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",title:"Edit",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",title:"Delete",onClick:()=>j(C.id,"history"),className:"text-red-600 hover:text-red-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]})})},C.id))})]}),e.jsxs(ge,{value:"upcoming",className:"space-y-4 mt-6",children:[e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(K,{placeholder:"Search upcoming communications...",value:i,onChange:C=>l(C.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(ie,{value:d,onValueChange:u,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter by type"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Types"}),e.jsx(T,{value:"email",children:"Email"}),e.jsx(T,{value:"call",children:"Phone Call"}),e.jsx(T,{value:"meeting",children:"Meeting"})]})]})})]})})}),e.jsx("div",{className:"space-y-4",children:O.length===0?e.jsx(F,{children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(Mt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No upcoming communications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i||d!=="all"?"Try adjusting your search or filters":"Schedule your first communication"}),!i&&d==="all"&&e.jsxs(k,{onClick:()=>a(!0),children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Schedule Communication"]})]})}):O.map(C=>e.jsx(F,{className:"hover:shadow-md transition-shadow border-l-4 border-l-yellow-500",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${g(C.type)}`,children:p(C.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:C.subject}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mt,{className:"w-4 h-4 mr-1"}),C.scheduled]}),C.attendees&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vt,{className:"w-4 h-4 mr-1"}),C.attendees.join(", ")]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(k,{size:"sm",variant:"outline",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(k,{size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",onClick:()=>j(C.id,"upcoming"),children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})]})})},C.id))})]}),e.jsxs(ge,{value:"templates",className:"space-y-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Templates"}),e.jsxs(W,{variant:"secondary",children:[x.templates.length," templates"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.templates.map(C=>e.jsx(F,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-full ${g(C.type)}`,children:p(C.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:C.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:C.description}),e.jsxs("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg mb-4",children:[C.content.substring(0,100),"..."]}),e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>A(C),className:"w-full",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Use Template"]})]})]})})},C.id))})]})]})]})},qV=({clientData:t})=>{const[s,a]=y.useState(!1),[r,n]=y.useState(""),[i,l]=y.useState("all"),[c,o]=y.useState("all"),[d,u]=y.useState("date"),[m,h]=y.useState("desc"),[x,f]=y.useState({title:"",type:"",content:"",tags:"",followUp:""}),[p,g]=y.useState([{id:1,type:"call",title:"Weekly Check-in Call",content:"Discussed platform usage and upcoming feature requests. Client is very satisfied with current performance and looking forward to new AI chatbot features.",author:"Sarah Johnson",date:"2024-03-20 14:30",tags:["check-in","satisfaction","feature-request"],followUp:"Schedule demo for AI chatbot v2.0"},{id:2,type:"email",title:"Support Ticket Resolution",content:"Resolved SSO integration issue. Client was experiencing login problems with their Azure AD. Provided step-by-step configuration guide.",author:"Mike Chen",date:"2024-03-19 16:45",tags:["support","sso","resolved"],followUp:"Follow up in 1 week to ensure no further issues"},{id:3,type:"meeting",title:"Quarterly Business Review",content:"Q1 performance review meeting. Client achieved 95% of their usage goals. Discussed expansion opportunities and potential upsell.",author:"Sarah Johnson",date:"2024-03-18 10:00",tags:["qbr","performance","upsell"],followUp:"Prepare proposal for additional user licenses"},{id:4,type:"call",title:"Technical Implementation Support",content:"Helped client set up webhook integrations for their CRM system. Provided API documentation and sample code.",author:"David Kim",date:"2024-03-17 11:20",tags:["technical","integration","api"],followUp:"Send follow-up email with additional resources"}]),w=U=>{switch(U){case"call":return e.jsx(Pa,{className:"w-4 h-4"});case"email":return e.jsx(fs,{className:"w-4 h-4"});case"meeting":return e.jsx(cj,{className:"w-4 h-4"});case"note":return e.jsx(Gt,{className:"w-4 h-4"});default:return e.jsx(Le,{className:"w-4 h-4"})}},S=U=>{switch(U){case"call":return"bg-green-100 text-green-600";case"email":return"bg-blue-100 text-blue-600";case"meeting":return"bg-purple-100 text-purple-600";case"note":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},b=(U,I)=>{f(L=>({...L,[U]:I}))},A=U=>{U.preventDefault();const I={id:Date.now(),...x,author:"Current User",date:new Date().toLocaleString(),tags:x.tags?x.tags.split(",").map(L=>L.trim()):[]};g(L=>[I,...L]),v()},v=()=>{f({title:"",type:"",content:"",tags:"",followUp:""}),a(!1)},j=U=>{g(I=>I.filter(L=>L.id!==U))},N=()=>{h(U=>U==="asc"?"desc":"asc")},O=U=>[...U].sort((I,L)=>{let Z,q;switch(d){case"date":Z=new Date(I.date),q=new Date(L.date);break;case"title":Z=I.title.toLowerCase(),q=L.title.toLowerCase();break;case"author":Z=I.author.toLowerCase(),q=L.author.toLowerCase();break;case"type":Z=I.type.toLowerCase(),q=L.type.toLowerCase();break;default:Z=new Date(I.date),q=new Date(L.date)}return m==="asc"?Z>q?1:-1:Z<q?1:-1}),C=p.filter(U=>{const I=U.title.toLowerCase().includes(r.toLowerCase())||U.content.toLowerCase().includes(r.toLowerCase())||U.author.toLowerCase().includes(r.toLowerCase())||U.tags.some(q=>q.toLowerCase().includes(r.toLowerCase())),L=i==="all"||U.type===i,Z=c==="all"||U.type===c;return I&&L&&Z}),D=O(C),E=U=>p.filter(I=>U==="all"||I.type===U),P=()=>{const U=p.flatMap(I=>I.tags);return[...new Set(U)]},R=U=>p.filter(I=>I.tags.includes(U));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Notes & Communication Log"}),e.jsxs("p",{className:"text-gray-600",children:["Track all interactions and notes for ",t.name]})]}),e.jsxs(At,{open:s,onOpenChange:a,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Note"]})}),e.jsxs(Ct,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Add New Note"}),e.jsxs(Tt,{children:["Record a new interaction or note for ",t.name]})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"noteTitle",children:"Title"}),e.jsx(K,{id:"noteTitle",placeholder:"Enter note title",value:x.title,onChange:U=>b("title",U.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"noteType",children:"Type"}),e.jsxs(ie,{value:x.type,onValueChange:U=>b("type",U),children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select option"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"call",children:"Phone Call"}),e.jsx(T,{value:"email",children:"Email"}),e.jsx(T,{value:"meeting",children:"Meeting"}),e.jsx(T,{value:"note",children:"General Note"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"noteContent",children:"Content"}),e.jsx(Re,{id:"noteContent",placeholder:"Enter note content",rows:4,value:x.content,onChange:U=>b("content",U.target.value),required:!0,className:"resize-none"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"noteTags",children:"Tags (comma separated)"}),e.jsx(K,{id:"noteTags",placeholder:"e.g., support, follow-up, important",value:x.tags,onChange:U=>b("tags",U.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"noteFollowUp",children:"Follow-up Action"}),e.jsx(K,{id:"noteFollowUp",placeholder:"What needs to be done next?",value:x.followUp,onChange:U=>b("followUp",U.target.value)})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(k,{type:"submit",className:"flex-1",children:"Save Note"}),e.jsx(k,{type:"button",variant:"outline",onClick:v,className:"flex-1",children:"Cancel"})]})]})})]})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{key:"all",label:"All Notes",count:p.length},{key:"call",label:"Phone Calls",count:E("call").length},{key:"email",label:"Emails",count:E("email").length},{key:"meeting",label:"Meetings",count:E("meeting").length},{key:"note",label:"General Notes",count:E("note").length}].map(U=>e.jsxs("button",{onClick:()=>o(U.key),className:`py-2 px-1 border-b-2 font-medium text-sm ${c===U.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[U.label,e.jsx("span",{className:"ml-2 bg-gray-100 text-gray-900 py-0.5 px-2.5 rounded-full text-xs",children:U.count})]},U.key))})}),e.jsx(F,{children:e.jsx(B,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(K,{placeholder:"Search notes by title, content, author, or tags...",value:r,onChange:U=>n(U.target.value),className:"pl-10"})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(ie,{value:i,onValueChange:l,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Filter by type"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"all",children:"All Types"}),e.jsx(T,{value:"call",children:"Phone Calls"}),e.jsx(T,{value:"email",children:"Emails"}),e.jsx(T,{value:"meeting",children:"Meetings"}),e.jsx(T,{value:"note",children:"General Notes"})]})]})}),e.jsx("div",{className:"w-full md:w-48",children:e.jsxs(ie,{value:d,onValueChange:u,children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Sort by"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"date",children:"Date"}),e.jsx(T,{value:"title",children:"Title"}),e.jsx(T,{value:"author",children:"Author"}),e.jsx(T,{value:"type",children:"Type"})]})]})}),e.jsx(k,{variant:"outline",size:"sm",onClick:N,className:"w-full md:w-auto",children:m==="asc"?e.jsx(Pw,{className:"w-4 h-4"}):e.jsx(Tw,{className:"w-4 h-4"})})]})})}),P().length>0&&e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsxs(V,{className:"flex items-center",children:[e.jsx(nj,{className:"w-4 h-4 mr-2"}),"Popular Tags"]}),e.jsx(Q,{children:"Quick filter by common tags"})]}),e.jsx(B,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:P().slice(0,10).map(U=>e.jsxs(k,{variant:"outline",size:"sm",onClick:()=>n(U),className:"text-xs",children:[U," (",R(U).length,")"]},U))})})]}),e.jsx("div",{className:"space-y-4",children:D.length===0?e.jsx(F,{children:e.jsxs(B,{className:"p-8 text-center",children:[e.jsx(Gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No notes found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:r||i!=="all"||c!=="all"?"Try adjusting your search, filters, or tabs":"Get started by adding your first note"}),!r&&i==="all"&&c==="all"&&e.jsxs(k,{onClick:()=>a(!0),children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add First Note"]})]})}):D.map(U=>e.jsx(F,{className:"hover:shadow-md transition-shadow border-l-4 border-l-blue-500",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-2 rounded-full ${S(U.type)}`,children:w(U.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:U.title}),e.jsx(W,{variant:"outline",className:"capitalize",children:U.type})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vt,{className:"w-4 h-4 mr-1"}),U.author]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(et,{className:"w-4 h-4 mr-1"}),U.date]})]}),e.jsx("div",{className:"text-gray-700 mb-4 leading-relaxed",children:U.content}),U.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:U.tags.map((I,L)=>e.jsx(W,{variant:"outline",className:"text-xs cursor-pointer hover:bg-blue-50",onClick:()=>n(I),children:I},L))}),U.followUp&&e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 mb-1",children:"Follow-up Required:"}),e.jsx("div",{className:"text-sm text-blue-700",children:U.followUp})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(k,{size:"sm",variant:"outline",title:"View Details",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",title:"Edit",children:e.jsx(Ye,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",title:"Delete",onClick:()=>j(U.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Ve,{className:"w-4 h-4"})})]})]})})},U.id))}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Communication Summary"}),e.jsx(Q,{children:"Overview of recent interactions"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:p.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Notes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:p.filter(U=>U.type==="call").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone Calls"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:p.filter(U=>U.type==="meeting").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Meetings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p.filter(U=>U.type==="email").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Emails"})]})]})})]})]})},KV=({clientData:t})=>{const[s,a]=y.useState(!1),[r,n]=y.useState(null);if(y.useEffect(()=>{console.log("ClientSuccessPlays component mounted with clientData:",t)},[t]),r)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Qe,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Success Plays"}),e.jsx("p",{className:"text-gray-500 mb-4",children:r.message}),e.jsx(k,{onClick:()=>n(null),children:"Try Again"})]});try{const[i]=y.useState([{id:1,name:"Onboarding Excellence Play",description:"Comprehensive onboarding process for new Enterprise clients",category:"onboarding",status:"in-progress",progress:75,steps:[{id:1,title:"Kickoff Meeting",completed:!0,dueDate:"2024-03-15"},{id:2,title:"Technical Setup",completed:!0,dueDate:"2024-03-18"},{id:3,title:"User Training",completed:!0,dueDate:"2024-03-20"},{id:4,title:"Go-Live Support",completed:!1,dueDate:"2024-03-25"},{id:5,title:"30-Day Review",completed:!1,dueDate:"2024-04-15"}],assignedTo:"Sarah Johnson",startDate:"2024-03-15",estimatedDuration:"4 weeks",successMetrics:["User Adoption > 80%","Support Tickets < 5","Health Score > 85"]},{id:2,name:"At-Risk Client Rescue",description:"Strategic intervention for clients showing signs of churn",category:"retention",status:"completed",progress:100,steps:[{id:1,title:"Health Score Assessment",completed:!0,dueDate:"2024-03-01"},{id:2,title:"Root Cause Analysis",completed:!0,dueDate:"2024-03-05"},{id:3,title:"Solution Implementation",completed:!0,dueDate:"2024-03-10"},{id:4,title:"Follow-up Monitoring",completed:!0,dueDate:"2024-03-15"}],assignedTo:"Mike Chen",startDate:"2024-03-01",estimatedDuration:"2 weeks",successMetrics:["Health Score Improved","No Churn","Client Satisfaction > 4.0"]},{id:3,name:"Feature Adoption Accelerator",description:"Increase usage of advanced platform features",category:"adoption",status:"not-started",progress:0,steps:[{id:1,title:"Usage Analysis",completed:!1,dueDate:"2024-04-01"},{id:2,title:"Feature Training",completed:!1,dueDate:"2024-04-05"},{id:3,title:"Implementation Support",completed:!1,dueDate:"2024-04-10"},{id:4,title:"Success Measurement",completed:!1,dueDate:"2024-04-15"}],assignedTo:"Lisa Wang",startDate:"2024-04-01",estimatedDuration:"2 weeks",successMetrics:["Feature Usage > 60%","User Engagement +25%","Support Tickets -15%"]}]),l=d=>{switch(d){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"not-started":return"bg-gray-100 text-gray-800";case"paused":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},c=d=>{switch(d){case"onboarding":return"bg-blue-100 text-blue-800";case"retention":return"bg-red-100 text-red-800";case"adoption":return"bg-green-100 text-green-800";case"upsell":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=d=>d>=80?"bg-green-500":d>=50?"bg-blue-500":d>=25?"bg-yellow-500":"bg-gray-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Success Plays"}),e.jsxs("p",{className:"text-gray-600",children:["Strategic playbooks and success initiatives for ",(t==null?void 0:t.name)||"Client"]})]}),e.jsxs(At,{open:s,onOpenChange:a,children:[e.jsx(Qt,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Add Success Play"]})}),e.jsxs(Ct,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_t,{children:[e.jsx(Pt,{children:"Create New Success Play"}),e.jsxs(Tt,{children:["Define a new strategic initiative for ",(t==null?void 0:t.name)||"Client"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"playName",children:"Play Name"}),e.jsx(K,{id:"playName",placeholder:"Enter play name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"playDescription",children:"Description"}),e.jsx(K,{id:"playDescription",placeholder:"Describe the success play"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"playCategory",children:"Category"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select category"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"onboarding",children:"Onboarding"}),e.jsx(T,{value:"retention",children:"Retention"}),e.jsx(T,{value:"adoption",children:"Adoption"}),e.jsx(T,{value:"upsell",children:"Upsell"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(_,{htmlFor:"playAssignee",children:"Assign To"}),e.jsxs(ie,{children:[e.jsx(le,{children:e.jsx(ce,{placeholder:"Select assignee"})}),e.jsxs(oe,{children:[e.jsx(T,{value:"sarah",children:"Sarah Johnson"}),e.jsx(T,{value:"mike",children:"Mike Chen"}),e.jsx(T,{value:"lisa",children:"Lisa Wang"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(k,{className:"flex-1",children:"Create Play"}),e.jsx(k,{variant:"outline",onClick:()=>a(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Plays"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.filter(d=>d.status==="completed").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.filter(d=>d.status==="in-progress").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"In Progress"})]})}),e.jsx(F,{children:e.jsxs(B,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:i.filter(d=>d.status==="not-started").length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Not Started"})]})})]}),e.jsx("div",{className:"space-y-4",children:i.map(d=>e.jsx(F,{className:"hover:shadow-md transition-shadow",children:e.jsx(B,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:d.name}),e.jsx(W,{className:l(d.status),children:d.status}),e.jsx(W,{className:c(d.category),children:d.category})]}),e.jsx("p",{className:"text-gray-600 mb-3",children:d.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pe,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:d.assignedTo})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:d.startDate})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(et,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:d.estimatedDuration})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[d.progress,"%"]})]}),e.jsx(us,{value:d.progress,className:"h-2"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Steps"}),e.jsx("div",{className:"space-y-2",children:d.steps.map(u=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hn,{checked:u.completed,onChange:()=>{},className:"w-4 h-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:`text-sm ${u.completed?"line-through text-gray-500":"text-gray-700"}`,children:u.title}),!u.completed&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Due: ",u.dueDate]})]})]},u.id))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Success Metrics"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.successMetrics.map((u,m)=>e.jsx(W,{variant:"outline",className:"text-xs",children:u},m))})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(ca,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(vt,{className:"w-4 h-4"})}),e.jsx(k,{size:"sm",variant:"outline",children:e.jsx(Ye,{className:"w-4 h-4"})})]})]})})},d.id))}),e.jsxs(F,{children:[e.jsxs(H,{children:[e.jsx(V,{children:"Quick Actions"}),e.jsx(Q,{children:"Common success play tasks"})]}),e.jsx(B,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(ca,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Playbook Library"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Browse templates"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(rs,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Success Metrics"}),e.jsx("span",{className:"text-xs text-gray-500",children:"View KPIs"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Pe,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Team Assignment"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Manage CSM"})]}),e.jsxs(k,{variant:"outline",className:"h-auto p-4 flex-col",children:[e.jsx(Et,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-medium",children:"Automation"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Set triggers"})]})]})})]})]})}catch(i){return console.error("Error in ClientSuccessPlays:",i),n(i),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(Qe,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Success Plays"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i.message}),e.jsx(k,{onClick:()=>n(null),children:"Try Again"})]})}},dr=()=>{const{clientId:t}=ZN(),s=lo(),[a]=y.useState({id:t,name:"ABC Corporation",plan:"Enterprise",status:"active",healthScore:92,mrr:25e5,renewalDate:"2024-12-15",csm:"Sarah Johnson"}),r=()=>{const c=s.pathname;return c.endsWith("/users")?e.jsx(BV,{clientData:a}):c.endsWith("/billing")?e.jsx(UV,{clientData:a}):c.endsWith("/workflows")?e.jsx(zV,{clientData:a}):c.endsWith("/communication")?e.jsx(WV,{clientData:a}):c.endsWith("/notes")?e.jsx(qV,{clientData:a}):c.endsWith("/success-plays")?e.jsx(KV,{clientData:a}):e.jsx(FV,{clientData:a})},n=[{name:"Overview",href:`/superadmin/clients/${t}`,icon:Zs,end:!0},{name:"Users & Agents",href:`/superadmin/clients/${t}/users`,icon:Pe},{name:"Billing",href:`/superadmin/clients/${t}/billing`,icon:un},{name:"Workflows",href:`/superadmin/clients/${t}/workflows`,icon:Te},{name:"Communication",href:`/superadmin/clients/${t}/communication`,icon:Le},{name:"Notes",href:`/superadmin/clients/${t}/notes`,icon:ca},{name:"Success Plays",href:`/superadmin/clients/${t}/success-plays`,icon:vt}],i=c=>{switch(c){case"active":return"bg-green-100 text-green-800";case"trial":return"bg-blue-100 text-blue-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=c=>c>=90?"text-green-600":c>=70?"text-blue-600":c>=50?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(Ql,{to:"/superadmin/clients",className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Back to Organizations"]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.name}),e.jsx(W,{className:i(a.status),children:a.status}),e.jsx(W,{variant:"outline",children:a.plan})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Health Score"}),e.jsx("div",{className:`text-2xl font-bold ${l(a.healthScore)}`,children:a.healthScore})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"MRR"}),e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",a.mrr.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"Renewal Date"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.renewalDate})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500",children:"CSM"}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.csm})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(k,{variant:"outline",children:[e.jsx(fs,{className:"w-4 h-4 mr-2"}),"Contact"]}),e.jsxs(k,{variant:"outline",children:[e.jsx(Mt,{className:"w-4 h-4 mr-2"}),"Schedule"]}),e.jsxs(k,{children:[e.jsx(vt,{className:"w-4 h-4 mr-2"}),"Run Playbook"]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("div",{className:"border-b border-gray-200 px-6",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:n.map(c=>e.jsxs(Ql,{to:c.href,end:c.end,className:({isActive:o})=>`${o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`,children:[e.jsx(c.icon,{className:"w-4 h-4 mr-2"}),c.name]},c.name))})}),e.jsx("div",{className:"p-6",children:r()})]})]})},HV=()=>{const t=YN();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-9xl font-bold text-gray-300",children:"404"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md",children:(t==null?void 0:t.statusText)||(t==null?void 0:t.message)||"The page you're looking for doesn't exist or has been moved."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{asChild:!0,children:e.jsxs(Ms,{to:"/dashboard",children:[e.jsx(ln,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})}),e.jsx("div",{children:e.jsxs(k,{variant:"outline",onClick:()=>window.history.back(),children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Go Back"]})})]})]})})},VV=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(Ae,{className:"w-12 h-12 text-red-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(k,{asChild:!0,children:e.jsxs(Ms,{to:"/dashboard",children:[e.jsx(ln,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})}),e.jsx("div",{children:e.jsxs(k,{variant:"outline",onClick:()=>window.history.back(),children:[e.jsx(_a,{className:"w-4 h-4 mr-2"}),"Go Back"]})})]})]})}),GV=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mb-6",children:e.jsx(Qe,{className:"w-12 h-12 text-red-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Server Error"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md",children:"Something went wrong on our end. We're working to fix the issue. Please try again later."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(k,{onClick:()=>window.location.reload(),children:[e.jsx(ws,{className:"w-4 h-4 mr-2"}),"Try Again"]}),e.jsx("div",{children:e.jsx(k,{variant:"outline",asChild:!0,children:e.jsxs(Ms,{to:"/dashboard",children:[e.jsx(ln,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]})})})]})]})}),ur=({children:t,requiredRole:s,requiredPermission:a,fallbackPath:r="/unauthorized"})=>{const{isAuthenticated:n,isLoading:i,user:l,hasPermission:c,isRole:o}=Xs(),d=lo();return i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):n?s&&!o(s)?(console.log("🚫 Role access denied:",{requiredRole:s,userRole:l==null?void 0:l.role,userRoles:l==null?void 0:l.roles,isAuthenticated:n,user:l}),s==="org_admin"&&(l==null?void 0:l.role)==="super_admin"?(console.log("✅ Super admin access granted to org_admin routes"),t):e.jsx(ya,{to:r,replace:!0})):a&&!c(a)?(console.log("🚫 Permission access denied:",{requiredPermission:a,userRole:l==null?void 0:l.role,userPermissions:l==null?void 0:l.permissions,isAuthenticated:n,user:l}),(l==null?void 0:l.role)==="super_admin"?(console.log("✅ Super admin access granted to all routes"),t):(l==null?void 0:l.role)==="org_admin"&&a==="manage_settings"?(console.log("✅ Org admin access granted to settings route"),t):a==="manage_settings"&&iS(l)?(console.log("✅ User has settings access via utility function"),t):e.jsx(ya,{to:r,replace:!0})):t:e.jsx(ya,{to:"/auth/login",state:{from:d},replace:!0})},ZV=()=>{const{isAuthenticated:t,isLoading:s,user:a}=Xs();if(s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})});if(!t)return e.jsx(ya,{to:"/auth/login",replace:!0});switch(a==null?void 0:a.role){case"super_admin":return e.jsx(ya,{to:"/superadmin",replace:!0});case"org_admin":return e.jsx(ya,{to:"/dashboard",replace:!0});case"agent":return e.jsx(ya,{to:"/agent",replace:!0});default:return e.jsx(ya,{to:"/auth/login",replace:!0})}},YV=XN([{path:"/",element:e.jsx(fS,{}),errorElement:e.jsx(HV,{}),children:[{path:"/auth",element:e.jsx(pS,{}),children:[{index:!0,element:e.jsx(ya,{to:"/auth/login",replace:!0})},{path:"login",element:e.jsx(US,{})},{path:"register",element:e.jsx(zS,{})},{path:"forgot-password",element:e.jsx(WS,{})},{path:"reset-password",element:e.jsx(qS,{})}]},{path:"/dashboard",element:e.jsx(ur,{requiredRole:"org_admin",children:e.jsx($S,{})}),children:[{index:!0,element:e.jsx(NH,{})},{path:"inbox",element:e.jsx(ur,{requiredPermission:"handle_chats",children:e.jsx(RH,{})})},{path:"analytics",element:e.jsx(ur,{requiredPermission:"view_analytics",children:e.jsx(FH,{})})},{path:"knowledge",element:e.jsx(zH,{})},{path:"automations",element:e.jsx(ur,{requiredPermission:"manage_settings",children:e.jsx(qH,{})})},{path:"settings",element:e.jsx(ur,{requiredPermission:"manage_settings",children:e.jsx(eV,{})})},{path:"profile",element:e.jsx(tV,{})}]},{path:"/superadmin",element:e.jsx(ur,{requiredRole:"super_admin",children:e.jsx(LS,{})}),children:[{index:!0,element:e.jsx(xV,{})},{path:"financials",element:e.jsx(vV,{})},{path:"clients",element:e.jsx(NV,{})},{path:"users",element:e.jsx(CV,{})},{path:"system",element:e.jsx(wV,{})},{path:"system/roles",element:e.jsx(iV,{})},{path:"system/permissions",element:e.jsx(hV,{})},{path:"client-health",element:e.jsx(EV,{})},{path:"onboarding",element:e.jsx(IV,{})},{path:"automation",element:e.jsx(DV,{})},{path:"communication",element:e.jsx(MV,{})},{path:"platform/configuration",element:e.jsx($V,{})},{path:"platform/health",element:e.jsx(RV,{})},{path:"platform/security",element:e.jsx(LV,{})},{path:"clients/:clientId",element:e.jsx(dr,{})},{path:"clients/:clientId/users",element:e.jsx(dr,{})},{path:"clients/:clientId/billing",element:e.jsx(dr,{})},{path:"clients/:clientId/workflows",element:e.jsx(dr,{})},{path:"clients/:clientId/communication",element:e.jsx(dr,{})},{path:"clients/:clientId/notes",element:e.jsx(dr,{})},{path:"clients/:clientId/success-plays",element:e.jsx(dr,{})}]},{path:"/agent",element:e.jsx(ur,{requiredRole:"agent",children:e.jsx(BS,{})}),children:[{index:!0,element:e.jsx(_V,{})},{path:"inbox",element:e.jsx(PV,{})},{path:"profile",element:e.jsx(TV,{})}]},{path:"/demo/badge",element:e.jsx(OV,{})},{path:"/unauthorized",element:e.jsx(VV,{})},{path:"/server-error",element:e.jsx(GV,{})},{index:!0,element:e.jsx(ZV,{})}]}]);const XV=()=>e.jsx(JN,{router:YV});class JV extends $.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null,errorId:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,a){const r=`error-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.group(`🚨 Frontend Error [${r}]`),console.error("Error:",s),console.error("Error Info:",a),console.error("Component Stack:",a.componentStack),console.groupEnd(),console.log(`Error ${r} logged for tracking`),this.setState({error:s,errorInfo:a,errorId:r})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),this.state.errorId&&e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["Error ID: ",this.state.errorId]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Refresh Page"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null,errorInfo:null}),className:"w-full bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors",children:"Try Again"})]}),!1]})})}):this.props.children}}try{const t=document.getElementById("root");if(!t)throw new Error("Root element #root not found in DOM");console.log("✅ Root element found:",t),su.createRoot(t).render(e.jsx($.StrictMode,{children:e.jsxs(JV,{children:[e.jsx(XV,{}),e.jsx(S1,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})),console.log("✅ App rendered successfully")}catch(t){console.error("❌ Critical error during app initialization:",t),document.body.innerHTML=`
    <div style="
      padding: 40px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      text-align: center;
      background: #f9fafb;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    ">
      <div style="max-width: 500px;">
        <h1 style="color: #dc2626; font-size: 24px; margin-bottom: 16px;">
          🚨 Application Failed to Load
        </h1>
        <p style="color: #6b7280; margin-bottom: 24px;">
          We encountered a critical error while starting the application.
          Please check the browser console for more details.
        </p>
        <div style="
          background: #f3f4f6;
          padding: 16px;
          border-radius: 8px;
          text-align: left;
          font-family: monospace;
          font-size: 14px;
          color: #374151;
          margin-bottom: 24px;
        ">
          <strong>Error:</strong> ${t.message}
        </div>
        <button
          onclick="window.location.reload()"
          style="
            background: #3b82f6;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
          "
        >
          Reload Page
        </button>
      </div>
    </div>
  `}
